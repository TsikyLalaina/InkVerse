"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/project/[id]/chat/page",{

/***/ "(app-pages-browser)/./src/components/chat/Chat.tsx":
/*!**************************************!*\
  !*** ./src/components/chat/Chat.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Chat: function() { return /* binding */ Chat; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-dnd */ \"(app-pages-browser)/./node_modules/react-dnd/dist/core/DndProvider.js\");\n/* harmony import */ var react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dnd-html5-backend */ \"(app-pages-browser)/./node_modules/react-dnd-html5-backend/dist/index.js\");\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(app-pages-browser)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _ChatBubble__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ChatBubble */ \"(app-pages-browser)/./src/components/chat/ChatBubble.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/api */ \"(app-pages-browser)/./src/lib/api.ts\");\n/* harmony import */ var _barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUpRight,ChevronDown!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/chevron-down.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUpRight,ChevronDown!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-up-right.js\");\n/* __next_internal_client_entry_do_not_use__ Chat auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\nfunction Chat(param) {\n    let { chatId, projectId, chatType = \"plot\", initialMessages = [] } = param;\n    _s();\n    const supabase = (0,_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase)();\n    const api = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>(0,_lib_api__WEBPACK_IMPORTED_MODULE_4__.createApi)(supabase), [\n        supabase\n    ]);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialMessages);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [streaming, setStreaming] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [inputError, setInputError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const listRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modeMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modeMenuListRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [saveError, setSaveError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [pendingMode, setPendingMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [pendingSettings, setPendingSettings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [toastMsg, setToastMsg] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const toastTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const apiBase = \"http://localhost:3000\" || 0;\n    const [loadingHistory, setLoadingHistory] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [clientMode, setClientMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"chat\");\n    const [modeMenuOpen, setModeMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [modeMenuIndex, setModeMenuIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const cacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>\"inkverse_chat_\".concat(chatId, \"_messages\"), [\n        chatId\n    ]);\n    const [hasCache, setHasCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const messagesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(messages);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        var _listRef_current;\n        (_listRef_current = listRef.current) === null || _listRef_current === void 0 ? void 0 : _listRef_current.scrollTo({\n            top: listRef.current.scrollHeight,\n            behavior: \"smooth\"\n        });\n    }, [\n        messages.length\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const s =  true ? window.localStorage.getItem(cacheKey) : 0;\n            if (s) {\n                const arr = JSON.parse(s);\n                if (Array.isArray(arr)) {\n                    setMessages(arr);\n                    setHasCache(arr.length > 0);\n                }\n            }\n        } catch (e) {}\n    }, [\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // If parent provides messages later, set them only if list is empty\n        if (initialMessages.length && messages.length === 0) {\n            setMessages(initialMessages);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        initialMessages\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasCache) {\n                return;\n            }\n            try {\n                if (!hasCache) setLoadingHistory(true);\n                const history = await api.getChatMessagesByChatId(chatId);\n                if (!mounted) return;\n                const next = Array.isArray(history) ? history : [];\n                // Skip update if no change to avoid flicker\n                try {\n                    if (hasCache && JSON.stringify(next) === JSON.stringify(messagesRef.current)) {\n                        return;\n                    }\n                } catch (e) {}\n                setMessages(next);\n            } catch (e) {\n            // swallow network errors during initial hydration/revalidation\n            } finally{\n                if (mounted) setLoadingHistory(false);\n            }\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        chatId,\n        hasCache\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (true) window.localStorage.setItem(cacheKey, JSON.stringify(messages));\n        } catch (e) {}\n    }, [\n        messages,\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        messagesRef.current = messages;\n    }, [\n        messages\n    ]);\n    // Auto-resize textarea height with content, up to a max then scroll\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const el = inputRef.current;\n        if (!el) return;\n        el.style.height = \"auto\";\n        const max = 256; // px max height before scroll\n        const next = Math.min(el.scrollHeight, max);\n        el.style.height = \"\".concat(next, \"px\");\n    }, [\n        input\n    ]);\n    // Close mode menu on outside click\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onDocClick(e) {\n            if (!modeMenuOpen) return;\n            const t = e.target;\n            if (modeMenuRef.current && t && !modeMenuRef.current.contains(t)) {\n                setModeMenuOpen(false);\n            }\n        }\n        document.addEventListener(\"mousedown\", onDocClick);\n        return ()=>document.removeEventListener(\"mousedown\", onDocClick);\n    }, [\n        modeMenuOpen\n    ]);\n    // Keyboard: open/close menu and navigate options\n    const onModeButtonKeyDown = (e)=>{\n        if (e.key === \"ArrowDown\" || e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            setModeMenuIndex(clientMode === \"chat\" ? 0 : 1);\n            setModeMenuOpen(true);\n        } else if (e.key === \"Escape\") {\n            setModeMenuOpen(false);\n        }\n    };\n    const onMenuKeyDown = (e)=>{\n        if (e.key === \"ArrowDown\") {\n            e.preventDefault();\n            setModeMenuIndex((i)=>(i + 1) % 2);\n        } else if (e.key === \"ArrowUp\") {\n            e.preventDefault();\n            setModeMenuIndex((i)=>(i + 1 + 2) % 2);\n        } else if (e.key === \"Enter\") {\n            e.preventDefault();\n            if (modeMenuIndex === 0) setClientMode(\"chat\");\n            else setClientMode(\"action\");\n            setModeMenuOpen(false);\n        } else if (e.key === \"Escape\") {\n            setModeMenuOpen(false);\n        }\n    };\n    // Shortcut: Ctrl+L focuses input\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onKey(e) {\n            if ((e.ctrlKey || e.metaKey) && (e.key === \"l\" || e.key === \"L\")) {\n                var _inputRef_current;\n                e.preventDefault();\n                (_inputRef_current = inputRef.current) === null || _inputRef_current === void 0 ? void 0 : _inputRef_current.focus();\n            }\n        }\n        window.addEventListener(\"keydown\", onKey);\n        return ()=>window.removeEventListener(\"keydown\", onKey);\n    }, []);\n    // Focus menu container when opened for keyboard nav\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (modeMenuOpen) {\n            setTimeout(()=>{\n                var _modeMenuListRef_current;\n                return (_modeMenuListRef_current = modeMenuListRef.current) === null || _modeMenuListRef_current === void 0 ? void 0 : _modeMenuListRef_current.focus();\n            }, 0);\n        }\n    }, [\n        modeMenuOpen\n    ]);\n    const send = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (opts)=>{\n        var _opts_messageOverride;\n        const text = ((_opts_messageOverride = opts === null || opts === void 0 ? void 0 : opts.messageOverride) !== null && _opts_messageOverride !== void 0 ? _opts_messageOverride : input).trim();\n        if (!text && !(opts === null || opts === void 0 ? void 0 : opts.regeneratePanelId)) {\n            setInputError('Prompt is empty. Try something like: \"Write the opening scene of a dark fantasy.\"');\n            return;\n        }\n        setInputError(null);\n        const { data: { session } } = await supabase.auth.getSession();\n        const token = session === null || session === void 0 ? void 0 : session.access_token;\n        if (!token) return;\n        const userMessage = {\n            role: \"user\",\n            content: text,\n            panelId: (opts === null || opts === void 0 ? void 0 : opts.regeneratePanelId) || null\n        };\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInput(\"\");\n        setStreaming(true);\n        // Mentions parsing: @chapter<number> or @\"exact title\"\n        const mNum = /@chapter\\s*([0-9]+)/i.exec(text) || /@chapter_?([0-9]+)/i.exec(text);\n        const mTitle = /@\"([^\"]+)\"/.exec(text);\n        const mentions = {};\n        if (mNum === null || mNum === void 0 ? void 0 : mNum[1]) mentions.chapter_number = parseInt(mNum[1], 10);\n        if (mTitle === null || mTitle === void 0 ? void 0 : mTitle[1]) mentions.title = mTitle[1];\n        const res = await fetch(\"\".concat(apiBase, \"/api/chat/\").concat(chatId), {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": \"Bearer \".concat(token),\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                message: userMessage.content,\n                regeneratePanelId: (opts === null || opts === void 0 ? void 0 : opts.regeneratePanelId) || undefined,\n                clientMode,\n                mentions\n            })\n        });\n        if (!res.body) {\n            setStreaming(false);\n            return;\n        }\n        // Push empty assistant message to stream into\n        let assistantIndex = -1;\n        setMessages((prev)=>{\n            assistantIndex = prev.length;\n            return [\n                ...prev,\n                {\n                    role: \"assistant\",\n                    content: \"\"\n                }\n            ];\n        });\n        const reader = res.body.getReader();\n        const decoder = new TextDecoder();\n        try {\n            while(true){\n                const { value, done } = await reader.read();\n                if (done) break;\n                const chunk = decoder.decode(value, {\n                    stream: true\n                });\n                for (const line of chunk.split(\"\\n\")){\n                    const trimmed = line.trim();\n                    if (!trimmed.startsWith(\"data:\")) continue;\n                    const data = trimmed.slice(5).trim();\n                    if (!data) continue;\n                    try {\n                        const evt = JSON.parse(data);\n                        if (evt.type === \"text\" && evt.content) {\n                            setMessages((prev)=>{\n                                const copy = [\n                                    ...prev\n                                ];\n                                const msg = copy[assistantIndex];\n                                copy[assistantIndex] = {\n                                    ...msg,\n                                    content: ((msg === null || msg === void 0 ? void 0 : msg.content) || \"\") + evt.content\n                                };\n                                return copy;\n                            });\n                        } else if (evt.action === \"create_chapter\") {\n                            if (chatType !== \"plot\") {} else if (true) {\n                                window.dispatchEvent(new CustomEvent(\"workspace:create-draft\", {\n                                    detail: {\n                                        title: evt.title || \"Untitled Chapter\",\n                                        content: evt.content || \"\"\n                                    }\n                                }));\n                            }\n                        } else if (evt.action === \"confirm_mode\" && evt.mode) {\n                            setPendingMode(evt.mode);\n                            setMessages((prev)=>[\n                                    ...prev,\n                                    {\n                                        role: \"assistant\",\n                                        content: 'Pending mode change to \"'.concat(evt.mode, '\". Confirm?')\n                                    }\n                                ]);\n                        } else if (evt.action === \"confirm_settings\" && evt.changes) {\n                            if (clientMode === \"action\" && chatType === \"plot\") {\n                                setPendingSettings(evt.changes);\n                                setMessages((prev)=>[\n                                        ...prev,\n                                        {\n                                            role: \"assistant\",\n                                            content: \"Pending settings update detected. Confirm to apply changes.\"\n                                        }\n                                    ]);\n                            } // ignore in Chat mode for safety\n                        } else if (evt.type === \"image_job\") {\n                        // Optionally reflect job queued state\n                        } else if (evt.action === \"convert_to_manhwa\") {\n                            if (chatType !== \"plot\") {} else if (true) {\n                                window.dispatchEvent(new CustomEvent(\"workspace:create-draft\", {\n                                    detail: {\n                                        title: \"Converted Panels\",\n                                        panel_script: evt.panel_script\n                                    }\n                                }));\n                            }\n                        } else if (evt.action === \"update_chapter\") {\n                            if (chatType !== \"plot\") {} else if (true) {\n                                window.dispatchEvent(new CustomEvent(\"workspace:update-chapter\", {\n                                    detail: {\n                                        id: evt.id,\n                                        chapter_number: evt.chapter_number,\n                                        title: evt.title,\n                                        content: evt.content\n                                    }\n                                }));\n                            }\n                        } else if (evt.action === \"upsert_character\" && evt.item) {\n                            if (chatType !== \"character\") {} else if (true) {\n                                window.dispatchEvent(new CustomEvent(\"workspace:character-upsert\", {\n                                    detail: {\n                                        item: evt.item\n                                    }\n                                }));\n                            }\n                        } else if (evt.action === \"upsert_world\" && evt.item) {\n                            if (chatType !== \"world\") {} else if (true) {\n                                window.dispatchEvent(new CustomEvent(\"workspace:world-upsert\", {\n                                    detail: {\n                                        item: evt.item\n                                    }\n                                }));\n                            }\n                        } else if (evt.type === \"error\") {\n                            // Append error to conversation\n                            setMessages((prev)=>[\n                                    ...prev,\n                                    {\n                                        role: \"assistant\",\n                                        content: \"Error: \".concat(evt.message)\n                                    }\n                                ]);\n                        } else if (evt.type === \"done\") {\n                            setStreaming(false);\n                        }\n                    } catch (e) {\n                    // ignore partial json lines\n                    }\n                }\n            }\n        } finally{\n            setStreaming(false);\n            reader.releaseLock();\n        }\n    }, [\n        apiBase,\n        input,\n        chatId,\n        supabase,\n        clientMode,\n        chatType\n    ]);\n    const onRegenerate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((panelId)=>{\n        void send({\n            regeneratePanelId: panelId\n        });\n    }, [\n        send\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_dnd__WEBPACK_IMPORTED_MODULE_5__.DndProvider, {\n        backend: react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_6__.HTML5Backend,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex flex-col bg-bg-elevated\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    ref: listRef,\n                    className: \"flex-1 min-h-0 overflow-y-auto space-y-4 p-4\",\n                    children: [\n                        loadingHistory && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-secondary\",\n                            children: \"Loading previous messages…\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 307,\n                            columnNumber: 13\n                        }, this),\n                        messages.map((m, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatBubble__WEBPACK_IMPORTED_MODULE_3__.ChatBubble, {\n                                role: m.role,\n                                content: m.content,\n                                panelId: m.panelId,\n                                onRegenerate: onRegenerate,\n                                draggable: Boolean(m.panelId)\n                            }, i, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                lineNumber: 310,\n                                columnNumber: 13\n                            }, this)),\n                        streaming && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-secondary animate-pulse\",\n                            children: \"AI is typing…\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 320,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 305,\n                    columnNumber: 9\n                }, this),\n                toastMsg && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"fixed top-3 right-3 z-50\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"px-3 py-2 rounded bg-slate-950/90 border border-slate-800 text-slate-100 text-sm shadow-lg\",\n                        children: toastMsg\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                        lineNumber: 326,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 325,\n                    columnNumber: 9\n                }, this),\n                (pendingMode || pendingSettings) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"border-t border-border-default p-3 flex items-center justify-between gap-3 bg-bg-primary\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-primary\",\n                            children: [\n                                pendingMode && 'Confirm mode change to \"'.concat(pendingMode, '\"?'),\n                                pendingSettings && !pendingMode && \"Confirm applying pending settings changes?\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 334,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"px-3 py-1.5 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover transition-all duration-150\",\n                                    onClick: ()=>{\n                                        setPendingMode(null);\n                                        setPendingSettings(null);\n                                    },\n                                    children: \"Cancel\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 339,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"px-3 py-1.5 rounded-md bg-accent hover:bg-accent-hover text-white disabled:opacity-50 transition-all duration-150\",\n                                    disabled: saving || clientMode !== \"action\",\n                                    onClick: async ()=>{\n                                        setSaving(true);\n                                        setSaveError(null);\n                                        try {\n                                            if (pendingMode) {\n                                                // Persist mode via settings endpoint\n                                                await api.updateProjectSettings(projectId, {\n                                                    mode: pendingMode\n                                                });\n                                                if (true) {\n                                                    window.dispatchEvent(new CustomEvent(\"project:mode-updated\", {\n                                                        detail: {\n                                                            mode: pendingMode\n                                                        }\n                                                    }));\n                                                }\n                                                setMessages((prev)=>[\n                                                        ...prev,\n                                                        {\n                                                            role: \"assistant\",\n                                                            content: \"Mode updated to \".concat(pendingMode, \".\")\n                                                        }\n                                                    ]);\n                                                setPendingMode(null);\n                                                if (toastTimer.current) clearTimeout(toastTimer.current);\n                                                setToastMsg(\"Mode saved\");\n                                                toastTimer.current = setTimeout(()=>setToastMsg(\"\"), 3000);\n                                            } else if (pendingSettings) {\n                                                // Persist full settings payload including title/description/coverImage/genre/coreConflict/mode/settingsJson\n                                                await api.updateProjectSettings(projectId, pendingSettings);\n                                                if (true) {\n                                                    window.dispatchEvent(new CustomEvent(\"project:settings-updated\", {\n                                                        detail: {\n                                                            changes: pendingSettings\n                                                        }\n                                                    }));\n                                                }\n                                                setMessages((prev)=>[\n                                                        ...prev,\n                                                        {\n                                                            role: \"assistant\",\n                                                            content: \"Settings updated.\"\n                                                        }\n                                                    ]);\n                                                setPendingSettings(null);\n                                                // Toast from chat confirm\n                                                if (toastTimer.current) clearTimeout(toastTimer.current);\n                                                setToastMsg(\"Settings saved\");\n                                                toastTimer.current = setTimeout(()=>setToastMsg(\"\"), 3000);\n                                            }\n                                        } catch (e) {\n                                            setSaveError((e === null || e === void 0 ? void 0 : e.message) || \"Failed to save\");\n                                            setMessages((prev)=>[\n                                                    ...prev,\n                                                    {\n                                                        role: \"assistant\",\n                                                        content: \"Error persisting changes: \".concat((e === null || e === void 0 ? void 0 : e.message) || \"Failed to save\")\n                                                    }\n                                                ]);\n                                        } finally{\n                                            setSaving(false);\n                                        }\n                                    },\n                                    children: \"Confirm\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 345,\n                                    columnNumber: 15\n                                }, this),\n                                clientMode !== \"action\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-[11px] text-text-tertiary\",\n                                    children: \"Switch to Action mode to apply\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 387,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 338,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 333,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"border-t border-border-default p-3 bg-bg-primary\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex gap-3 items-end\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 relative\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                        ref: inputRef,\n                                        value: input,\n                                        onChange: (e)=>setInput(e.target.value),\n                                        placeholder: \"Chat with Cascade\",\n                                        rows: 2,\n                                        className: \"w-full bg-bg-elevated border border-border-default rounded-2xl pl-12 pr-12 pt-2 pb-16 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent resize-none min-h-[80px] max-h-72 overflow-y-auto transition-colors duration-150\",\n                                        onKeyDown: (e)=>{\n                                            if (e.key === \"Enter\" && !e.shiftKey) {\n                                                e.preventDefault();\n                                                void send();\n                                            }\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 397,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute left-2 bottom-2\",\n                                        ref: modeMenuRef,\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                type: \"button\",\n                                                className: \"text-xs px-3 py-2 rounded-lg border border-border-default \".concat(clientMode === \"chat\" ? \"text-success\" : \"text-accent\", \" bg-bg-elevated hover:bg-bg-hover inline-flex items-center gap-1.5 transition-all duration-150\"),\n                                                onClick: ()=>{\n                                                    setModeMenuIndex(clientMode === \"chat\" ? 0 : 1);\n                                                    setModeMenuOpen((v)=>!v);\n                                                },\n                                                \"aria-haspopup\": \"menu\",\n                                                \"aria-expanded\": modeMenuOpen,\n                                                onKeyDown: onModeButtonKeyDown,\n                                                title: \"Mode\",\n                                                children: [\n                                                    clientMode === \"chat\" ? \"Chat\" : \"Action\",\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                        className: \"w-3 h-3\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 423,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 413,\n                                                columnNumber: 17\n                                            }, this),\n                                            modeMenuOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"absolute bottom-full mb-2 left-0 w-64 rounded-lg border border-border-default bg-bg-elevated shadow-elevation p-1.5 text-xs text-text-primary z-20\",\n                                                role: \"menu\",\n                                                tabIndex: -1,\n                                                ref: modeMenuListRef,\n                                                onKeyDown: onMenuKeyDown,\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"w-full text-left px-3 py-2.5 rounded-md hover:bg-bg-hover transition-all duration-150 \".concat(modeMenuIndex === 0 ? \"ring-1 ring-accent\" : \"\", \" \").concat(clientMode === \"chat\" ? \"bg-bg-hover\" : \"\"),\n                                                        onClick: ()=>{\n                                                            setClientMode(\"chat\");\n                                                            setModeMenuOpen(false);\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"font-semibold text-text-primary\",\n                                                                children: \"Chat\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 437,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-text-tertiary text-[11px] mt-0.5\",\n                                                                children: \"Brainstorm, outline, preview. No writes.\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 438,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 433,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"w-full text-left px-3 py-2.5 rounded-md hover:bg-bg-hover transition-all duration-150 mt-1 \".concat(modeMenuIndex === 1 ? \"ring-1 ring-accent\" : \"\", \" \").concat(clientMode === \"action\" ? \"bg-bg-hover\" : \"\"),\n                                                        onClick: ()=>{\n                                                            setClientMode(\"action\");\n                                                            setModeMenuOpen(false);\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"font-semibold text-text-primary\",\n                                                                children: \"Action\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 444,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-text-tertiary text-[11px] mt-0.5\",\n                                                                children: \"Enable saving settings and chapters.\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 445,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 440,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 426,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 412,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>void send(),\n                                        disabled: streaming || !input.trim(),\n                                        className: \"absolute right-2 bottom-2 bg-accent hover:bg-accent-hover disabled:opacity-40 disabled:cursor-not-allowed text-white w-8 h-8 rounded-lg inline-flex items-center justify-center transition-all duration-150\",\n                                        title: \"Send\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                className: \"w-4 h-4\",\n                                                \"aria-hidden\": \"true\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 456,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"sr-only\",\n                                                children: \"Send\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 457,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 450,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                lineNumber: 396,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 394,\n                            columnNumber: 11\n                        }, this),\n                        inputError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-2 text-xs text-red-400 p-2 rounded-lg bg-red-950/20 border border-red-500/20\",\n                            children: inputError\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 461,\n                            columnNumber: 26\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 393,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n            lineNumber: 303,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n        lineNumber: 302,\n        columnNumber: 5\n    }, this);\n}\n_s(Chat, \"V/sCbzveP6T0G6qFcZ9lZ8tpL8g=\", false, function() {\n    return [\n        _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase\n    ];\n});\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL2NoYXQvQ2hhdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUUwRTtBQUVsQztBQUNlO0FBQ2U7QUFDNUI7QUFDSjtBQUNtQjtBQVNsRCxTQUFTWSxLQUFLLEtBQTZLO1FBQTdLLEVBQUVDLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxXQUFXLE1BQU0sRUFBRUMsa0JBQWtCLEVBQUUsRUFBaUgsR0FBN0s7O0lBQ25CLE1BQU1DLFdBQVdWLG1GQUFXQTtJQUM1QixNQUFNVyxNQUFNaEIsOENBQU9BLENBQUMsSUFBTU8sbURBQVNBLENBQUNRLFdBQVc7UUFBQ0E7S0FBUztJQUN6RCxNQUFNLENBQUNFLFVBQVVDLFlBQVksR0FBR2hCLCtDQUFRQSxDQUFnQlk7SUFDeEQsTUFBTSxDQUFDSyxPQUFPQyxTQUFTLEdBQUdsQiwrQ0FBUUEsQ0FBQztJQUNuQyxNQUFNLENBQUNtQixXQUFXQyxhQUFhLEdBQUdwQiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUNxQixZQUFZQyxjQUFjLEdBQUd0QiwrQ0FBUUEsQ0FBZ0I7SUFDNUQsTUFBTXVCLFVBQVV4Qiw2Q0FBTUEsQ0FBaUI7SUFDdkMsTUFBTXlCLFdBQVd6Qiw2Q0FBTUEsQ0FBc0I7SUFDN0MsTUFBTTBCLGNBQWMxQiw2Q0FBTUEsQ0FBaUI7SUFDM0MsTUFBTTJCLGtCQUFrQjNCLDZDQUFNQSxDQUFpQjtJQUUvQyxNQUFNLENBQUM0QixRQUFRQyxVQUFVLEdBQUc1QiwrQ0FBUUEsQ0FBQztJQUNyQyxNQUFNLENBQUM2QixXQUFXQyxhQUFhLEdBQUc5QiwrQ0FBUUEsQ0FBZ0I7SUFFMUQsTUFBTSxDQUFDK0IsYUFBYUMsZUFBZSxHQUFHaEMsK0NBQVFBLENBQXdDO0lBQ3RGLE1BQU0sQ0FBQ2lDLGlCQUFpQkMsbUJBQW1CLEdBQUdsQywrQ0FBUUEsQ0FBYTtJQUNuRSxNQUFNLENBQUNtQyxVQUFVQyxZQUFZLEdBQUdwQywrQ0FBUUEsQ0FB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Ozs7OzswRUFDakQsOERBQUNEO2dFQUFJQyxXQUFVOzBFQUF3Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tEQUsvRCw4REFBQ007d0NBQ0NDLFNBQVMsSUFBTSxLQUFLdkU7d0NBQ3BCd0UsVUFBVXhKLGFBQWEsQ0FBQ0YsTUFBTXNGLElBQUk7d0NBQ2xDNEQsV0FBVTt3Q0FDVnpDLE9BQU07OzBEQUVOLDhEQUFDcEgsb0dBQVlBO2dEQUFDNkosV0FBVTtnREFBVXNCLGVBQVk7Ozs7OzswREFDOUMsOERBQUNYO2dEQUFLWCxXQUFVOzBEQUFVOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3QkFJL0I5SSw0QkFBYyw4REFBQzZJOzRCQUFJQyxXQUFVO3NDQUFtRjlJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU8zSDtHQWpjZ0JiOztRQUNHTCwrRUFBV0E7OztLQURkSyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvY29tcG9uZW50cy9jaGF0L0NoYXQudHN4PzVlMTIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdHlwZSBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBEbmRQcm92aWRlciB9IGZyb20gJ3JlYWN0LWRuZCc7XG5pbXBvcnQgeyBIVE1MNUJhY2tlbmQgfSBmcm9tICdyZWFjdC1kbmQtaHRtbDUtYmFja2VuZCc7XG5pbXBvcnQgeyB1c2VTdXBhYmFzZSB9IGZyb20gJ0AvY29tcG9uZW50cy9wcm92aWRlcnMvU3VwYWJhc2VQcm92aWRlcic7XG5pbXBvcnQgeyBDaGF0QnViYmxlIH0gZnJvbSAnLi9DaGF0QnViYmxlJztcbmltcG9ydCB7IGNyZWF0ZUFwaSB9IGZyb20gJ0AvbGliL2FwaSc7XG5pbXBvcnQgeyBBcnJvd1VwUmlnaHQsIENoZXZyb25Eb3duIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcblxuZXhwb3J0IHR5cGUgQ2hhdE1lc3NhZ2UgPSB7XG4gIGlkPzogc3RyaW5nO1xuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JztcbiAgY29udGVudDogc3RyaW5nO1xuICBwYW5lbElkPzogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBDaGF0KHsgY2hhdElkLCBwcm9qZWN0SWQsIGNoYXRUeXBlID0gJ3Bsb3QnLCBpbml0aWFsTWVzc2FnZXMgPSBbXSB9OiB7IGNoYXRJZDogc3RyaW5nOyBwcm9qZWN0SWQ6IHN0cmluZzsgY2hhdFR5cGU/OiAncGxvdCd8J2NoYXJhY3Rlcid8J3dvcmxkJzsgaW5pdGlhbE1lc3NhZ2VzPzogQ2hhdE1lc3NhZ2VbXSB9KSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gdXNlU3VwYWJhc2UoKTtcbiAgY29uc3QgYXBpID0gdXNlTWVtbygoKSA9PiBjcmVhdGVBcGkoc3VwYWJhc2UpLCBbc3VwYWJhc2VdKTtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxDaGF0TWVzc2FnZVtdPihpbml0aWFsTWVzc2FnZXMpO1xuICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3N0cmVhbWluZywgc2V0U3RyZWFtaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lucHV0RXJyb3IsIHNldElucHV0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGxpc3RSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBpbnB1dFJlZiA9IHVzZVJlZjxIVE1MVGV4dEFyZWFFbGVtZW50PihudWxsKTtcbiAgY29uc3QgbW9kZU1lbnVSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBtb2RlTWVudUxpc3RSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuXG4gIGNvbnN0IFtzYXZpbmcsIHNldFNhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzYXZlRXJyb3IsIHNldFNhdmVFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBbcGVuZGluZ01vZGUsIHNldFBlbmRpbmdNb2RlXSA9IHVzZVN0YXRlPCdub3ZlbCcgfCAnbWFuaHdhJyB8ICdjb252ZXJ0JyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbcGVuZGluZ1NldHRpbmdzLCBzZXRQZW5kaW5nU2V0dGluZ3NdID0gdXNlU3RhdGU8YW55IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFt0b2FzdE1zZywgc2V0VG9hc3RNc2ddID0gdXNlU3RhdGU8c3RyaW5nPignJyk7XG4gIGNvbnN0IHRvYXN0VGltZXIgPSB1c2VSZWY8UmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsPihudWxsKTtcblxuICBjb25zdCBhcGlCYXNlID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJztcblxuICBjb25zdCBbbG9hZGluZ0hpc3RvcnksIHNldExvYWRpbmdIaXN0b3J5XSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgW2NsaWVudE1vZGUsIHNldENsaWVudE1vZGVdID0gdXNlU3RhdGU8J2NoYXQnIHwgJ2FjdGlvbic+KCdjaGF0Jyk7XG4gIGNvbnN0IFttb2RlTWVudU9wZW4sIHNldE1vZGVNZW51T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFttb2RlTWVudUluZGV4LCBzZXRNb2RlTWVudUluZGV4XSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG5cbiAgY29uc3QgY2FjaGVLZXkgPSB1c2VNZW1vKCgpID0+IGBpbmt2ZXJzZV9jaGF0XyR7Y2hhdElkfV9tZXNzYWdlc2AsIFtjaGF0SWRdKTtcbiAgY29uc3QgW2hhc0NhY2hlLCBzZXRIYXNDYWNoZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IG1lc3NhZ2VzUmVmID0gdXNlUmVmPENoYXRNZXNzYWdlW10+KG1lc3NhZ2VzKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxpc3RSZWYuY3VycmVudD8uc2Nyb2xsVG8oeyB0b3A6IGxpc3RSZWYuY3VycmVudC5zY3JvbGxIZWlnaHQsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgfSwgW21lc3NhZ2VzLmxlbmd0aF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHMgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSkgOiBudWxsO1xuICAgICAgaWYgKHMpIHtcbiAgICAgICAgY29uc3QgYXJyID0gSlNPTi5wYXJzZShzKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgICAgICAgIHNldE1lc3NhZ2VzKGFyciBhcyBDaGF0TWVzc2FnZVtdKTtcbiAgICAgICAgICBzZXRIYXNDYWNoZSgoYXJyIGFzIGFueVtdKS5sZW5ndGggPiAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2gge31cbiAgfSwgW2NhY2hlS2V5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBJZiBwYXJlbnQgcHJvdmlkZXMgbWVzc2FnZXMgbGF0ZXIsIHNldCB0aGVtIG9ubHkgaWYgbGlzdCBpcyBlbXB0eVxuICAgIGlmIChpbml0aWFsTWVzc2FnZXMubGVuZ3RoICYmIG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2V0TWVzc2FnZXMoaW5pdGlhbE1lc3NhZ2VzKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbaW5pdGlhbE1lc3NhZ2VzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgbW91bnRlZCA9IHRydWU7XG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgIGlmIChoYXNDYWNoZSkgeyByZXR1cm47IH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghaGFzQ2FjaGUpIHNldExvYWRpbmdIaXN0b3J5KHRydWUpO1xuICAgICAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgYXBpLmdldENoYXRNZXNzYWdlc0J5Q2hhdElkKGNoYXRJZCk7XG4gICAgICAgIGlmICghbW91bnRlZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuZXh0ID0gQXJyYXkuaXNBcnJheShoaXN0b3J5KSA/IGhpc3RvcnkgYXMgYW55IDogW107XG4gICAgICAgIC8vIFNraXAgdXBkYXRlIGlmIG5vIGNoYW5nZSB0byBhdm9pZCBmbGlja2VyXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGhhc0NhY2hlICYmIEpTT04uc3RyaW5naWZ5KG5leHQpID09PSBKU09OLnN0cmluZ2lmeShtZXNzYWdlc1JlZi5jdXJyZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCB7fVxuICAgICAgICBzZXRNZXNzYWdlcyhuZXh0KTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBzd2FsbG93IG5ldHdvcmsgZXJyb3JzIGR1cmluZyBpbml0aWFsIGh5ZHJhdGlvbi9yZXZhbGlkYXRpb25cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChtb3VudGVkKSBzZXRMb2FkaW5nSGlzdG9yeShmYWxzZSk7XG4gICAgICB9XG4gICAgfSkoKTtcbiAgICByZXR1cm4gKCkgPT4geyBtb3VudGVkID0gZmFsc2U7IH07XG4gIH0sIFthcGksIGNoYXRJZCwgaGFzQ2FjaGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShjYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkobWVzc2FnZXMpKTtcbiAgICB9IGNhdGNoIHt9XG4gIH0sIFttZXNzYWdlcywgY2FjaGVLZXldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4geyBtZXNzYWdlc1JlZi5jdXJyZW50ID0gbWVzc2FnZXM7IH0sIFttZXNzYWdlc10pO1xuXG4gIC8vIEF1dG8tcmVzaXplIHRleHRhcmVhIGhlaWdodCB3aXRoIGNvbnRlbnQsIHVwIHRvIGEgbWF4IHRoZW4gc2Nyb2xsXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZWwgPSBpbnB1dFJlZi5jdXJyZW50O1xuICAgIGlmICghZWwpIHJldHVybjtcbiAgICBlbC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgY29uc3QgbWF4ID0gMjU2OyAvLyBweCBtYXggaGVpZ2h0IGJlZm9yZSBzY3JvbGxcbiAgICBjb25zdCBuZXh0ID0gTWF0aC5taW4oZWwuc2Nyb2xsSGVpZ2h0LCBtYXgpO1xuICAgIGVsLnN0eWxlLmhlaWdodCA9IGAke25leHR9cHhgO1xuICB9LCBbaW5wdXRdKTtcblxuICAvLyBDbG9zZSBtb2RlIG1lbnUgb24gb3V0c2lkZSBjbGlja1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIG9uRG9jQ2xpY2soZTogTW91c2VFdmVudCkge1xuICAgICAgaWYgKCFtb2RlTWVudU9wZW4pIHJldHVybjtcbiAgICAgIGNvbnN0IHQgPSBlLnRhcmdldCBhcyBOb2RlIHwgbnVsbDtcbiAgICAgIGlmIChtb2RlTWVudVJlZi5jdXJyZW50ICYmIHQgJiYgIW1vZGVNZW51UmVmLmN1cnJlbnQuY29udGFpbnModCkpIHtcbiAgICAgICAgc2V0TW9kZU1lbnVPcGVuKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Eb2NDbGljayk7XG4gICAgcmV0dXJuICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uRG9jQ2xpY2spO1xuICB9LCBbbW9kZU1lbnVPcGVuXSk7XG5cbiAgLy8gS2V5Ym9hcmQ6IG9wZW4vY2xvc2UgbWVudSBhbmQgbmF2aWdhdGUgb3B0aW9uc1xuICBjb25zdCBvbk1vZGVCdXR0b25LZXlEb3duID0gKGU6IFJlYWN0LktleWJvYXJkRXZlbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSAnQXJyb3dEb3duJyB8fCBlLmtleSA9PT0gJ0VudGVyJyB8fCBlLmtleSA9PT0gJyAnKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzZXRNb2RlTWVudUluZGV4KGNsaWVudE1vZGUgPT09ICdjaGF0JyA/IDAgOiAxKTtcbiAgICAgIHNldE1vZGVNZW51T3Blbih0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgc2V0TW9kZU1lbnVPcGVuKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25NZW51S2V5RG93biA9IChlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHNldE1vZGVNZW51SW5kZXgoKGkpID0+IChpICsgMSkgJSAyKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnQXJyb3dVcCcpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHNldE1vZGVNZW51SW5kZXgoKGkpID0+IChpICsgMSArIDIpICUgMik7XG4gICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKG1vZGVNZW51SW5kZXggPT09IDApIHNldENsaWVudE1vZGUoJ2NoYXQnKTtcbiAgICAgIGVsc2Ugc2V0Q2xpZW50TW9kZSgnYWN0aW9uJyk7XG4gICAgICBzZXRNb2RlTWVudU9wZW4oZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBzZXRNb2RlTWVudU9wZW4oZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvLyBTaG9ydGN1dDogQ3RybCtMIGZvY3VzZXMgaW5wdXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmdW5jdGlvbiBvbktleShlOiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIChlLmtleSA9PT0gJ2wnIHx8IGUua2V5ID09PSAnTCcpKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaW5wdXRSZWYuY3VycmVudD8uZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleSk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXkpO1xuICB9LCBbXSk7XG5cbiAgLy8gRm9jdXMgbWVudSBjb250YWluZXIgd2hlbiBvcGVuZWQgZm9yIGtleWJvYXJkIG5hdlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtb2RlTWVudU9wZW4pIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gbW9kZU1lbnVMaXN0UmVmLmN1cnJlbnQ/LmZvY3VzKCksIDApO1xuICAgIH1cbiAgfSwgW21vZGVNZW51T3Blbl0pO1xuXG4gIGNvbnN0IHNlbmQgPSB1c2VDYWxsYmFjayhhc3luYyAob3B0cz86IHsgcmVnZW5lcmF0ZVBhbmVsSWQ/OiBzdHJpbmc7IG1lc3NhZ2VPdmVycmlkZT86IHN0cmluZyB9KSA9PiB7XG4gICAgY29uc3QgdGV4dCA9IChvcHRzPy5tZXNzYWdlT3ZlcnJpZGUgPz8gaW5wdXQpLnRyaW0oKTtcbiAgICBpZiAoIXRleHQgJiYgIW9wdHM/LnJlZ2VuZXJhdGVQYW5lbElkKSB7XG4gICAgICBzZXRJbnB1dEVycm9yKCdQcm9tcHQgaXMgZW1wdHkuIFRyeSBzb21ldGhpbmcgbGlrZTogXCJXcml0ZSB0aGUgb3BlbmluZyBzY2VuZSBvZiBhIGRhcmsgZmFudGFzeS5cIicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRJbnB1dEVycm9yKG51bGwpO1xuXG4gICAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XG4gICAgY29uc3QgdG9rZW4gPSBzZXNzaW9uPy5hY2Nlc3NfdG9rZW47XG4gICAgaWYgKCF0b2tlbikgcmV0dXJuO1xuXG4gICAgY29uc3QgdXNlck1lc3NhZ2U6IENoYXRNZXNzYWdlID0geyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHRleHQsIHBhbmVsSWQ6IG9wdHM/LnJlZ2VuZXJhdGVQYW5lbElkIHx8IG51bGwgfTtcbiAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHVzZXJNZXNzYWdlXSk7XG4gICAgc2V0SW5wdXQoJycpO1xuICAgIHNldFN0cmVhbWluZyh0cnVlKTtcblxuICAgIC8vIE1lbnRpb25zIHBhcnNpbmc6IEBjaGFwdGVyPG51bWJlcj4gb3IgQFwiZXhhY3QgdGl0bGVcIlxuICAgIGNvbnN0IG1OdW0gPSAvQGNoYXB0ZXJcXHMqKFswLTldKykvaS5leGVjKHRleHQpIHx8IC9AY2hhcHRlcl8/KFswLTldKykvaS5leGVjKHRleHQpO1xuICAgIGNvbnN0IG1UaXRsZSA9IC9AXCIoW15cIl0rKVwiLy5leGVjKHRleHQpO1xuICAgIGNvbnN0IG1lbnRpb25zOiBhbnkgPSB7fTtcbiAgICBpZiAobU51bT8uWzFdKSBtZW50aW9ucy5jaGFwdGVyX251bWJlciA9IHBhcnNlSW50KG1OdW1bMV0sIDEwKTtcbiAgICBpZiAobVRpdGxlPy5bMV0pIG1lbnRpb25zLnRpdGxlID0gbVRpdGxlWzFdO1xuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7YXBpQmFzZX0vYXBpL2NoYXQvJHtjaGF0SWR9YCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiB1c2VyTWVzc2FnZS5jb250ZW50LCByZWdlbmVyYXRlUGFuZWxJZDogb3B0cz8ucmVnZW5lcmF0ZVBhbmVsSWQgfHwgdW5kZWZpbmVkLCBjbGllbnRNb2RlLCBtZW50aW9ucyB9KSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzLmJvZHkpIHtcbiAgICAgIHNldFN0cmVhbWluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUHVzaCBlbXB0eSBhc3Npc3RhbnQgbWVzc2FnZSB0byBzdHJlYW0gaW50b1xuICAgIGxldCBhc3Npc3RhbnRJbmRleCA9IC0xO1xuICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiB7XG4gICAgICBhc3Npc3RhbnRJbmRleCA9IHByZXYubGVuZ3RoO1xuICAgICAgcmV0dXJuIFsuLi5wcmV2LCB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnJyB9XTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlYWRlciA9IHJlcy5ib2R5LmdldFJlYWRlcigpO1xuICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcblxuICAgIHRyeSB7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAoZG9uZSkgYnJlYWs7XG4gICAgICAgIGNvbnN0IGNodW5rID0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgY2h1bmsuc3BsaXQoJ1xcbicpKSB7XG4gICAgICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuICAgICAgICAgIGlmICghdHJpbW1lZC5zdGFydHNXaXRoKCdkYXRhOicpKSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCBkYXRhID0gdHJpbW1lZC5zbGljZSg1KS50cmltKCk7XG4gICAgICAgICAgaWYgKCFkYXRhKSBjb250aW51ZTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXZ0ID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgIGlmIChldnQudHlwZSA9PT0gJ3RleHQnICYmIGV2dC5jb250ZW50KSB7XG4gICAgICAgICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29weSA9IFsuLi5wcmV2XTtcbiAgICAgICAgICAgICAgICBjb25zdCBtc2cgPSBjb3B5W2Fzc2lzdGFudEluZGV4XTtcbiAgICAgICAgICAgICAgICBjb3B5W2Fzc2lzdGFudEluZGV4XSA9IHsgLi4ubXNnLCBjb250ZW50OiAobXNnPy5jb250ZW50IHx8ICcnKSArIGV2dC5jb250ZW50IH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQuYWN0aW9uID09PSAnY3JlYXRlX2NoYXB0ZXInKSB7XG4gICAgICAgICAgICAgIGlmIChjaGF0VHlwZSAhPT0gJ3Bsb3QnKSB7IC8qIG91dC1vZi1zY29wZTsgaWdub3JlICovIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3dvcmtzcGFjZTpjcmVhdGUtZHJhZnQnLCB7IGRldGFpbDogeyB0aXRsZTogZXZ0LnRpdGxlIHx8ICdVbnRpdGxlZCBDaGFwdGVyJywgY29udGVudDogZXZ0LmNvbnRlbnQgfHwgJycgfSB9KSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LmFjdGlvbiA9PT0gJ2NvbmZpcm1fbW9kZScgJiYgZXZ0Lm1vZGUpIHtcbiAgICAgICAgICAgICAgc2V0UGVuZGluZ01vZGUoZXZ0Lm1vZGUpO1xuICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IGBQZW5kaW5nIG1vZGUgY2hhbmdlIHRvIFwiJHtldnQubW9kZX1cIi4gQ29uZmlybT9gIH1dKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LmFjdGlvbiA9PT0gJ2NvbmZpcm1fc2V0dGluZ3MnICYmIGV2dC5jaGFuZ2VzKSB7XG4gICAgICAgICAgICAgIGlmIChjbGllbnRNb2RlID09PSAnYWN0aW9uJyAmJiBjaGF0VHlwZSA9PT0gJ3Bsb3QnKSB7XG4gICAgICAgICAgICAgICAgc2V0UGVuZGluZ1NldHRpbmdzKGV2dC5jaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdQZW5kaW5nIHNldHRpbmdzIHVwZGF0ZSBkZXRlY3RlZC4gQ29uZmlybSB0byBhcHBseSBjaGFuZ2VzLicgfV0pO1xuICAgICAgICAgICAgICB9IC8vIGlnbm9yZSBpbiBDaGF0IG1vZGUgZm9yIHNhZmV0eVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ2ltYWdlX2pvYicpIHtcbiAgICAgICAgICAgICAgLy8gT3B0aW9uYWxseSByZWZsZWN0IGpvYiBxdWV1ZWQgc3RhdGVcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LmFjdGlvbiA9PT0gJ2NvbnZlcnRfdG9fbWFuaHdhJykge1xuICAgICAgICAgICAgICBpZiAoY2hhdFR5cGUgIT09ICdwbG90JykgeyAvKiBvdXQtb2Ytc2NvcGU7IGlnbm9yZSAqLyB9XG4gICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd3b3Jrc3BhY2U6Y3JlYXRlLWRyYWZ0JywgeyBkZXRhaWw6IHsgdGl0bGU6ICdDb252ZXJ0ZWQgUGFuZWxzJywgcGFuZWxfc2NyaXB0OiBldnQucGFuZWxfc2NyaXB0IH0gfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICd1cGRhdGVfY2hhcHRlcicpIHtcbiAgICAgICAgICAgICAgaWYgKGNoYXRUeXBlICE9PSAncGxvdCcpIHsgLyogb3V0LW9mLXNjb3BlOyBpZ25vcmUgKi8gfVxuICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd29ya3NwYWNlOnVwZGF0ZS1jaGFwdGVyJywgeyBkZXRhaWw6IHsgaWQ6IGV2dC5pZCwgY2hhcHRlcl9udW1iZXI6IGV2dC5jaGFwdGVyX251bWJlciwgdGl0bGU6IGV2dC50aXRsZSwgY29udGVudDogZXZ0LmNvbnRlbnQgfSB9KSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LmFjdGlvbiA9PT0gJ3Vwc2VydF9jaGFyYWN0ZXInICYmIGV2dC5pdGVtKSB7XG4gICAgICAgICAgICAgIGlmIChjaGF0VHlwZSAhPT0gJ2NoYXJhY3RlcicpIHsgLyogb3V0LW9mLXNjb3BlOyBpZ25vcmUgKi8gfVxuICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd29ya3NwYWNlOmNoYXJhY3Rlci11cHNlcnQnLCB7IGRldGFpbDogeyBpdGVtOiBldnQuaXRlbSB9IH0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQuYWN0aW9uID09PSAndXBzZXJ0X3dvcmxkJyAmJiBldnQuaXRlbSkge1xuICAgICAgICAgICAgICBpZiAoY2hhdFR5cGUgIT09ICd3b3JsZCcpIHsgLyogb3V0LW9mLXNjb3BlOyBpZ25vcmUgKi8gfVxuICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd29ya3NwYWNlOndvcmxkLXVwc2VydCcsIHsgZGV0YWlsOiB7IGl0ZW06IGV2dC5pdGVtIH0gfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgIC8vIEFwcGVuZCBlcnJvciB0byBjb252ZXJzYXRpb25cbiAgICAgICAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiBgRXJyb3I6ICR7ZXZ0Lm1lc3NhZ2V9YCB9XSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnZG9uZScpIHtcbiAgICAgICAgICAgICAgc2V0U3RyZWFtaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIGlnbm9yZSBwYXJ0aWFsIGpzb24gbGluZXNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0U3RyZWFtaW5nKGZhbHNlKTtcbiAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgIH1cbiAgfSwgW2FwaUJhc2UsIGlucHV0LCBjaGF0SWQsIHN1cGFiYXNlLCBjbGllbnRNb2RlLCBjaGF0VHlwZV0pO1xuXG4gIGNvbnN0IG9uUmVnZW5lcmF0ZSA9IHVzZUNhbGxiYWNrKChwYW5lbElkOiBzdHJpbmcpID0+IHtcbiAgICB2b2lkIHNlbmQoeyByZWdlbmVyYXRlUGFuZWxJZDogcGFuZWxJZCB9KTtcbiAgfSwgW3NlbmRdKTtcblxuICByZXR1cm4gKFxuICAgIDxEbmRQcm92aWRlciBiYWNrZW5kPXtIVE1MNUJhY2tlbmR9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZmxleCBmbGV4LWNvbCBiZy1iZy1lbGV2YXRlZFwiPlxuICAgICAgICB7LyogTWVzc2FnZXMgQXJlYSB3aXRoIFNjcm9sbGJhciAqL31cbiAgICAgICAgPGRpdiByZWY9e2xpc3RSZWZ9IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4taC0wIG92ZXJmbG93LXktYXV0byBzcGFjZS15LTQgcC00XCI+XG4gICAgICAgICAge2xvYWRpbmdIaXN0b3J5ICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXRleHQtc2Vjb25kYXJ5XCI+TG9hZGluZyBwcmV2aW91cyBtZXNzYWdlc+KApjwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge21lc3NhZ2VzLm1hcCgobSwgaSkgPT4gKFxuICAgICAgICAgICAgPENoYXRCdWJibGVcbiAgICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgICByb2xlPXttLnJvbGV9XG4gICAgICAgICAgICAgIGNvbnRlbnQ9e20uY29udGVudH1cbiAgICAgICAgICAgICAgcGFuZWxJZD17bS5wYW5lbElkfVxuICAgICAgICAgICAgICBvblJlZ2VuZXJhdGU9e29uUmVnZW5lcmF0ZX1cbiAgICAgICAgICAgICAgZHJhZ2dhYmxlPXtCb29sZWFuKG0ucGFuZWxJZCl9XG4gICAgICAgICAgICAvPilcbiAgICAgICAgICApfVxuICAgICAgICAgIHtzdHJlYW1pbmcgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtdGV4dC1zZWNvbmRhcnkgYW5pbWF0ZS1wdWxzZVwiPkFJIGlzIHR5cGluZ+KApjwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICB7dG9hc3RNc2cgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIHRvcC0zIHJpZ2h0LTMgei01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtMyBweS0yIHJvdW5kZWQgYmctc2xhdGUtOTUwLzkwIGJvcmRlciBib3JkZXItc2xhdGUtODAwIHRleHQtc2xhdGUtMTAwIHRleHQtc20gc2hhZG93LWxnXCI+XG4gICAgICAgICAgICB7dG9hc3RNc2d9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgICAgXG4gICAgICAgIHsocGVuZGluZ01vZGUgfHwgcGVuZGluZ1NldHRpbmdzKSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBib3JkZXItYm9yZGVyLWRlZmF1bHQgcC0zIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBnYXAtMyBiZy1iZy1wcmltYXJ5XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC10ZXh0LXByaW1hcnlcIj5cbiAgICAgICAgICAgICAge3BlbmRpbmdNb2RlICYmIGBDb25maXJtIG1vZGUgY2hhbmdlIHRvIFwiJHtwZW5kaW5nTW9kZX1cIj9gfVxuICAgICAgICAgICAgICB7cGVuZGluZ1NldHRpbmdzICYmICFwZW5kaW5nTW9kZSAmJiAnQ29uZmlybSBhcHBseWluZyBwZW5kaW5nIHNldHRpbmdzIGNoYW5nZXM/J31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xLjUgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6YmctYmctaG92ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IHNldFBlbmRpbmdNb2RlKG51bGwpOyBzZXRQZW5kaW5nU2V0dGluZ3MobnVsbCk7IH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTEuNSByb3VuZGVkLW1kIGJnLWFjY2VudCBob3ZlcjpiZy1hY2NlbnQtaG92ZXIgdGV4dC13aGl0ZSBkaXNhYmxlZDpvcGFjaXR5LTUwIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NhdmluZyB8fCBjbGllbnRNb2RlICE9PSAnYWN0aW9uJ31cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRTYXZpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICBzZXRTYXZlRXJyb3IobnVsbCk7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ01vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBQZXJzaXN0IG1vZGUgdmlhIHNldHRpbmdzIGVuZHBvaW50XG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBpLnVwZGF0ZVByb2plY3RTZXR0aW5ncyhwcm9qZWN0SWQsIHsgbW9kZTogcGVuZGluZ01vZGUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3Byb2plY3Q6bW9kZS11cGRhdGVkJywgeyBkZXRhaWw6IHsgbW9kZTogcGVuZGluZ01vZGUgfSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogYE1vZGUgdXBkYXRlZCB0byAke3BlbmRpbmdNb2RlfS5gIH1dKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRQZW5kaW5nTW9kZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodG9hc3RUaW1lci5jdXJyZW50KSBjbGVhclRpbWVvdXQodG9hc3RUaW1lci5jdXJyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRUb2FzdE1zZygnTW9kZSBzYXZlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0VGltZXIuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0VG9hc3RNc2coJycpLCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZW5kaW5nU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBQZXJzaXN0IGZ1bGwgc2V0dGluZ3MgcGF5bG9hZCBpbmNsdWRpbmcgdGl0bGUvZGVzY3JpcHRpb24vY292ZXJJbWFnZS9nZW5yZS9jb3JlQ29uZmxpY3QvbW9kZS9zZXR0aW5nc0pzb25cbiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcGkudXBkYXRlUHJvamVjdFNldHRpbmdzKHByb2plY3RJZCwgcGVuZGluZ1NldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgncHJvamVjdDpzZXR0aW5ncy11cGRhdGVkJywgeyBkZXRhaWw6IHsgY2hhbmdlczogcGVuZGluZ1NldHRpbmdzIH0gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdTZXR0aW5ncyB1cGRhdGVkLicgfV0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldFBlbmRpbmdTZXR0aW5ncyhudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBUb2FzdCBmcm9tIGNoYXQgY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2FzdFRpbWVyLmN1cnJlbnQpIGNsZWFyVGltZW91dCh0b2FzdFRpbWVyLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldFRvYXN0TXNnKCdTZXR0aW5ncyBzYXZlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0VGltZXIuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0VG9hc3RNc2coJycpLCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNhdmVFcnJvcihlPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gc2F2ZScpO1xuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IGBFcnJvciBwZXJzaXN0aW5nIGNoYW5nZXM6ICR7ZT8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHNhdmUnfWAgfV0pO1xuICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2F2aW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ29uZmlybVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAge2NsaWVudE1vZGUgIT09ICdhY3Rpb24nICYmIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LVsxMXB4XSB0ZXh0LXRleHQtdGVydGlhcnlcIj5Td2l0Y2ggdG8gQWN0aW9uIG1vZGUgdG8gYXBwbHk8L3NwYW4+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAgey8qIElucHV0IEFyZWEgLSBGaXhlZCBhdCBCb3R0b20gKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLXQgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHAtMyBiZy1iZy1wcmltYXJ5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0zIGl0ZW1zLWVuZFwiPlxuICAgICAgICAgICAgey8qIElucHV0IEZpZWxkIHdpdGggSW50ZWdyYXRlZCBTZW5kIEJ1dHRvbiBhbmQgTW9kZSBTZWxlY3RvciBpbnNpZGUgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSByZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICByZWY9e2lucHV0UmVmfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtpbnB1dH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldElucHV0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNoYXQgd2l0aCBDYXNjYWRlXCJcbiAgICAgICAgICAgICAgICByb3dzPXsyfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1lbGV2YXRlZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtMnhsIHBsLTEyIHByLTEyIHB0LTIgcGItMTYgdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50IHJlc2l6ZS1ub25lIG1pbi1oLVs4MHB4XSBtYXgtaC03MiBvdmVyZmxvdy15LWF1dG8gdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICBvbktleURvd249eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHNlbmQoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB7LyogTW9kZSBTZWxlY3RvciBpbnNpZGUgaW5wdXQgYm90dG9tLWxlZnQgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0yIGJvdHRvbS0yXCIgcmVmPXttb2RlTWVudVJlZn0+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B0ZXh0LXhzIHB4LTMgcHktMiByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgJHtjbGllbnRNb2RlPT09J2NoYXQnID8gJ3RleHQtc3VjY2VzcycgOiAndGV4dC1hY2NlbnQnfSBiZy1iZy1lbGV2YXRlZCBob3ZlcjpiZy1iZy1ob3ZlciBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEuNSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBgfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBzZXRNb2RlTWVudUluZGV4KGNsaWVudE1vZGU9PT0nY2hhdCcgPyAwIDogMSk7IHNldE1vZGVNZW51T3BlbigodikgPT4gIXYpOyB9fVxuICAgICAgICAgICAgICAgICAgYXJpYS1oYXNwb3B1cD1cIm1lbnVcIlxuICAgICAgICAgICAgICAgICAgYXJpYS1leHBhbmRlZD17bW9kZU1lbnVPcGVufVxuICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXtvbk1vZGVCdXR0b25LZXlEb3dufVxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJNb2RlXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7Y2xpZW50TW9kZSA9PT0gJ2NoYXQnID8gJ0NoYXQnIDogJ0FjdGlvbid9XG4gICAgICAgICAgICAgICAgICA8Q2hldnJvbkRvd24gY2xhc3NOYW1lPVwidy0zIGgtM1wiIC8+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAge21vZGVNZW51T3BlbiAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGJvdHRvbS1mdWxsIG1iLTIgbGVmdC0wIHctNjQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLWVsZXZhdGVkIHNoYWRvdy1lbGV2YXRpb24gcC0xLjUgdGV4dC14cyB0ZXh0LXRleHQtcHJpbWFyeSB6LTIwXCJcbiAgICAgICAgICAgICAgICAgICAgcm9sZT1cIm1lbnVcIlxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17LTF9XG4gICAgICAgICAgICAgICAgICAgIHJlZj17bW9kZU1lbnVMaXN0UmVmfVxuICAgICAgICAgICAgICAgICAgICBvbktleURvd249e29uTWVudUtleURvd259XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMi41IHJvdW5kZWQtbWQgaG92ZXI6YmctYmctaG92ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwICR7bW9kZU1lbnVJbmRleD09PTAgPyAncmluZy0xIHJpbmctYWNjZW50JyA6ICcnfSAke2NsaWVudE1vZGU9PT0nY2hhdCcgPyAnYmctYmctaG92ZXInIDogJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IHNldENsaWVudE1vZGUoJ2NoYXQnKTsgc2V0TW9kZU1lbnVPcGVuKGZhbHNlKTsgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXRleHQtcHJpbWFyeVwiPkNoYXQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSB0ZXh0LVsxMXB4XSBtdC0wLjVcIj5CcmFpbnN0b3JtLCBvdXRsaW5lLCBwcmV2aWV3LiBObyB3cml0ZXMuPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIuNSByb3VuZGVkLW1kIGhvdmVyOmJnLWJnLWhvdmVyIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MCBtdC0xICR7bW9kZU1lbnVJbmRleD09PTEgPyAncmluZy0xIHJpbmctYWNjZW50JyA6ICcnfSAke2NsaWVudE1vZGU9PT0nYWN0aW9uJyA/ICdiZy1iZy1ob3ZlcicgOiAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHsgc2V0Q2xpZW50TW9kZSgnYWN0aW9uJyk7IHNldE1vZGVNZW51T3BlbihmYWxzZSk7IH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC10ZXh0LXByaW1hcnlcIj5BY3Rpb248L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSB0ZXh0LVsxMXB4XSBtdC0wLjVcIj5FbmFibGUgc2F2aW5nIHNldHRpbmdzIGFuZCBjaGFwdGVycy48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHZvaWQgc2VuZCgpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtzdHJlYW1pbmcgfHwgIWlucHV0LnRyaW0oKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0yIGJvdHRvbS0yIGJnLWFjY2VudCBob3ZlcjpiZy1hY2NlbnQtaG92ZXIgZGlzYWJsZWQ6b3BhY2l0eS00MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgdGV4dC13aGl0ZSB3LTggaC04IHJvdW5kZWQtbGcgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJTZW5kXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxBcnJvd1VwUmlnaHQgY2xhc3NOYW1lPVwidy00IGgtNFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3Itb25seVwiPlNlbmQ8L3NwYW4+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge2lucHV0RXJyb3IgJiYgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHRleHQteHMgdGV4dC1yZWQtNDAwIHAtMiByb3VuZGVkLWxnIGJnLXJlZC05NTAvMjAgYm9yZGVyIGJvcmRlci1yZWQtNTAwLzIwXCI+e2lucHV0RXJyb3J9PC9kaXY+fVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogZHJhZnRzIGFyZSByb3V0ZWQgdG8gY2VudGVyIGVkaXRvciB2aWEgd29ya3NwYWNlOmNyZWF0ZS1kcmFmdCAqL31cbiAgICA8L0RuZFByb3ZpZGVyPlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZVJlZiIsInVzZVN0YXRlIiwiRG5kUHJvdmlkZXIiLCJIVE1MNUJhY2tlbmQiLCJ1c2VTdXBhYmFzZSIsIkNoYXRCdWJibGUiLCJjcmVhdGVBcGkiLCJBcnJvd1VwUmlnaHQiLCJDaGV2cm9uRG93biIsIkNoYXQiLCJjaGF0SWQiLCJwcm9qZWN0SWQiLCJjaGF0VHlwZSIsImluaXRpYWxNZXNzYWdlcyIsInN1cGFiYXNlIiwiYXBpIiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImlucHV0Iiwic2V0SW5wdXQiLCJzdHJlYW1pbmciLCJzZXRTdHJlYW1pbmciLCJpbnB1dEVycm9yIiwic2V0SW5wdXRFcnJvciIsImxpc3RSZWYiLCJpbnB1dFJlZiIsIm1vZGVNZW51UmVmIiwibW9kZU1lbnVMaXN0UmVmIiwic2F2aW5nIiwic2V0U2F2aW5nIiwic2F2ZUVycm9yIiwic2V0U2F2ZUVycm9yIiwicGVuZGluZ01vZGUiLCJzZXRQZW5kaW5nTW9kZSIsInBlbmRpbmdTZXR0aW5ncyIsInNldFBlbmRpbmdTZXR0aW5ncyIsInRvYXN0TXNnIiwic2V0VG9hc3RNc2ciLCJ0b2FzdFRpbWVyIiwiYXBpQmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwibG9hZGluZ0hpc3RvcnkiLCJzZXRMb2FkaW5nSGlzdG9yeSIsImNsaWVudE1vZGUiLCJzZXRDbGllbnRNb2RlIiwibW9kZU1lbnVPcGVuIiwic2V0TW9kZU1lbnVPcGVuIiwibW9kZU1lbnVJbmRleCIsInNldE1vZGVNZW51SW5kZXgiLCJjYWNoZUtleSIsImhhc0NhY2hlIiwic2V0SGFzQ2FjaGUiLCJtZXNzYWdlc1JlZiIsImN1cnJlbnQiLCJzY3JvbGxUbyIsInRvcCIsInNjcm9sbEhlaWdodCIsImJlaGF2aW9yIiwibGVuZ3RoIiwicyIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhcnIiLCJKU09OIiwicGFyc2UiLCJBcnJheSIsImlzQXJyYXkiLCJtb3VudGVkIiwiaGlzdG9yeSIsImdldENoYXRNZXNzYWdlc0J5Q2hhdElkIiwibmV4dCIsInN0cmluZ2lmeSIsInNldEl0ZW0iLCJlbCIsInN0eWxlIiwiaGVpZ2h0IiwibWF4IiwiTWF0aCIsIm1pbiIsIm9uRG9jQ2xpY2siLCJlIiwidCIsInRhcmdldCIsImNvbnRhaW5zIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uTW9kZUJ1dHRvbktleURvd24iLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsIm9uTWVudUtleURvd24iLCJpIiwib25LZXkiLCJjdHJsS2V5IiwibWV0YUtleSIsImZvY3VzIiwic2V0VGltZW91dCIsInNlbmQiLCJvcHRzIiwidGV4dCIsIm1lc3NhZ2VPdmVycmlkZSIsInRyaW0iLCJyZWdlbmVyYXRlUGFuZWxJZCIsImRhdGEiLCJzZXNzaW9uIiwiYXV0aCIsImdldFNlc3Npb24iLCJ0b2tlbiIsImFjY2Vzc190b2tlbiIsInVzZXJNZXNzYWdlIiwicm9sZSIsImNvbnRlbnQiLCJwYW5lbElkIiwicHJldiIsIm1OdW0iLCJleGVjIiwibVRpdGxlIiwibWVudGlvbnMiLCJjaGFwdGVyX251bWJlciIsInBhcnNlSW50IiwidGl0bGUiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwibWVzc2FnZSIsInVuZGVmaW5lZCIsImFzc2lzdGFudEluZGV4IiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwidmFsdWUiLCJkb25lIiwicmVhZCIsImNodW5rIiwiZGVjb2RlIiwic3RyZWFtIiwibGluZSIsInNwbGl0IiwidHJpbW1lZCIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImV2dCIsInR5cGUiLCJjb3B5IiwibXNnIiwiYWN0aW9uIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwibW9kZSIsImNoYW5nZXMiLCJwYW5lbF9zY3JpcHQiLCJpZCIsIml0ZW0iLCJyZWxlYXNlTG9jayIsIm9uUmVnZW5lcmF0ZSIsImJhY2tlbmQiLCJkaXYiLCJjbGFzc05hbWUiLCJyZWYiLCJtYXAiLCJtIiwiZHJhZ2dhYmxlIiwiQm9vbGVhbiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJkaXNhYmxlZCIsInVwZGF0ZVByb2plY3RTZXR0aW5ncyIsImNsZWFyVGltZW91dCIsInNwYW4iLCJ0ZXh0YXJlYSIsIm9uQ2hhbmdlIiwicGxhY2Vob2xkZXIiLCJyb3dzIiwib25LZXlEb3duIiwic2hpZnRLZXkiLCJ2IiwiYXJpYS1oYXNwb3B1cCIsImFyaWEtZXhwYW5kZWQiLCJ0YWJJbmRleCIsImFyaWEtaGlkZGVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/chat/Chat.tsx\n"));

/***/ })

});