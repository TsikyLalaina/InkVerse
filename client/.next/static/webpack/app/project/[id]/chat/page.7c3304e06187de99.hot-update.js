"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/project/[id]/chat/page",{

/***/ "(app-pages-browser)/./src/components/chat/Chat.tsx":
/*!**************************************!*\
  !*** ./src/components/chat/Chat.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Chat: function() { return /* binding */ Chat; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-dnd */ \"(app-pages-browser)/./node_modules/react-dnd/dist/core/DndProvider.js\");\n/* harmony import */ var react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dnd-html5-backend */ \"(app-pages-browser)/./node_modules/react-dnd-html5-backend/dist/index.js\");\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(app-pages-browser)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _ChatBubble__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ChatBubble */ \"(app-pages-browser)/./src/components/chat/ChatBubble.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/api */ \"(app-pages-browser)/./src/lib/api.ts\");\n/* harmony import */ var _barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUpRight,ChevronDown!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/chevron-down.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUpRight,ChevronDown!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-up-right.js\");\n/* __next_internal_client_entry_do_not_use__ Chat auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\nfunction Chat(param) {\n    let { chatId, initialMessages = [] } = param;\n    _s();\n    const supabase = (0,_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase)();\n    const api = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>(0,_lib_api__WEBPACK_IMPORTED_MODULE_4__.createApi)(supabase), [\n        supabase\n    ]);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialMessages);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [streaming, setStreaming] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [inputError, setInputError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const listRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modeMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modeMenuListRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [saveError, setSaveError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [pendingMode, setPendingMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [pendingSettings, setPendingSettings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [toastMsg, setToastMsg] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const toastTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const apiBase = \"http://localhost:3000\" || 0;\n    const [loadingHistory, setLoadingHistory] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [clientMode, setClientMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"chat\");\n    const [modeMenuOpen, setModeMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [modeMenuIndex, setModeMenuIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const cacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>\"inkverse_chat_\".concat(chatId, \"_messages\"), [\n        chatId\n    ]);\n    const [hasCache, setHasCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const messagesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(messages);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        var _listRef_current;\n        (_listRef_current = listRef.current) === null || _listRef_current === void 0 ? void 0 : _listRef_current.scrollTo({\n            top: listRef.current.scrollHeight,\n            behavior: \"smooth\"\n        });\n    }, [\n        messages.length\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const s =  true ? window.localStorage.getItem(cacheKey) : 0;\n            if (s) {\n                const arr = JSON.parse(s);\n                if (Array.isArray(arr)) {\n                    setMessages(arr);\n                    setHasCache(arr.length > 0);\n                }\n            }\n        } catch (e) {}\n    }, [\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // If parent provides messages later, set them only if list is empty\n        if (initialMessages.length && messages.length === 0) {\n            setMessages(initialMessages);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        initialMessages\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasCache) {\n                return;\n            }\n            try {\n                if (!hasCache) setLoadingHistory(true);\n                const history = await api.getChatMessagesByChatId(chatId);\n                if (!mounted) return;\n                const next = Array.isArray(history) ? history : [];\n                // Skip update if no change to avoid flicker\n                try {\n                    if (hasCache && JSON.stringify(next) === JSON.stringify(messagesRef.current)) {\n                        return;\n                    }\n                } catch (e) {}\n                setMessages(next);\n            } catch (e) {\n            // swallow network errors during initial hydration/revalidation\n            } finally{\n                if (mounted) setLoadingHistory(false);\n            }\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        chatId,\n        hasCache\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (true) window.localStorage.setItem(cacheKey, JSON.stringify(messages));\n        } catch (e) {}\n    }, [\n        messages,\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        messagesRef.current = messages;\n    }, [\n        messages\n    ]);\n    // Auto-resize textarea height with content, up to a max then scroll\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const el = inputRef.current;\n        if (!el) return;\n        el.style.height = \"auto\";\n        const max = 256; // px max height before scroll\n        const next = Math.min(el.scrollHeight, max);\n        el.style.height = \"\".concat(next, \"px\");\n    }, [\n        input\n    ]);\n    // Close mode menu on outside click\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onDocClick(e) {\n            if (!modeMenuOpen) return;\n            const t = e.target;\n            if (modeMenuRef.current && t && !modeMenuRef.current.contains(t)) {\n                setModeMenuOpen(false);\n            }\n        }\n        document.addEventListener(\"mousedown\", onDocClick);\n        return ()=>document.removeEventListener(\"mousedown\", onDocClick);\n    }, [\n        modeMenuOpen\n    ]);\n    // Keyboard: open/close menu and navigate options\n    const onModeButtonKeyDown = (e)=>{\n        if (e.key === \"ArrowDown\" || e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            setModeMenuIndex(clientMode === \"chat\" ? 0 : 1);\n            setModeMenuOpen(true);\n        } else if (e.key === \"Escape\") {\n            setModeMenuOpen(false);\n        }\n    };\n    const onMenuKeyDown = (e)=>{\n        if (e.key === \"ArrowDown\") {\n            e.preventDefault();\n            setModeMenuIndex((i)=>(i + 1) % 2);\n        } else if (e.key === \"ArrowUp\") {\n            e.preventDefault();\n            setModeMenuIndex((i)=>(i + 1 + 2) % 2);\n        } else if (e.key === \"Enter\") {\n            e.preventDefault();\n            if (modeMenuIndex === 0) setClientMode(\"chat\");\n            else setClientMode(\"action\");\n            setModeMenuOpen(false);\n        } else if (e.key === \"Escape\") {\n            setModeMenuOpen(false);\n        }\n    };\n    // Shortcut: Ctrl+L focuses input\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onKey(e) {\n            if ((e.ctrlKey || e.metaKey) && (e.key === \"l\" || e.key === \"L\")) {\n                var _inputRef_current;\n                e.preventDefault();\n                (_inputRef_current = inputRef.current) === null || _inputRef_current === void 0 ? void 0 : _inputRef_current.focus();\n            }\n        }\n        window.addEventListener(\"keydown\", onKey);\n        return ()=>window.removeEventListener(\"keydown\", onKey);\n    }, []);\n    // Focus menu container when opened for keyboard nav\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (modeMenuOpen) {\n            setTimeout(()=>{\n                var _modeMenuListRef_current;\n                return (_modeMenuListRef_current = modeMenuListRef.current) === null || _modeMenuListRef_current === void 0 ? void 0 : _modeMenuListRef_current.focus();\n            }, 0);\n        }\n    }, [\n        modeMenuOpen\n    ]);\n    const send = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (opts)=>{\n        var _opts_messageOverride;\n        const text = ((_opts_messageOverride = opts === null || opts === void 0 ? void 0 : opts.messageOverride) !== null && _opts_messageOverride !== void 0 ? _opts_messageOverride : input).trim();\n        if (!text && !(opts === null || opts === void 0 ? void 0 : opts.regeneratePanelId)) {\n            setInputError('Prompt is empty. Try something like: \"Write the opening scene of a dark fantasy.\"');\n            return;\n        }\n        setInputError(null);\n        const { data: { session } } = await supabase.auth.getSession();\n        const token = session === null || session === void 0 ? void 0 : session.access_token;\n        if (!token) return;\n        const userMessage = {\n            role: \"user\",\n            content: text,\n            panelId: (opts === null || opts === void 0 ? void 0 : opts.regeneratePanelId) || null\n        };\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInput(\"\");\n        setStreaming(true);\n        // Mentions parsing: @chapter<number> or @\"exact title\"\n        const mNum = /@chapter\\s*([0-9]+)/i.exec(text) || /@chapter_?([0-9]+)/i.exec(text);\n        const mTitle = /@\"([^\"]+)\"/.exec(text);\n        const mentions = {};\n        if (mNum === null || mNum === void 0 ? void 0 : mNum[1]) mentions.chapter_number = parseInt(mNum[1], 10);\n        if (mTitle === null || mTitle === void 0 ? void 0 : mTitle[1]) mentions.title = mTitle[1];\n        const res = await fetch(\"\".concat(apiBase, \"/api/chat/\").concat(chatId), {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": \"Bearer \".concat(token),\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                message: userMessage.content,\n                regeneratePanelId: (opts === null || opts === void 0 ? void 0 : opts.regeneratePanelId) || undefined,\n                clientMode,\n                mentions\n            })\n        });\n        if (!res.body) {\n            setStreaming(false);\n            return;\n        }\n        // Push empty assistant message to stream into\n        let assistantIndex = -1;\n        setMessages((prev)=>{\n            assistantIndex = prev.length;\n            return [\n                ...prev,\n                {\n                    role: \"assistant\",\n                    content: \"\"\n                }\n            ];\n        });\n        const reader = res.body.getReader();\n        const decoder = new TextDecoder();\n        try {\n            while(true){\n                const { value, done } = await reader.read();\n                if (done) break;\n                const chunk = decoder.decode(value, {\n                    stream: true\n                });\n                for (const line of chunk.split(\"\\n\")){\n                    const trimmed = line.trim();\n                    if (!trimmed.startsWith(\"data:\")) continue;\n                    const data = trimmed.slice(5).trim();\n                    if (!data) continue;\n                    try {\n                        const evt = JSON.parse(data);\n                        if (evt.type === \"text\" && evt.content) {\n                            setMessages((prev)=>{\n                                const copy = [\n                                    ...prev\n                                ];\n                                const msg = copy[assistantIndex];\n                                copy[assistantIndex] = {\n                                    ...msg,\n                                    content: ((msg === null || msg === void 0 ? void 0 : msg.content) || \"\") + evt.content\n                                };\n                                return copy;\n                            });\n                        } else if (evt.action === \"create_chapter\") {\n                            if (true) {\n                                window.dispatchEvent(new CustomEvent(\"workspace:create-draft\", {\n                                    detail: {\n                                        title: evt.title || \"Untitled Chapter\",\n                                        content: evt.content || \"\"\n                                    }\n                                }));\n                            }\n                        } else if (evt.action === \"confirm_mode\" && evt.mode) {\n                            setPendingMode(evt.mode);\n                            setMessages((prev)=>[\n                                    ...prev,\n                                    {\n                                        role: \"assistant\",\n                                        content: 'Pending mode change to \"'.concat(evt.mode, '\". Confirm?')\n                                    }\n                                ]);\n                        } else if (evt.action === \"confirm_settings\" && evt.changes) {\n                            if (clientMode === \"action\") {\n                                setPendingSettings(evt.changes);\n                                setMessages((prev)=>[\n                                        ...prev,\n                                        {\n                                            role: \"assistant\",\n                                            content: \"Pending settings update detected. Confirm to apply changes.\"\n                                        }\n                                    ]);\n                            } // ignore in Chat mode for safety\n                        } else if (evt.type === \"image_job\") {\n                        // Optionally reflect job queued state\n                        } else if (evt.action === \"convert_to_manhwa\") {\n                            if (true) {\n                                window.dispatchEvent(new CustomEvent(\"workspace:create-draft\", {\n                                    detail: {\n                                        title: \"Converted Panels\",\n                                        panel_script: evt.panel_script\n                                    }\n                                }));\n                            }\n                        } else if (evt.action === \"update_chapter\") {\n                            if (true) {\n                                window.dispatchEvent(new CustomEvent(\"workspace:update-chapter\", {\n                                    detail: {\n                                        id: evt.id,\n                                        chapter_number: evt.chapter_number,\n                                        title: evt.title,\n                                        content: evt.content\n                                    }\n                                }));\n                            }\n                        } else if (evt.action === \"upsert_character\" && evt.item) {\n                            if (true) {\n                                window.dispatchEvent(new CustomEvent(\"workspace:character-upsert\", {\n                                    detail: {\n                                        item: evt.item\n                                    }\n                                }));\n                            }\n                        } else if (evt.action === \"upsert_world\" && evt.item) {\n                            if (true) {\n                                window.dispatchEvent(new CustomEvent(\"workspace:world-upsert\", {\n                                    detail: {\n                                        item: evt.item\n                                    }\n                                }));\n                            }\n                        } else if (evt.type === \"error\") {\n                            // Append error to conversation\n                            setMessages((prev)=>[\n                                    ...prev,\n                                    {\n                                        role: \"assistant\",\n                                        content: \"Error: \".concat(evt.message)\n                                    }\n                                ]);\n                        } else if (evt.type === \"done\") {\n                            setStreaming(false);\n                        }\n                    } catch (e) {\n                    // ignore partial json lines\n                    }\n                }\n            }\n        } finally{\n            setStreaming(false);\n            reader.releaseLock();\n        }\n    }, [\n        apiBase,\n        input,\n        chatId,\n        supabase,\n        clientMode\n    ]);\n    const onRegenerate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((panelId)=>{\n        void send({\n            regeneratePanelId: panelId\n        });\n    }, [\n        send\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_dnd__WEBPACK_IMPORTED_MODULE_5__.DndProvider, {\n        backend: react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_6__.HTML5Backend,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex flex-col bg-bg-elevated\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    ref: listRef,\n                    className: \"flex-1 min-h-0 overflow-y-auto space-y-4 p-4\",\n                    children: [\n                        loadingHistory && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-secondary\",\n                            children: \"Loading previous messages…\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 302,\n                            columnNumber: 13\n                        }, this),\n                        messages.map((m, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatBubble__WEBPACK_IMPORTED_MODULE_3__.ChatBubble, {\n                                role: m.role,\n                                content: m.content,\n                                panelId: m.panelId,\n                                onRegenerate: onRegenerate,\n                                draggable: Boolean(m.panelId)\n                            }, i, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                lineNumber: 305,\n                                columnNumber: 13\n                            }, this)),\n                        streaming && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-secondary animate-pulse\",\n                            children: \"AI is typing…\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 315,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 300,\n                    columnNumber: 9\n                }, this),\n                toastMsg && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"fixed top-3 right-3 z-50\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"px-3 py-2 rounded bg-slate-950/90 border border-slate-800 text-slate-100 text-sm shadow-lg\",\n                        children: toastMsg\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                        lineNumber: 321,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 320,\n                    columnNumber: 9\n                }, this),\n                (pendingMode || pendingSettings) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"border-t border-border-default p-3 flex items-center justify-between gap-3 bg-bg-primary\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-primary\",\n                            children: [\n                                pendingMode && 'Confirm mode change to \"'.concat(pendingMode, '\"?'),\n                                pendingSettings && !pendingMode && \"Confirm applying pending settings changes?\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 329,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"px-3 py-1.5 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover transition-all duration-150\",\n                                    onClick: ()=>{\n                                        setPendingMode(null);\n                                        setPendingSettings(null);\n                                    },\n                                    children: \"Cancel\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 334,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"px-3 py-1.5 rounded-md bg-accent hover:bg-accent-hover text-white disabled:opacity-50 transition-all duration-150\",\n                                    disabled: saving || clientMode !== \"action\",\n                                    onClick: async ()=>{\n                                        setSaving(true);\n                                        setSaveError(null);\n                                        try {\n                                            if (pendingMode) {\n                                                // Mode is project-level; Chat component no longer knows projectId here\n                                                // This confirm block remains but requires a project-level handler outside\n                                                // For safety, we just clear pending and show a note.\n                                                // Notify rest of app (e.g., sidebar) to reflect mode immediately\n                                                if (true) {\n                                                    window.dispatchEvent(new CustomEvent(\"project:mode-updated\", {\n                                                        detail: {\n                                                            mode: pendingMode\n                                                        }\n                                                    }));\n                                                }\n                                                setMessages((prev)=>[\n                                                        ...prev,\n                                                        {\n                                                            role: \"assistant\",\n                                                            content: \"Mode updated to \".concat(pendingMode, \".\")\n                                                        }\n                                                    ]);\n                                                setPendingMode(null);\n                                            } else if (pendingSettings) {\n                                                // Settings are project-level; handle outside. Here we preview-only.\n                                                if (true) {\n                                                    window.dispatchEvent(new CustomEvent(\"project:settings-updated\", {\n                                                        detail: {\n                                                            changes: pendingSettings\n                                                        }\n                                                    }));\n                                                }\n                                                setMessages((prev)=>[\n                                                        ...prev,\n                                                        {\n                                                            role: \"assistant\",\n                                                            content: \"Settings updated.\"\n                                                        }\n                                                    ]);\n                                                setPendingSettings(null);\n                                                // Toast from chat confirm\n                                                if (toastTimer.current) clearTimeout(toastTimer.current);\n                                                setToastMsg(\"Settings saved\");\n                                                toastTimer.current = setTimeout(()=>setToastMsg(\"\"), 3000);\n                                            }\n                                        } catch (e) {\n                                            setSaveError((e === null || e === void 0 ? void 0 : e.message) || \"Failed to save\");\n                                            setMessages((prev)=>[\n                                                    ...prev,\n                                                    {\n                                                        role: \"assistant\",\n                                                        content: \"Error persisting changes: \".concat((e === null || e === void 0 ? void 0 : e.message) || \"Failed to save\")\n                                                    }\n                                                ]);\n                                        } finally{\n                                            setSaving(false);\n                                        }\n                                    },\n                                    children: \"Confirm\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 340,\n                                    columnNumber: 15\n                                }, this),\n                                clientMode !== \"action\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-[11px] text-text-tertiary\",\n                                    children: \"Switch to Action mode to apply\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 380,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 333,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 328,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"border-t border-border-default p-3 bg-bg-primary\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex gap-3 items-end\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 relative\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                        ref: inputRef,\n                                        value: input,\n                                        onChange: (e)=>setInput(e.target.value),\n                                        placeholder: \"Chat with Cascade\",\n                                        rows: 2,\n                                        className: \"w-full bg-bg-elevated border border-border-default rounded-2xl pl-12 pr-12 pt-2 pb-10 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent resize-none min-h-[80px] max-h-72 overflow-y-auto transition-colors duration-150\",\n                                        onKeyDown: (e)=>{\n                                            if (e.key === \"Enter\" && !e.shiftKey) {\n                                                e.preventDefault();\n                                                void send();\n                                            }\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 390,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute left-2 bottom-2\",\n                                        ref: modeMenuRef,\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                type: \"button\",\n                                                className: \"text-xs px-3 py-2 rounded-lg border border-border-default \".concat(clientMode === \"chat\" ? \"text-success\" : \"text-accent\", \" bg-bg-elevated hover:bg-bg-hover inline-flex items-center gap-1.5 transition-all duration-150\"),\n                                                onClick: ()=>{\n                                                    setModeMenuIndex(clientMode === \"chat\" ? 0 : 1);\n                                                    setModeMenuOpen((v)=>!v);\n                                                },\n                                                \"aria-haspopup\": \"menu\",\n                                                \"aria-expanded\": modeMenuOpen,\n                                                onKeyDown: onModeButtonKeyDown,\n                                                title: \"Mode\",\n                                                children: [\n                                                    clientMode === \"chat\" ? \"Chat\" : \"Action\",\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                        className: \"w-3 h-3\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 416,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 406,\n                                                columnNumber: 17\n                                            }, this),\n                                            modeMenuOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"absolute bottom-full mb-2 left-0 w-64 rounded-lg border border-border-default bg-bg-elevated shadow-elevation p-1.5 text-xs text-text-primary z-20\",\n                                                role: \"menu\",\n                                                tabIndex: -1,\n                                                ref: modeMenuListRef,\n                                                onKeyDown: onMenuKeyDown,\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"w-full text-left px-3 py-2.5 rounded-md hover:bg-bg-hover transition-all duration-150 \".concat(modeMenuIndex === 0 ? \"ring-1 ring-accent\" : \"\", \" \").concat(clientMode === \"chat\" ? \"bg-bg-hover\" : \"\"),\n                                                        onClick: ()=>{\n                                                            setClientMode(\"chat\");\n                                                            setModeMenuOpen(false);\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"font-semibold text-text-primary\",\n                                                                children: \"Chat\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 430,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-text-tertiary text-[11px] mt-0.5\",\n                                                                children: \"Brainstorm, outline, preview. No writes.\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 431,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 426,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"w-full text-left px-3 py-2.5 rounded-md hover:bg-bg-hover transition-all duration-150 mt-1 \".concat(modeMenuIndex === 1 ? \"ring-1 ring-accent\" : \"\", \" \").concat(clientMode === \"action\" ? \"bg-bg-hover\" : \"\"),\n                                                        onClick: ()=>{\n                                                            setClientMode(\"action\");\n                                                            setModeMenuOpen(false);\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"font-semibold text-text-primary\",\n                                                                children: \"Action\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 437,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-text-tertiary text-[11px] mt-0.5\",\n                                                                children: \"Enable saving settings and chapters.\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 438,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 433,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 419,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 405,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>void send(),\n                                        disabled: streaming || !input.trim(),\n                                        className: \"absolute right-2 bottom-2 bg-accent hover:bg-accent-hover disabled:opacity-40 disabled:cursor-not-allowed text-white w-8 h-8 rounded-lg inline-flex items-center justify-center transition-all duration-150\",\n                                        title: \"Send\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                className: \"w-4 h-4\",\n                                                \"aria-hidden\": \"true\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 449,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"sr-only\",\n                                                children: \"Send\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 450,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 443,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                lineNumber: 389,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 387,\n                            columnNumber: 11\n                        }, this),\n                        inputError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-2 text-xs text-red-400 p-2 rounded-lg bg-red-950/20 border border-red-500/20\",\n                            children: inputError\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 454,\n                            columnNumber: 26\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 386,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n            lineNumber: 298,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n        lineNumber: 297,\n        columnNumber: 5\n    }, this);\n}\n_s(Chat, \"V/sCbzveP6T0G6qFcZ9lZ8tpL8g=\", false, function() {\n    return [\n        _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase\n    ];\n});\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL2NoYXQvQ2hhdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUUwRTtBQUVsQztBQUNlO0FBQ2U7QUFDNUI7QUFDSjtBQUNtQjtBQVNsRCxTQUFTWSxLQUFLLEtBQXFGO1FBQXJGLEVBQUVDLE1BQU0sRUFBRUMsa0JBQWtCLEVBQUUsRUFBdUQsR0FBckY7O0lBQ25CLE1BQU1DLFdBQVdSLG1GQUFXQTtJQUM1QixNQUFNUyxNQUFNZCw4Q0FBT0EsQ0FBQyxJQUFNTyxtREFBU0EsQ0FBQ00sV0FBVztRQUFDQTtLQUFTO0lBQ3pELE1BQU0sQ0FBQ0UsVUFBVUMsWUFBWSxHQUFHZCwrQ0FBUUEsQ0FBZ0JVO0lBQ3hELE1BQU0sQ0FBQ0ssT0FBT0MsU0FBUyxHQUFHaEIsK0NBQVFBLENBQUM7SUFDbkMsTUFBTSxDQUFDaUIsV0FBV0MsYUFBYSxHQUFHbEIsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDbUIsWUFBWUMsY0FBYyxHQUFHcEIsK0NBQVFBLENBQWdCO0lBQzVELE1BQU1xQixVQUFVdEIsNkNBQU1BLENBQWlCO0lBQ3ZDLE1BQU11QixXQUFXdkIsNkNBQU1BLENBQXNCO0lBQzdDLE1BQU13QixjQUFjeEIsNkNBQU1BLENBQWlCO0lBQzNDLE1BQU15QixrQkFBa0J6Qiw2Q0FBTUEsQ0FBaUI7SUFFL0MsTUFBTSxDQUFDMEIsUUFBUUMsVUFBVSxHQUFHMUIsK0NBQVFBLENBQUM7SUFDckMsTUFBTSxDQUFDMkIsV0FBV0MsYUFBYSxHQUFHNUIsK0NBQVFBLENBQWdCO0lBRTFELE1BQU0sQ0FBQzZCLGFBQWFDLGVBQWUsR0FBRzlCLCtDQUFRQSxDQUF3QztJQUN0RixNQUFNLENBQUMrQixpQkFBaUJDLG1CQUFtQixHQUFHaEMsK0NBQVFBLENBQWE7SUFDbkUsTUFBTSxDQUFDaUMsVUFBVUMsWUFBWSxHQUFHbEMsK0NBQVFBLENBQVM7SUFDakQsTUFBTW1DLGFBQWFwQyw2Q0FBTUEs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QURkSyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvY29tcG9uZW50cy9jaGF0L0NoYXQudHN4PzVlMTIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdHlwZSBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBEbmRQcm92aWRlciB9IGZyb20gJ3JlYWN0LWRuZCc7XG5pbXBvcnQgeyBIVE1MNUJhY2tlbmQgfSBmcm9tICdyZWFjdC1kbmQtaHRtbDUtYmFja2VuZCc7XG5pbXBvcnQgeyB1c2VTdXBhYmFzZSB9IGZyb20gJ0AvY29tcG9uZW50cy9wcm92aWRlcnMvU3VwYWJhc2VQcm92aWRlcic7XG5pbXBvcnQgeyBDaGF0QnViYmxlIH0gZnJvbSAnLi9DaGF0QnViYmxlJztcbmltcG9ydCB7IGNyZWF0ZUFwaSB9IGZyb20gJ0AvbGliL2FwaSc7XG5pbXBvcnQgeyBBcnJvd1VwUmlnaHQsIENoZXZyb25Eb3duIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcblxuZXhwb3J0IHR5cGUgQ2hhdE1lc3NhZ2UgPSB7XG4gIGlkPzogc3RyaW5nO1xuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JztcbiAgY29udGVudDogc3RyaW5nO1xuICBwYW5lbElkPzogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBDaGF0KHsgY2hhdElkLCBpbml0aWFsTWVzc2FnZXMgPSBbXSB9OiB7IGNoYXRJZDogc3RyaW5nOyBpbml0aWFsTWVzc2FnZXM/OiBDaGF0TWVzc2FnZVtdIH0pIHtcbiAgY29uc3Qgc3VwYWJhc2UgPSB1c2VTdXBhYmFzZSgpO1xuICBjb25zdCBhcGkgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZUFwaShzdXBhYmFzZSksIFtzdXBhYmFzZV0pO1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPENoYXRNZXNzYWdlW10+KGluaXRpYWxNZXNzYWdlcyk7XG4gIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbc3RyZWFtaW5nLCBzZXRTdHJlYW1pbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaW5wdXRFcnJvciwgc2V0SW5wdXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgbGlzdFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBtb2RlTWVudVJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IG1vZGVNZW51TGlzdFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG5cbiAgY29uc3QgW3NhdmluZywgc2V0U2F2aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NhdmVFcnJvciwgc2V0U2F2ZUVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IFtwZW5kaW5nTW9kZSwgc2V0UGVuZGluZ01vZGVdID0gdXNlU3RhdGU8J25vdmVsJyB8ICdtYW5od2EnIHwgJ2NvbnZlcnQnIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtwZW5kaW5nU2V0dGluZ3MsIHNldFBlbmRpbmdTZXR0aW5nc10gPSB1c2VTdGF0ZTxhbnkgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3RvYXN0TXNnLCBzZXRUb2FzdE1zZ10gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKTtcbiAgY29uc3QgdG9hc3RUaW1lciA9IHVzZVJlZjxSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IGFwaUJhc2UgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xuXG4gIGNvbnN0IFtsb2FkaW5nSGlzdG9yeSwgc2V0TG9hZGluZ0hpc3RvcnldID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBbY2xpZW50TW9kZSwgc2V0Q2xpZW50TW9kZV0gPSB1c2VTdGF0ZTwnY2hhdCcgfCAnYWN0aW9uJz4oJ2NoYXQnKTtcbiAgY29uc3QgW21vZGVNZW51T3Blbiwgc2V0TW9kZU1lbnVPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW21vZGVNZW51SW5kZXgsIHNldE1vZGVNZW51SW5kZXhdID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcblxuICBjb25zdCBjYWNoZUtleSA9IHVzZU1lbW8oKCkgPT4gYGlua3ZlcnNlX2NoYXRfJHtjaGF0SWR9X21lc3NhZ2VzYCwgW2NoYXRJZF0pO1xuICBjb25zdCBbaGFzQ2FjaGUsIHNldEhhc0NhY2hlXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgbWVzc2FnZXNSZWYgPSB1c2VSZWY8Q2hhdE1lc3NhZ2VbXT4obWVzc2FnZXMpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGlzdFJlZi5jdXJyZW50Py5zY3JvbGxUbyh7IHRvcDogbGlzdFJlZi5jdXJyZW50LnNjcm9sbEhlaWdodCwgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICB9LCBbbWVzc2FnZXMubGVuZ3RoXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGNhY2hlS2V5KSA6IG51bGw7XG4gICAgICBpZiAocykge1xuICAgICAgICBjb25zdCBhcnIgPSBKU09OLnBhcnNlKHMpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgICAgICAgc2V0TWVzc2FnZXMoYXJyIGFzIENoYXRNZXNzYWdlW10pO1xuICAgICAgICAgIHNldEhhc0NhY2hlKChhcnIgYXMgYW55W10pLmxlbmd0aCA+IDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCB7fVxuICB9LCBbY2FjaGVLZXldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIElmIHBhcmVudCBwcm92aWRlcyBtZXNzYWdlcyBsYXRlciwgc2V0IHRoZW0gb25seSBpZiBsaXN0IGlzIGVtcHR5XG4gICAgaWYgKGluaXRpYWxNZXNzYWdlcy5sZW5ndGggJiYgbWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBzZXRNZXNzYWdlcyhpbml0aWFsTWVzc2FnZXMpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtpbml0aWFsTWVzc2FnZXNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBtb3VudGVkID0gdHJ1ZTtcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGhhc0NhY2hlKSB7IHJldHVybjsgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFoYXNDYWNoZSkgc2V0TG9hZGluZ0hpc3RvcnkodHJ1ZSk7XG4gICAgICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBhcGkuZ2V0Q2hhdE1lc3NhZ2VzQnlDaGF0SWQoY2hhdElkKTtcbiAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG5leHQgPSBBcnJheS5pc0FycmF5KGhpc3RvcnkpID8gaGlzdG9yeSBhcyBhbnkgOiBbXTtcbiAgICAgICAgLy8gU2tpcCB1cGRhdGUgaWYgbm8gY2hhbmdlIHRvIGF2b2lkIGZsaWNrZXJcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoaGFzQ2FjaGUgJiYgSlNPTi5zdHJpbmdpZnkobmV4dCkgPT09IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VzUmVmLmN1cnJlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHt9XG4gICAgICAgIHNldE1lc3NhZ2VzKG5leHQpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIC8vIHN3YWxsb3cgbmV0d29yayBlcnJvcnMgZHVyaW5nIGluaXRpYWwgaHlkcmF0aW9uL3JldmFsaWRhdGlvblxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKG1vdW50ZWQpIHNldExvYWRpbmdIaXN0b3J5KGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KSgpO1xuICAgIHJldHVybiAoKSA9PiB7IG1vdW50ZWQgPSBmYWxzZTsgfTtcbiAgfSwgW2FwaSwgY2hhdElkLCBoYXNDYWNoZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNhY2hlS2V5LCBKU09OLnN0cmluZ2lmeShtZXNzYWdlcykpO1xuICAgIH0gY2F0Y2gge31cbiAgfSwgW21lc3NhZ2VzLCBjYWNoZUtleV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7IG1lc3NhZ2VzUmVmLmN1cnJlbnQgPSBtZXNzYWdlczsgfSwgW21lc3NhZ2VzXSk7XG5cbiAgLy8gQXV0by1yZXNpemUgdGV4dGFyZWEgaGVpZ2h0IHdpdGggY29udGVudCwgdXAgdG8gYSBtYXggdGhlbiBzY3JvbGxcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBlbCA9IGlucHV0UmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFlbCkgcmV0dXJuO1xuICAgIGVsLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICBjb25zdCBtYXggPSAyNTY7IC8vIHB4IG1heCBoZWlnaHQgYmVmb3JlIHNjcm9sbFxuICAgIGNvbnN0IG5leHQgPSBNYXRoLm1pbihlbC5zY3JvbGxIZWlnaHQsIG1heCk7XG4gICAgZWwuc3R5bGUuaGVpZ2h0ID0gYCR7bmV4dH1weGA7XG4gIH0sIFtpbnB1dF0pO1xuXG4gIC8vIENsb3NlIG1vZGUgbWVudSBvbiBvdXRzaWRlIGNsaWNrXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZnVuY3Rpb24gb25Eb2NDbGljayhlOiBNb3VzZUV2ZW50KSB7XG4gICAgICBpZiAoIW1vZGVNZW51T3BlbikgcmV0dXJuO1xuICAgICAgY29uc3QgdCA9IGUudGFyZ2V0IGFzIE5vZGUgfCBudWxsO1xuICAgICAgaWYgKG1vZGVNZW51UmVmLmN1cnJlbnQgJiYgdCAmJiAhbW9kZU1lbnVSZWYuY3VycmVudC5jb250YWlucyh0KSkge1xuICAgICAgICBzZXRNb2RlTWVudU9wZW4oZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkRvY0NsaWNrKTtcbiAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Eb2NDbGljayk7XG4gIH0sIFttb2RlTWVudU9wZW5dKTtcblxuICAvLyBLZXlib2FyZDogb3Blbi9jbG9zZSBtZW51IGFuZCBuYXZpZ2F0ZSBvcHRpb25zXG4gIGNvbnN0IG9uTW9kZUJ1dHRvbktleURvd24gPSAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MQnV0dG9uRWxlbWVudD4pID0+IHtcbiAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nIHx8IGUua2V5ID09PSAnRW50ZXInIHx8IGUua2V5ID09PSAnICcpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHNldE1vZGVNZW51SW5kZXgoY2xpZW50TW9kZSA9PT0gJ2NoYXQnID8gMCA6IDEpO1xuICAgICAgc2V0TW9kZU1lbnVPcGVuKHRydWUpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBzZXRNb2RlTWVudU9wZW4oZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvbk1lbnVLZXlEb3duID0gKGU6IFJlYWN0LktleWJvYXJkRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSAnQXJyb3dEb3duJykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc2V0TW9kZU1lbnVJbmRleCgoaSkgPT4gKGkgKyAxKSAlIDIpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc2V0TW9kZU1lbnVJbmRleCgoaSkgPT4gKGkgKyAxICsgMikgJSAyKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAobW9kZU1lbnVJbmRleCA9PT0gMCkgc2V0Q2xpZW50TW9kZSgnY2hhdCcpO1xuICAgICAgZWxzZSBzZXRDbGllbnRNb2RlKCdhY3Rpb24nKTtcbiAgICAgIHNldE1vZGVNZW51T3BlbihmYWxzZSk7XG4gICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHNldE1vZGVNZW51T3BlbihmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNob3J0Y3V0OiBDdHJsK0wgZm9jdXNlcyBpbnB1dFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIG9uS2V5KGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgIGlmICgoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkgJiYgKGUua2V5ID09PSAnbCcgfHwgZS5rZXkgPT09ICdMJykpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpbnB1dFJlZi5jdXJyZW50Py5mb2N1cygpO1xuICAgICAgfVxuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5KTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleSk7XG4gIH0sIFtdKTtcblxuICAvLyBGb2N1cyBtZW51IGNvbnRhaW5lciB3aGVuIG9wZW5lZCBmb3Iga2V5Ym9hcmQgbmF2XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG1vZGVNZW51T3Blbikge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBtb2RlTWVudUxpc3RSZWYuY3VycmVudD8uZm9jdXMoKSwgMCk7XG4gICAgfVxuICB9LCBbbW9kZU1lbnVPcGVuXSk7XG5cbiAgY29uc3Qgc2VuZCA9IHVzZUNhbGxiYWNrKGFzeW5jIChvcHRzPzogeyByZWdlbmVyYXRlUGFuZWxJZD86IHN0cmluZzsgbWVzc2FnZU92ZXJyaWRlPzogc3RyaW5nIH0pID0+IHtcbiAgICBjb25zdCB0ZXh0ID0gKG9wdHM/Lm1lc3NhZ2VPdmVycmlkZSA/PyBpbnB1dCkudHJpbSgpO1xuICAgIGlmICghdGV4dCAmJiAhb3B0cz8ucmVnZW5lcmF0ZVBhbmVsSWQpIHtcbiAgICAgIHNldElucHV0RXJyb3IoJ1Byb21wdCBpcyBlbXB0eS4gVHJ5IHNvbWV0aGluZyBsaWtlOiBcIldyaXRlIHRoZSBvcGVuaW5nIHNjZW5lIG9mIGEgZGFyayBmYW50YXN5LlwiJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldElucHV0RXJyb3IobnVsbCk7XG5cbiAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcbiAgICBjb25zdCB0b2tlbiA9IHNlc3Npb24/LmFjY2Vzc190b2tlbjtcbiAgICBpZiAoIXRva2VuKSByZXR1cm47XG5cbiAgICBjb25zdCB1c2VyTWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7IHJvbGU6ICd1c2VyJywgY29udGVudDogdGV4dCwgcGFuZWxJZDogb3B0cz8ucmVnZW5lcmF0ZVBhbmVsSWQgfHwgbnVsbCB9O1xuICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgdXNlck1lc3NhZ2VdKTtcbiAgICBzZXRJbnB1dCgnJyk7XG4gICAgc2V0U3RyZWFtaW5nKHRydWUpO1xuXG4gICAgLy8gTWVudGlvbnMgcGFyc2luZzogQGNoYXB0ZXI8bnVtYmVyPiBvciBAXCJleGFjdCB0aXRsZVwiXG4gICAgY29uc3QgbU51bSA9IC9AY2hhcHRlclxccyooWzAtOV0rKS9pLmV4ZWModGV4dCkgfHwgL0BjaGFwdGVyXz8oWzAtOV0rKS9pLmV4ZWModGV4dCk7XG4gICAgY29uc3QgbVRpdGxlID0gL0BcIihbXlwiXSspXCIvLmV4ZWModGV4dCk7XG4gICAgY29uc3QgbWVudGlvbnM6IGFueSA9IHt9O1xuICAgIGlmIChtTnVtPy5bMV0pIG1lbnRpb25zLmNoYXB0ZXJfbnVtYmVyID0gcGFyc2VJbnQobU51bVsxXSwgMTApO1xuICAgIGlmIChtVGl0bGU/LlsxXSkgbWVudGlvbnMudGl0bGUgPSBtVGl0bGVbMV07XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHthcGlCYXNlfS9hcGkvY2hhdC8ke2NoYXRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2U6IHVzZXJNZXNzYWdlLmNvbnRlbnQsIHJlZ2VuZXJhdGVQYW5lbElkOiBvcHRzPy5yZWdlbmVyYXRlUGFuZWxJZCB8fCB1bmRlZmluZWQsIGNsaWVudE1vZGUsIG1lbnRpb25zIH0pLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXMuYm9keSkge1xuICAgICAgc2V0U3RyZWFtaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQdXNoIGVtcHR5IGFzc2lzdGFudCBtZXNzYWdlIHRvIHN0cmVhbSBpbnRvXG4gICAgbGV0IGFzc2lzdGFudEluZGV4ID0gLTE7XG4gICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IHtcbiAgICAgIGFzc2lzdGFudEluZGV4ID0gcHJldi5sZW5ndGg7XG4gICAgICByZXR1cm4gWy4uLnByZXYsIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICcnIH1dO1xuICAgIH0pO1xuXG4gICAgY29uc3QgcmVhZGVyID0gcmVzLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChkb25lKSBicmVhaztcbiAgICAgICAgY29uc3QgY2h1bmsgPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBjaHVuay5zcGxpdCgnXFxuJykpIHtcbiAgICAgICAgICBjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XG4gICAgICAgICAgaWYgKCF0cmltbWVkLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIGNvbnRpbnVlO1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSB0cmltbWVkLnNsaWNlKDUpLnRyaW0oKTtcbiAgICAgICAgICBpZiAoIWRhdGEpIGNvbnRpbnVlO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBldnQgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAndGV4dCcgJiYgZXZ0LmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb3B5ID0gWy4uLnByZXZdO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IGNvcHlbYXNzaXN0YW50SW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvcHlbYXNzaXN0YW50SW5kZXhdID0geyAuLi5tc2csIGNvbnRlbnQ6IChtc2c/LmNvbnRlbnQgfHwgJycpICsgZXZ0LmNvbnRlbnQgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29weTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICdjcmVhdGVfY2hhcHRlcicpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd3b3Jrc3BhY2U6Y3JlYXRlLWRyYWZ0JywgeyBkZXRhaWw6IHsgdGl0bGU6IGV2dC50aXRsZSB8fCAnVW50aXRsZWQgQ2hhcHRlcicsIGNvbnRlbnQ6IGV2dC5jb250ZW50IHx8ICcnIH0gfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICdjb25maXJtX21vZGUnICYmIGV2dC5tb2RlKSB7XG4gICAgICAgICAgICAgIHNldFBlbmRpbmdNb2RlKGV2dC5tb2RlKTtcbiAgICAgICAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiBgUGVuZGluZyBtb2RlIGNoYW5nZSB0byBcIiR7ZXZ0Lm1vZGV9XCIuIENvbmZpcm0/YCB9XSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICdjb25maXJtX3NldHRpbmdzJyAmJiBldnQuY2hhbmdlcykge1xuICAgICAgICAgICAgICBpZiAoY2xpZW50TW9kZSA9PT0gJ2FjdGlvbicpIHtcbiAgICAgICAgICAgICAgICBzZXRQZW5kaW5nU2V0dGluZ3MoZXZ0LmNoYW5nZXMpO1xuICAgICAgICAgICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJ1BlbmRpbmcgc2V0dGluZ3MgdXBkYXRlIGRldGVjdGVkLiBDb25maXJtIHRvIGFwcGx5IGNoYW5nZXMuJyB9XSk7XG4gICAgICAgICAgICAgIH0gLy8gaWdub3JlIGluIENoYXQgbW9kZSBmb3Igc2FmZXR5XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnaW1hZ2Vfam9iJykge1xuICAgICAgICAgICAgICAvLyBPcHRpb25hbGx5IHJlZmxlY3Qgam9iIHF1ZXVlZCBzdGF0ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQuYWN0aW9uID09PSAnY29udmVydF90b19tYW5od2EnKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd29ya3NwYWNlOmNyZWF0ZS1kcmFmdCcsIHsgZGV0YWlsOiB7IHRpdGxlOiAnQ29udmVydGVkIFBhbmVscycsIHBhbmVsX3NjcmlwdDogZXZ0LnBhbmVsX3NjcmlwdCB9IH0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQuYWN0aW9uID09PSAndXBkYXRlX2NoYXB0ZXInKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd29ya3NwYWNlOnVwZGF0ZS1jaGFwdGVyJywgeyBkZXRhaWw6IHsgaWQ6IGV2dC5pZCwgY2hhcHRlcl9udW1iZXI6IGV2dC5jaGFwdGVyX251bWJlciwgdGl0bGU6IGV2dC50aXRsZSwgY29udGVudDogZXZ0LmNvbnRlbnQgfSB9KSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LmFjdGlvbiA9PT0gJ3Vwc2VydF9jaGFyYWN0ZXInICYmIGV2dC5pdGVtKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd29ya3NwYWNlOmNoYXJhY3Rlci11cHNlcnQnLCB7IGRldGFpbDogeyBpdGVtOiBldnQuaXRlbSB9IH0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQuYWN0aW9uID09PSAndXBzZXJ0X3dvcmxkJyAmJiBldnQuaXRlbSkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3dvcmtzcGFjZTp3b3JsZC11cHNlcnQnLCB7IGRldGFpbDogeyBpdGVtOiBldnQuaXRlbSB9IH0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAvLyBBcHBlbmQgZXJyb3IgdG8gY29udmVyc2F0aW9uXG4gICAgICAgICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogYEVycm9yOiAke2V2dC5tZXNzYWdlfWAgfV0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ2RvbmUnKSB7XG4gICAgICAgICAgICAgIHNldFN0cmVhbWluZyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgcGFydGlhbCBqc29uIGxpbmVzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFN0cmVhbWluZyhmYWxzZSk7XG4gICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICB9XG4gIH0sIFthcGlCYXNlLCBpbnB1dCwgY2hhdElkLCBzdXBhYmFzZSwgY2xpZW50TW9kZV0pO1xuXG4gIGNvbnN0IG9uUmVnZW5lcmF0ZSA9IHVzZUNhbGxiYWNrKChwYW5lbElkOiBzdHJpbmcpID0+IHtcbiAgICB2b2lkIHNlbmQoeyByZWdlbmVyYXRlUGFuZWxJZDogcGFuZWxJZCB9KTtcbiAgfSwgW3NlbmRdKTtcblxuICByZXR1cm4gKFxuICAgIDxEbmRQcm92aWRlciBiYWNrZW5kPXtIVE1MNUJhY2tlbmR9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZmxleCBmbGV4LWNvbCBiZy1iZy1lbGV2YXRlZFwiPlxuICAgICAgICB7LyogTWVzc2FnZXMgQXJlYSB3aXRoIFNjcm9sbGJhciAqL31cbiAgICAgICAgPGRpdiByZWY9e2xpc3RSZWZ9IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4taC0wIG92ZXJmbG93LXktYXV0byBzcGFjZS15LTQgcC00XCI+XG4gICAgICAgICAge2xvYWRpbmdIaXN0b3J5ICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXRleHQtc2Vjb25kYXJ5XCI+TG9hZGluZyBwcmV2aW91cyBtZXNzYWdlc+KApjwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge21lc3NhZ2VzLm1hcCgobSwgaSkgPT4gKFxuICAgICAgICAgICAgPENoYXRCdWJibGVcbiAgICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgICByb2xlPXttLnJvbGV9XG4gICAgICAgICAgICAgIGNvbnRlbnQ9e20uY29udGVudH1cbiAgICAgICAgICAgICAgcGFuZWxJZD17bS5wYW5lbElkfVxuICAgICAgICAgICAgICBvblJlZ2VuZXJhdGU9e29uUmVnZW5lcmF0ZX1cbiAgICAgICAgICAgICAgZHJhZ2dhYmxlPXtCb29sZWFuKG0ucGFuZWxJZCl9XG4gICAgICAgICAgICAvPilcbiAgICAgICAgICApfVxuICAgICAgICAgIHtzdHJlYW1pbmcgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtdGV4dC1zZWNvbmRhcnkgYW5pbWF0ZS1wdWxzZVwiPkFJIGlzIHR5cGluZ+KApjwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICB7dG9hc3RNc2cgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIHRvcC0zIHJpZ2h0LTMgei01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtMyBweS0yIHJvdW5kZWQgYmctc2xhdGUtOTUwLzkwIGJvcmRlciBib3JkZXItc2xhdGUtODAwIHRleHQtc2xhdGUtMTAwIHRleHQtc20gc2hhZG93LWxnXCI+XG4gICAgICAgICAgICB7dG9hc3RNc2d9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgICAgXG4gICAgICAgIHsocGVuZGluZ01vZGUgfHwgcGVuZGluZ1NldHRpbmdzKSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBib3JkZXItYm9yZGVyLWRlZmF1bHQgcC0zIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBnYXAtMyBiZy1iZy1wcmltYXJ5XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC10ZXh0LXByaW1hcnlcIj5cbiAgICAgICAgICAgICAge3BlbmRpbmdNb2RlICYmIGBDb25maXJtIG1vZGUgY2hhbmdlIHRvIFwiJHtwZW5kaW5nTW9kZX1cIj9gfVxuICAgICAgICAgICAgICB7cGVuZGluZ1NldHRpbmdzICYmICFwZW5kaW5nTW9kZSAmJiAnQ29uZmlybSBhcHBseWluZyBwZW5kaW5nIHNldHRpbmdzIGNoYW5nZXM/J31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xLjUgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6YmctYmctaG92ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IHNldFBlbmRpbmdNb2RlKG51bGwpOyBzZXRQZW5kaW5nU2V0dGluZ3MobnVsbCk7IH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTEuNSByb3VuZGVkLW1kIGJnLWFjY2VudCBob3ZlcjpiZy1hY2NlbnQtaG92ZXIgdGV4dC13aGl0ZSBkaXNhYmxlZDpvcGFjaXR5LTUwIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NhdmluZyB8fCBjbGllbnRNb2RlICE9PSAnYWN0aW9uJ31cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRTYXZpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICBzZXRTYXZlRXJyb3IobnVsbCk7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ01vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBNb2RlIGlzIHByb2plY3QtbGV2ZWw7IENoYXQgY29tcG9uZW50IG5vIGxvbmdlciBrbm93cyBwcm9qZWN0SWQgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY29uZmlybSBibG9jayByZW1haW5zIGJ1dCByZXF1aXJlcyBhIHByb2plY3QtbGV2ZWwgaGFuZGxlciBvdXRzaWRlXG4gICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHNhZmV0eSwgd2UganVzdCBjbGVhciBwZW5kaW5nIGFuZCBzaG93IGEgbm90ZS5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZnkgcmVzdCBvZiBhcHAgKGUuZy4sIHNpZGViYXIpIHRvIHJlZmxlY3QgbW9kZSBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdwcm9qZWN0Om1vZGUtdXBkYXRlZCcsIHsgZGV0YWlsOiB7IG1vZGU6IHBlbmRpbmdNb2RlIH0gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IGBNb2RlIHVwZGF0ZWQgdG8gJHtwZW5kaW5nTW9kZX0uYCB9XSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0UGVuZGluZ01vZGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVuZGluZ1NldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gU2V0dGluZ3MgYXJlIHByb2plY3QtbGV2ZWw7IGhhbmRsZSBvdXRzaWRlLiBIZXJlIHdlIHByZXZpZXctb25seS5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgncHJvamVjdDpzZXR0aW5ncy11cGRhdGVkJywgeyBkZXRhaWw6IHsgY2hhbmdlczogcGVuZGluZ1NldHRpbmdzIH0gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdTZXR0aW5ncyB1cGRhdGVkLicgfV0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldFBlbmRpbmdTZXR0aW5ncyhudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBUb2FzdCBmcm9tIGNoYXQgY29uZmlybVxuICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2FzdFRpbWVyLmN1cnJlbnQpIGNsZWFyVGltZW91dCh0b2FzdFRpbWVyLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldFRvYXN0TXNnKCdTZXR0aW5ncyBzYXZlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0VGltZXIuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0VG9hc3RNc2coJycpLCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNhdmVFcnJvcihlPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gc2F2ZScpO1xuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IGBFcnJvciBwZXJzaXN0aW5nIGNoYW5nZXM6ICR7ZT8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHNhdmUnfWAgfV0pO1xuICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2F2aW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ29uZmlybVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAge2NsaWVudE1vZGUgIT09ICdhY3Rpb24nICYmIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LVsxMXB4XSB0ZXh0LXRleHQtdGVydGlhcnlcIj5Td2l0Y2ggdG8gQWN0aW9uIG1vZGUgdG8gYXBwbHk8L3NwYW4+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAgey8qIElucHV0IEFyZWEgLSBGaXhlZCBhdCBCb3R0b20gKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLXQgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHAtMyBiZy1iZy1wcmltYXJ5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0zIGl0ZW1zLWVuZFwiPlxuICAgICAgICAgICAgey8qIElucHV0IEZpZWxkIHdpdGggSW50ZWdyYXRlZCBTZW5kIEJ1dHRvbiBhbmQgTW9kZSBTZWxlY3RvciBpbnNpZGUgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSByZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICByZWY9e2lucHV0UmVmfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtpbnB1dH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldElucHV0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNoYXQgd2l0aCBDYXNjYWRlXCJcbiAgICAgICAgICAgICAgICByb3dzPXsyfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1lbGV2YXRlZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtMnhsIHBsLTEyIHByLTEyIHB0LTIgcGItMTAgdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50IHJlc2l6ZS1ub25lIG1pbi1oLVs4MHB4XSBtYXgtaC03MiBvdmVyZmxvdy15LWF1dG8gdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICBvbktleURvd249eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHNlbmQoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB7LyogTW9kZSBTZWxlY3RvciBpbnNpZGUgaW5wdXQgYm90dG9tLWxlZnQgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0yIGJvdHRvbS0yXCIgcmVmPXttb2RlTWVudVJlZn0+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B0ZXh0LXhzIHB4LTMgcHktMiByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgJHtjbGllbnRNb2RlPT09J2NoYXQnID8gJ3RleHQtc3VjY2VzcycgOiAndGV4dC1hY2NlbnQnfSBiZy1iZy1lbGV2YXRlZCBob3ZlcjpiZy1iZy1ob3ZlciBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEuNSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBgfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBzZXRNb2RlTWVudUluZGV4KGNsaWVudE1vZGU9PT0nY2hhdCcgPyAwIDogMSk7IHNldE1vZGVNZW51T3BlbigodikgPT4gIXYpOyB9fVxuICAgICAgICAgICAgICAgICAgYXJpYS1oYXNwb3B1cD1cIm1lbnVcIlxuICAgICAgICAgICAgICAgICAgYXJpYS1leHBhbmRlZD17bW9kZU1lbnVPcGVufVxuICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXtvbk1vZGVCdXR0b25LZXlEb3dufVxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJNb2RlXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7Y2xpZW50TW9kZSA9PT0gJ2NoYXQnID8gJ0NoYXQnIDogJ0FjdGlvbid9XG4gICAgICAgICAgICAgICAgICA8Q2hldnJvbkRvd24gY2xhc3NOYW1lPVwidy0zIGgtM1wiIC8+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAge21vZGVNZW51T3BlbiAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGJvdHRvbS1mdWxsIG1iLTIgbGVmdC0wIHctNjQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLWVsZXZhdGVkIHNoYWRvdy1lbGV2YXRpb24gcC0xLjUgdGV4dC14cyB0ZXh0LXRleHQtcHJpbWFyeSB6LTIwXCJcbiAgICAgICAgICAgICAgICAgICAgcm9sZT1cIm1lbnVcIlxuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD17LTF9XG4gICAgICAgICAgICAgICAgICAgIHJlZj17bW9kZU1lbnVMaXN0UmVmfVxuICAgICAgICAgICAgICAgICAgICBvbktleURvd249e29uTWVudUtleURvd259XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMi41IHJvdW5kZWQtbWQgaG92ZXI6YmctYmctaG92ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwICR7bW9kZU1lbnVJbmRleD09PTAgPyAncmluZy0xIHJpbmctYWNjZW50JyA6ICcnfSAke2NsaWVudE1vZGU9PT0nY2hhdCcgPyAnYmctYmctaG92ZXInIDogJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IHNldENsaWVudE1vZGUoJ2NoYXQnKTsgc2V0TW9kZU1lbnVPcGVuKGZhbHNlKTsgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXRleHQtcHJpbWFyeVwiPkNoYXQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSB0ZXh0LVsxMXB4XSBtdC0wLjVcIj5CcmFpbnN0b3JtLCBvdXRsaW5lLCBwcmV2aWV3LiBObyB3cml0ZXMuPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIuNSByb3VuZGVkLW1kIGhvdmVyOmJnLWJnLWhvdmVyIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MCBtdC0xICR7bW9kZU1lbnVJbmRleD09PTEgPyAncmluZy0xIHJpbmctYWNjZW50JyA6ICcnfSAke2NsaWVudE1vZGU9PT0nYWN0aW9uJyA/ICdiZy1iZy1ob3ZlcicgOiAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHsgc2V0Q2xpZW50TW9kZSgnYWN0aW9uJyk7IHNldE1vZGVNZW51T3BlbihmYWxzZSk7IH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC10ZXh0LXByaW1hcnlcIj5BY3Rpb248L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSB0ZXh0LVsxMXB4XSBtdC0wLjVcIj5FbmFibGUgc2F2aW5nIHNldHRpbmdzIGFuZCBjaGFwdGVycy48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHZvaWQgc2VuZCgpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtzdHJlYW1pbmcgfHwgIWlucHV0LnRyaW0oKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0yIGJvdHRvbS0yIGJnLWFjY2VudCBob3ZlcjpiZy1hY2NlbnQtaG92ZXIgZGlzYWJsZWQ6b3BhY2l0eS00MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgdGV4dC13aGl0ZSB3LTggaC04IHJvdW5kZWQtbGcgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJTZW5kXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxBcnJvd1VwUmlnaHQgY2xhc3NOYW1lPVwidy00IGgtNFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3Itb25seVwiPlNlbmQ8L3NwYW4+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge2lucHV0RXJyb3IgJiYgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHRleHQteHMgdGV4dC1yZWQtNDAwIHAtMiByb3VuZGVkLWxnIGJnLXJlZC05NTAvMjAgYm9yZGVyIGJvcmRlci1yZWQtNTAwLzIwXCI+e2lucHV0RXJyb3J9PC9kaXY+fVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogZHJhZnRzIGFyZSByb3V0ZWQgdG8gY2VudGVyIGVkaXRvciB2aWEgd29ya3NwYWNlOmNyZWF0ZS1kcmFmdCAqL31cbiAgICA8L0RuZFByb3ZpZGVyPlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZVJlZiIsInVzZVN0YXRlIiwiRG5kUHJvdmlkZXIiLCJIVE1MNUJhY2tlbmQiLCJ1c2VTdXBhYmFzZSIsIkNoYXRCdWJibGUiLCJjcmVhdGVBcGkiLCJBcnJvd1VwUmlnaHQiLCJDaGV2cm9uRG93biIsIkNoYXQiLCJjaGF0SWQiLCJpbml0aWFsTWVzc2FnZXMiLCJzdXBhYmFzZSIsImFwaSIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJpbnB1dCIsInNldElucHV0Iiwic3RyZWFtaW5nIiwic2V0U3RyZWFtaW5nIiwiaW5wdXRFcnJvciIsInNldElucHV0RXJyb3IiLCJsaXN0UmVmIiwiaW5wdXRSZWYiLCJtb2RlTWVudVJlZiIsIm1vZGVNZW51TGlzdFJlZiIsInNhdmluZyIsInNldFNhdmluZyIsInNhdmVFcnJvciIsInNldFNhdmVFcnJvciIsInBlbmRpbmdNb2RlIiwic2V0UGVuZGluZ01vZGUiLCJwZW5kaW5nU2V0dGluZ3MiLCJzZXRQZW5kaW5nU2V0dGluZ3MiLCJ0b2FzdE1zZyIsInNldFRvYXN0TXNnIiwidG9hc3RUaW1lciIsImFwaUJhc2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsImxvYWRpbmdIaXN0b3J5Iiwic2V0TG9hZGluZ0hpc3RvcnkiLCJjbGllbnRNb2RlIiwic2V0Q2xpZW50TW9kZSIsIm1vZGVNZW51T3BlbiIsInNldE1vZGVNZW51T3BlbiIsIm1vZGVNZW51SW5kZXgiLCJzZXRNb2RlTWVudUluZGV4IiwiY2FjaGVLZXkiLCJoYXNDYWNoZSIsInNldEhhc0NhY2hlIiwibWVzc2FnZXNSZWYiLCJjdXJyZW50Iiwic2Nyb2xsVG8iLCJ0b3AiLCJzY3JvbGxIZWlnaHQiLCJiZWhhdmlvciIsImxlbmd0aCIsInMiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYXJyIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwibW91bnRlZCIsImhpc3RvcnkiLCJnZXRDaGF0TWVzc2FnZXNCeUNoYXRJZCIsIm5leHQiLCJzdHJpbmdpZnkiLCJzZXRJdGVtIiwiZWwiLCJzdHlsZSIsImhlaWdodCIsIm1heCIsIk1hdGgiLCJtaW4iLCJvbkRvY0NsaWNrIiwiZSIsInQiLCJ0YXJnZXQiLCJjb250YWlucyIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvbk1vZGVCdXR0b25LZXlEb3duIiwia2V5IiwicHJldmVudERlZmF1bHQiLCJvbk1lbnVLZXlEb3duIiwiaSIsIm9uS2V5IiwiY3RybEtleSIsIm1ldGFLZXkiLCJmb2N1cyIsInNldFRpbWVvdXQiLCJzZW5kIiwib3B0cyIsInRleHQiLCJtZXNzYWdlT3ZlcnJpZGUiLCJ0cmltIiwicmVnZW5lcmF0ZVBhbmVsSWQiLCJkYXRhIiwic2Vzc2lvbiIsImF1dGgiLCJnZXRTZXNzaW9uIiwidG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJ1c2VyTWVzc2FnZSIsInJvbGUiLCJjb250ZW50IiwicGFuZWxJZCIsInByZXYiLCJtTnVtIiwiZXhlYyIsIm1UaXRsZSIsIm1lbnRpb25zIiwiY2hhcHRlcl9udW1iZXIiLCJwYXJzZUludCIsInRpdGxlIiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJhc3Npc3RhbnRJbmRleCIsInJlYWRlciIsImdldFJlYWRlciIsImRlY29kZXIiLCJUZXh0RGVjb2RlciIsInZhbHVlIiwiZG9uZSIsInJlYWQiLCJjaHVuayIsImRlY29kZSIsInN0cmVhbSIsImxpbmUiLCJzcGxpdCIsInRyaW1tZWQiLCJzdGFydHNXaXRoIiwic2xpY2UiLCJldnQiLCJ0eXBlIiwiY29weSIsIm1zZyIsImFjdGlvbiIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsIm1vZGUiLCJjaGFuZ2VzIiwicGFuZWxfc2NyaXB0IiwiaWQiLCJpdGVtIiwicmVsZWFzZUxvY2siLCJvblJlZ2VuZXJhdGUiLCJiYWNrZW5kIiwiZGl2IiwiY2xhc3NOYW1lIiwicmVmIiwibWFwIiwibSIsImRyYWdnYWJsZSIsIkJvb2xlYW4iLCJidXR0b24iLCJvbkNsaWNrIiwiZGlzYWJsZWQiLCJjbGVhclRpbWVvdXQiLCJzcGFuIiwidGV4dGFyZWEiLCJvbkNoYW5nZSIsInBsYWNlaG9sZGVyIiwicm93cyIsIm9uS2V5RG93biIsInNoaWZ0S2V5IiwidiIsImFyaWEtaGFzcG9wdXAiLCJhcmlhLWV4cGFuZGVkIiwidGFiSW5kZXgiLCJhcmlhLWhpZGRlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/chat/Chat.tsx\n"));

/***/ })

});