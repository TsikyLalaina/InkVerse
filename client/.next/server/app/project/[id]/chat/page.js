/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/project/[id]/chat/page";
exports.ids = ["app/project/[id]/chat/page"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&page=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&appPaths=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&pagePath=private-next-app-dir%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx&appDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&page=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&appPaths=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&pagePath=private-next-app-dir%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx&appDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/module.compiled.js?d969\");\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/client/components/error-boundary */ \"(rsc)/./node_modules/next/dist/client/components/error-boundary.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"originalPathname\",\"__next_app__\",\"routeModule\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\"TURBOPACK { transition: next-ssr }\";\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        'project',\n        {\n        children: [\n        '[id]',\n        {\n        children: [\n        'chat',\n        {\n        children: ['__PAGE__', {}, {\n          page: [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/project/[id]/chat/page.tsx */ \"(rsc)/./src/app/project/[id]/chat/page.tsx\")), \"/home/lalaina/InkVerse/client/src/app/project/[id]/chat/page.tsx\"],\n          \n        }]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/project/[id]/layout.tsx */ \"(rsc)/./src/app/project/[id]/layout.tsx\")), \"/home/lalaina/InkVerse/client/src/app/project/[id]/layout.tsx\"],\n        \n      }\n      ]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/layout.tsx */ \"(rsc)/./src/app/layout.tsx\")), \"/home/lalaina/InkVerse/client/src/app/layout.tsx\"],\n'not-found': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/not-found-error */ \"(rsc)/./node_modules/next/dist/client/components/not-found-error.js\", 23)), \"next/dist/client/components/not-found-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"/home/lalaina/InkVerse/client/src/app/project/[id]/chat/page.tsx\"];\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst originalPathname = \"/project/[id]/chat/page\";\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/project/[id]/chat/page\",\n        pathname: \"/project/[id]/chat\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\",\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZwcm9qZWN0JTJGJTVCaWQlNUQlMkZjaGF0JTJGcGFnZSZwYWdlPSUyRnByb2plY3QlMkYlNUJpZCU1RCUyRmNoYXQlMkZwYWdlJmFwcFBhdGhzPSUyRnByb2plY3QlMkYlNUJpZCU1RCUyRmNoYXQlMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGcHJvamVjdCUyRiU1QmlkJTVEJTJGY2hhdCUyRnBhZ2UudHN4JmFwcERpcj0lMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsYUFBYSxzQkFBc0I7QUFDaUU7QUFDckM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLHVCQUF1QixvTEFBcUc7QUFDNUg7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx5QkFBeUIsOEtBQWtHO0FBQzNIO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EseUJBQXlCLG9KQUFxRjtBQUM5RyxvQkFBb0IsME5BQWdGO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUN1QjtBQUM2RDtBQUNwRiw2QkFBNkIsbUJBQW1CO0FBQ2hEO0FBQ087QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUN1RDtBQUN2RDtBQUNPLHdCQUF3Qiw4R0FBa0I7QUFDakQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Lz8yNzdhIl0sInNvdXJjZXNDb250ZW50IjpbIlwiVFVSQk9QQUNLIHsgdHJhbnNpdGlvbjogbmV4dC1zc3IgfVwiO1xuaW1wb3J0IHsgQXBwUGFnZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXBhZ2UvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuLy8gV2UgaW5qZWN0IHRoZSB0cmVlIGFuZCBwYWdlcyBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgdHJlZSA9IHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgJycsXG4gICAgICAgIHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgJ3Byb2plY3QnLFxuICAgICAgICB7XG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICdbaWRdJyxcbiAgICAgICAge1xuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAnY2hhdCcsXG4gICAgICAgIHtcbiAgICAgICAgY2hpbGRyZW46IFsnX19QQUdFX18nLCB7fSwge1xuICAgICAgICAgIHBhZ2U6IFsoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L3NyYy9hcHAvcHJvamVjdC9baWRdL2NoYXQvcGFnZS50c3hcIiksIFwiL2hvbWUvbGFsYWluYS9JbmtWZXJzZS9jbGllbnQvc3JjL2FwcC9wcm9qZWN0L1tpZF0vY2hhdC9wYWdlLnRzeFwiXSxcbiAgICAgICAgICBcbiAgICAgICAgfV1cbiAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAnbGF5b3V0JzogWygpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2hvbWUvbGFsYWluYS9JbmtWZXJzZS9jbGllbnQvc3JjL2FwcC9wcm9qZWN0L1tpZF0vbGF5b3V0LnRzeFwiKSwgXCIvaG9tZS9sYWxhaW5hL0lua1ZlcnNlL2NsaWVudC9zcmMvYXBwL3Byb2plY3QvW2lkXS9sYXlvdXQudHN4XCJdLFxuICAgICAgICBcbiAgICAgIH1cbiAgICAgIF1cbiAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAnbGF5b3V0JzogWygpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2hvbWUvbGFsYWluYS9JbmtWZXJzZS9jbGllbnQvc3JjL2FwcC9sYXlvdXQudHN4XCIpLCBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L3NyYy9hcHAvbGF5b3V0LnRzeFwiXSxcbidub3QtZm91bmQnOiBbKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbm90LWZvdW5kLWVycm9yXCIpLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9ub3QtZm91bmQtZXJyb3JcIl0sXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfS5jaGlsZHJlbjtcbmNvbnN0IHBhZ2VzID0gW1wiL2hvbWUvbGFsYWluYS9JbmtWZXJzZS9jbGllbnQvc3JjL2FwcC9wcm9qZWN0L1tpZF0vY2hhdC9wYWdlLnRzeFwiXTtcbmV4cG9ydCB7IHRyZWUsIHBhZ2VzIH07XG5leHBvcnQgeyBkZWZhdWx0IGFzIEdsb2JhbEVycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9lcnJvci1ib3VuZGFyeVwiO1xuY29uc3QgX19uZXh0X2FwcF9yZXF1aXJlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fXG5jb25zdCBfX25leHRfYXBwX2xvYWRfY2h1bmtfXyA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXG5leHBvcnQgY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL3Byb2plY3QvW2lkXS9jaGF0L3BhZ2VcIjtcbmV4cG9ydCBjb25zdCBfX25leHRfYXBwX18gPSB7XG4gICAgcmVxdWlyZTogX19uZXh0X2FwcF9yZXF1aXJlX18sXG4gICAgbG9hZENodW5rOiBfX25leHRfYXBwX2xvYWRfY2h1bmtfX1xufTtcbmV4cG9ydCAqIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW50cnktYmFzZVwiO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUGFnZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUEFHRSxcbiAgICAgICAgcGFnZTogXCIvcHJvamVjdC9baWRdL2NoYXQvcGFnZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvcHJvamVjdC9baWRdL2NoYXRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIixcbiAgICAgICAgYXBwUGF0aHM6IFtdXG4gICAgfSxcbiAgICB1c2VybGFuZDoge1xuICAgICAgICBsb2FkZXJUcmVlOiB0cmVlXG4gICAgfVxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1wYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&page=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&appPaths=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&pagePath=private-next-app-dir%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx&appDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/app-router.js */ \"(ssr)/./node_modules/next/dist/client/components/app-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(ssr)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/not-found-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/not-found-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmhvbWUlMkZsYWxhaW5hJTJGSW5rVmVyc2UlMkZjbGllbnQlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZhcHAtcm91dGVyLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmhvbWUlMkZsYWxhaW5hJTJGSW5rVmVyc2UlMkZjbGllbnQlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGZXJyb3ItYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGaG9tZSUyRmxhbGFpbmElMkZJbmtWZXJzZSUyRmNsaWVudCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmxheW91dC1yb3V0ZXIuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGaG9tZSUyRmxhbGFpbmElMkZJbmtWZXJzZSUyRmNsaWVudCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRm5vdC1mb3VuZC1ib3VuZGFyeS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGcmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsa09BQXlIO0FBQ3pIO0FBQ0Esb09BQTBIO0FBQzFIO0FBQ0EsME9BQTZIO0FBQzdIO0FBQ0Esd09BQTRIO0FBQzVIO0FBQ0Esa1BBQWlJO0FBQ2pJO0FBQ0Esc1FBQTJJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Lz8zY2Q1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2hvbWUvbGFsYWluYS9JbmtWZXJzZS9jbGllbnQvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9hcHAtcm91dGVyLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvaG9tZS9sYWxhaW5hL0lua1ZlcnNlL2NsaWVudC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2NsaWVudC1wYWdlLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvaG9tZS9sYWxhaW5hL0lua1ZlcnNlL2NsaWVudC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2Vycm9yLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvaG9tZS9sYWxhaW5hL0lua1ZlcnNlL2NsaWVudC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2xheW91dC1yb3V0ZXIuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbm90LWZvdW5kLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvaG9tZS9sYWxhaW5hL0lua1ZlcnNlL2NsaWVudC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanNcIik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fproviders%2FSupabaseProvider.tsx%22%2C%22ids%22%3A%5B%22SupabaseProvider%22%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fpwa%2FRegisterSW.tsx%22%2C%22ids%22%3A%5B%22RegisterSW%22%5D%7D&server=true!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fproviders%2FSupabaseProvider.tsx%22%2C%22ids%22%3A%5B%22SupabaseProvider%22%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fpwa%2FRegisterSW.tsx%22%2C%22ids%22%3A%5B%22RegisterSW%22%5D%7D&server=true! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/components/providers/SupabaseProvider.tsx */ \"(ssr)/./src/components/providers/SupabaseProvider.tsx\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/components/pwa/RegisterSW.tsx */ \"(ssr)/./src/components/pwa/RegisterSW.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmhvbWUlMkZsYWxhaW5hJTJGSW5rVmVyc2UlMkZjbGllbnQlMkZzcmMlMkZhcHAlMkZnbG9iYWxzLmNzcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JTJGc3JjJTJGY29tcG9uZW50cyUyRnByb3ZpZGVycyUyRlN1cGFiYXNlUHJvdmlkZXIudHN4JTIyJTJDJTIyaWRzJTIyJTNBJTVCJTIyU3VwYWJhc2VQcm92aWRlciUyMiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JTJGc3JjJTJGY29tcG9uZW50cyUyRnB3YSUyRlJlZ2lzdGVyU1cudHN4JTIyJTJDJTIyaWRzJTIyJTNBJTVCJTIyUmVnaXN0ZXJTVyUyMiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsME1BQXNKO0FBQ3RKO0FBQ0Esa0xBQW9JIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Lz9hZWFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiU3VwYWJhc2VQcm92aWRlclwiXSAqLyBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L3NyYy9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyLnRzeFwiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiUmVnaXN0ZXJTV1wiXSAqLyBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L3NyYy9jb21wb25lbnRzL3B3YS9SZWdpc3RlclNXLnRzeFwiKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fproviders%2FSupabaseProvider.tsx%22%2C%22ids%22%3A%5B%22SupabaseProvider%22%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fpwa%2FRegisterSW.tsx%22%2C%22ids%22%3A%5B%22RegisterSW%22%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/project/[id]/chat/page.tsx */ \"(ssr)/./src/app/project/[id]/chat/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmhvbWUlMkZsYWxhaW5hJTJGSW5rVmVyc2UlMkZjbGllbnQlMkZzcmMlMkZhcHAlMkZwcm9qZWN0JTJGJTVCaWQlNUQlMkZjaGF0JTJGcGFnZS50c3glMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLG9MQUFxRyIsInNvdXJjZXMiOlsid2VicGFjazovL2lua3ZlcnNlLWNsaWVudC8/YjA5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L3NyYy9hcHAvcHJvamVjdC9baWRdL2NoYXQvcGFnZS50c3hcIik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./src/app/project/[id]/chat/page.tsx":
/*!********************************************!*\
  !*** ./src/app/project/[id]/chat/page.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProjectChatPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/navigation */ \"(ssr)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _components_workspace_Workspace__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/workspace/Workspace */ \"(ssr)/./src/components/workspace/Workspace.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nfunction ProjectChatPage() {\n    const params = (0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.useParams)();\n    const projectId = params?.id;\n    if (!projectId) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_workspace_Workspace__WEBPACK_IMPORTED_MODULE_2__.Workspace, {\n        projectId: projectId\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/app/project/[id]/chat/page.tsx\",\n        lineNumber: 10,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL3Byb2plY3QvW2lkXS9jaGF0L3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUU0QztBQUNpQjtBQUU5QyxTQUFTRTtJQUN0QixNQUFNQyxTQUFTSCwwREFBU0E7SUFDeEIsTUFBTUksWUFBWUQsUUFBUUU7SUFDMUIsSUFBSSxDQUFDRCxXQUFXLE9BQU87SUFDdkIscUJBQU8sOERBQUNILHNFQUFTQTtRQUFDRyxXQUFXQTs7Ozs7O0FBQy9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Ly4vc3JjL2FwcC9wcm9qZWN0L1tpZF0vY2hhdC9wYWdlLnRzeD85MzgwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHsgV29ya3NwYWNlIH0gZnJvbSAnQC9jb21wb25lbnRzL3dvcmtzcGFjZS9Xb3Jrc3BhY2UnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9qZWN0Q2hhdFBhZ2UoKSB7XG4gIGNvbnN0IHBhcmFtcyA9IHVzZVBhcmFtczx7IGlkOiBzdHJpbmcgfT4oKTtcbiAgY29uc3QgcHJvamVjdElkID0gcGFyYW1zPy5pZCBhcyBzdHJpbmc7XG4gIGlmICghcHJvamVjdElkKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIDxXb3Jrc3BhY2UgcHJvamVjdElkPXtwcm9qZWN0SWR9IC8+O1xufVxuXG4iXSwibmFtZXMiOlsidXNlUGFyYW1zIiwiV29ya3NwYWNlIiwiUHJvamVjdENoYXRQYWdlIiwicGFyYW1zIiwicHJvamVjdElkIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/project/[id]/chat/page.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/chat/Chat.tsx":
/*!**************************************!*\
  !*** ./src/components/chat/Chat.tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Chat: () => (/* binding */ Chat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-dnd */ \"(ssr)/./node_modules/react-dnd/dist/core/DndProvider.js\");\n/* harmony import */ var react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dnd-html5-backend */ \"(ssr)/./node_modules/react-dnd-html5-backend/dist/index.js\");\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(ssr)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _ChatBubble__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ChatBubble */ \"(ssr)/./src/components/chat/ChatBubble.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/api */ \"(ssr)/./src/lib/api.ts\");\n/* harmony import */ var _barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUpRight,ChevronDown!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-down.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUpRight,ChevronDown!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/arrow-up-right.js\");\n/* __next_internal_client_entry_do_not_use__ Chat auto */ \n\n\n\n\n\n\n\nfunction Chat({ chatId, initialMessages = [] }) {\n    const supabase = (0,_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase)();\n    const api = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>(0,_lib_api__WEBPACK_IMPORTED_MODULE_4__.createApi)(supabase), [\n        supabase\n    ]);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialMessages);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [streaming, setStreaming] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [inputError, setInputError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const listRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modeMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modeMenuListRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [saveError, setSaveError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [pendingMode, setPendingMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [pendingSettings, setPendingSettings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [toastMsg, setToastMsg] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const toastTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const apiBase = \"http://localhost:3000\" || 0;\n    const [loadingHistory, setLoadingHistory] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [clientMode, setClientMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"chat\");\n    const [modeMenuOpen, setModeMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [modeMenuIndex, setModeMenuIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const cacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_chat_${chatId}_messages`, [\n        chatId\n    ]);\n    const [hasCache, setHasCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const messagesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(messages);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        listRef.current?.scrollTo({\n            top: listRef.current.scrollHeight,\n            behavior: \"smooth\"\n        });\n    }, [\n        messages.length\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const s =  false ? 0 : null;\n            if (s) {\n                const arr = JSON.parse(s);\n                if (Array.isArray(arr)) {\n                    setMessages(arr);\n                    setHasCache(arr.length > 0);\n                }\n            }\n        } catch  {}\n    }, [\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // If parent provides messages later, set them only if list is empty\n        if (initialMessages.length && messages.length === 0) {\n            setMessages(initialMessages);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        initialMessages\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasCache) {\n                return;\n            }\n            try {\n                if (!hasCache) setLoadingHistory(true);\n                const history = await api.getChatMessagesByChatId(chatId);\n                if (!mounted) return;\n                const next = Array.isArray(history) ? history : [];\n                // Skip update if no change to avoid flicker\n                try {\n                    if (hasCache && JSON.stringify(next) === JSON.stringify(messagesRef.current)) {\n                        return;\n                    }\n                } catch  {}\n                setMessages(next);\n            } catch  {\n            // swallow network errors during initial hydration/revalidation\n            } finally{\n                if (mounted) setLoadingHistory(false);\n            }\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        chatId,\n        hasCache\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        messages,\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        messagesRef.current = messages;\n    }, [\n        messages\n    ]);\n    // Auto-resize textarea height with content, up to a max then scroll\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const el = inputRef.current;\n        if (!el) return;\n        el.style.height = \"auto\";\n        const max = 256; // px max height before scroll\n        const next = Math.min(el.scrollHeight, max);\n        el.style.height = `${next}px`;\n    }, [\n        input\n    ]);\n    // Close mode menu on outside click\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onDocClick(e) {\n            if (!modeMenuOpen) return;\n            const t = e.target;\n            if (modeMenuRef.current && t && !modeMenuRef.current.contains(t)) {\n                setModeMenuOpen(false);\n            }\n        }\n        document.addEventListener(\"mousedown\", onDocClick);\n        return ()=>document.removeEventListener(\"mousedown\", onDocClick);\n    }, [\n        modeMenuOpen\n    ]);\n    // Keyboard: open/close menu and navigate options\n    const onModeButtonKeyDown = (e)=>{\n        if (e.key === \"ArrowDown\" || e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            setModeMenuIndex(clientMode === \"chat\" ? 0 : 1);\n            setModeMenuOpen(true);\n        } else if (e.key === \"Escape\") {\n            setModeMenuOpen(false);\n        }\n    };\n    const onMenuKeyDown = (e)=>{\n        if (e.key === \"ArrowDown\") {\n            e.preventDefault();\n            setModeMenuIndex((i)=>(i + 1) % 2);\n        } else if (e.key === \"ArrowUp\") {\n            e.preventDefault();\n            setModeMenuIndex((i)=>(i + 1 + 2) % 2);\n        } else if (e.key === \"Enter\") {\n            e.preventDefault();\n            if (modeMenuIndex === 0) setClientMode(\"chat\");\n            else setClientMode(\"action\");\n            setModeMenuOpen(false);\n        } else if (e.key === \"Escape\") {\n            setModeMenuOpen(false);\n        }\n    };\n    // Shortcut: Ctrl+L focuses input\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onKey(e) {\n            if ((e.ctrlKey || e.metaKey) && (e.key === \"l\" || e.key === \"L\")) {\n                e.preventDefault();\n                inputRef.current?.focus();\n            }\n        }\n        window.addEventListener(\"keydown\", onKey);\n        return ()=>window.removeEventListener(\"keydown\", onKey);\n    }, []);\n    // Focus menu container when opened for keyboard nav\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (modeMenuOpen) {\n            setTimeout(()=>modeMenuListRef.current?.focus(), 0);\n        }\n    }, [\n        modeMenuOpen\n    ]);\n    const send = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (opts)=>{\n        const text = (opts?.messageOverride ?? input).trim();\n        if (!text && !opts?.regeneratePanelId) {\n            setInputError('Prompt is empty. Try something like: \"Write the opening scene of a dark fantasy.\"');\n            return;\n        }\n        setInputError(null);\n        const { data: { session } } = await supabase.auth.getSession();\n        const token = session?.access_token;\n        if (!token) return;\n        const userMessage = {\n            role: \"user\",\n            content: text,\n            panelId: opts?.regeneratePanelId || null\n        };\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInput(\"\");\n        setStreaming(true);\n        // Mentions parsing: @chapter<number> or @\"exact title\"\n        const mNum = /@chapter\\s*([0-9]+)/i.exec(text) || /@chapter_?([0-9]+)/i.exec(text);\n        const mTitle = /@\"([^\"]+)\"/.exec(text);\n        const mentions = {};\n        if (mNum?.[1]) mentions.chapter_number = parseInt(mNum[1], 10);\n        if (mTitle?.[1]) mentions.title = mTitle[1];\n        const res = await fetch(`${apiBase}/api/chat/${chatId}`, {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${token}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                message: userMessage.content,\n                regeneratePanelId: opts?.regeneratePanelId || undefined,\n                clientMode,\n                mentions\n            })\n        });\n        if (!res.body) {\n            setStreaming(false);\n            return;\n        }\n        // Push empty assistant message to stream into\n        let assistantIndex = -1;\n        setMessages((prev)=>{\n            assistantIndex = prev.length;\n            return [\n                ...prev,\n                {\n                    role: \"assistant\",\n                    content: \"\"\n                }\n            ];\n        });\n        const reader = res.body.getReader();\n        const decoder = new TextDecoder();\n        try {\n            while(true){\n                const { value, done } = await reader.read();\n                if (done) break;\n                const chunk = decoder.decode(value, {\n                    stream: true\n                });\n                for (const line of chunk.split(\"\\n\")){\n                    const trimmed = line.trim();\n                    if (!trimmed.startsWith(\"data:\")) continue;\n                    const data = trimmed.slice(5).trim();\n                    if (!data) continue;\n                    try {\n                        const evt = JSON.parse(data);\n                        if (evt.type === \"text\" && evt.content) {\n                            setMessages((prev)=>{\n                                const copy = [\n                                    ...prev\n                                ];\n                                const msg = copy[assistantIndex];\n                                copy[assistantIndex] = {\n                                    ...msg,\n                                    content: (msg?.content || \"\") + evt.content\n                                };\n                                return copy;\n                            });\n                        } else if (evt.action === \"create_chapter\") {\n                            if (false) {}\n                        } else if (evt.action === \"confirm_mode\" && evt.mode) {\n                            setPendingMode(evt.mode);\n                            setMessages((prev)=>[\n                                    ...prev,\n                                    {\n                                        role: \"assistant\",\n                                        content: `Pending mode change to \"${evt.mode}\". Confirm?`\n                                    }\n                                ]);\n                        } else if (evt.action === \"confirm_settings\" && evt.changes) {\n                            if (clientMode === \"action\") {\n                                setPendingSettings(evt.changes);\n                                setMessages((prev)=>[\n                                        ...prev,\n                                        {\n                                            role: \"assistant\",\n                                            content: \"Pending settings update detected. Confirm to apply changes.\"\n                                        }\n                                    ]);\n                            } // ignore in Chat mode for safety\n                        } else if (evt.type === \"image_job\") {\n                        // Optionally reflect job queued state\n                        } else if (evt.action === \"convert_to_manhwa\") {\n                            if (false) {}\n                        } else if (evt.action === \"update_chapter\") {\n                            if (false) {}\n                        } else if (evt.action === \"upsert_character\" && evt.item) {\n                            if (false) {}\n                        } else if (evt.action === \"upsert_world\" && evt.item) {\n                            if (false) {}\n                        } else if (evt.type === \"error\") {\n                            // Append error to conversation\n                            setMessages((prev)=>[\n                                    ...prev,\n                                    {\n                                        role: \"assistant\",\n                                        content: `Error: ${evt.message}`\n                                    }\n                                ]);\n                        } else if (evt.type === \"done\") {\n                            setStreaming(false);\n                        }\n                    } catch  {\n                    // ignore partial json lines\n                    }\n                }\n            }\n        } finally{\n            setStreaming(false);\n            reader.releaseLock();\n        }\n    }, [\n        apiBase,\n        input,\n        chatId,\n        supabase,\n        clientMode\n    ]);\n    const onRegenerate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((panelId)=>{\n        void send({\n            regeneratePanelId: panelId\n        });\n    }, [\n        send\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_dnd__WEBPACK_IMPORTED_MODULE_5__.DndProvider, {\n        backend: react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_6__.HTML5Backend,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex flex-col bg-bg-elevated\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    ref: listRef,\n                    className: \"flex-1 min-h-0 overflow-y-auto space-y-4 p-4\",\n                    children: [\n                        loadingHistory && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-secondary\",\n                            children: \"Loading previous messages\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 302,\n                            columnNumber: 13\n                        }, this),\n                        messages.map((m, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatBubble__WEBPACK_IMPORTED_MODULE_3__.ChatBubble, {\n                                role: m.role,\n                                content: m.content,\n                                panelId: m.panelId,\n                                onRegenerate: onRegenerate,\n                                draggable: Boolean(m.panelId)\n                            }, i, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                lineNumber: 305,\n                                columnNumber: 13\n                            }, this)),\n                        streaming && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-secondary animate-pulse\",\n                            children: \"AI is typing\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 315,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 300,\n                    columnNumber: 9\n                }, this),\n                toastMsg && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"fixed top-3 right-3 z-50\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"px-3 py-2 rounded bg-slate-950/90 border border-slate-800 text-slate-100 text-sm shadow-lg\",\n                        children: toastMsg\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                        lineNumber: 321,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 320,\n                    columnNumber: 9\n                }, this),\n                (pendingMode || pendingSettings) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"border-t border-border-default p-3 flex items-center justify-between gap-3 bg-bg-primary\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-primary\",\n                            children: [\n                                pendingMode && `Confirm mode change to \"${pendingMode}\"?`,\n                                pendingSettings && !pendingMode && \"Confirm applying pending settings changes?\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 329,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"px-3 py-1.5 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover transition-all duration-150\",\n                                    onClick: ()=>{\n                                        setPendingMode(null);\n                                        setPendingSettings(null);\n                                    },\n                                    children: \"Cancel\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 334,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"px-3 py-1.5 rounded-md bg-accent hover:bg-accent-hover text-white disabled:opacity-50 transition-all duration-150\",\n                                    disabled: saving || clientMode !== \"action\",\n                                    onClick: async ()=>{\n                                        setSaving(true);\n                                        setSaveError(null);\n                                        try {\n                                            if (pendingMode) {\n                                                // Mode is project-level; Chat component no longer knows projectId here\n                                                // This confirm block remains but requires a project-level handler outside\n                                                // For safety, we just clear pending and show a note.\n                                                // Notify rest of app (e.g., sidebar) to reflect mode immediately\n                                                if (false) {}\n                                                setMessages((prev)=>[\n                                                        ...prev,\n                                                        {\n                                                            role: \"assistant\",\n                                                            content: `Mode updated to ${pendingMode}.`\n                                                        }\n                                                    ]);\n                                                setPendingMode(null);\n                                            } else if (pendingSettings) {\n                                                // Settings are project-level; handle outside. Here we preview-only.\n                                                if (false) {}\n                                                setMessages((prev)=>[\n                                                        ...prev,\n                                                        {\n                                                            role: \"assistant\",\n                                                            content: \"Settings updated.\"\n                                                        }\n                                                    ]);\n                                                setPendingSettings(null);\n                                                // Toast from chat confirm\n                                                if (toastTimer.current) clearTimeout(toastTimer.current);\n                                                setToastMsg(\"Settings saved\");\n                                                toastTimer.current = setTimeout(()=>setToastMsg(\"\"), 3000);\n                                            }\n                                        } catch (e) {\n                                            setSaveError(e?.message || \"Failed to save\");\n                                            setMessages((prev)=>[\n                                                    ...prev,\n                                                    {\n                                                        role: \"assistant\",\n                                                        content: `Error persisting changes: ${e?.message || \"Failed to save\"}`\n                                                    }\n                                                ]);\n                                        } finally{\n                                            setSaving(false);\n                                        }\n                                    },\n                                    children: \"Confirm\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 340,\n                                    columnNumber: 15\n                                }, this),\n                                clientMode !== \"action\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-[11px] text-text-tertiary\",\n                                    children: \"Switch to Action mode to apply\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 380,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 333,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 328,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"border-t border-border-default p-3 bg-bg-primary\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex gap-3 items-end\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 relative\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                        ref: inputRef,\n                                        value: input,\n                                        onChange: (e)=>setInput(e.target.value),\n                                        placeholder: \"Chat with Cascade\",\n                                        rows: 2,\n                                        className: \"w-full bg-bg-elevated border border-border-default rounded-2xl pl-12 pr-12 pt-2 pb-10 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent resize-none min-h-[80px] max-h-72 overflow-y-auto transition-colors duration-150\",\n                                        onKeyDown: (e)=>{\n                                            if (e.key === \"Enter\" && !e.shiftKey) {\n                                                e.preventDefault();\n                                                void send();\n                                            }\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 390,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute left-2 bottom-2\",\n                                        ref: modeMenuRef,\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                type: \"button\",\n                                                className: `text-xs px-3 py-2 rounded-lg border border-border-default ${clientMode === \"chat\" ? \"text-success\" : \"text-accent\"} bg-bg-elevated hover:bg-bg-hover inline-flex items-center gap-1.5 transition-all duration-150`,\n                                                onClick: ()=>{\n                                                    setModeMenuIndex(clientMode === \"chat\" ? 0 : 1);\n                                                    setModeMenuOpen((v)=>!v);\n                                                },\n                                                \"aria-haspopup\": \"menu\",\n                                                \"aria-expanded\": modeMenuOpen,\n                                                onKeyDown: onModeButtonKeyDown,\n                                                title: \"Mode\",\n                                                children: [\n                                                    clientMode === \"chat\" ? \"Chat\" : \"Action\",\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                        className: \"w-3 h-3\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 416,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 406,\n                                                columnNumber: 17\n                                            }, this),\n                                            modeMenuOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"absolute bottom-full mb-2 left-0 w-64 rounded-lg border border-border-default bg-bg-elevated shadow-elevation p-1.5 text-xs text-text-primary z-20\",\n                                                role: \"menu\",\n                                                tabIndex: -1,\n                                                ref: modeMenuListRef,\n                                                onKeyDown: onMenuKeyDown,\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: `w-full text-left px-3 py-2.5 rounded-md hover:bg-bg-hover transition-all duration-150 ${modeMenuIndex === 0 ? \"ring-1 ring-accent\" : \"\"} ${clientMode === \"chat\" ? \"bg-bg-hover\" : \"\"}`,\n                                                        onClick: ()=>{\n                                                            setClientMode(\"chat\");\n                                                            setModeMenuOpen(false);\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"font-semibold text-text-primary\",\n                                                                children: \"Chat\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 430,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-text-tertiary text-[11px] mt-0.5\",\n                                                                children: \"Brainstorm, outline, preview. No writes.\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 431,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 426,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: `w-full text-left px-3 py-2.5 rounded-md hover:bg-bg-hover transition-all duration-150 mt-1 ${modeMenuIndex === 1 ? \"ring-1 ring-accent\" : \"\"} ${clientMode === \"action\" ? \"bg-bg-hover\" : \"\"}`,\n                                                        onClick: ()=>{\n                                                            setClientMode(\"action\");\n                                                            setModeMenuOpen(false);\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"font-semibold text-text-primary\",\n                                                                children: \"Action\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 437,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-text-tertiary text-[11px] mt-0.5\",\n                                                                children: \"Enable saving settings and chapters.\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 438,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 433,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 419,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 405,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>void send(),\n                                        disabled: streaming || !input.trim(),\n                                        className: \"absolute right-2 bottom-2 bg-accent hover:bg-accent-hover disabled:opacity-40 disabled:cursor-not-allowed text-white w-8 h-8 rounded-lg inline-flex items-center justify-center transition-all duration-150\",\n                                        title: \"Send\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                className: \"w-4 h-4\",\n                                                \"aria-hidden\": \"true\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 449,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"sr-only\",\n                                                children: \"Send\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 450,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 443,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                lineNumber: 389,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 387,\n                            columnNumber: 11\n                        }, this),\n                        inputError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-2 text-xs text-red-400 p-2 rounded-lg bg-red-950/20 border border-red-500/20\",\n                            children: inputError\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 454,\n                            columnNumber: 26\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 386,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n            lineNumber: 298,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n        lineNumber: 297,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxDQUFDLEVBQUVKLGVBQWEsU0FBUyxnQkFBZ0IsR0FBRyxDQUFDO3dEQUMvTDhILFNBQVM7NERBQVE3SCxjQUFjOzREQUFTRSxnQkFBZ0I7d0RBQVE7OzBFQUVoRSw4REFBQ21IO2dFQUFJQyxXQUFVOzBFQUFrQzs7Ozs7OzBFQUNqRCw4REFBQ0Q7Z0VBQUlDLFdBQVU7MEVBQXdDOzs7Ozs7Ozs7Ozs7a0VBRXpELDhEQUFDTTt3REFDQ04sV0FBVyxDQUFDLDJGQUEyRixFQUFFbkgsa0JBQWdCLElBQUksdUJBQXVCLEdBQUcsQ0FBQyxFQUFFSixlQUFhLFdBQVcsZ0JBQWdCLEdBQUcsQ0FBQzt3REFDdE04SCxTQUFTOzREQUFRN0gsY0FBYzs0REFBV0UsZ0JBQWdCO3dEQUFROzswRUFFbEUsOERBQUNtSDtnRUFBSUMsV0FBVTswRUFBa0M7Ozs7OzswRUFDakQsOERBQUNEO2dFQUFJQyxXQUFVOzBFQUF3Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2tEQUsvRCw4REFBQ007d0NBQ0NDLFNBQVMsSUFBTSxLQUFLdkU7d0NBQ3BCd0UsVUFBVXhKLGFBQWEsQ0FBQ0YsTUFBTXNGLElBQUk7d0NBQ2xDNEQsV0FBVTt3Q0FDVnpDLE9BQU07OzBEQUVOLDhEQUFDbEgsb0dBQVlBO2dEQUFDMkosV0FBVTtnREFBVXFCLGVBQVk7Ozs7OzswREFDOUMsOERBQUNYO2dEQUFLVixXQUFVOzBEQUFVOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3QkFJL0I5SSw0QkFBYyw4REFBQzZJOzRCQUFJQyxXQUFVO3NDQUFtRjlJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU8zSCIsInNvdXJjZXMiOlsid2VicGFjazovL2lua3ZlcnNlLWNsaWVudC8uL3NyYy9jb21wb25lbnRzL2NoYXQvQ2hhdC50c3g/NWUxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB0eXBlIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IERuZFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtZG5kJztcbmltcG9ydCB7IEhUTUw1QmFja2VuZCB9IGZyb20gJ3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kJztcbmltcG9ydCB7IHVzZVN1cGFiYXNlIH0gZnJvbSAnQC9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyJztcbmltcG9ydCB7IENoYXRCdWJibGUgfSBmcm9tICcuL0NoYXRCdWJibGUnO1xuaW1wb3J0IHsgY3JlYXRlQXBpIH0gZnJvbSAnQC9saWIvYXBpJztcbmltcG9ydCB7IEFycm93VXBSaWdodCwgQ2hldnJvbkRvd24gfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuXG5leHBvcnQgdHlwZSBDaGF0TWVzc2FnZSA9IHtcbiAgaWQ/OiBzdHJpbmc7XG4gIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHBhbmVsSWQ/OiBzdHJpbmcgfCBudWxsO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIENoYXQoeyBjaGF0SWQsIGluaXRpYWxNZXNzYWdlcyA9IFtdIH06IHsgY2hhdElkOiBzdHJpbmc7IGluaXRpYWxNZXNzYWdlcz86IENoYXRNZXNzYWdlW10gfSkge1xuICBjb25zdCBzdXBhYmFzZSA9IHVzZVN1cGFiYXNlKCk7XG4gIGNvbnN0IGFwaSA9IHVzZU1lbW8oKCkgPT4gY3JlYXRlQXBpKHN1cGFiYXNlKSwgW3N1cGFiYXNlXSk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8Q2hhdE1lc3NhZ2VbXT4oaW5pdGlhbE1lc3NhZ2VzKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtzdHJlYW1pbmcsIHNldFN0cmVhbWluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpbnB1dEVycm9yLCBzZXRJbnB1dEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBsaXN0UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgaW5wdXRSZWYgPSB1c2VSZWY8SFRNTFRleHRBcmVhRWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IG1vZGVNZW51UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgbW9kZU1lbnVMaXN0UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcblxuICBjb25zdCBbc2F2aW5nLCBzZXRTYXZpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2F2ZUVycm9yLCBzZXRTYXZlRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgW3BlbmRpbmdNb2RlLCBzZXRQZW5kaW5nTW9kZV0gPSB1c2VTdGF0ZTwnbm92ZWwnIHwgJ21hbmh3YScgfCAnY29udmVydCcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3BlbmRpbmdTZXR0aW5ncywgc2V0UGVuZGluZ1NldHRpbmdzXSA9IHVzZVN0YXRlPGFueSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbdG9hc3RNc2csIHNldFRvYXN0TXNnXSA9IHVzZVN0YXRlPHN0cmluZz4oJycpO1xuICBjb25zdCB0b2FzdFRpbWVyID0gdXNlUmVmPFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgYXBpQmFzZSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCc7XG5cbiAgY29uc3QgW2xvYWRpbmdIaXN0b3J5LCBzZXRMb2FkaW5nSGlzdG9yeV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtjbGllbnRNb2RlLCBzZXRDbGllbnRNb2RlXSA9IHVzZVN0YXRlPCdjaGF0JyB8ICdhY3Rpb24nPignY2hhdCcpO1xuICBjb25zdCBbbW9kZU1lbnVPcGVuLCBzZXRNb2RlTWVudU9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZU1lbnVJbmRleCwgc2V0TW9kZU1lbnVJbmRleF0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuXG4gIGNvbnN0IGNhY2hlS2V5ID0gdXNlTWVtbygoKSA9PiBgaW5rdmVyc2VfY2hhdF8ke2NoYXRJZH1fbWVzc2FnZXNgLCBbY2hhdElkXSk7XG4gIGNvbnN0IFtoYXNDYWNoZSwgc2V0SGFzQ2FjaGVdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBtZXNzYWdlc1JlZiA9IHVzZVJlZjxDaGF0TWVzc2FnZVtdPihtZXNzYWdlcyk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsaXN0UmVmLmN1cnJlbnQ/LnNjcm9sbFRvKHsgdG9wOiBsaXN0UmVmLmN1cnJlbnQuc2Nyb2xsSGVpZ2h0LCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gIH0sIFttZXNzYWdlcy5sZW5ndGhdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpIDogbnVsbDtcbiAgICAgIGlmIChzKSB7XG4gICAgICAgIGNvbnN0IGFyciA9IEpTT04ucGFyc2Uocyk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICAgICAgICBzZXRNZXNzYWdlcyhhcnIgYXMgQ2hhdE1lc3NhZ2VbXSk7XG4gICAgICAgICAgc2V0SGFzQ2FjaGUoKGFyciBhcyBhbnlbXSkubGVuZ3RoID4gMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIHt9XG4gIH0sIFtjYWNoZUtleV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gSWYgcGFyZW50IHByb3ZpZGVzIG1lc3NhZ2VzIGxhdGVyLCBzZXQgdGhlbSBvbmx5IGlmIGxpc3QgaXMgZW1wdHlcbiAgICBpZiAoaW5pdGlhbE1lc3NhZ2VzLmxlbmd0aCAmJiBtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHNldE1lc3NhZ2VzKGluaXRpYWxNZXNzYWdlcyk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW2luaXRpYWxNZXNzYWdlc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG1vdW50ZWQgPSB0cnVlO1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoaGFzQ2FjaGUpIHsgcmV0dXJuOyB9XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIWhhc0NhY2hlKSBzZXRMb2FkaW5nSGlzdG9yeSh0cnVlKTtcbiAgICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IGFwaS5nZXRDaGF0TWVzc2FnZXNCeUNoYXRJZChjaGF0SWQpO1xuICAgICAgICBpZiAoIW1vdW50ZWQpIHJldHVybjtcbiAgICAgICAgY29uc3QgbmV4dCA9IEFycmF5LmlzQXJyYXkoaGlzdG9yeSkgPyBoaXN0b3J5IGFzIGFueSA6IFtdO1xuICAgICAgICAvLyBTa2lwIHVwZGF0ZSBpZiBubyBjaGFuZ2UgdG8gYXZvaWQgZmxpY2tlclxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChoYXNDYWNoZSAmJiBKU09OLnN0cmluZ2lmeShuZXh0KSA9PT0gSlNPTi5zdHJpbmdpZnkobWVzc2FnZXNSZWYuY3VycmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgc2V0TWVzc2FnZXMobmV4dCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgLy8gc3dhbGxvdyBuZXR3b3JrIGVycm9ycyBkdXJpbmcgaW5pdGlhbCBoeWRyYXRpb24vcmV2YWxpZGF0aW9uXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAobW91bnRlZCkgc2V0TG9hZGluZ0hpc3RvcnkoZmFsc2UpO1xuICAgICAgfVxuICAgIH0pKCk7XG4gICAgcmV0dXJuICgpID0+IHsgbW91bnRlZCA9IGZhbHNlOyB9O1xuICB9LCBbYXBpLCBjaGF0SWQsIGhhc0NhY2hlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oY2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VzKSk7XG4gICAgfSBjYXRjaCB7fVxuICB9LCBbbWVzc2FnZXMsIGNhY2hlS2V5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHsgbWVzc2FnZXNSZWYuY3VycmVudCA9IG1lc3NhZ2VzOyB9LCBbbWVzc2FnZXNdKTtcblxuICAvLyBBdXRvLXJlc2l6ZSB0ZXh0YXJlYSBoZWlnaHQgd2l0aCBjb250ZW50LCB1cCB0byBhIG1heCB0aGVuIHNjcm9sbFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGVsID0gaW5wdXRSZWYuY3VycmVudDtcbiAgICBpZiAoIWVsKSByZXR1cm47XG4gICAgZWwuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgIGNvbnN0IG1heCA9IDI1NjsgLy8gcHggbWF4IGhlaWdodCBiZWZvcmUgc2Nyb2xsXG4gICAgY29uc3QgbmV4dCA9IE1hdGgubWluKGVsLnNjcm9sbEhlaWdodCwgbWF4KTtcbiAgICBlbC5zdHlsZS5oZWlnaHQgPSBgJHtuZXh0fXB4YDtcbiAgfSwgW2lucHV0XSk7XG5cbiAgLy8gQ2xvc2UgbW9kZSBtZW51IG9uIG91dHNpZGUgY2xpY2tcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmdW5jdGlvbiBvbkRvY0NsaWNrKGU6IE1vdXNlRXZlbnQpIHtcbiAgICAgIGlmICghbW9kZU1lbnVPcGVuKSByZXR1cm47XG4gICAgICBjb25zdCB0ID0gZS50YXJnZXQgYXMgTm9kZSB8IG51bGw7XG4gICAgICBpZiAobW9kZU1lbnVSZWYuY3VycmVudCAmJiB0ICYmICFtb2RlTWVudVJlZi5jdXJyZW50LmNvbnRhaW5zKHQpKSB7XG4gICAgICAgIHNldE1vZGVNZW51T3BlbihmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uRG9jQ2xpY2spO1xuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkRvY0NsaWNrKTtcbiAgfSwgW21vZGVNZW51T3Blbl0pO1xuXG4gIC8vIEtleWJvYXJkOiBvcGVuL2Nsb3NlIG1lbnUgYW5kIG5hdmlnYXRlIG9wdGlvbnNcbiAgY29uc3Qgb25Nb2RlQnV0dG9uS2V5RG93biA9IChlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxCdXR0b25FbGVtZW50PikgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gJ0Fycm93RG93bicgfHwgZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc2V0TW9kZU1lbnVJbmRleChjbGllbnRNb2RlID09PSAnY2hhdCcgPyAwIDogMSk7XG4gICAgICBzZXRNb2RlTWVudU9wZW4odHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHNldE1vZGVNZW51T3BlbihmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uTWVudUtleURvd24gPSAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzZXRNb2RlTWVudUluZGV4KChpKSA9PiAoaSArIDEpICUgMik7XG4gICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93VXAnKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzZXRNb2RlTWVudUluZGV4KChpKSA9PiAoaSArIDEgKyAyKSAlIDIpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChtb2RlTWVudUluZGV4ID09PSAwKSBzZXRDbGllbnRNb2RlKCdjaGF0Jyk7XG4gICAgICBlbHNlIHNldENsaWVudE1vZGUoJ2FjdGlvbicpO1xuICAgICAgc2V0TW9kZU1lbnVPcGVuKGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgc2V0TW9kZU1lbnVPcGVuKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2hvcnRjdXQ6IEN0cmwrTCBmb2N1c2VzIGlucHV0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZnVuY3Rpb24gb25LZXkoZTogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiAoZS5rZXkgPT09ICdsJyB8fCBlLmtleSA9PT0gJ0wnKSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlucHV0UmVmLmN1cnJlbnQ/LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXkpO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5KTtcbiAgfSwgW10pO1xuXG4gIC8vIEZvY3VzIG1lbnUgY29udGFpbmVyIHdoZW4gb3BlbmVkIGZvciBrZXlib2FyZCBuYXZcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobW9kZU1lbnVPcGVuKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IG1vZGVNZW51TGlzdFJlZi5jdXJyZW50Py5mb2N1cygpLCAwKTtcbiAgICB9XG4gIH0sIFttb2RlTWVudU9wZW5dKTtcblxuICBjb25zdCBzZW5kID0gdXNlQ2FsbGJhY2soYXN5bmMgKG9wdHM/OiB7IHJlZ2VuZXJhdGVQYW5lbElkPzogc3RyaW5nOyBtZXNzYWdlT3ZlcnJpZGU/OiBzdHJpbmcgfSkgPT4ge1xuICAgIGNvbnN0IHRleHQgPSAob3B0cz8ubWVzc2FnZU92ZXJyaWRlID8/IGlucHV0KS50cmltKCk7XG4gICAgaWYgKCF0ZXh0ICYmICFvcHRzPy5yZWdlbmVyYXRlUGFuZWxJZCkge1xuICAgICAgc2V0SW5wdXRFcnJvcignUHJvbXB0IGlzIGVtcHR5LiBUcnkgc29tZXRoaW5nIGxpa2U6IFwiV3JpdGUgdGhlIG9wZW5pbmcgc2NlbmUgb2YgYSBkYXJrIGZhbnRhc3kuXCInKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0SW5wdXRFcnJvcihudWxsKTtcblxuICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpO1xuICAgIGNvbnN0IHRva2VuID0gc2Vzc2lvbj8uYWNjZXNzX3Rva2VuO1xuICAgIGlmICghdG9rZW4pIHJldHVybjtcblxuICAgIGNvbnN0IHVzZXJNZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiB0ZXh0LCBwYW5lbElkOiBvcHRzPy5yZWdlbmVyYXRlUGFuZWxJZCB8fCBudWxsIH07XG4gICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB1c2VyTWVzc2FnZV0pO1xuICAgIHNldElucHV0KCcnKTtcbiAgICBzZXRTdHJlYW1pbmcodHJ1ZSk7XG5cbiAgICAvLyBNZW50aW9ucyBwYXJzaW5nOiBAY2hhcHRlcjxudW1iZXI+IG9yIEBcImV4YWN0IHRpdGxlXCJcbiAgICBjb25zdCBtTnVtID0gL0BjaGFwdGVyXFxzKihbMC05XSspL2kuZXhlYyh0ZXh0KSB8fCAvQGNoYXB0ZXJfPyhbMC05XSspL2kuZXhlYyh0ZXh0KTtcbiAgICBjb25zdCBtVGl0bGUgPSAvQFwiKFteXCJdKylcIi8uZXhlYyh0ZXh0KTtcbiAgICBjb25zdCBtZW50aW9uczogYW55ID0ge307XG4gICAgaWYgKG1OdW0/LlsxXSkgbWVudGlvbnMuY2hhcHRlcl9udW1iZXIgPSBwYXJzZUludChtTnVtWzFdLCAxMCk7XG4gICAgaWYgKG1UaXRsZT8uWzFdKSBtZW50aW9ucy50aXRsZSA9IG1UaXRsZVsxXTtcblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2FwaUJhc2V9L2FwaS9jaGF0LyR7Y2hhdElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogdXNlck1lc3NhZ2UuY29udGVudCwgcmVnZW5lcmF0ZVBhbmVsSWQ6IG9wdHM/LnJlZ2VuZXJhdGVQYW5lbElkIHx8IHVuZGVmaW5lZCwgY2xpZW50TW9kZSwgbWVudGlvbnMgfSksXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlcy5ib2R5KSB7XG4gICAgICBzZXRTdHJlYW1pbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFB1c2ggZW1wdHkgYXNzaXN0YW50IG1lc3NhZ2UgdG8gc3RyZWFtIGludG9cbiAgICBsZXQgYXNzaXN0YW50SW5kZXggPSAtMTtcbiAgICBzZXRNZXNzYWdlcygocHJldikgPT4ge1xuICAgICAgYXNzaXN0YW50SW5kZXggPSBwcmV2Lmxlbmd0aDtcbiAgICAgIHJldHVybiBbLi4ucHJldiwgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJycgfV07XG4gICAgfSk7XG5cbiAgICBjb25zdCByZWFkZXIgPSByZXMuYm9keS5nZXRSZWFkZXIoKTtcbiAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG5cbiAgICB0cnkge1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xuICAgICAgICBjb25zdCBjaHVuayA9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KTtcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGNodW5rLnNwbGl0KCdcXG4nKSkge1xuICAgICAgICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcbiAgICAgICAgICBpZiAoIXRyaW1tZWQuc3RhcnRzV2l0aCgnZGF0YTonKSkgY29udGludWU7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHRyaW1tZWQuc2xpY2UoNSkudHJpbSgpO1xuICAgICAgICAgIGlmICghZGF0YSkgY29udGludWU7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGV2dCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICd0ZXh0JyAmJiBldnQuY29udGVudCkge1xuICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvcHkgPSBbLi4ucHJldl07XG4gICAgICAgICAgICAgICAgY29uc3QgbXNnID0gY29weVthc3Npc3RhbnRJbmRleF07XG4gICAgICAgICAgICAgICAgY29weVthc3Npc3RhbnRJbmRleF0gPSB7IC4uLm1zZywgY29udGVudDogKG1zZz8uY29udGVudCB8fCAnJykgKyBldnQuY29udGVudCB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBjb3B5O1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LmFjdGlvbiA9PT0gJ2NyZWF0ZV9jaGFwdGVyJykge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3dvcmtzcGFjZTpjcmVhdGUtZHJhZnQnLCB7IGRldGFpbDogeyB0aXRsZTogZXZ0LnRpdGxlIHx8ICdVbnRpdGxlZCBDaGFwdGVyJywgY29udGVudDogZXZ0LmNvbnRlbnQgfHwgJycgfSB9KSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LmFjdGlvbiA9PT0gJ2NvbmZpcm1fbW9kZScgJiYgZXZ0Lm1vZGUpIHtcbiAgICAgICAgICAgICAgc2V0UGVuZGluZ01vZGUoZXZ0Lm1vZGUpO1xuICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IGBQZW5kaW5nIG1vZGUgY2hhbmdlIHRvIFwiJHtldnQubW9kZX1cIi4gQ29uZmlybT9gIH1dKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LmFjdGlvbiA9PT0gJ2NvbmZpcm1fc2V0dGluZ3MnICYmIGV2dC5jaGFuZ2VzKSB7XG4gICAgICAgICAgICAgIGlmIChjbGllbnRNb2RlID09PSAnYWN0aW9uJykge1xuICAgICAgICAgICAgICAgIHNldFBlbmRpbmdTZXR0aW5ncyhldnQuY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnUGVuZGluZyBzZXR0aW5ncyB1cGRhdGUgZGV0ZWN0ZWQuIENvbmZpcm0gdG8gYXBwbHkgY2hhbmdlcy4nIH1dKTtcbiAgICAgICAgICAgICAgfSAvLyBpZ25vcmUgaW4gQ2hhdCBtb2RlIGZvciBzYWZldHlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdpbWFnZV9qb2InKSB7XG4gICAgICAgICAgICAgIC8vIE9wdGlvbmFsbHkgcmVmbGVjdCBqb2IgcXVldWVkIHN0YXRlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICdjb252ZXJ0X3RvX21hbmh3YScpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd3b3Jrc3BhY2U6Y3JlYXRlLWRyYWZ0JywgeyBkZXRhaWw6IHsgdGl0bGU6ICdDb252ZXJ0ZWQgUGFuZWxzJywgcGFuZWxfc2NyaXB0OiBldnQucGFuZWxfc2NyaXB0IH0gfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICd1cGRhdGVfY2hhcHRlcicpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd3b3Jrc3BhY2U6dXBkYXRlLWNoYXB0ZXInLCB7IGRldGFpbDogeyBpZDogZXZ0LmlkLCBjaGFwdGVyX251bWJlcjogZXZ0LmNoYXB0ZXJfbnVtYmVyLCB0aXRsZTogZXZ0LnRpdGxlLCBjb250ZW50OiBldnQuY29udGVudCB9IH0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQuYWN0aW9uID09PSAndXBzZXJ0X2NoYXJhY3RlcicgJiYgZXZ0Lml0ZW0pIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd3b3Jrc3BhY2U6Y2hhcmFjdGVyLXVwc2VydCcsIHsgZGV0YWlsOiB7IGl0ZW06IGV2dC5pdGVtIH0gfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICd1cHNlcnRfd29ybGQnICYmIGV2dC5pdGVtKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd29ya3NwYWNlOndvcmxkLXVwc2VydCcsIHsgZGV0YWlsOiB7IGl0ZW06IGV2dC5pdGVtIH0gfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgIC8vIEFwcGVuZCBlcnJvciB0byBjb252ZXJzYXRpb25cbiAgICAgICAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiBgRXJyb3I6ICR7ZXZ0Lm1lc3NhZ2V9YCB9XSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnZG9uZScpIHtcbiAgICAgICAgICAgICAgc2V0U3RyZWFtaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIGlnbm9yZSBwYXJ0aWFsIGpzb24gbGluZXNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0U3RyZWFtaW5nKGZhbHNlKTtcbiAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgIH1cbiAgfSwgW2FwaUJhc2UsIGlucHV0LCBjaGF0SWQsIHN1cGFiYXNlLCBjbGllbnRNb2RlXSk7XG5cbiAgY29uc3Qgb25SZWdlbmVyYXRlID0gdXNlQ2FsbGJhY2soKHBhbmVsSWQ6IHN0cmluZykgPT4ge1xuICAgIHZvaWQgc2VuZCh7IHJlZ2VuZXJhdGVQYW5lbElkOiBwYW5lbElkIH0pO1xuICB9LCBbc2VuZF0pO1xuXG4gIHJldHVybiAoXG4gICAgPERuZFByb3ZpZGVyIGJhY2tlbmQ9e0hUTUw1QmFja2VuZH0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtZnVsbCBmbGV4IGZsZXgtY29sIGJnLWJnLWVsZXZhdGVkXCI+XG4gICAgICAgIHsvKiBNZXNzYWdlcyBBcmVhIHdpdGggU2Nyb2xsYmFyICovfVxuICAgICAgICA8ZGl2IHJlZj17bGlzdFJlZn0gY2xhc3NOYW1lPVwiZmxleC0xIG1pbi1oLTAgb3ZlcmZsb3cteS1hdXRvIHNwYWNlLXktNCBwLTRcIj5cbiAgICAgICAgICB7bG9hZGluZ0hpc3RvcnkgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtdGV4dC1zZWNvbmRhcnlcIj5Mb2FkaW5nIHByZXZpb3VzIG1lc3NhZ2Vz4oCmPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7bWVzc2FnZXMubWFwKChtLCBpKSA9PiAoXG4gICAgICAgICAgICA8Q2hhdEJ1YmJsZVxuICAgICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICAgIHJvbGU9e20ucm9sZX1cbiAgICAgICAgICAgICAgY29udGVudD17bS5jb250ZW50fVxuICAgICAgICAgICAgICBwYW5lbElkPXttLnBhbmVsSWR9XG4gICAgICAgICAgICAgIG9uUmVnZW5lcmF0ZT17b25SZWdlbmVyYXRlfVxuICAgICAgICAgICAgICBkcmFnZ2FibGU9e0Jvb2xlYW4obS5wYW5lbElkKX1cbiAgICAgICAgICAgIC8+KVxuICAgICAgICAgICl9XG4gICAgICAgICAge3N0cmVhbWluZyAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC10ZXh0LXNlY29uZGFyeSBhbmltYXRlLXB1bHNlXCI+QUkgaXMgdHlwaW5n4oCmPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgIHt0b2FzdE1zZyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgdG9wLTMgcmlnaHQtMyB6LTUwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC0zIHB5LTIgcm91bmRlZCBiZy1zbGF0ZS05NTAvOTAgYm9yZGVyIGJvcmRlci1zbGF0ZS04MDAgdGV4dC1zbGF0ZS0xMDAgdGV4dC1zbSBzaGFkb3ctbGdcIj5cbiAgICAgICAgICAgIHt0b2FzdE1zZ31cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgICBcbiAgICAgICAgeyhwZW5kaW5nTW9kZSB8fCBwZW5kaW5nU2V0dGluZ3MpICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci10IGJvcmRlci1ib3JkZXItZGVmYXVsdCBwLTMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC0zIGJnLWJnLXByaW1hcnlcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXRleHQtcHJpbWFyeVwiPlxuICAgICAgICAgICAgICB7cGVuZGluZ01vZGUgJiYgYENvbmZpcm0gbW9kZSBjaGFuZ2UgdG8gXCIke3BlbmRpbmdNb2RlfVwiP2B9XG4gICAgICAgICAgICAgIHtwZW5kaW5nU2V0dGluZ3MgJiYgIXBlbmRpbmdNb2RlICYmICdDb25maXJtIGFwcGx5aW5nIHBlbmRpbmcgc2V0dGluZ3MgY2hhbmdlcz8nfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTEuNSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3ZlcjpiZy1iZy1ob3ZlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHsgc2V0UGVuZGluZ01vZGUobnVsbCk7IHNldFBlbmRpbmdTZXR0aW5ncyhudWxsKTsgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIENhbmNlbFxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMS41IHJvdW5kZWQtbWQgYmctYWNjZW50IGhvdmVyOmJnLWFjY2VudC1ob3ZlciB0ZXh0LXdoaXRlIGRpc2FibGVkOm9wYWNpdHktNTAgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nIHx8IGNsaWVudE1vZGUgIT09ICdhY3Rpb24nfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldFNhdmluZyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgIHNldFNhdmVFcnJvcihudWxsKTtcbiAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIE1vZGUgaXMgcHJvamVjdC1sZXZlbDsgQ2hhdCBjb21wb25lbnQgbm8gbG9uZ2VyIGtub3dzIHByb2plY3RJZCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjb25maXJtIGJsb2NrIHJlbWFpbnMgYnV0IHJlcXVpcmVzIGEgcHJvamVjdC1sZXZlbCBoYW5kbGVyIG91dHNpZGVcbiAgICAgICAgICAgICAgICAgICAgICAvLyBGb3Igc2FmZXR5LCB3ZSBqdXN0IGNsZWFyIHBlbmRpbmcgYW5kIHNob3cgYSBub3RlLlxuICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGlmeSByZXN0IG9mIGFwcCAoZS5nLiwgc2lkZWJhcikgdG8gcmVmbGVjdCBtb2RlIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3Byb2plY3Q6bW9kZS11cGRhdGVkJywgeyBkZXRhaWw6IHsgbW9kZTogcGVuZGluZ01vZGUgfSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogYE1vZGUgdXBkYXRlZCB0byAke3BlbmRpbmdNb2RlfS5gIH1dKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRQZW5kaW5nTW9kZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZW5kaW5nU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBTZXR0aW5ncyBhcmUgcHJvamVjdC1sZXZlbDsgaGFuZGxlIG91dHNpZGUuIEhlcmUgd2UgcHJldmlldy1vbmx5LlxuICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdwcm9qZWN0OnNldHRpbmdzLXVwZGF0ZWQnLCB7IGRldGFpbDogeyBjaGFuZ2VzOiBwZW5kaW5nU2V0dGluZ3MgfSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJ1NldHRpbmdzIHVwZGF0ZWQuJyB9XSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0UGVuZGluZ1NldHRpbmdzKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFRvYXN0IGZyb20gY2hhdCBjb25maXJtXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHRvYXN0VGltZXIuY3VycmVudCkgY2xlYXJUaW1lb3V0KHRvYXN0VGltZXIuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0VG9hc3RNc2coJ1NldHRpbmdzIHNhdmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgdG9hc3RUaW1lci5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiBzZXRUb2FzdE1zZygnJyksIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2F2ZUVycm9yKGU/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBzYXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogYEVycm9yIHBlcnNpc3RpbmcgY2hhbmdlczogJHtlPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gc2F2ZSd9YCB9XSk7XG4gICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBzZXRTYXZpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBDb25maXJtXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICB7Y2xpZW50TW9kZSAhPT0gJ2FjdGlvbicgJiYgKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtWzExcHhdIHRleHQtdGV4dC10ZXJ0aWFyeVwiPlN3aXRjaCB0byBBY3Rpb24gbW9kZSB0byBhcHBseTwvc3Bhbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICB7LyogSW5wdXQgQXJlYSAtIEZpeGVkIGF0IEJvdHRvbSAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBib3JkZXItYm9yZGVyLWRlZmF1bHQgcC0zIGJnLWJnLXByaW1hcnlcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTMgaXRlbXMtZW5kXCI+XG4gICAgICAgICAgICB7LyogSW5wdXQgRmllbGQgd2l0aCBJbnRlZ3JhdGVkIFNlbmQgQnV0dG9uIGFuZCBNb2RlIFNlbGVjdG9yIGluc2lkZSAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIHJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgIHJlZj17aW5wdXRSZWZ9XG4gICAgICAgICAgICAgICAgdmFsdWU9e2lucHV0fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0SW5wdXQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2hhdCB3aXRoIENhc2NhZGVcIlxuICAgICAgICAgICAgICAgIHJvd3M9ezJ9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJnLWVsZXZhdGVkIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC0yeGwgcGwtMTIgcHItMTIgcHQtMiBwYi0xMCB0ZXh0LXRleHQtcHJpbWFyeSBwbGFjZWhvbGRlcjp0ZXh0LXRleHQtdGVydGlhcnkgb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnQgcmVzaXplLW5vbmUgbWluLWgtWzgwcHhdIG1heC1oLTcyIG92ZXJmbG93LXktYXV0byB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgICAgIG9uS2V5RG93bj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgc2VuZCgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHsvKiBNb2RlIFNlbGVjdG9yIGluc2lkZSBpbnB1dCBib3R0b20tbGVmdCAqL31cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBsZWZ0LTIgYm90dG9tLTJcIiByZWY9e21vZGVNZW51UmVmfT5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHRleHQteHMgcHgtMyBweS0yIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCAke2NsaWVudE1vZGU9PT0nY2hhdCcgPyAndGV4dC1zdWNjZXNzJyA6ICd0ZXh0LWFjY2VudCd9IGJnLWJnLWVsZXZhdGVkIGhvdmVyOmJnLWJnLWhvdmVyIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMS41IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MGB9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IHNldE1vZGVNZW51SW5kZXgoY2xpZW50TW9kZT09PSdjaGF0JyA/IDAgOiAxKTsgc2V0TW9kZU1lbnVPcGVuKCh2KSA9PiAhdik7IH19XG4gICAgICAgICAgICAgICAgICBhcmlhLWhhc3BvcHVwPVwibWVudVwiXG4gICAgICAgICAgICAgICAgICBhcmlhLWV4cGFuZGVkPXttb2RlTWVudU9wZW59XG4gICAgICAgICAgICAgICAgICBvbktleURvd249e29uTW9kZUJ1dHRvbktleURvd259XG4gICAgICAgICAgICAgICAgICB0aXRsZT1cIk1vZGVcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtjbGllbnRNb2RlID09PSAnY2hhdCcgPyAnQ2hhdCcgOiAnQWN0aW9uJ31cbiAgICAgICAgICAgICAgICAgIDxDaGV2cm9uRG93biBjbGFzc05hbWU9XCJ3LTMgaC0zXCIgLz5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICB7bW9kZU1lbnVPcGVuICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLWZ1bGwgbWItMiBsZWZ0LTAgdy02NCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgYmctYmctZWxldmF0ZWQgc2hhZG93LWVsZXZhdGlvbiBwLTEuNSB0ZXh0LXhzIHRleHQtdGV4dC1wcmltYXJ5IHotMjBcIlxuICAgICAgICAgICAgICAgICAgICByb2xlPVwibWVudVwiXG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXstMX1cbiAgICAgICAgICAgICAgICAgICAgcmVmPXttb2RlTWVudUxpc3RSZWZ9XG4gICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17b25NZW51S2V5RG93bn1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yLjUgcm91bmRlZC1tZCBob3ZlcjpiZy1iZy1ob3ZlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTAgJHttb2RlTWVudUluZGV4PT09MCA/ICdyaW5nLTEgcmluZy1hY2NlbnQnIDogJyd9ICR7Y2xpZW50TW9kZT09PSdjaGF0JyA/ICdiZy1iZy1ob3ZlcicgOiAnJ31gfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHsgc2V0Q2xpZW50TW9kZSgnY2hhdCcpOyBzZXRNb2RlTWVudU9wZW4oZmFsc2UpOyB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtdGV4dC1wcmltYXJ5XCI+Q2hhdDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC10ZXh0LXRlcnRpYXJ5IHRleHQtWzExcHhdIG10LTAuNVwiPkJyYWluc3Rvcm0sIG91dGxpbmUsIHByZXZpZXcuIE5vIHdyaXRlcy48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMi41IHJvdW5kZWQtbWQgaG92ZXI6YmctYmctaG92ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwIG10LTEgJHttb2RlTWVudUluZGV4PT09MSA/ICdyaW5nLTEgcmluZy1hY2NlbnQnIDogJyd9ICR7Y2xpZW50TW9kZT09PSdhY3Rpb24nID8gJ2JnLWJnLWhvdmVyJyA6ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBzZXRDbGllbnRNb2RlKCdhY3Rpb24nKTsgc2V0TW9kZU1lbnVPcGVuKGZhbHNlKTsgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXRleHQtcHJpbWFyeVwiPkFjdGlvbjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC10ZXh0LXRlcnRpYXJ5IHRleHQtWzExcHhdIG10LTAuNVwiPkVuYWJsZSBzYXZpbmcgc2V0dGluZ3MgYW5kIGNoYXB0ZXJzLjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdm9pZCBzZW5kKCl9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3N0cmVhbWluZyB8fCAhaW5wdXQudHJpbSgpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHJpZ2h0LTIgYm90dG9tLTIgYmctYWNjZW50IGhvdmVyOmJnLWFjY2VudC1ob3ZlciBkaXNhYmxlZDpvcGFjaXR5LTQwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCB0ZXh0LXdoaXRlIHctOCBoLTggcm91bmRlZC1sZyBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIlNlbmRcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEFycm93VXBSaWdodCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzci1vbmx5XCI+U2VuZDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7aW5wdXRFcnJvciAmJiA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC14cyB0ZXh0LXJlZC00MDAgcC0yIHJvdW5kZWQtbGcgYmctcmVkLTk1MC8yMCBib3JkZXIgYm9yZGVyLXJlZC01MDAvMjBcIj57aW5wdXRFcnJvcn08L2Rpdj59XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBkcmFmdHMgYXJlIHJvdXRlZCB0byBjZW50ZXIgZWRpdG9yIHZpYSB3b3Jrc3BhY2U6Y3JlYXRlLWRyYWZ0ICovfVxuICAgIDwvRG5kUHJvdmlkZXI+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlUmVmIiwidXNlU3RhdGUiLCJEbmRQcm92aWRlciIsIkhUTUw1QmFja2VuZCIsInVzZVN1cGFiYXNlIiwiQ2hhdEJ1YmJsZSIsImNyZWF0ZUFwaSIsIkFycm93VXBSaWdodCIsIkNoZXZyb25Eb3duIiwiQ2hhdCIsImNoYXRJZCIsImluaXRpYWxNZXNzYWdlcyIsInN1cGFiYXNlIiwiYXBpIiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImlucHV0Iiwic2V0SW5wdXQiLCJzdHJlYW1pbmciLCJzZXRTdHJlYW1pbmciLCJpbnB1dEVycm9yIiwic2V0SW5wdXRFcnJvciIsImxpc3RSZWYiLCJpbnB1dFJlZiIsIm1vZGVNZW51UmVmIiwibW9kZU1lbnVMaXN0UmVmIiwic2F2aW5nIiwic2V0U2F2aW5nIiwic2F2ZUVycm9yIiwic2V0U2F2ZUVycm9yIiwicGVuZGluZ01vZGUiLCJzZXRQZW5kaW5nTW9kZSIsInBlbmRpbmdTZXR0aW5ncyIsInNldFBlbmRpbmdTZXR0aW5ncyIsInRvYXN0TXNnIiwic2V0VG9hc3RNc2ciLCJ0b2FzdFRpbWVyIiwiYXBpQmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwibG9hZGluZ0hpc3RvcnkiLCJzZXRMb2FkaW5nSGlzdG9yeSIsImNsaWVudE1vZGUiLCJzZXRDbGllbnRNb2RlIiwibW9kZU1lbnVPcGVuIiwic2V0TW9kZU1lbnVPcGVuIiwibW9kZU1lbnVJbmRleCIsInNldE1vZGVNZW51SW5kZXgiLCJjYWNoZUtleSIsImhhc0NhY2hlIiwic2V0SGFzQ2FjaGUiLCJtZXNzYWdlc1JlZiIsImN1cnJlbnQiLCJzY3JvbGxUbyIsInRvcCIsInNjcm9sbEhlaWdodCIsImJlaGF2aW9yIiwibGVuZ3RoIiwicyIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhcnIiLCJKU09OIiwicGFyc2UiLCJBcnJheSIsImlzQXJyYXkiLCJtb3VudGVkIiwiaGlzdG9yeSIsImdldENoYXRNZXNzYWdlc0J5Q2hhdElkIiwibmV4dCIsInN0cmluZ2lmeSIsInNldEl0ZW0iLCJlbCIsInN0eWxlIiwiaGVpZ2h0IiwibWF4IiwiTWF0aCIsIm1pbiIsIm9uRG9jQ2xpY2siLCJlIiwidCIsInRhcmdldCIsImNvbnRhaW5zIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uTW9kZUJ1dHRvbktleURvd24iLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsIm9uTWVudUtleURvd24iLCJpIiwib25LZXkiLCJjdHJsS2V5IiwibWV0YUtleSIsImZvY3VzIiwic2V0VGltZW91dCIsInNlbmQiLCJvcHRzIiwidGV4dCIsIm1lc3NhZ2VPdmVycmlkZSIsInRyaW0iLCJyZWdlbmVyYXRlUGFuZWxJZCIsImRhdGEiLCJzZXNzaW9uIiwiYXV0aCIsImdldFNlc3Npb24iLCJ0b2tlbiIsImFjY2Vzc190b2tlbiIsInVzZXJNZXNzYWdlIiwicm9sZSIsImNvbnRlbnQiLCJwYW5lbElkIiwicHJldiIsIm1OdW0iLCJleGVjIiwibVRpdGxlIiwibWVudGlvbnMiLCJjaGFwdGVyX251bWJlciIsInBhcnNlSW50IiwidGl0bGUiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwibWVzc2FnZSIsInVuZGVmaW5lZCIsImFzc2lzdGFudEluZGV4IiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwidmFsdWUiLCJkb25lIiwicmVhZCIsImNodW5rIiwiZGVjb2RlIiwic3RyZWFtIiwibGluZSIsInNwbGl0IiwidHJpbW1lZCIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImV2dCIsInR5cGUiLCJjb3B5IiwibXNnIiwiYWN0aW9uIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwibW9kZSIsImNoYW5nZXMiLCJwYW5lbF9zY3JpcHQiLCJpZCIsIml0ZW0iLCJyZWxlYXNlTG9jayIsIm9uUmVnZW5lcmF0ZSIsImJhY2tlbmQiLCJkaXYiLCJjbGFzc05hbWUiLCJyZWYiLCJtYXAiLCJtIiwiZHJhZ2dhYmxlIiwiQm9vbGVhbiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJkaXNhYmxlZCIsImNsZWFyVGltZW91dCIsInNwYW4iLCJ0ZXh0YXJlYSIsIm9uQ2hhbmdlIiwicGxhY2Vob2xkZXIiLCJyb3dzIiwib25LZXlEb3duIiwic2hpZnRLZXkiLCJ2IiwiYXJpYS1oYXNwb3B1cCIsImFyaWEtZXhwYW5kZWQiLCJ0YWJJbmRleCIsImFyaWEtaGlkZGVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/chat/Chat.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/chat/ChatBubble.tsx":
/*!********************************************!*\
  !*** ./src/components/chat/ChatBubble.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatBubble: () => (/* binding */ ChatBubble)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dnd */ \"(ssr)/./node_modules/react-dnd/dist/hooks/useDrag/useDrag.js\");\n/* __next_internal_client_entry_do_not_use__ ChatBubble auto */ \n\nfunction ChatBubble({ role, content, panelId, onEdit, onRegenerate, draggable }) {\n    const [{ isDragging }, drag] = (0,react_dnd__WEBPACK_IMPORTED_MODULE_1__.useDrag)(()=>({\n            type: \"PANEL\",\n            item: {\n                panelId\n            },\n            canDrag: ()=>Boolean(draggable && panelId),\n            collect: (monitor)=>({\n                    isDragging: monitor.isDragging()\n                })\n        }), [\n        panelId,\n        draggable\n    ]);\n    const isUser = role === \"user\";\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: draggable ? drag : undefined,\n        className: `group max-w-3xl ${isUser ? \"ml-auto\" : \"\"} ${isDragging ? \"opacity-60\" : \"\"}`,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: `rounded-2xl px-4 py-3 whitespace-pre-wrap shadow-sm border ${isUser ? \"bg-accent border-accent text-white\" : \"bg-bg-primary border-border-default text-text-primary\"}`,\n                children: content\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/ChatBubble.tsx\",\n                lineNumber: 30,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 mt-1\",\n                children: [\n                    onEdit && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: onEdit,\n                        className: \"text-xs text-text-tertiary hover:text-text-primary transition-colors duration-150\",\n                        children: \"Edit\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/ChatBubble.tsx\",\n                        lineNumber: 35,\n                        columnNumber: 11\n                    }, this),\n                    panelId && onRegenerate && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>onRegenerate(panelId),\n                        className: \"text-xs text-text-tertiary hover:text-text-primary transition-colors duration-150\",\n                        children: \"Regenerate Panel\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/ChatBubble.tsx\",\n                        lineNumber: 38,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/ChatBubble.tsx\",\n                lineNumber: 33,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/ChatBubble.tsx\",\n        lineNumber: 26,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9jaGF0L0NoYXRCdWJibGUudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBRW9DO0FBWTdCLFNBQVNDLFdBQVcsRUFBRUMsSUFBSSxFQUFFQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsTUFBTSxFQUFFQyxZQUFZLEVBQUVDLFNBQVMsRUFBbUI7SUFDckcsTUFBTSxDQUFDLEVBQUVDLFVBQVUsRUFBRSxFQUFFQyxLQUFLLEdBQUdULGtEQUFPQSxDQUFDLElBQU87WUFDNUNVLE1BQU07WUFDTkMsTUFBTTtnQkFBRVA7WUFBUTtZQUNoQlEsU0FBUyxJQUFNQyxRQUFRTixhQUFhSDtZQUNwQ1UsU0FBUyxDQUFDQyxVQUFnQztvQkFBRVAsWUFBWU8sUUFBUVAsVUFBVTtnQkFBRztRQUMvRSxJQUFJO1FBQUNKO1FBQVNHO0tBQVU7SUFFeEIsTUFBTVMsU0FBU2QsU0FBUztJQUV4QixxQkFDRSw4REFBQ2U7UUFDQ0MsS0FBS1gsWUFBYUUsT0FBZVU7UUFDakNDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRUosU0FBUyxZQUFZLEdBQUcsQ0FBQyxFQUFFUixhQUFhLGVBQWUsR0FBRyxDQUFDOzswQkFFekYsOERBQUNTO2dCQUFJRyxXQUFXLENBQUMsMkRBQTJELEVBQUVKLFNBQVMsdUNBQXVDLHdEQUF3RCxDQUFDOzBCQUNwTGI7Ozs7OzswQkFFSCw4REFBQ2M7Z0JBQUlHLFdBQVU7O29CQUNaZix3QkFDQyw4REFBQ2dCO3dCQUFPQyxTQUFTakI7d0JBQVFlLFdBQVU7a0NBQW9GOzs7Ozs7b0JBRXhIaEIsV0FBV0UsOEJBQ1YsOERBQUNlO3dCQUFPQyxTQUFTLElBQU1oQixhQUFhRjt3QkFBVWdCLFdBQVU7a0NBQW9GOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLdEoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmt2ZXJzZS1jbGllbnQvLi9zcmMvY29tcG9uZW50cy9jaGF0L0NoYXRCdWJibGUudHN4PzM4MzMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZURyYWcgfSBmcm9tICdyZWFjdC1kbmQnO1xuaW1wb3J0IHR5cGUgeyBEcmFnU291cmNlTW9uaXRvciB9IGZyb20gJ3JlYWN0LWRuZCc7XG5cbmV4cG9ydCB0eXBlIENoYXRCdWJibGVQcm9wcyA9IHtcbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgcGFuZWxJZD86IHN0cmluZyB8IG51bGw7XG4gIG9uRWRpdD86ICgpID0+IHZvaWQ7XG4gIG9uUmVnZW5lcmF0ZT86IChwYW5lbElkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGRyYWdnYWJsZT86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gQ2hhdEJ1YmJsZSh7IHJvbGUsIGNvbnRlbnQsIHBhbmVsSWQsIG9uRWRpdCwgb25SZWdlbmVyYXRlLCBkcmFnZ2FibGUgfTogQ2hhdEJ1YmJsZVByb3BzKSB7XG4gIGNvbnN0IFt7IGlzRHJhZ2dpbmcgfSwgZHJhZ10gPSB1c2VEcmFnKCgpID0+ICh7XG4gICAgdHlwZTogJ1BBTkVMJyxcbiAgICBpdGVtOiB7IHBhbmVsSWQgfSxcbiAgICBjYW5EcmFnOiAoKSA9PiBCb29sZWFuKGRyYWdnYWJsZSAmJiBwYW5lbElkKSxcbiAgICBjb2xsZWN0OiAobW9uaXRvcjogRHJhZ1NvdXJjZU1vbml0b3IpID0+ICh7IGlzRHJhZ2dpbmc6IG1vbml0b3IuaXNEcmFnZ2luZygpIH0pLFxuICB9KSwgW3BhbmVsSWQsIGRyYWdnYWJsZV0pO1xuXG4gIGNvbnN0IGlzVXNlciA9IHJvbGUgPT09ICd1c2VyJztcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHJlZj17ZHJhZ2dhYmxlID8gKGRyYWcgYXMgYW55KSA6IHVuZGVmaW5lZH1cbiAgICAgIGNsYXNzTmFtZT17YGdyb3VwIG1heC13LTN4bCAke2lzVXNlciA/ICdtbC1hdXRvJyA6ICcnfSAke2lzRHJhZ2dpbmcgPyAnb3BhY2l0eS02MCcgOiAnJ31gfVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgcm91bmRlZC0yeGwgcHgtNCBweS0zIHdoaXRlc3BhY2UtcHJlLXdyYXAgc2hhZG93LXNtIGJvcmRlciAke2lzVXNlciA/ICdiZy1hY2NlbnQgYm9yZGVyLWFjY2VudCB0ZXh0LXdoaXRlJyA6ICdiZy1iZy1wcmltYXJ5IGJvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtcHJpbWFyeSd9YH0+XG4gICAgICAgIHtjb250ZW50fVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTIgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0xNTAgbXQtMVwiPlxuICAgICAgICB7b25FZGl0ICYmIChcbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uRWRpdH0gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnkgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwXCI+RWRpdDwvYnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICB7cGFuZWxJZCAmJiBvblJlZ2VuZXJhdGUgJiYgKFxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gb25SZWdlbmVyYXRlKHBhbmVsSWQpfSBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0xNTBcIj5SZWdlbmVyYXRlIFBhbmVsPC9idXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VEcmFnIiwiQ2hhdEJ1YmJsZSIsInJvbGUiLCJjb250ZW50IiwicGFuZWxJZCIsIm9uRWRpdCIsIm9uUmVnZW5lcmF0ZSIsImRyYWdnYWJsZSIsImlzRHJhZ2dpbmciLCJkcmFnIiwidHlwZSIsIml0ZW0iLCJjYW5EcmFnIiwiQm9vbGVhbiIsImNvbGxlY3QiLCJtb25pdG9yIiwiaXNVc2VyIiwiZGl2IiwicmVmIiwidW5kZWZpbmVkIiwiY2xhc3NOYW1lIiwiYnV0dG9uIiwib25DbGljayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/components/chat/ChatBubble.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/providers/SupabaseProvider.tsx":
/*!*******************************************************!*\
  !*** ./src/components/providers/SupabaseProvider.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SupabaseProvider: () => (/* binding */ SupabaseProvider),\n/* harmony export */   useSupabase: () => (/* binding */ useSupabase)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(ssr)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* __next_internal_client_entry_do_not_use__ SupabaseProvider,useSupabase auto */ \n\n\nconst SupabaseCtx = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nfunction SupabaseProvider({ children }) {\n    const supabase = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const url = \"https://njnutxvshieiloagkcap.supabase.co\";\n        const anon = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5qbnV0eHZzaGllaWxvYWdrY2FwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzM5MzcsImV4cCI6MjA3Nzk0OTkzN30.yggP_-zD-4ZREQHzmkRZJCJirEbUF85WS9Z3Ih_cKR4\";\n        if (!url || !anon) {\n            if (false) {}\n        }\n        if (false) {}\n        // Fallback (should not happen in client component SSR path)\n        if (!globalThis.__supabase__) {\n            globalThis.__supabase__ = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(url || \"\", anon || \"\");\n        }\n        return globalThis.__supabase__;\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SupabaseCtx.Provider, {\n        value: supabase,\n        children: children\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/providers/SupabaseProvider.tsx\",\n        lineNumber: 35,\n        columnNumber: 10\n    }, this);\n}\nfunction useSupabase() {\n    const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(SupabaseCtx);\n    if (!ctx) throw new Error(\"SupabaseProvider is missing\");\n    return ctx;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9wcm92aWRlcnMvU3VwYWJhc2VQcm92aWRlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFMkQ7QUFDZTtBQUUxRSxNQUFNSSw0QkFBY0osb0RBQWFBLENBQXdCO0FBT2xELFNBQVNLLGlCQUFpQixFQUFFQyxRQUFRLEVBQWlDO0lBQzFFLE1BQU1DLFdBQVdMLDhDQUFPQSxDQUFDO1FBQ3ZCLE1BQU1NLE1BQU1DLDBDQUFvQztRQUNoRCxNQUFNRyxPQUFPSCxrTkFBeUM7UUFDdEQsSUFBSSxDQUFDRCxPQUFPLENBQUNJLE1BQU07WUFDakIsSUFBSSxLQUFrQixFQUFhLEVBRWxDO1FBQ0g7UUFDQSxJQUFJLEtBQWtCLEVBQWEsRUFLbEM7UUFDRCw0REFBNEQ7UUFDNUQsSUFBSSxDQUFDTSxXQUFXRCxZQUFZLEVBQUU7WUFDNUJDLFdBQVdELFlBQVksR0FBR2QsbUVBQVlBLENBQUNLLE9BQU8sSUFBSUksUUFBUTtRQUM1RDtRQUNBLE9BQU9NLFdBQVdELFlBQVk7SUFDaEMsR0FBRyxFQUFFO0lBRUwscUJBQU8sOERBQUNiLFlBQVllLFFBQVE7UUFBQ0MsT0FBT2I7a0JBQVdEOzs7Ozs7QUFDakQ7QUFFTyxTQUFTZTtJQUNkLE1BQU1DLE1BQU1yQixpREFBVUEsQ0FBQ0c7SUFDdkIsSUFBSSxDQUFDa0IsS0FBSyxNQUFNLElBQUlDLE1BQU07SUFDMUIsT0FBT0Q7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2lua3ZlcnNlLWNsaWVudC8uL3NyYy9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyLnRzeD9iZWFkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50LCB0eXBlIFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuY29uc3QgU3VwYWJhc2VDdHggPSBjcmVhdGVDb250ZXh0PFN1cGFiYXNlQ2xpZW50IHwgbnVsbD4obnVsbCk7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxuICB2YXIgX19zdXBhYmFzZV9fOiBTdXBhYmFzZUNsaWVudCB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFN1cGFiYXNlUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuICBjb25zdCBzdXBhYmFzZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbiAgICBjb25zdCBhbm9uID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XG4gICAgaWYgKCF1cmwgfHwgIWFub24pIHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1N1cGFiYXNlIGVudiBpcyBtaXNzaW5nIGluIE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCAvIE5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKCF3aW5kb3cuX19zdXBhYmFzZV9fKSB7XG4gICAgICAgIHdpbmRvdy5fX3N1cGFiYXNlX18gPSBjcmVhdGVDbGllbnQodXJsIHx8ICcnLCBhbm9uIHx8ICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3aW5kb3cuX19zdXBhYmFzZV9fO1xuICAgIH1cbiAgICAvLyBGYWxsYmFjayAoc2hvdWxkIG5vdCBoYXBwZW4gaW4gY2xpZW50IGNvbXBvbmVudCBTU1IgcGF0aClcbiAgICBpZiAoIWdsb2JhbFRoaXMuX19zdXBhYmFzZV9fKSB7XG4gICAgICBnbG9iYWxUaGlzLl9fc3VwYWJhc2VfXyA9IGNyZWF0ZUNsaWVudCh1cmwgfHwgJycsIGFub24gfHwgJycpO1xuICAgIH1cbiAgICByZXR1cm4gZ2xvYmFsVGhpcy5fX3N1cGFiYXNlX187XG4gIH0sIFtdKTtcblxuICByZXR1cm4gPFN1cGFiYXNlQ3R4LlByb3ZpZGVyIHZhbHVlPXtzdXBhYmFzZX0+e2NoaWxkcmVufTwvU3VwYWJhc2VDdHguUHJvdmlkZXI+O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU3VwYWJhc2UoKSB7XG4gIGNvbnN0IGN0eCA9IHVzZUNvbnRleHQoU3VwYWJhc2VDdHgpO1xuICBpZiAoIWN0eCkgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZVByb3ZpZGVyIGlzIG1pc3NpbmcnKTtcbiAgcmV0dXJuIGN0eDtcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZU1lbW8iLCJjcmVhdGVDbGllbnQiLCJTdXBhYmFzZUN0eCIsIlN1cGFiYXNlUHJvdmlkZXIiLCJjaGlsZHJlbiIsInN1cGFiYXNlIiwidXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsImFub24iLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJ3YXJuIiwid2luZG93IiwiX19zdXBhYmFzZV9fIiwiZ2xvYmFsVGhpcyIsIlByb3ZpZGVyIiwidmFsdWUiLCJ1c2VTdXBhYmFzZSIsImN0eCIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/providers/SupabaseProvider.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/pwa/RegisterSW.tsx":
/*!*******************************************!*\
  !*** ./src/components/pwa/RegisterSW.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RegisterSW: () => (/* binding */ RegisterSW)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ RegisterSW auto */ \nfunction RegisterSW() {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (\"serviceWorker\" in navigator) {\n            const swUrl = \"/sw.js\";\n            navigator.serviceWorker.register(swUrl).catch((err)=>console.warn(\"[PWA] SW registration failed\", err));\n        }\n    }, []);\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9wd2EvUmVnaXN0ZXJTVy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O2dFQUVrQztBQUUzQixTQUFTQztJQUNkRCxnREFBU0EsQ0FBQztRQUNSLElBQUksbUJBQW1CRSxXQUFXO1lBQ2hDLE1BQU1DLFFBQVE7WUFDZEQsVUFBVUUsYUFBYSxDQUNwQkMsUUFBUSxDQUFDRixPQUNURyxLQUFLLENBQUMsQ0FBQ0MsTUFBUUMsUUFBUUMsSUFBSSxDQUFDLGdDQUFnQ0Y7UUFDakU7SUFDRixHQUFHLEVBQUU7SUFDTCxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmt2ZXJzZS1jbGllbnQvLi9zcmMvY29tcG9uZW50cy9wd2EvUmVnaXN0ZXJTVy50c3g/MTdjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gUmVnaXN0ZXJTVygpIHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuICAgICAgY29uc3Qgc3dVcmwgPSAnL3N3LmpzJztcbiAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyXG4gICAgICAgIC5yZWdpc3Rlcihzd1VybClcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUud2FybignW1BXQV0gU1cgcmVnaXN0cmF0aW9uIGZhaWxlZCcsIGVycikpO1xuICAgIH1cbiAgfSwgW10pO1xuICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJSZWdpc3RlclNXIiwibmF2aWdhdG9yIiwic3dVcmwiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJ3YXJuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/pwa/RegisterSW.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/workspace/CharacterManager.tsx":
/*!*******************************************************!*\
  !*** ./src/components/workspace/CharacterManager.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CharacterManager: () => (/* binding */ CharacterManager)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(ssr)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/api */ \"(ssr)/./src/lib/api.ts\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/plus.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/upload.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* __next_internal_client_entry_do_not_use__ CharacterManager auto */ \n\n\n\n\nfunction classNames(...xs) {\n    return xs.filter(Boolean).join(\" \");\n}\nfunction setByPath(base, path, value) {\n    const root = base && typeof base === \"object\" ? {\n        ...base\n    } : {};\n    let curr = root;\n    for(let i = 0; i < path.length - 1; i++){\n        const k = path[i];\n        if (!curr[k] || typeof curr[k] !== \"object\") curr[k] = {};\n        curr = curr[k];\n    }\n    curr[path[path.length - 1]] = value;\n    return root;\n}\nfunction delByPath(base, path) {\n    const root = base && typeof base === \"object\" ? {\n        ...base\n    } : {};\n    let curr = root;\n    for(let i = 0; i < path.length - 1; i++){\n        const k = path[i];\n        if (!curr[k] || typeof curr[k] !== \"object\") return root;\n        curr = curr[k];\n    }\n    delete curr[path[path.length - 1]];\n    return root;\n}\nfunction toNestedFromTags(tags) {\n    let obj = {};\n    for (const t of tags){\n        const parts = t.key.split(\".\").map((s)=>s.trim()).filter(Boolean);\n        if (!parts.length) continue;\n        obj = setByPath(obj, parts, t.value);\n    }\n    return obj;\n}\nfunction CharacterManager({ projectId, requireImage }) {\n    const supabase = (0,_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase)();\n    const api = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>(0,_lib_api__WEBPACK_IMPORTED_MODULE_3__.createApi)(supabase), [\n        supabase\n    ]);\n    const [items, setItems] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [filter, setFilter] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [activeId, setActiveId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [deleting, setDeleting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [toast, setToast] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const toastTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [form, setForm] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        name: \"\"\n    });\n    const [traits, setTraits] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [uploading, setUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const dropRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_characters`, [\n        projectId\n    ]);\n    const activeKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_characters_active`, [\n        projectId\n    ]);\n    const [hasCache, setHasCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const itemsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(items);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const s =  false ? 0 : null;\n            if (s) {\n                const arr = JSON.parse(s);\n                if (Array.isArray(arr)) {\n                    setItems(arr);\n                    const valid = arr.length > 0;\n                    setHasCache(valid);\n                    if (valid) setLoading(false);\n                }\n            }\n        } catch  {}\n    }, [\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasCache) {\n                return;\n            }\n            try {\n                if (!hasCache) setLoading(true);\n                const res = await api.listCharacters(projectId);\n                if (!mounted) return;\n                const next = res || [];\n                try {\n                    if (hasCache && JSON.stringify(next) === JSON.stringify(itemsRef.current)) {\n                        return;\n                    }\n                } catch  {}\n                setItems(next);\n            } catch (e) {\n                if (!mounted) return;\n                setError(e?.message || \"Failed to load characters\");\n            } finally{\n                if (mounted) setLoading(false);\n            }\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        projectId,\n        hasCache\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        items,\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        itemsRef.current = items;\n    }, [\n        items\n    ]);\n    // Restore last active selection\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const v =  false ? 0 : null;\n            if (v) setActiveId(v);\n        } catch  {}\n    }, [\n        activeKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (activeId && \"undefined\" !== \"undefined\") {}\n        } catch  {}\n    }, [\n        activeId,\n        activeKey\n    ]);\n    // Reflect chat-driven upserts instantly\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onUpsert(ev) {\n            const ce = ev;\n            const item = ce?.detail?.item;\n            if (!item || !item.id) return;\n            setItems((prev)=>{\n                const idx = prev.findIndex((x)=>x.id === item.id);\n                if (idx >= 0) {\n                    const next = [\n                        ...prev\n                    ];\n                    next[idx] = {\n                        ...next[idx],\n                        ...item\n                    };\n                    return next;\n                }\n                return [\n                    ...prev,\n                    item\n                ];\n            });\n            if (activeId === item.id) {\n                setForm({\n                    id: item.id,\n                    name: item.name,\n                    role: item.role || \"\",\n                    summary: item.summary || \"\",\n                    imageUrl: item.imageUrl || \"\",\n                    traits: item.traits || null\n                });\n                setTraits(item.traits || {});\n            }\n            notify(\"Character updated via chat\");\n        }\n        window.addEventListener(\"workspace:character-upsert\", onUpsert);\n        return ()=>window.removeEventListener(\"workspace:character-upsert\", onUpsert);\n    }, [\n        activeId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeId) return;\n        if (activeId === \"__new__\") {\n            setForm({\n                name: \"\"\n            });\n            setTraits({});\n            return;\n        }\n        const it = items.find((x)=>x.id === activeId);\n        if (!it) return;\n        setForm({\n            id: it.id,\n            name: it.name,\n            role: it.role || \"\",\n            summary: it.summary || \"\",\n            imageUrl: it.imageUrl || \"\",\n            traits: it.traits || null\n        });\n        setTraits(it.traits || {});\n    }, [\n        activeId,\n        items\n    ]);\n    const filtered = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const q = filter.trim().toLowerCase();\n        if (!q) return items;\n        return items.filter((x)=>(x.name || \"\").toLowerCase().includes(q) || (x.role || \"\").toLowerCase().includes(q));\n    }, [\n        items,\n        filter\n    ]);\n    const onNew = ()=>{\n        setActiveId(\"__new__\");\n        setForm({\n            name: \"\"\n        });\n        setTraits({});\n    };\n    // Removed brainstorm/refine suggestion logic\n    const notify = (msg)=>{\n        if (toastTimer.current) clearTimeout(toastTimer.current);\n        setToast(msg);\n        toastTimer.current = setTimeout(()=>setToast(\"\"), 2500);\n    };\n    const onUploadFile = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (file)=>{\n        if (!file) return;\n        setUploading(true);\n        try {\n            const bucket = process.env.NEXT_PUBLIC_SUPABASE_CHAR_BUCKET || \"character-images\";\n            const ext = file.name.split(\".\").pop() || \"jpg\";\n            const path = `${projectId}/${Date.now()}-${Math.random().toString(36).slice(2)}.${ext}`;\n            const { error: upErr } = await supabase.storage.from(bucket).upload(path, file, {\n                upsert: true,\n                contentType: file.type\n            });\n            if (upErr) throw upErr;\n            const { data } = supabase.storage.from(bucket).getPublicUrl(path);\n            const url = data.publicUrl;\n            setForm((f)=>({\n                    ...f,\n                    imageUrl: url\n                }));\n            notify(\"Image uploaded\");\n        } catch (e) {\n            notify(e?.message || \"Upload failed\");\n        } finally{\n            setUploading(false);\n        }\n    }, [\n        projectId,\n        supabase\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const el = dropRef.current;\n        if (!el) return;\n        const onDrop = (e)=>{\n            e.preventDefault();\n            const f = e.dataTransfer?.files?.[0];\n            if (f) void onUploadFile(f);\n            el.classList.remove(\"ring-2\", \"ring-blue-500\");\n        };\n        const onDrag = (e)=>{\n            e.preventDefault();\n            el.classList.add(\"ring-2\", \"ring-blue-500\");\n        };\n        const onLeave = (e)=>{\n            e.preventDefault();\n            el.classList.remove(\"ring-2\", \"ring-blue-500\");\n        };\n        el.addEventListener(\"drop\", onDrop);\n        el.addEventListener(\"dragover\", onDrag);\n        el.addEventListener(\"dragleave\", onLeave);\n        return ()=>{\n            el.removeEventListener(\"drop\", onDrop);\n            el.removeEventListener(\"dragover\", onDrag);\n            el.removeEventListener(\"dragleave\", onLeave);\n        };\n    }, [\n        onUploadFile\n    ]);\n    // ----- Traits editor helpers (strings-only values, arrays supported, depth<=5) -----\n    const clone = (o)=>JSON.parse(JSON.stringify(o ?? {}));\n    const isObj = (v)=>v && typeof v === \"object\" && !Array.isArray(v);\n    const setVal = (path, val)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < path.length - 1; i++)ref = ref[path[i]];\n            ref[path[path.length - 1]] = val;\n            return nxt;\n        });\n    };\n    const delKey = (pathToParent, key)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToParent.length; i++)ref = ref[pathToParent[i]];\n            if (Array.isArray(ref) && typeof key === \"number\") ref.splice(key, 1);\n            else if (ref && typeof ref === \"object\") delete ref[key];\n            return nxt;\n        });\n    };\n    const renameKey = (pathToParent, oldKey, newKey)=>{\n        if (!newKey) return;\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToParent.length; i++)ref = ref[pathToParent[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            if (oldKey === newKey) return nxt;\n            const val = ref[oldKey];\n            delete ref[oldKey];\n            ref[newKey] = val;\n            return nxt;\n        });\n    };\n    const addChild = (pathToObj, depth)=>{\n        if (depth >= 5) return; // depth limit\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToObj.length; i++)ref = ref[pathToObj[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            let base = \"key\";\n            let i2 = 1;\n            let key = base;\n            while(Object.prototype.hasOwnProperty.call(ref, key)){\n                key = `${base}-${i2++}`;\n            }\n            ref[key] = \"\"; // default as string leaf\n            return nxt;\n        });\n    };\n    const addRootKey = ()=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let base = \"key\";\n            let i = 1;\n            let k = base;\n            while(Object.prototype.hasOwnProperty.call(nxt, k)){\n                k = `${base}-${i++}`;\n            }\n            nxt[k] = \"\";\n            return nxt;\n        });\n    };\n    const convertType = (path, parentPath, key, nextType, depth)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < parentPath.length; i++)ref = ref[parentPath[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            if (nextType === \"string\") ref[key] = \"\";\n            else if (nextType === \"object\") ref[key] = depth >= 5 ? \"\" : {};\n            else if (nextType === \"array\") ref[key] = [];\n            return nxt;\n        });\n    };\n    const addArrayItem = (pathToArr)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToArr.length; i++)ref = ref[pathToArr[i]];\n            if (Array.isArray(ref)) ref.push(\"\");\n            return nxt;\n        });\n    };\n    // Expose handlers to nested TraitObject/TraitRow without prop-drilling\n    TraitObject._parent = {\n        setVal,\n        delKey,\n        renameKey,\n        addChild,\n        convertType,\n        addArrayItem\n    };\n    const onSave = async ()=>{\n        if (!form.name.trim()) {\n            notify(\"Name is required\");\n            return;\n        }\n        if (requireImage && !form.imageUrl) {\n            notify(\"Image is required in manhwa mode\");\n            return;\n        }\n        setSaving(true);\n        try {\n            const traitsObj = traits;\n            if (activeId === \"__new__\") {\n                const res = await api.createCharacter(projectId, {\n                    name: form.name.trim(),\n                    role: form.role || undefined,\n                    summary: form.summary || undefined,\n                    imageUrl: form.imageUrl || undefined,\n                    traits: traitsObj\n                });\n                setItems((prev)=>[\n                        ...prev,\n                        res\n                    ]);\n                setActiveId(res.id);\n            } else if (activeId) {\n                const res = await api.updateCharacter(projectId, activeId, {\n                    name: form.name.trim(),\n                    role: form.role || undefined,\n                    summary: form.summary || undefined,\n                    imageUrl: form.imageUrl || undefined,\n                    traits: traitsObj\n                });\n                setItems((prev)=>prev.map((x)=>x.id === res.id ? res : x));\n            }\n            notify(\"Saved\");\n        } catch (e) {\n            notify(e?.message || \"Save failed\");\n        } finally{\n            setSaving(false);\n        }\n    };\n    const onDelete = async ()=>{\n        if (!activeId || activeId === \"__new__\") return;\n        if (!confirm(\"Delete this character?\")) return;\n        setDeleting(true);\n        try {\n            await api.deleteCharacter(projectId, activeId);\n            setItems((prev)=>prev.filter((x)=>x.id !== activeId));\n            setActiveId(null);\n            setForm({\n                name: \"\"\n            });\n            setTraits({});\n            notify(\"Deleted\");\n        } catch (e) {\n            notify(e?.message || \"Delete failed\");\n        } finally{\n            setDeleting(false);\n        }\n    };\n    const count = items.length;\n    const active = activeId === \"__new__\" ? form : items.find((x)=>x.id === activeId) || null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-full grid grid-rows-[auto_1fr]\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"border-b border-border-default px-6 py-4 flex items-center justify-between\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-base font-semibold text-text-primary\",\n                                children: \"Character Management\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 391,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs px-2 py-1 rounded-md border border-border-default text-text-secondary\",\n                                children: [\n                                    count,\n                                    \" Characters\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 392,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 390,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onNew,\n                            className: \"rounded-lg bg-bg-elevated border border-border-default hover:border-accent hover:bg-bg-hover text-text-secondary hover:text-text-primary text-sm px-4 py-3 inline-flex items-center justify-center gap-2 transition-all duration-150 hover:-translate-y-0.5\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                    className: \"w-4 h-4\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 396,\n                                    columnNumber: 13\n                                }, this),\n                                \"New Character\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                            lineNumber: 395,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 394,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 389,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"min-h-0 grid\",\n                style: {\n                    gridTemplateColumns: \"35% 65%\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                        className: \"border-r border-border-default min-h-0 flex flex-col\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"p-3\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            value: filter,\n                                            onChange: (e)=>setFilter(e.target.value),\n                                            placeholder: \"Search characters\",\n                                            className: \"w-full bg-bg-primary border border-border-default rounded-md pl-9 pr-3 py-2.5 text-sm text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 406,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                            className: \"w-4 h-4 absolute left-3 top-3 text-text-tertiary\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 407,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 405,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 404,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 overflow-y-auto px-3 pb-3\",\n                                children: [\n                                    loading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-text-secondary px-2 py-2\",\n                                        children: \"Loading\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                        lineNumber: 411,\n                                        columnNumber: 25\n                                    }, this),\n                                    error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-red-400 px-2 py-2 bg-red-950/20 rounded-md border border-red-500/20\",\n                                        children: error\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                        lineNumber: 412,\n                                        columnNumber: 23\n                                    }, this),\n                                    !loading && !filtered.length && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-10 text-center text-text-tertiary text-sm\",\n                                        children: \"No characters yet. Create your first character!\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                        lineNumber: 414,\n                                        columnNumber: 15\n                                    }, this),\n                                    filtered.map((c)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setActiveId(c.id),\n                                            className: classNames(\"w-full text-left px-3 py-3 rounded-md mb-2 transition-all\", activeId === c.id ? \"border-l-2 border-blue-500 bg-bg-elevated\" : \"hover:bg-bg-hover\"),\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"w-12 h-12 rounded-full bg-bg-primary border border-border-default overflow-hidden flex items-center justify-center\",\n                                                        children: c.imageUrl ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                            src: c.imageUrl,\n                                                            alt: c.name,\n                                                            className: \"w-full h-full object-cover\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 420,\n                                                            columnNumber: 35\n                                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs text-text-tertiary\",\n                                                            children: \"No Img\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 420,\n                                                            columnNumber: 114\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                        lineNumber: 419,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex-1 min-w-0\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-sm font-medium text-text-primary truncate\",\n                                                                children: c.name\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                                lineNumber: 423,\n                                                                columnNumber: 21\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-xs text-text-tertiary truncate\",\n                                                                children: c.role || \"\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                                lineNumber: 424,\n                                                                columnNumber: 21\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                        lineNumber: 422,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                lineNumber: 418,\n                                                columnNumber: 17\n                                            }, this)\n                                        }, c.id, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 417,\n                                            columnNumber: 15\n                                        }, this))\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 410,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 403,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                        className: \"min-h-0 overflow-y-auto p-6\",\n                        \"aria-label\": \"Character details\",\n                        children: activeId ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"max-w-2xl mx-auto\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    ref: dropRef,\n                                    className: \"flex flex-col items-center mb-6 p-4 rounded-xl border border-border-default bg-bg-elevated\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"w-30 h-30 w-[120px] h-[120px] rounded-full overflow-hidden border border-border-default bg-bg-primary flex items-center justify-center\",\n                                            children: form.imageUrl ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                src: form.imageUrl,\n                                                alt: \"avatar\",\n                                                className: \"w-full h-full object-cover\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                lineNumber: 437,\n                                                columnNumber: 36\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-xs text-text-tertiary\",\n                                                children: \"No Image\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                lineNumber: 437,\n                                                columnNumber: 118\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 436,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"mt-3 flex items-center gap-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                    className: \"px-3 py-2 rounded-md border border-border-default bg-bg-primary text-text-secondary hover:text-text-primary inline-flex items-center gap-2 cursor-pointer\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                                            className: \"w-4 h-4\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 441,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        form.imageUrl ? \"Change Image\" : \"Upload Image\",\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: \"file\",\n                                                            accept: \"image/*\",\n                                                            className: \"hidden\",\n                                                            onChange: (e)=>{\n                                                                const f = e.target.files?.[0];\n                                                                if (f) void onUploadFile(f);\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 443,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 440,\n                                                    columnNumber: 19\n                                                }, this),\n                                                form.imageUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: ()=>setForm((f)=>({\n                                                                ...f,\n                                                                imageUrl: \"\"\n                                                            })),\n                                                    className: \"text-text-tertiary hover:text-red-400 text-sm inline-flex items-center gap-1\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                            className: \"w-4 h-4\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 447,\n                                                            columnNumber: 23\n                                                        }, this),\n                                                        \"Remove\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 446,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 439,\n                                            columnNumber: 17\n                                        }, this),\n                                        uploading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"mt-2 text-xs text-text-tertiary inline-flex items-center gap-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                    className: \"w-3 h-3 animate-spin\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 452,\n                                                    columnNumber: 111\n                                                }, this),\n                                                \" Uploading\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 452,\n                                            columnNumber: 31\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 435,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"grid gap-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"grid gap-2 text-sm\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                    children: \"Name\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 457,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    value: form.name,\n                                                    onChange: (e)=>setForm((f)=>({\n                                                                ...f,\n                                                                name: e.target.value\n                                                            })),\n                                                    className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 458,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 456,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"grid gap-2 text-sm\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                    children: \"Role\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 461,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    value: form.role || \"\",\n                                                    onChange: (e)=>setForm((f)=>({\n                                                                ...f,\n                                                                role: e.target.value\n                                                            })),\n                                                    list: \"roles\",\n                                                    className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 462,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"datalist\", {\n                                                    id: \"roles\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                            value: \"Protagonist\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 464,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                            value: \"Antagonist\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 465,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                            value: \"Supporting\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 466,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                            value: \"Mentor\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 467,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                            value: \"Love Interest\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 468,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 463,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 460,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"grid gap-2 text-sm\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                    children: \"Summary\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 472,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                    value: form.summary || \"\",\n                                                    onChange: (e)=>setForm((f)=>({\n                                                                ...f,\n                                                                summary: e.target.value\n                                                            })),\n                                                    rows: 5,\n                                                    className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent text-sm\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 473,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-[11px] text-text-tertiary\",\n                                                    children: [\n                                                        (form.summary || \"\").length,\n                                                        \" characters\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 474,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 471,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"grid gap-2 text-sm\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center justify-between\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                            children: \"Traits\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 479,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                            onClick: addRootKey,\n                                                            className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                                                    className: \"w-3 h-3\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                                    lineNumber: 480,\n                                                                    columnNumber: 195\n                                                                }, this),\n                                                                \" Add key\"\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 480,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 478,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"mt-1\",\n                                                    children: [\n                                                        Object.keys(traits || {}).length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs text-text-tertiary\",\n                                                            children: \"No traits yet. Add a key.\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 484,\n                                                            columnNumber: 23\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitObject, {\n                                                            obj: traits,\n                                                            path: [],\n                                                            depth: 1\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 486,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 482,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 477,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center justify-between pt-4\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: onDelete,\n                                                    disabled: !activeId || activeId === \"__new__\" || deleting,\n                                                    className: \"text-red-400 hover:text-red-300 inline-flex items-center gap-2 text-sm\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                            className: \"w-4 h-4\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 492,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        \"Delete Character\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 491,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center gap-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                            onClick: ()=>{\n                                                                setActiveId(null);\n                                                            },\n                                                            className: \"px-4 py-2 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover\",\n                                                            children: \"Cancel\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 496,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                            onClick: onSave,\n                                                            disabled: saving,\n                                                            className: \"px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-500 text-white\",\n                                                            children: saving ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"inline-flex items-center gap-2\",\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                                        className: \"w-4 h-4 animate-spin\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                                        lineNumber: 498,\n                                                                        columnNumber: 82\n                                                                    }, this),\n                                                                    \" Saving\"\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                                lineNumber: 498,\n                                                                columnNumber: 33\n                                                            }, this) : \"Save Character\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 497,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 495,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 490,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 455,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                            lineNumber: 434,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-tertiary\",\n                            children: \"Select a character or create a new one.\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                            lineNumber: 505,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 432,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 402,\n                columnNumber: 7\n            }, this),\n            toast && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed top-4 right-4 z-50\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-4 py-3 rounded-lg bg-bg-elevated border border-border-default text-text-primary text-sm shadow-elevation\",\n                    children: toast\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                    lineNumber: 512,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 511,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n        lineNumber: 388,\n        columnNumber: 5\n    }, this);\n}\nfunction TraitObject({ obj, path, depth }) {\n    const [_, setTick] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    // Access editor functions from outer scope via window proxy is not ideal; we rely on closures in parent component.\n    // This inline component depends on functions bound on window by parent closure.\n    // To keep everything in one file and avoid prop-drilling many handlers, we will re-grab them from React context via closures.\n    const parent = TraitObject._parent;\n    const ctx = parent || useCharacterManagerContext();\n    TraitObject._parent = ctx;\n    const keys = Object.keys(obj || {});\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"space-y-2\",\n        children: keys.map((k)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitRow, {\n                k: k,\n                v: obj[k],\n                parentPath: path,\n                depth: depth,\n                ctx: ctx\n            }, k, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 541,\n                columnNumber: 9\n            }, this))\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n        lineNumber: 539,\n        columnNumber: 5\n    }, this);\n}\nfunction TraitRow({ k, v, parentPath, depth, ctx }) {\n    const isArray = Array.isArray(v);\n    const isObject = v && typeof v === \"object\" && !isArray;\n    const type = isArray ? \"array\" : isObject ? \"object\" : \"string\";\n    const [name, setName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(k);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setName(k);\n    }, [\n        k\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"border border-border-default rounded-md p-2 bg-bg-elevated\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        value: name,\n                        onChange: (e)=>setName(e.target.value),\n                        onBlur: ()=>{\n                            if (name !== k && name.trim()) ctx.renameKey(parentPath, k, name.trim());\n                        },\n                        onKeyDown: (e)=>{\n                            if (e.key === \"Enter\") {\n                                e.target.blur();\n                            }\n                        },\n                        placeholder: \"key\",\n                        className: \"flex-none w-48 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 557,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        value: type,\n                        onChange: (e)=>ctx.convertType([\n                                ...parentPath,\n                                k\n                            ], parentPath, k, e.target.value, depth),\n                        className: \"flex-none w-28 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"string\",\n                                children: \"String\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 566,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"object\",\n                                disabled: depth >= 5,\n                                children: \"Object\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 567,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"array\",\n                                children: \"Array\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 568,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 565,\n                        columnNumber: 9\n                    }, this),\n                    type === \"string\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        value: String(v || \"\"),\n                        onChange: (e)=>ctx.setVal([\n                                ...parentPath,\n                                k\n                            ], e.target.value),\n                        placeholder: \"value\",\n                        className: \"flex-1 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 571,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.delKey(parentPath, k),\n                        className: \"text-text-tertiary hover:text-red-400 text-sm ml-auto\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                            className: \"w-4 h-4\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                            lineNumber: 573,\n                            columnNumber: 123\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 573,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 556,\n                columnNumber: 7\n            }, this),\n            type === \"object\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 ml-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.addChild([\n                                ...parentPath,\n                                k\n                            ], depth + 1),\n                        disabled: depth >= 5,\n                        className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                className: \"w-3 h-3\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 577,\n                                columnNumber: 240\n                            }, this),\n                            \" Add child\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 577,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitObject, {\n                        obj: v,\n                        path: [\n                            ...parentPath,\n                            k\n                        ],\n                        depth: depth + 1\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 578,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 576,\n                columnNumber: 9\n            }, this),\n            type === \"array\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 ml-4 space-y-2\",\n                children: [\n                    v.map((item, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-text-tertiary\",\n                                    children: [\n                                        \"[\",\n                                        idx,\n                                        \"]\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 585,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    value: item,\n                                    onChange: (e)=>ctx.setVal([\n                                            ...parentPath,\n                                            k,\n                                            idx\n                                        ], e.target.value),\n                                    placeholder: \"value\",\n                                    className: \"flex-1 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 586,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>ctx.delKey([\n                                            ...parentPath,\n                                            k\n                                        ], idx),\n                                    className: \"text-text-tertiary hover:text-red-400 text-sm\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                        lineNumber: 587,\n                                        columnNumber: 131\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 587,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, idx, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                            lineNumber: 584,\n                            columnNumber: 13\n                        }, this)),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.addArrayItem([\n                                ...parentPath,\n                                k\n                            ]),\n                        className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                className: \"w-3 h-3\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 590,\n                                columnNumber: 215\n                            }, this),\n                            \" Add item\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 590,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 582,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n        lineNumber: 555,\n        columnNumber: 5\n    }, this);\n}\n// Lightweight context via closure binding\nfunction useCharacterManagerContext() {\n    // Find the nearest CharacterManager by walking React closure. In TSX single-file component, we pass handlers by property in TraitObject._parent above.\n    // Instead of a real React Context provider (extra boilerplate), expose noop fallbacks; they get overwritten when first TraitObject renders.\n    return {\n        setVal: (_p, _v)=>{},\n        delKey: (_pp, _k)=>{},\n        renameKey: (_pp, _old, _n)=>{},\n        addChild: (_p, _d)=>{},\n        convertType: (_p, _pp, _k, _t, _d)=>{},\n        addArrayItem: (_p)=>{}\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvQ2hhcmFjdGVyTWFuYWdlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFMEU7QUFDSjtBQUNoQztBQUNrQztBQWF4RSxTQUFTYSxXQUFXLEdBQUdDLEVBQTRDO0lBQ2pFLE9BQU9BLEdBQUdDLE1BQU0sQ0FBQ0MsU0FBU0MsSUFBSSxDQUFDO0FBQ2pDO0FBRUEsU0FBU0MsVUFBVUMsSUFBUyxFQUFFQyxJQUFjLEVBQUVDLEtBQVU7SUFDdEQsTUFBTUMsT0FBT0gsUUFBUSxPQUFPQSxTQUFTLFdBQVc7UUFBRSxHQUFHQSxJQUFJO0lBQUMsSUFBSSxDQUFDO0lBQy9ELElBQUlJLE9BQVlEO0lBQ2hCLElBQUssSUFBSUUsSUFBSSxHQUFHQSxJQUFJSixLQUFLSyxNQUFNLEdBQUcsR0FBR0QsSUFBSztRQUN4QyxNQUFNRSxJQUFJTixJQUFJLENBQUNJLEVBQUU7UUFDakIsSUFBSSxDQUFDRCxJQUFJLENBQUNHLEVBQUUsSUFBSSxPQUFPSCxJQUFJLENBQUNHLEVBQUUsS0FBSyxVQUFVSCxJQUFJLENBQUNHLEVBQUUsR0FBRyxDQUFDO1FBQ3hESCxPQUFPQSxJQUFJLENBQUNHLEVBQUU7SUFDaEI7SUFDQUgsSUFBSSxDQUFDSCxJQUFJLENBQUNBLEtBQUtLLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBR0o7SUFDOUIsT0FBT0M7QUFDVDtBQUVBLFNBQVNLLFVBQVVSLElBQVMsRUFBRUMsSUFBYztJQUMxQyxNQUFNRSxPQUFPSCxRQUFRLE9BQU9BLFNBQVMsV0FBVztRQUFFLEdBQUdBLElBQUk7SUFBQyxJQUFJLENBQUM7SUFDL0QsSUFBSUksT0FBWUQ7SUFDaEIsSUFBSyxJQUFJRSxJQUFJLEdBQUdBLElBQUlKLEtBQUtLLE1BQU0sR0FBRyxHQUFHRCxJQUFLO1FBQ3hDLE1BQU1FLElBQUlOLElBQUksQ0FBQ0ksRUFBRTtRQUNqQixJQUFJLENBQUNELElBQUksQ0FBQ0csRUFBRSxJQUFJLE9B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QzFMLCtHQUFJQTtnQ0FBQzBMLFdBQVU7Ozs7Ozs0QkFBWTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUtsUDtBQUVBLDBDQUEwQztBQUMxQyxTQUFTOEI7SUFDUCx1SkFBdUo7SUFDdkosNElBQTRJO0lBQzVJLE9BQU87UUFDTHBFLFFBQVEsQ0FBQzZFLElBQTBCQyxNQUFhO1FBQ2hEMUUsUUFBUSxDQUFDMkUsS0FBMkJDLE1BQWE7UUFDakR6RSxXQUFXLENBQUN3RSxLQUEyQkUsTUFBY0MsTUFBZ0I7UUFDckV4RSxVQUFVLENBQUNtRSxJQUEwQk0sTUFBZ0I7UUFDckRoRSxhQUFhLENBQUMwRCxJQUEwQkUsS0FBMkJDLElBQVlJLElBQStCRCxNQUFnQjtRQUM5SDdELGNBQWMsQ0FBQ3VELE1BQThCO0lBQy9DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmt2ZXJzZS1jbGllbnQvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvQ2hhcmFjdGVyTWFuYWdlci50c3g/OTRkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlU3VwYWJhc2UgfSBmcm9tIFwiQC9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyXCI7XG5pbXBvcnQgeyBjcmVhdGVBcGkgfSBmcm9tIFwiQC9saWIvYXBpXCI7XG5pbXBvcnQgeyBMb2FkZXIyLCBQbHVzLCBTZWFyY2gsIFRyYXNoMiwgVXBsb2FkLCBYIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuXG50eXBlIENoYXJhY3Rlckl0ZW0gPSB7XG4gIGlkPzogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHJvbGU/OiBzdHJpbmcgfCBudWxsO1xuICBzdW1tYXJ5Pzogc3RyaW5nIHwgbnVsbDtcbiAgaW1hZ2VVcmw/OiBzdHJpbmcgfCBudWxsO1xuICB0cmFpdHM/OiBhbnkgfCBudWxsO1xuICBjcmVhdGVkQXQ/OiBzdHJpbmc7XG4gIHVwZGF0ZWRBdD86IHN0cmluZztcbn07XG5cbmZ1bmN0aW9uIGNsYXNzTmFtZXMoLi4ueHM6IEFycmF5PHN0cmluZyB8IGZhbHNlIHwgbnVsbCB8IHVuZGVmaW5lZD4pIHtcbiAgcmV0dXJuIHhzLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcbn1cblxuZnVuY3Rpb24gc2V0QnlQYXRoKGJhc2U6IGFueSwgcGF0aDogc3RyaW5nW10sIHZhbHVlOiBhbnkpIHtcbiAgY29uc3Qgcm9vdCA9IGJhc2UgJiYgdHlwZW9mIGJhc2UgPT09IFwib2JqZWN0XCIgPyB7IC4uLmJhc2UgfSA6IHt9O1xuICBsZXQgY3VycjogYW55ID0gcm9vdDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIGNvbnN0IGsgPSBwYXRoW2ldO1xuICAgIGlmICghY3VycltrXSB8fCB0eXBlb2YgY3VycltrXSAhPT0gXCJvYmplY3RcIikgY3VycltrXSA9IHt9O1xuICAgIGN1cnIgPSBjdXJyW2tdO1xuICB9XG4gIGN1cnJbcGF0aFtwYXRoLmxlbmd0aCAtIDFdXSA9IHZhbHVlO1xuICByZXR1cm4gcm9vdDtcbn1cblxuZnVuY3Rpb24gZGVsQnlQYXRoKGJhc2U6IGFueSwgcGF0aDogc3RyaW5nW10pIHtcbiAgY29uc3Qgcm9vdCA9IGJhc2UgJiYgdHlwZW9mIGJhc2UgPT09IFwib2JqZWN0XCIgPyB7IC4uLmJhc2UgfSA6IHt9O1xuICBsZXQgY3VycjogYW55ID0gcm9vdDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIGNvbnN0IGsgPSBwYXRoW2ldO1xuICAgIGlmICghY3VycltrXSB8fCB0eXBlb2YgY3VycltrXSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHJvb3Q7XG4gICAgY3VyciA9IGN1cnJba107XG4gIH1cbiAgZGVsZXRlIGN1cnJbcGF0aFtwYXRoLmxlbmd0aCAtIDFdXTtcbiAgcmV0dXJuIHJvb3Q7XG59XG5cbmZ1bmN0aW9uIHRvTmVzdGVkRnJvbVRhZ3ModGFnczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9Pikge1xuICBsZXQgb2JqOiBhbnkgPSB7fTtcbiAgZm9yIChjb25zdCB0IG9mIHRhZ3MpIHtcbiAgICBjb25zdCBwYXJ0cyA9IHQua2V5LnNwbGl0KFwiLlwiKS5tYXAoKHMpID0+IHMudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgaWYgKCFwYXJ0cy5sZW5ndGgpIGNvbnRpbnVlO1xuICAgIG9iaiA9IHNldEJ5UGF0aChvYmosIHBhcnRzLCB0LnZhbHVlKTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ2hhcmFjdGVyTWFuYWdlcih7IHByb2plY3RJZCwgcmVxdWlyZUltYWdlIH06IHsgcHJvamVjdElkOiBzdHJpbmc7IHJlcXVpcmVJbWFnZTogYm9vbGVhbiB9KSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gdXNlU3VwYWJhc2UoKTtcbiAgY29uc3QgYXBpID0gdXNlTWVtbygoKSA9PiBjcmVhdGVBcGkoc3VwYWJhc2UpLCBbc3VwYWJhc2VdKTtcblxuICBjb25zdCBbaXRlbXMsIHNldEl0ZW1zXSA9IHVzZVN0YXRlPENoYXJhY3Rlckl0ZW1bXT4oW10pO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2ZpbHRlciwgc2V0RmlsdGVyXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbYWN0aXZlSWQsIHNldEFjdGl2ZUlkXSA9IHVzZVN0YXRlPHN0cmluZyB8IFwiX19uZXdfX1wiIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzYXZpbmcsIHNldFNhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkZWxldGluZywgc2V0RGVsZXRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdG9hc3QsIHNldFRvYXN0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCB0b2FzdFRpbWVyID0gdXNlUmVmPFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgW2Zvcm0sIHNldEZvcm1dID0gdXNlU3RhdGU8Q2hhcmFjdGVySXRlbT4oeyBuYW1lOiBcIlwiIH0pO1xuICBjb25zdCBbdHJhaXRzLCBzZXRUcmFpdHNdID0gdXNlU3RhdGU8YW55Pih7fSk7XG4gIGNvbnN0IFt1cGxvYWRpbmcsIHNldFVwbG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGRyb3BSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBjYWNoZUtleSA9IHVzZU1lbW8oKCkgPT4gYGlua3ZlcnNlX3Byb2plY3RfJHtwcm9qZWN0SWR9X2NoYXJhY3RlcnNgLCBbcHJvamVjdElkXSk7XG4gIGNvbnN0IGFjdGl2ZUtleSA9IHVzZU1lbW8oKCkgPT4gYGlua3ZlcnNlX3Byb2plY3RfJHtwcm9qZWN0SWR9X2NoYXJhY3RlcnNfYWN0aXZlYCwgW3Byb2plY3RJZF0pO1xuICBjb25zdCBbaGFzQ2FjaGUsIHNldEhhc0NhY2hlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgaXRlbXNSZWYgPSB1c2VSZWY8Q2hhcmFjdGVySXRlbVtdPihpdGVtcyk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGNhY2hlS2V5KSA6IG51bGw7XG4gICAgICBpZiAocykge1xuICAgICAgICBjb25zdCBhcnIgPSBKU09OLnBhcnNlKHMpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgICAgICAgc2V0SXRlbXMoYXJyIGFzIENoYXJhY3Rlckl0ZW1bXSk7XG4gICAgICAgICAgY29uc3QgdmFsaWQgPSAoYXJyIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuICAgICAgICAgIHNldEhhc0NhY2hlKHZhbGlkKTtcbiAgICAgICAgICBpZiAodmFsaWQpIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCB7fVxuICB9LCBbY2FjaGVLZXldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBtb3VudGVkID0gdHJ1ZTtcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGhhc0NhY2hlKSB7IHJldHVybjsgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFoYXNDYWNoZSkgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmxpc3RDaGFyYWN0ZXJzKHByb2plY3RJZCk7XG4gICAgICAgIGlmICghbW91bnRlZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuZXh0ID0gcmVzIHx8IFtdO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChoYXNDYWNoZSAmJiBKU09OLnN0cmluZ2lmeShuZXh0KSA9PT0gSlNPTi5zdHJpbmdpZnkoaXRlbXNSZWYuY3VycmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgc2V0SXRlbXMobmV4dCk7XG4gICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgIHNldEVycm9yKGU/Lm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gbG9hZCBjaGFyYWN0ZXJzXCIpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKG1vdW50ZWQpIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH0pKCk7XG4gICAgcmV0dXJuICgpID0+IHsgbW91bnRlZCA9IGZhbHNlOyB9O1xuICB9LCBbYXBpLCBwcm9qZWN0SWQsIGhhc0NhY2hlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oY2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KGl0ZW1zKSk7XG4gICAgfSBjYXRjaCB7fVxuICB9LCBbaXRlbXMsIGNhY2hlS2V5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHsgaXRlbXNSZWYuY3VycmVudCA9IGl0ZW1zOyB9LCBbaXRlbXNdKTtcblxuICAvLyBSZXN0b3JlIGxhc3QgYWN0aXZlIHNlbGVjdGlvblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oYWN0aXZlS2V5KSA6IG51bGw7XG4gICAgICBpZiAodikgc2V0QWN0aXZlSWQodiBhcyBhbnkpO1xuICAgIH0gY2F0Y2gge31cbiAgfSwgW2FjdGl2ZUtleV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoYWN0aXZlSWQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShhY3RpdmVLZXksIGFjdGl2ZUlkKTtcbiAgICB9IGNhdGNoIHt9XG4gIH0sIFthY3RpdmVJZCwgYWN0aXZlS2V5XSk7XG5cbiAgLy8gUmVmbGVjdCBjaGF0LWRyaXZlbiB1cHNlcnRzIGluc3RhbnRseVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIG9uVXBzZXJ0KGV2OiBFdmVudCkge1xuICAgICAgY29uc3QgY2UgPSBldiBhcyBDdXN0b21FdmVudDtcbiAgICAgIGNvbnN0IGl0ZW0gPSBjZT8uZGV0YWlsPy5pdGVtIGFzIGFueTtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5pZCkgcmV0dXJuO1xuICAgICAgc2V0SXRlbXMoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgaWR4ID0gcHJldi5maW5kSW5kZXgoKHgpID0+IHguaWQgPT09IGl0ZW0uaWQpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gWy4uLnByZXZdO1xuICAgICAgICAgIG5leHRbaWR4XSA9IHsgLi4ubmV4dFtpZHhdLCAuLi5pdGVtIH0gYXMgYW55O1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ucHJldiwgaXRlbV07XG4gICAgICB9KTtcbiAgICAgIGlmIChhY3RpdmVJZCA9PT0gaXRlbS5pZCkge1xuICAgICAgICBzZXRGb3JtKHsgaWQ6IGl0ZW0uaWQsIG5hbWU6IGl0ZW0ubmFtZSwgcm9sZTogaXRlbS5yb2xlIHx8IFwiXCIsIHN1bW1hcnk6IGl0ZW0uc3VtbWFyeSB8fCBcIlwiLCBpbWFnZVVybDogKGl0ZW0gYXMgYW55KS5pbWFnZVVybCB8fCBcIlwiLCB0cmFpdHM6IGl0ZW0udHJhaXRzIHx8IG51bGwgfSk7XG4gICAgICAgIHNldFRyYWl0cyhpdGVtLnRyYWl0cyB8fCB7fSk7XG4gICAgICB9XG4gICAgICBub3RpZnkoXCJDaGFyYWN0ZXIgdXBkYXRlZCB2aWEgY2hhdFwiKTtcbiAgICB9XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3dvcmtzcGFjZTpjaGFyYWN0ZXItdXBzZXJ0Jywgb25VcHNlcnQgYXMgYW55KTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dvcmtzcGFjZTpjaGFyYWN0ZXItdXBzZXJ0Jywgb25VcHNlcnQgYXMgYW55KTtcbiAgfSwgW2FjdGl2ZUlkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUlkKSByZXR1cm47XG4gICAgaWYgKGFjdGl2ZUlkID09PSBcIl9fbmV3X19cIikge1xuICAgICAgc2V0Rm9ybSh7IG5hbWU6IFwiXCIgfSk7XG4gICAgICBzZXRUcmFpdHMoe30pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpdCA9IGl0ZW1zLmZpbmQoKHgpID0+IHguaWQgPT09IGFjdGl2ZUlkKTtcbiAgICBpZiAoIWl0KSByZXR1cm47XG4gICAgc2V0Rm9ybSh7IGlkOiBpdC5pZCwgbmFtZTogaXQubmFtZSwgcm9sZTogaXQucm9sZSB8fCBcIlwiLCBzdW1tYXJ5OiBpdC5zdW1tYXJ5IHx8IFwiXCIsIGltYWdlVXJsOiBpdC5pbWFnZVVybCB8fCBcIlwiLCB0cmFpdHM6IGl0LnRyYWl0cyB8fCBudWxsIH0pO1xuICAgIHNldFRyYWl0cyhpdC50cmFpdHMgfHwge30pO1xuICB9LCBbYWN0aXZlSWQsIGl0ZW1zXSk7XG5cbiAgY29uc3QgZmlsdGVyZWQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBxID0gZmlsdGVyLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICghcSkgcmV0dXJuIGl0ZW1zO1xuICAgIHJldHVybiBpdGVtcy5maWx0ZXIoKHgpID0+ICh4Lm5hbWUgfHwgXCJcIikudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCAoeC5yb2xlIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpO1xuICB9LCBbaXRlbXMsIGZpbHRlcl0pO1xuXG4gIGNvbnN0IG9uTmV3ID0gKCkgPT4ge1xuICAgIHNldEFjdGl2ZUlkKFwiX19uZXdfX1wiKTtcbiAgICBzZXRGb3JtKHsgbmFtZTogXCJcIiB9KTtcbiAgICBzZXRUcmFpdHMoe30pO1xuICB9O1xuXG4gIC8vIFJlbW92ZWQgYnJhaW5zdG9ybS9yZWZpbmUgc3VnZ2VzdGlvbiBsb2dpY1xuXG4gIGNvbnN0IG5vdGlmeSA9IChtc2c6IHN0cmluZykgPT4ge1xuICAgIGlmICh0b2FzdFRpbWVyLmN1cnJlbnQpIGNsZWFyVGltZW91dCh0b2FzdFRpbWVyLmN1cnJlbnQpO1xuICAgIHNldFRvYXN0KG1zZyk7XG4gICAgdG9hc3RUaW1lci5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiBzZXRUb2FzdChcIlwiKSwgMjUwMCk7XG4gIH07XG5cbiAgY29uc3Qgb25VcGxvYWRGaWxlID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZpbGU6IEZpbGUpID0+IHtcbiAgICBpZiAoIWZpbGUpIHJldHVybjtcbiAgICBzZXRVcGxvYWRpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJ1Y2tldCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0NIQVJfQlVDS0VUIHx8IFwiY2hhcmFjdGVyLWltYWdlc1wiO1xuICAgICAgY29uc3QgZXh0ID0gZmlsZS5uYW1lLnNwbGl0KFwiLlwiKS5wb3AoKSB8fCBcImpwZ1wiO1xuICAgICAgY29uc3QgcGF0aCA9IGAke3Byb2plY3RJZH0vJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpfS4ke2V4dH1gO1xuICAgICAgY29uc3QgeyBlcnJvcjogdXBFcnIgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbShidWNrZXQpLnVwbG9hZChwYXRoLCBmaWxlLCB7IHVwc2VydDogdHJ1ZSwgY29udGVudFR5cGU6IGZpbGUudHlwZSB9KTtcbiAgICAgIGlmICh1cEVycikgdGhyb3cgdXBFcnI7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbShidWNrZXQpLmdldFB1YmxpY1VybChwYXRoKTtcbiAgICAgIGNvbnN0IHVybCA9IGRhdGEucHVibGljVXJsO1xuICAgICAgc2V0Rm9ybSgoZikgPT4gKHsgLi4uZiwgaW1hZ2VVcmw6IHVybCB9KSk7XG4gICAgICBub3RpZnkoXCJJbWFnZSB1cGxvYWRlZFwiKTtcbiAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgIG5vdGlmeShlPy5tZXNzYWdlIHx8IFwiVXBsb2FkIGZhaWxlZFwiKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0VXBsb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtwcm9qZWN0SWQsIHN1cGFiYXNlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBlbCA9IGRyb3BSZWYuY3VycmVudDtcbiAgICBpZiAoIWVsKSByZXR1cm47XG4gICAgY29uc3Qgb25Ecm9wID0gKGU6IERyYWdFdmVudCkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgZiA9IGUuZGF0YVRyYW5zZmVyPy5maWxlcz8uWzBdO1xuICAgICAgaWYgKGYpIHZvaWQgb25VcGxvYWRGaWxlKGYpO1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShcInJpbmctMlwiLCBcInJpbmctYmx1ZS01MDBcIik7XG4gICAgfTtcbiAgICBjb25zdCBvbkRyYWcgPSAoZTogRHJhZ0V2ZW50KSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKFwicmluZy0yXCIsIFwicmluZy1ibHVlLTUwMFwiKTtcbiAgICB9O1xuICAgIGNvbnN0IG9uTGVhdmUgPSAoZTogRHJhZ0V2ZW50KSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKFwicmluZy0yXCIsIFwicmluZy1ibHVlLTUwMFwiKTtcbiAgICB9O1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIG9uRHJvcCBhcyBhbnkpO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCBvbkRyYWcgYXMgYW55KTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsIG9uTGVhdmUgYXMgYW55KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgb25Ecm9wIGFzIGFueSk7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgb25EcmFnIGFzIGFueSk7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsIG9uTGVhdmUgYXMgYW55KTtcbiAgICB9O1xuICB9LCBbb25VcGxvYWRGaWxlXSk7XG5cbiAgLy8gLS0tLS0gVHJhaXRzIGVkaXRvciBoZWxwZXJzIChzdHJpbmdzLW9ubHkgdmFsdWVzLCBhcnJheXMgc3VwcG9ydGVkLCBkZXB0aDw9NSkgLS0tLS1cbiAgY29uc3QgY2xvbmUgPSAobzogYW55KSA9PiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG8gPz8ge30pKTtcbiAgY29uc3QgaXNPYmogPSAodjogYW55KSA9PiB2ICYmIHR5cGVvZiB2ID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2KTtcblxuICBjb25zdCBzZXRWYWwgPSAocGF0aDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIHZhbDogYW55KSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykgcmVmID0gcmVmW3BhdGhbaV1dO1xuICAgICAgcmVmW3BhdGhbcGF0aC5sZW5ndGggLSAxXV0gPSB2YWw7XG4gICAgICByZXR1cm4gbnh0O1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBkZWxLZXkgPSAocGF0aFRvUGFyZW50OiBBcnJheTxzdHJpbmd8bnVtYmVyPiwga2V5OiBzdHJpbmd8bnVtYmVyKSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoVG9QYXJlbnQubGVuZ3RoOyBpKyspIHJlZiA9IHJlZltwYXRoVG9QYXJlbnRbaV1dO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVmKSAmJiB0eXBlb2Yga2V5ID09PSAnbnVtYmVyJykgcmVmLnNwbGljZShrZXksIDEpO1xuICAgICAgZWxzZSBpZiAocmVmICYmIHR5cGVvZiByZWYgPT09ICdvYmplY3QnKSBkZWxldGUgcmVmW2tleSBhcyBhbnldO1xuICAgICAgcmV0dXJuIG54dDtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgcmVuYW1lS2V5ID0gKHBhdGhUb1BhcmVudDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIG9sZEtleTogc3RyaW5nLCBuZXdLZXk6IHN0cmluZykgPT4ge1xuICAgIGlmICghbmV3S2V5KSByZXR1cm47XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoVG9QYXJlbnQubGVuZ3RoOyBpKyspIHJlZiA9IHJlZltwYXRoVG9QYXJlbnRbaV1dO1xuICAgICAgaWYgKCFyZWYgfHwgdHlwZW9mIHJlZiAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShyZWYpKSByZXR1cm4gbnh0O1xuICAgICAgaWYgKG9sZEtleSA9PT0gbmV3S2V5KSByZXR1cm4gbnh0O1xuICAgICAgY29uc3QgdmFsID0gcmVmW29sZEtleV07XG4gICAgICBkZWxldGUgcmVmW29sZEtleV07XG4gICAgICByZWZbbmV3S2V5XSA9IHZhbDtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFkZENoaWxkID0gKHBhdGhUb09iajogQXJyYXk8c3RyaW5nfG51bWJlcj4sIGRlcHRoOiBudW1iZXIpID0+IHtcbiAgICBpZiAoZGVwdGggPj0gNSkgcmV0dXJuOyAvLyBkZXB0aCBsaW1pdFxuICAgIHNldFRyYWl0cygoY3VycjogYW55KSA9PiB7XG4gICAgICBjb25zdCBueHQgPSBjbG9uZShjdXJyKTtcbiAgICAgIGxldCByZWY6IGFueSA9IG54dDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aFRvT2JqLmxlbmd0aDsgaSsrKSByZWYgPSByZWZbcGF0aFRvT2JqW2ldXTtcbiAgICAgIGlmICghcmVmIHx8IHR5cGVvZiByZWYgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkocmVmKSkgcmV0dXJuIG54dDtcbiAgICAgIGxldCBiYXNlID0gJ2tleSc7IGxldCBpMiA9IDE7IGxldCBrZXkgPSBiYXNlO1xuICAgICAgd2hpbGUgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZWYsIGtleSkpIHsga2V5ID0gYCR7YmFzZX0tJHtpMisrfWA7IH1cbiAgICAgIHJlZltrZXldID0gXCJcIjsgLy8gZGVmYXVsdCBhcyBzdHJpbmcgbGVhZlxuICAgICAgcmV0dXJuIG54dDtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgYWRkUm9vdEtleSA9ICgpID0+IHtcbiAgICBzZXRUcmFpdHMoKGN1cnI6IGFueSkgPT4ge1xuICAgICAgY29uc3Qgbnh0ID0gY2xvbmUoY3Vycik7XG4gICAgICBsZXQgYmFzZSA9ICdrZXknOyBsZXQgaSA9IDE7IGxldCBrID0gYmFzZTtcbiAgICAgIHdoaWxlIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobnh0LCBrKSkgeyBrID0gYCR7YmFzZX0tJHtpKyt9YDsgfVxuICAgICAgKG54dCBhcyBhbnkpW2tdID0gXCJcIjtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGNvbnZlcnRUeXBlID0gKHBhdGg6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBwYXJlbnRQYXRoOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwga2V5OiBzdHJpbmcsIG5leHRUeXBlOiAnc3RyaW5nJ3wnb2JqZWN0J3wnYXJyYXknLCBkZXB0aDogbnVtYmVyKSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJlbnRQYXRoLmxlbmd0aDsgaSsrKSByZWYgPSByZWZbcGFyZW50UGF0aFtpXV07XG4gICAgICBpZiAoIXJlZiB8fCB0eXBlb2YgcmVmICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHJlZikpIHJldHVybiBueHQ7XG4gICAgICBpZiAobmV4dFR5cGUgPT09ICdzdHJpbmcnKSByZWZba2V5XSA9IFwiXCI7XG4gICAgICBlbHNlIGlmIChuZXh0VHlwZSA9PT0gJ29iamVjdCcpIHJlZltrZXldID0gZGVwdGggPj0gNSA/IFwiXCIgOiB7fTtcbiAgICAgIGVsc2UgaWYgKG5leHRUeXBlID09PSAnYXJyYXknKSByZWZba2V5XSA9IFtdIGFzIHN0cmluZ1tdO1xuICAgICAgcmV0dXJuIG54dDtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgYWRkQXJyYXlJdGVtID0gKHBhdGhUb0FycjogQXJyYXk8c3RyaW5nfG51bWJlcj4pID0+IHtcbiAgICBzZXRUcmFpdHMoKGN1cnI6IGFueSkgPT4ge1xuICAgICAgY29uc3Qgbnh0ID0gY2xvbmUoY3Vycik7XG4gICAgICBsZXQgcmVmOiBhbnkgPSBueHQ7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGhUb0Fyci5sZW5ndGg7IGkrKykgcmVmID0gcmVmW3BhdGhUb0FycltpXV07XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyZWYpKSByZWYucHVzaChcIlwiKTtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gRXhwb3NlIGhhbmRsZXJzIHRvIG5lc3RlZCBUcmFpdE9iamVjdC9UcmFpdFJvdyB3aXRob3V0IHByb3AtZHJpbGxpbmdcbiAgKFRyYWl0T2JqZWN0IGFzIGFueSkuX3BhcmVudCA9IHtcbiAgICBzZXRWYWwsXG4gICAgZGVsS2V5LFxuICAgIHJlbmFtZUtleSxcbiAgICBhZGRDaGlsZCxcbiAgICBjb252ZXJ0VHlwZSxcbiAgICBhZGRBcnJheUl0ZW0sXG4gIH0gYXMgVHJhaXRDdHg7XG5cbiAgY29uc3Qgb25TYXZlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghZm9ybS5uYW1lLnRyaW0oKSkge1xuICAgICAgbm90aWZ5KFwiTmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHJlcXVpcmVJbWFnZSAmJiAhZm9ybS5pbWFnZVVybCkge1xuICAgICAgbm90aWZ5KFwiSW1hZ2UgaXMgcmVxdWlyZWQgaW4gbWFuaHdhIG1vZGVcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldFNhdmluZyh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdHJhaXRzT2JqID0gdHJhaXRzO1xuICAgICAgaWYgKGFjdGl2ZUlkID09PSBcIl9fbmV3X19cIikge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuY3JlYXRlQ2hhcmFjdGVyKHByb2plY3RJZCwgeyBuYW1lOiBmb3JtLm5hbWUudHJpbSgpLCByb2xlOiBmb3JtLnJvbGUgfHwgdW5kZWZpbmVkLCBzdW1tYXJ5OiBmb3JtLnN1bW1hcnkgfHwgdW5kZWZpbmVkLCBpbWFnZVVybDogZm9ybS5pbWFnZVVybCB8fCB1bmRlZmluZWQsIHRyYWl0czogdHJhaXRzT2JqIH0pO1xuICAgICAgICBzZXRJdGVtcygocHJldikgPT4gWy4uLnByZXYsIHJlc10pO1xuICAgICAgICBzZXRBY3RpdmVJZChyZXMuaWQpO1xuICAgICAgfSBlbHNlIGlmIChhY3RpdmVJZCkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkudXBkYXRlQ2hhcmFjdGVyKHByb2plY3RJZCwgYWN0aXZlSWQsIHsgbmFtZTogZm9ybS5uYW1lLnRyaW0oKSwgcm9sZTogZm9ybS5yb2xlIHx8IHVuZGVmaW5lZCwgc3VtbWFyeTogZm9ybS5zdW1tYXJ5IHx8IHVuZGVmaW5lZCwgaW1hZ2VVcmw6IGZvcm0uaW1hZ2VVcmwgfHwgdW5kZWZpbmVkLCB0cmFpdHM6IHRyYWl0c09iaiB9KTtcbiAgICAgICAgc2V0SXRlbXMoKHByZXYpID0+IHByZXYubWFwKCh4KSA9PiAoeC5pZCA9PT0gcmVzLmlkID8gcmVzIDogeCkpKTtcbiAgICAgIH1cbiAgICAgIG5vdGlmeShcIlNhdmVkXCIpO1xuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgbm90aWZ5KGU/Lm1lc3NhZ2UgfHwgXCJTYXZlIGZhaWxlZFwiKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0U2F2aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25EZWxldGUgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVJZCB8fCBhY3RpdmVJZCA9PT0gXCJfX25ld19fXCIpIHJldHVybjtcbiAgICBpZiAoIWNvbmZpcm0oXCJEZWxldGUgdGhpcyBjaGFyYWN0ZXI/XCIpKSByZXR1cm47XG4gICAgc2V0RGVsZXRpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGFwaS5kZWxldGVDaGFyYWN0ZXIocHJvamVjdElkLCBhY3RpdmVJZCk7XG4gICAgICBzZXRJdGVtcygocHJldikgPT4gcHJldi5maWx0ZXIoKHgpID0+IHguaWQgIT09IGFjdGl2ZUlkKSk7XG4gICAgICBzZXRBY3RpdmVJZChudWxsKTtcbiAgICAgIHNldEZvcm0oeyBuYW1lOiBcIlwiIH0pO1xuICAgICAgc2V0VHJhaXRzKHt9KTtcbiAgICAgIG5vdGlmeShcIkRlbGV0ZWRcIik7XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBub3RpZnkoZT8ubWVzc2FnZSB8fCBcIkRlbGV0ZSBmYWlsZWRcIik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldERlbGV0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY291bnQgPSBpdGVtcy5sZW5ndGg7XG4gIGNvbnN0IGFjdGl2ZSA9IGFjdGl2ZUlkID09PSBcIl9fbmV3X19cIiA/IGZvcm0gOiBpdGVtcy5maW5kKCh4KSA9PiB4LmlkID09PSBhY3RpdmVJZCkgfHwgbnVsbDtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGdyaWQgZ3JpZC1yb3dzLVthdXRvXzFmcl1cIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHB4LTYgcHktNCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC10ZXh0LXByaW1hcnlcIj5DaGFyYWN0ZXIgTWFuYWdlbWVudDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBweC0yIHB5LTEgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnlcIj57Y291bnR9IENoYXJhY3RlcnM8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uTmV3fSBjbGFzc05hbWU9XCJyb3VuZGVkLWxnIGJnLWJnLWVsZXZhdGVkIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgaG92ZXI6Ym9yZGVyLWFjY2VudCBob3ZlcjpiZy1iZy1ob3ZlciB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gcHgtNCBweS0zIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTAgaG92ZXI6LXRyYW5zbGF0ZS15LTAuNVwiPlxuICAgICAgICAgICAgPFBsdXMgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICBOZXcgQ2hhcmFjdGVyXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtMCBncmlkXCIgc3R5bGU9e3sgZ3JpZFRlbXBsYXRlQ29sdW1uczogXCIzNSUgNjUlXCIgfX0+XG4gICAgICAgIDxhc2lkZSBjbGFzc05hbWU9XCJib3JkZXItciBib3JkZXItYm9yZGVyLWRlZmF1bHQgbWluLWgtMCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTNcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPXtmaWx0ZXJ9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0RmlsdGVyKGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9XCJTZWFyY2ggY2hhcmFjdGVyc1wiIGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBwbC05IHByLTMgcHktMi41IHRleHQtc20gdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50XCIgLz5cbiAgICAgICAgICAgICAgPFNlYXJjaCBjbGFzc05hbWU9XCJ3LTQgaC00IGFic29sdXRlIGxlZnQtMyB0b3AtMyB0ZXh0LXRleHQtdGVydGlhcnlcIiAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHB4LTMgcGItM1wiPlxuICAgICAgICAgICAge2xvYWRpbmcgJiYgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC1zZWNvbmRhcnkgcHgtMiBweS0yXCI+TG9hZGluZ+KApjwvZGl2Pn1cbiAgICAgICAgICAgIHtlcnJvciAmJiA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1yZWQtNDAwIHB4LTIgcHktMiBiZy1yZWQtOTUwLzIwIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1yZWQtNTAwLzIwXCI+e2Vycm9yfTwvZGl2Pn1cbiAgICAgICAgICAgIHshbG9hZGluZyAmJiAhZmlsdGVyZWQubGVuZ3RoICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xMCB0ZXh0LWNlbnRlciB0ZXh0LXRleHQtdGVydGlhcnkgdGV4dC1zbVwiPk5vIGNoYXJhY3RlcnMgeWV0LiBDcmVhdGUgeW91ciBmaXJzdCBjaGFyYWN0ZXIhPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2ZpbHRlcmVkLm1hcCgoYykgPT4gKFxuICAgICAgICAgICAgICA8YnV0dG9uIGtleT17Yy5pZH0gb25DbGljaz17KCkgPT4gc2V0QWN0aXZlSWQoYy5pZCEpfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMyByb3VuZGVkLW1kIG1iLTIgdHJhbnNpdGlvbi1hbGxcIiwgYWN0aXZlSWQ9PT1jLmlkID8gXCJib3JkZXItbC0yIGJvcmRlci1ibHVlLTUwMCBiZy1iZy1lbGV2YXRlZFwiIDogXCJob3ZlcjpiZy1iZy1ob3ZlclwiKSB9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMiBoLTEyIHJvdW5kZWQtZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgb3ZlcmZsb3ctaGlkZGVuIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIHtjLmltYWdlVXJsID8gPGltZyBzcmM9e2MuaW1hZ2VVcmx9IGFsdD17Yy5uYW1lfSBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiIC8+IDogPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeVwiPk5vIEltZzwvZGl2Pn1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC10ZXh0LXByaW1hcnkgdHJ1bmNhdGVcIj57Yy5uYW1lfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHRydW5jYXRlXCI+e2Mucm9sZSB8fCBcIlwifTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvYXNpZGU+XG5cbiAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwibWluLWgtMCBvdmVyZmxvdy15LWF1dG8gcC02XCIgYXJpYS1sYWJlbD1cIkNoYXJhY3RlciBkZXRhaWxzXCI+XG4gICAgICAgICAge2FjdGl2ZUlkID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy0yeGwgbXgtYXV0b1wiPlxuICAgICAgICAgICAgICA8ZGl2IHJlZj17ZHJvcFJlZn0gY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgbWItNiBwLTQgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLWVsZXZhdGVkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTMwIGgtMzAgdy1bMTIwcHhdIGgtWzEyMHB4XSByb3VuZGVkLWZ1bGwgb3ZlcmZsb3ctaGlkZGVuIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgYmctYmctcHJpbWFyeSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAge2Zvcm0uaW1hZ2VVcmwgPyA8aW1nIHNyYz17Zm9ybS5pbWFnZVVybH0gYWx0PVwiYXZhdGFyXCIgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXJcIiAvPiA6IDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnlcIj5ObyBJbWFnZTwvZGl2Pn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJweC0zIHB5LTIgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLXByaW1hcnkgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgY3Vyc29yLXBvaW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPFVwbG9hZCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAge2Zvcm0uaW1hZ2VVcmwgPyBcIkNoYW5nZSBJbWFnZVwiIDogXCJVcGxvYWQgSW1hZ2VcIn1cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIGNsYXNzTmFtZT1cImhpZGRlblwiIG9uQ2hhbmdlPXsoZSkgPT4geyBjb25zdCBmID0gZS50YXJnZXQuZmlsZXM/LlswXTsgaWYgKGYpIHZvaWQgb25VcGxvYWRGaWxlKGYpOyB9fSAvPlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIHtmb3JtLmltYWdlVXJsICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRGb3JtKChmKT0+KHsgLi4uZiwgaW1hZ2VVcmw6IFwiXCIgfSkpfSBjbGFzc05hbWU9XCJ0ZXh0LXRleHQtdGVydGlhcnkgaG92ZXI6dGV4dC1yZWQtNDAwIHRleHQtc20gaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgUmVtb3ZlXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7dXBsb2FkaW5nICYmIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj48TG9hZGVyMiBjbGFzc05hbWU9XCJ3LTMgaC0zIGFuaW1hdGUtc3BpblwiIC8+IFVwbG9hZGluZ+KApjwvZGl2Pn1cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdhcC00XCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImdyaWQgZ2FwLTIgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVcIj5OYW1lPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPXtmb3JtLm5hbWV9IG9uQ2hhbmdlPXsoZSk9PnNldEZvcm0oKGYpPT4oeyAuLi5mLCBuYW1lOiBlLnRhcmdldC52YWx1ZSB9KSl9IGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBweC00IHB5LTIuNSB0ZXh0LXRleHQtcHJpbWFyeSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudFwiIC8+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZVwiPlJvbGU8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9e2Zvcm0ucm9sZSB8fCBcIlwifSBvbkNoYW5nZT17KGUpPT5zZXRGb3JtKChmKT0+KHsgLi4uZiwgcm9sZTogZS50YXJnZXQudmFsdWUgfSkpfSBsaXN0PVwicm9sZXNcIiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtNCBweS0yLjUgdGV4dC10ZXh0LXByaW1hcnkgb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnRcIiAvPlxuICAgICAgICAgICAgICAgICAgPGRhdGFsaXN0IGlkPVwicm9sZXNcIj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlByb3RhZ29uaXN0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIkFudGFnb25pc3RcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiU3VwcG9ydGluZ1wiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJNZW50b3JcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiTG92ZSBJbnRlcmVzdFwiIC8+XG4gICAgICAgICAgICAgICAgICA8L2RhdGFsaXN0PlxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImdyaWQgZ2FwLTIgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVcIj5TdW1tYXJ5PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIHZhbHVlPXtmb3JtLnN1bW1hcnkgfHwgXCJcIn0gb25DaGFuZ2U9eyhlKT0+c2V0Rm9ybSgoZik9Pih7IC4uLmYsIHN1bW1hcnk6IGUudGFyZ2V0LnZhbHVlIH0pKX0gcm93cz17NX0gY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTQgcHktMi41IHRleHQtdGV4dC1wcmltYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50IHRleHQtc21cIiAvPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bMTFweF0gdGV4dC10ZXh0LXRlcnRpYXJ5XCI+eyhmb3JtLnN1bW1hcnkgfHwgXCJcIikubGVuZ3RofSBjaGFyYWN0ZXJzPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ2FwLTIgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVcIj5UcmFpdHM8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17YWRkUm9vdEtleX0gY2xhc3NOYW1lPVwicHgtMiBweS0xIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5IHRleHQteHMgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCI+PFBsdXMgY2xhc3NOYW1lPVwidy0zIGgtM1wiIC8+IEFkZCBrZXk8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xXCI+XG4gICAgICAgICAgICAgICAgICAgIHtPYmplY3Qua2V5cyh0cmFpdHMgfHwge30pLmxlbmd0aCA9PT0gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeVwiPk5vIHRyYWl0cyB5ZXQuIEFkZCBhIGtleS48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPFRyYWl0T2JqZWN0IG9iaj17dHJhaXRzfSBwYXRoPXtbXX0gZGVwdGg9ezF9IC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB0LTRcIj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25EZWxldGV9IGRpc2FibGVkPXshYWN0aXZlSWQgfHwgYWN0aXZlSWQ9PT1cIl9fbmV3X19cIiB8fCBkZWxldGluZ30gY2xhc3NOYW1lPVwidGV4dC1yZWQtNDAwIGhvdmVyOnRleHQtcmVkLTMwMCBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgICAgICAgICAgICBEZWxldGUgQ2hhcmFjdGVyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7IHNldEFjdGl2ZUlkKG51bGwpOyB9fSBjbGFzc05hbWU9XCJweC00IHB5LTIgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6YmctYmctaG92ZXJcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblNhdmV9IGRpc2FibGVkPXtzYXZpbmd9IGNsYXNzTmFtZT1cInB4LTQgcHktMiByb3VuZGVkLW1kIGJnLWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNTAwIHRleHQtd2hpdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7c2F2aW5nID8gPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+PExvYWRlcjIgY2xhc3NOYW1lPVwidy00IGgtNCBhbmltYXRlLXNwaW5cIiAvPiBTYXZpbmfigKY8L3NwYW4+IDogXCJTYXZlIENoYXJhY3RlclwifVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC10ZXh0LXRlcnRpYXJ5XCI+U2VsZWN0IGEgY2hhcmFjdGVyIG9yIGNyZWF0ZSBhIG5ldyBvbmUuPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHt0b2FzdCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgdG9wLTQgcmlnaHQtNCB6LTUwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC00IHB5LTMgcm91bmRlZC1sZyBiZy1iZy1lbGV2YXRlZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gc2hhZG93LWVsZXZhdGlvblwiPnt0b2FzdH08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufVxuXG4vLyAtLS0gTmVzdGVkIFRyYWl0cyBFZGl0b3IgKHN0cmluZ3Mtb25seSBsZWF2ZXMsIGFycmF5cyBzdXBwb3J0ZWQpIC0tLVxudHlwZSBUcmFpdEN0eCA9IHtcbiAgc2V0VmFsOiAocDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIHY6IGFueSkgPT4gdm9pZDtcbiAgZGVsS2V5OiAocHA6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBrOiBhbnkpID0+IHZvaWQ7XG4gIHJlbmFtZUtleTogKHBwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgb2xkSzogc3RyaW5nLCBuZXdLOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGFkZENoaWxkOiAocDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIGQ6IG51bWJlcikgPT4gdm9pZDtcbiAgY29udmVydFR5cGU6IChwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgcHA6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBrOiBzdHJpbmcsIHQ6ICdzdHJpbmcnfCdvYmplY3QnfCdhcnJheScsIGQ6IG51bWJlcikgPT4gdm9pZDtcbiAgYWRkQXJyYXlJdGVtOiAocDogQXJyYXk8c3RyaW5nfG51bWJlcj4pID0+IHZvaWQ7XG59O1xuZnVuY3Rpb24gVHJhaXRPYmplY3QoeyBvYmosIHBhdGgsIGRlcHRoIH06IHsgb2JqOiBhbnk7IHBhdGg6IEFycmF5PHN0cmluZ3xudW1iZXI+OyBkZXB0aDogbnVtYmVyIH0pIHtcbiAgY29uc3QgW18sIHNldFRpY2tdID0gdXNlU3RhdGUoMCk7XG4gIC8vIEFjY2VzcyBlZGl0b3IgZnVuY3Rpb25zIGZyb20gb3V0ZXIgc2NvcGUgdmlhIHdpbmRvdyBwcm94eSBpcyBub3QgaWRlYWw7IHdlIHJlbHkgb24gY2xvc3VyZXMgaW4gcGFyZW50IGNvbXBvbmVudC5cbiAgLy8gVGhpcyBpbmxpbmUgY29tcG9uZW50IGRlcGVuZHMgb24gZnVuY3Rpb25zIGJvdW5kIG9uIHdpbmRvdyBieSBwYXJlbnQgY2xvc3VyZS5cbiAgLy8gVG8ga2VlcCBldmVyeXRoaW5nIGluIG9uZSBmaWxlIGFuZCBhdm9pZCBwcm9wLWRyaWxsaW5nIG1hbnkgaGFuZGxlcnMsIHdlIHdpbGwgcmUtZ3JhYiB0aGVtIGZyb20gUmVhY3QgY29udGV4dCB2aWEgY2xvc3VyZXMuXG4gIGNvbnN0IHBhcmVudDogVHJhaXRDdHggfCB1bmRlZmluZWQgPSAoVHJhaXRPYmplY3QgYXMgYW55KS5fcGFyZW50IGFzIFRyYWl0Q3R4IHwgdW5kZWZpbmVkO1xuICBjb25zdCBjdHg6IFRyYWl0Q3R4ID0gcGFyZW50IHx8IHVzZUNoYXJhY3Rlck1hbmFnZXJDb250ZXh0KCk7XG4gIChUcmFpdE9iamVjdCBhcyBhbnkpLl9wYXJlbnQgPSBjdHg7XG5cbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iaiB8fCB7fSk7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgIHtrZXlzLm1hcCgoaykgPT4gKFxuICAgICAgICA8VHJhaXRSb3cga2V5PXtrfSBrPXtrfSB2PXsob2JqIGFzIGFueSlba119IHBhcmVudFBhdGg9e3BhdGh9IGRlcHRoPXtkZXB0aH0gY3R4PXtjdHh9IC8+XG4gICAgICApKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVHJhaXRSb3coeyBrLCB2LCBwYXJlbnRQYXRoLCBkZXB0aCwgY3R4IH06IHsgazogc3RyaW5nOyB2OiBhbnk7IHBhcmVudFBhdGg6IEFycmF5PHN0cmluZ3xudW1iZXI+OyBkZXB0aDogbnVtYmVyOyBjdHg6IFRyYWl0Q3R4IH0pIHtcbiAgY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkodik7XG4gIGNvbnN0IGlzT2JqZWN0ID0gdiAmJiB0eXBlb2YgdiA9PT0gJ29iamVjdCcgJiYgIWlzQXJyYXk7XG4gIGNvbnN0IHR5cGU6ICdzdHJpbmcnfCdvYmplY3QnfCdhcnJheScgPSBpc0FycmF5ID8gJ2FycmF5JyA6IChpc09iamVjdCA/ICdvYmplY3QnIDogJ3N0cmluZycpO1xuICBjb25zdCBbbmFtZSwgc2V0TmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KGspO1xuICB1c2VFZmZlY3QoKCkgPT4geyBzZXROYW1lKGspOyB9LCBba10pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcC0yIGJnLWJnLWVsZXZhdGVkXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSk9PnNldE5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgIG9uQmx1cj17KCk9PnsgaWYgKG5hbWUgIT09IGsgJiYgbmFtZS50cmltKCkpIGN0eC5yZW5hbWVLZXkocGFyZW50UGF0aCwgaywgbmFtZS50cmltKCkpOyB9fVxuICAgICAgICAgIG9uS2V5RG93bj17KGUpPT57IGlmIChlLmtleSA9PT0gJ0VudGVyJykgeyAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuYmx1cigpOyB9IH19XG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJrZXlcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtbm9uZSB3LTQ4IGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTIgcHktMS41IHRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnRcIlxuICAgICAgICAvPlxuICAgICAgICA8c2VsZWN0IHZhbHVlPXt0eXBlfSBvbkNoYW5nZT17KGUpPT5jdHguY29udmVydFR5cGUoWy4uLnBhcmVudFBhdGgsIGtdLCBwYXJlbnRQYXRoLCBrLCBlLnRhcmdldC52YWx1ZSBhcyBhbnksIGRlcHRoKX0gY2xhc3NOYW1lPVwiZmxleC1ub25lIHctMjggYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtMiBweS0xLjUgdGV4dC10ZXh0LXByaW1hcnkgdGV4dC1zbSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudFwiPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJzdHJpbmdcIj5TdHJpbmc8L29wdGlvbj5cbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwib2JqZWN0XCIgZGlzYWJsZWQ9e2RlcHRoPj01fT5PYmplY3Q8L29wdGlvbj5cbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiYXJyYXlcIj5BcnJheTwvb3B0aW9uPlxuICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAge3R5cGU9PT0nc3RyaW5nJyAmJiAoXG4gICAgICAgICAgPGlucHV0IHZhbHVlPXtTdHJpbmcodiB8fCAnJyl9IG9uQ2hhbmdlPXsoZSk9PmN0eC5zZXRWYWwoWy4uLnBhcmVudFBhdGgsIGtdLCBlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPVwidmFsdWVcIiBjbGFzc05hbWU9XCJmbGV4LTEgYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtMiBweS0xLjUgdGV4dC10ZXh0LXByaW1hcnkgdGV4dC1zbSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudFwiIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxidXR0b24gb25DbGljaz17KCk9PmN0eC5kZWxLZXkocGFyZW50UGF0aCwgayl9IGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LXJlZC00MDAgdGV4dC1zbSBtbC1hdXRvXCI+PFggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+PC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICAgIHt0eXBlPT09J29iamVjdCcgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgbWwtNFwiPlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCk9PmN0eC5hZGRDaGlsZChbLi4ucGFyZW50UGF0aCwga10sIGRlcHRoKzEpfSBkaXNhYmxlZD17ZGVwdGg+PTV9IGNsYXNzTmFtZT1cInB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXhzIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPjxQbHVzIGNsYXNzTmFtZT1cInctMyBoLTNcIiAvPiBBZGQgY2hpbGQ8L2J1dHRvbj5cbiAgICAgICAgICA8VHJhaXRPYmplY3Qgb2JqPXt2fSBwYXRoPXtbLi4ucGFyZW50UGF0aCwga119IGRlcHRoPXtkZXB0aCsxfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICB7dHlwZT09PSdhcnJheScgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgbWwtNCBzcGFjZS15LTJcIj5cbiAgICAgICAgICB7KHYgYXMgc3RyaW5nW10pLm1hcCgoaXRlbSwgaWR4KSA9PiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17aWR4fSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeVwiPlt7aWR4fV08L3NwYW4+XG4gICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT17aXRlbX0gb25DaGFuZ2U9eyhlKT0+Y3R4LnNldFZhbChbLi4ucGFyZW50UGF0aCwgaywgaWR4XSwgZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj1cInZhbHVlXCIgY2xhc3NOYW1lPVwiZmxleC0xIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTIgcHktMS41IHRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnRcIiAvPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT5jdHguZGVsS2V5KFsuLi5wYXJlbnRQYXRoLCBrXSwgaWR4KX0gY2xhc3NOYW1lPVwidGV4dC10ZXh0LXRlcnRpYXJ5IGhvdmVyOnRleHQtcmVkLTQwMCB0ZXh0LXNtXCI+PFggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApKX1cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT5jdHguYWRkQXJyYXlJdGVtKFsuLi5wYXJlbnRQYXRoLCBrXSl9IGNsYXNzTmFtZT1cInB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXhzIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPjxQbHVzIGNsYXNzTmFtZT1cInctMyBoLTNcIiAvPiBBZGQgaXRlbTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbi8vIExpZ2h0d2VpZ2h0IGNvbnRleHQgdmlhIGNsb3N1cmUgYmluZGluZ1xuZnVuY3Rpb24gdXNlQ2hhcmFjdGVyTWFuYWdlckNvbnRleHQoKTogVHJhaXRDdHgge1xuICAvLyBGaW5kIHRoZSBuZWFyZXN0IENoYXJhY3Rlck1hbmFnZXIgYnkgd2Fsa2luZyBSZWFjdCBjbG9zdXJlLiBJbiBUU1ggc2luZ2xlLWZpbGUgY29tcG9uZW50LCB3ZSBwYXNzIGhhbmRsZXJzIGJ5IHByb3BlcnR5IGluIFRyYWl0T2JqZWN0Ll9wYXJlbnQgYWJvdmUuXG4gIC8vIEluc3RlYWQgb2YgYSByZWFsIFJlYWN0IENvbnRleHQgcHJvdmlkZXIgKGV4dHJhIGJvaWxlcnBsYXRlKSwgZXhwb3NlIG5vb3AgZmFsbGJhY2tzOyB0aGV5IGdldCBvdmVyd3JpdHRlbiB3aGVuIGZpcnN0IFRyYWl0T2JqZWN0IHJlbmRlcnMuXG4gIHJldHVybiB7XG4gICAgc2V0VmFsOiAoX3A6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBfdjogYW55KSA9PiB7fSxcbiAgICBkZWxLZXk6IChfcHA6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBfazogYW55KSA9PiB7fSxcbiAgICByZW5hbWVLZXk6IChfcHA6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBfb2xkOiBzdHJpbmcsIF9uOiBzdHJpbmcpID0+IHt9LFxuICAgIGFkZENoaWxkOiAoX3A6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBfZDogbnVtYmVyKSA9PiB7fSxcbiAgICBjb252ZXJ0VHlwZTogKF9wOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgX3BwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgX2s6IHN0cmluZywgX3Q6ICdzdHJpbmcnfCdvYmplY3QnfCdhcnJheScsIF9kOiBudW1iZXIpID0+IHt9LFxuICAgIGFkZEFycmF5SXRlbTogKF9wOiBBcnJheTxzdHJpbmd8bnVtYmVyPikgPT4ge30sXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlUmVmIiwidXNlU3RhdGUiLCJ1c2VTdXBhYmFzZSIsImNyZWF0ZUFwaSIsIkxvYWRlcjIiLCJQbHVzIiwiU2VhcmNoIiwiVHJhc2gyIiwiVXBsb2FkIiwiWCIsImNsYXNzTmFtZXMiLCJ4cyIsImZpbHRlciIsIkJvb2xlYW4iLCJqb2luIiwic2V0QnlQYXRoIiwiYmFzZSIsInBhdGgiLCJ2YWx1ZSIsInJvb3QiLCJjdXJyIiwiaSIsImxlbmd0aCIsImsiLCJkZWxCeVBhdGgiLCJ0b05lc3RlZEZyb21UYWdzIiwidGFncyIsIm9iaiIsInQiLCJwYXJ0cyIsImtleSIsInNwbGl0IiwibWFwIiwicyIsInRyaW0iLCJDaGFyYWN0ZXJNYW5hZ2VyIiwicHJvamVjdElkIiwicmVxdWlyZUltYWdlIiwic3VwYWJhc2UiLCJhcGkiLCJpdGVtcyIsInNldEl0ZW1zIiwibG9hZGluZyIsInNldExvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwic2V0RmlsdGVyIiwiYWN0aXZlSWQiLCJzZXRBY3RpdmVJZCIsInNhdmluZyIsInNldFNhdmluZyIsImRlbGV0aW5nIiwic2V0RGVsZXRpbmciLCJ0b2FzdCIsInNldFRvYXN0IiwidG9hc3RUaW1lciIsImZvcm0iLCJzZXRGb3JtIiwibmFtZSIsInRyYWl0cyIsInNldFRyYWl0cyIsInVwbG9hZGluZyIsInNldFVwbG9hZGluZyIsImRyb3BSZWYiLCJjYWNoZUtleSIsImFjdGl2ZUtleSIsImhhc0NhY2hlIiwic2V0SGFzQ2FjaGUiLCJpdGVtc1JlZiIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhcnIiLCJKU09OIiwicGFyc2UiLCJBcnJheSIsImlzQXJyYXkiLCJ2YWxpZCIsIm1vdW50ZWQiLCJyZXMiLCJsaXN0Q2hhcmFjdGVycyIsIm5leHQiLCJzdHJpbmdpZnkiLCJjdXJyZW50IiwiZSIsIm1lc3NhZ2UiLCJzZXRJdGVtIiwidiIsIm9uVXBzZXJ0IiwiZXYiLCJjZSIsIml0ZW0iLCJkZXRhaWwiLCJpZCIsInByZXYiLCJpZHgiLCJmaW5kSW5kZXgiLCJ4Iiwicm9sZSIsInN1bW1hcnkiLCJpbWFnZVVybCIsIm5vdGlmeSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaXQiLCJmaW5kIiwiZmlsdGVyZWQiLCJxIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsIm9uTmV3IiwibXNnIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIm9uVXBsb2FkRmlsZSIsImZpbGUiLCJidWNrZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQ0hBUl9CVUNLRVQiLCJleHQiLCJwb3AiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic2xpY2UiLCJ1cEVyciIsInN0b3JhZ2UiLCJmcm9tIiwidXBsb2FkIiwidXBzZXJ0IiwiY29udGVudFR5cGUiLCJ0eXBlIiwiZGF0YSIsImdldFB1YmxpY1VybCIsInVybCIsInB1YmxpY1VybCIsImYiLCJlbCIsIm9uRHJvcCIsInByZXZlbnREZWZhdWx0IiwiZGF0YVRyYW5zZmVyIiwiZmlsZXMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJvbkRyYWciLCJhZGQiLCJvbkxlYXZlIiwiY2xvbmUiLCJvIiwiaXNPYmoiLCJzZXRWYWwiLCJ2YWwiLCJueHQiLCJyZWYiLCJkZWxLZXkiLCJwYXRoVG9QYXJlbnQiLCJzcGxpY2UiLCJyZW5hbWVLZXkiLCJvbGRLZXkiLCJuZXdLZXkiLCJhZGRDaGlsZCIsInBhdGhUb09iaiIsImRlcHRoIiwiaTIiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhZGRSb290S2V5IiwiY29udmVydFR5cGUiLCJwYXJlbnRQYXRoIiwibmV4dFR5cGUiLCJhZGRBcnJheUl0ZW0iLCJwYXRoVG9BcnIiLCJwdXNoIiwiVHJhaXRPYmplY3QiLCJfcGFyZW50Iiwib25TYXZlIiwidHJhaXRzT2JqIiwiY3JlYXRlQ2hhcmFjdGVyIiwidW5kZWZpbmVkIiwidXBkYXRlQ2hhcmFjdGVyIiwib25EZWxldGUiLCJjb25maXJtIiwiZGVsZXRlQ2hhcmFjdGVyIiwiY291bnQiLCJhY3RpdmUiLCJkaXYiLCJjbGFzc05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwic3R5bGUiLCJncmlkVGVtcGxhdGVDb2x1bW5zIiwiYXNpZGUiLCJpbnB1dCIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwicGxhY2Vob2xkZXIiLCJjIiwiaW1nIiwic3JjIiwiYWx0Iiwic2VjdGlvbiIsImFyaWEtbGFiZWwiLCJsYWJlbCIsImFjY2VwdCIsInNwYW4iLCJsaXN0IiwiZGF0YWxpc3QiLCJvcHRpb24iLCJ0ZXh0YXJlYSIsInJvd3MiLCJrZXlzIiwiZGlzYWJsZWQiLCJfIiwic2V0VGljayIsInBhcmVudCIsImN0eCIsInVzZUNoYXJhY3Rlck1hbmFnZXJDb250ZXh0IiwiVHJhaXRSb3ciLCJpc09iamVjdCIsInNldE5hbWUiLCJvbkJsdXIiLCJvbktleURvd24iLCJibHVyIiwic2VsZWN0IiwiU3RyaW5nIiwiX3AiLCJfdiIsIl9wcCIsIl9rIiwiX29sZCIsIl9uIiwiX2QiLCJfdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/components/workspace/CharacterManager.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/workspace/Workspace.tsx":
/*!************************************************!*\
  !*** ./src/components/workspace/Workspace.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Workspace: () => (/* binding */ Workspace)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(ssr)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/api */ \"(ssr)/./src/lib/api.ts\");\n/* harmony import */ var _components_chat_Chat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/chat/Chat */ \"(ssr)/./src/components/chat/Chat.tsx\");\n/* harmony import */ var _components_workspace_CharacterManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/workspace/CharacterManager */ \"(ssr)/./src/components/workspace/CharacterManager.tsx\");\n/* harmony import */ var _components_workspace_WorldSettingsManager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/workspace/WorldSettingsManager */ \"(ssr)/./src/components/workspace/WorldSettingsManager.tsx\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/settings.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-right.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-left.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/plus.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-down.js\");\n/* __next_internal_client_entry_do_not_use__ Workspace auto */ \n\n\n\n\n\n\n\nfunction Workspace({ projectId }) {\n    const supabase = (0,_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase)();\n    const api = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>(0,_lib_api__WEBPACK_IMPORTED_MODULE_3__.createApi)(supabase), [\n        supabase\n    ]);\n    const [chapters, setChapters] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loadingCh, setLoadingCh] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [errorCh, setErrorCh] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [tabs, setTabs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeId, setActiveId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [title, setTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [content, setContent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const saveTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [leftCollapsed, setLeftCollapsed] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [aiMuseOpen, setAiMuseOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [deletingId, setDeletingId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [projectTitle, setProjectTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [projectDescription, setProjectDescription] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [settingsOpen, setSettingsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [renameTitle, setRenameTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [renameDesc, setRenameDesc] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [savingRename, setSavingRename] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [renameError, setRenameError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [settingsMenuOpen, setSettingsMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [projMode, setProjMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [projGenre, setProjGenre] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    // Removed worldName field from Project\n    const [projCoreConflict, setProjCoreConflict] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [projSettingsJson, setProjSettingsJson] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [toastMsg, setToastMsg] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const toastTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const SETTINGS_TAB_ID = \"__settings__\";\n    const CHARACTERS_TAB_ID = \"__characters__\";\n    const WORLD_TAB_ID = \"__world__\";\n    // Chats sidebar (right)\n    const [rightOpen, setRightOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const chatsCacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_chats`, [\n        projectId\n    ]);\n    const chatsActiveKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_active_chat`, [\n        projectId\n    ]);\n    const chaptersCacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_chapters`, [\n        projectId\n    ]);\n    const tabsCacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_open_tabs`, [\n        projectId\n    ]);\n    const activeTabKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_active_tab`, [\n        projectId\n    ]);\n    const leftCollapsedKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_left_collapsed`, [\n        projectId\n    ]);\n    const rightOpenKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_right_open`, [\n        projectId\n    ]);\n    const [chats, setChats] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeChatId, setActiveChatId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [hasChatsCache, setHasChatsCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const chatsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(chats);\n    const [newChatType, setNewChatType] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"plot\");\n    const [newChatTitle, setNewChatTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [newChatOpen, setNewChatOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [creatingChat, setCreatingChat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [createChatError, setCreateChatError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [chatMenuOpen, setChatMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [hasChaptersCache, setHasChaptersCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Hydrate chats from localStorage after mount (prevents SSR/client mismatch)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        chatsCacheKey,\n        chatsActiveKey,\n        chaptersCacheKey,\n        tabsCacheKey,\n        activeTabKey,\n        leftCollapsedKey,\n        rightOpenKey\n    ]);\n    // Helper: sort chapters by createdAt asc (fallback by title)\n    const sortChapters = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((arr)=>{\n        return [\n            ...arr\n        ].sort((a, b)=>{\n            const ta = a.createdAt ? new Date(a.createdAt).getTime() : 0;\n            const tb = b.createdAt ? new Date(b.createdAt).getTime() : 0;\n            if (ta !== tb) return ta - tb;\n            return (a.title || \"\").localeCompare(b.title || \"\");\n        });\n    }, []);\n    // Load chapters for tree\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasChaptersCache) {\n                return;\n            }\n            try {\n                setLoadingCh(true);\n                const { items } = await api.listChaptersPaginated(projectId, 0, 100);\n                if (!mounted) return;\n                setChapters(sortChapters(items));\n            } catch (e) {\n                if (mounted) setErrorCh(e?.message || \"Failed to load chapters\");\n            } finally{\n                if (mounted) setLoadingCh(false);\n            }\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        projectId,\n        sortChapters,\n        hasChaptersCache\n    ]);\n    // Reflect settings updates triggered from Chat or elsewhere immediately\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const onSettings = (e)=>{\n            const detail = e?.detail || {};\n            const changes = detail.changes || {};\n            if (changes.mode) setProjMode(changes.mode);\n            if (changes.genre !== undefined) setProjGenre(changes.genre || \"\");\n            if (changes.coreConflict !== undefined) setProjCoreConflict(changes.coreConflict || \"\");\n            if (changes.settingsJson !== undefined) {\n                try {\n                    setProjSettingsJson(typeof changes.settingsJson === \"string\" ? changes.settingsJson : JSON.stringify(changes.settingsJson));\n                } catch  {\n                    setProjSettingsJson(\"\");\n                }\n            }\n        };\n        const onMode = (e)=>{\n            const m = e?.detail?.mode;\n            if (m === \"novel\" || m === \"manhwa\") setProjMode(m);\n        };\n        if (false) {}\n        return ()=>{\n            if (false) {}\n        };\n    }, []);\n    // Listen for chat actions to create/open chapters in editor\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handler = async (e)=>{\n            try {\n                const detail = e?.detail || {};\n                const t = String(detail.title || \"Untitled Chapter\");\n                const c = detail.content !== undefined ? String(detail.content) : \"\";\n                const panel_script = detail.panel_script ?? undefined;\n                const res = await api.createChapter(projectId, panel_script ? {\n                    title: t,\n                    panel_script\n                } : {\n                    title: t,\n                    content: c\n                });\n                const newId = res.id;\n                const createdAt = res.createdAt;\n                setChapters((prev)=>sortChapters([\n                        ...prev,\n                        {\n                            id: newId,\n                            title: res.title,\n                            content: panel_script ? \"\" : c,\n                            createdAt\n                        }\n                    ]));\n                setTabs((prev)=>prev.includes(newId) ? prev : [\n                        ...prev,\n                        newId\n                    ]);\n                setActiveId(newId);\n                setTitle(res.title);\n                setContent(panel_script ? \"\" : c);\n            } catch  {}\n        };\n        if (false) {}\n        return ()=>{\n            if (false) {}\n        };\n    }, [\n        api,\n        projectId,\n        sortChapters\n    ]);\n    // Listen for chat-driven chapter updates (rewrite)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handler = async (e)=>{\n            const detail = e?.detail || {};\n            const content = String(detail.content || \"\");\n            let targetId = detail.id || null;\n            if (!targetId) {\n                // Resolve by chapter_number (1-based) against sorted order\n                if (detail.chapter_number && Number.isInteger(detail.chapter_number)) {\n                    const sorted = sortChapters(chapters);\n                    const idx = Math.max(0, Math.min(sorted.length - 1, detail.chapter_number - 1));\n                    targetId = sorted[idx]?.id || null;\n                } else if (detail.title) {\n                    const match = chapters.find((c)=>(c.title || \"\").toLowerCase() === String(detail.title).toLowerCase());\n                    targetId = match?.id || null;\n                }\n            }\n            if (!targetId) return;\n            try {\n                const updated = await api.updateChapter(projectId, targetId, {\n                    content\n                });\n                setChapters((prev)=>prev.map((c)=>c.id === targetId ? {\n                            ...c,\n                            content\n                        } : c));\n                // Open or refresh active tab\n                if (!tabs.includes(targetId)) setTabs((prev)=>[\n                        ...prev,\n                        targetId\n                    ]);\n                setActiveId(targetId);\n                if (activeId === targetId) setContent(content);\n            } catch  {}\n        };\n        if (false) {}\n        return ()=>{\n            if (false) {}\n        };\n    }, [\n        api,\n        projectId,\n        chapters,\n        tabs,\n        activeId,\n        sortChapters\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            try {\n                const p = await api.getProject(projectId);\n                if (!mounted) return;\n                setProjectTitle(p?.title || \"\");\n                setProjectDescription(p?.description || \"\");\n                try {\n                    if (p?.mode && (p.mode === \"novel\" || p.mode === \"manhwa\")) setProjMode(p.mode);\n                    if (typeof p?.genre === \"string\") setProjGenre(p.genre);\n                    if (typeof p?.coreConflict === \"string\") setProjCoreConflict(p.coreConflict);\n                    if (p?.settingsJson !== undefined) {\n                        setProjSettingsJson(typeof p.settingsJson === \"string\" ? p.settingsJson : JSON.stringify(p.settingsJson));\n                    }\n                } catch  {}\n            } catch  {}\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        projectId\n    ]);\n    // Load chats (hydrate from cache first, then revalidate)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasChatsCache) {\n                return;\n            }\n            try {\n                const xs = await api.listChats(projectId);\n                if (!mounted) return;\n                const next = xs || [];\n                try {\n                    if (hasChatsCache && JSON.stringify(next) === JSON.stringify(chatsRef.current)) {\n                        return;\n                    }\n                } catch  {}\n                setChats(next);\n                if (!activeChatId) {\n                    if (next && next.length) setActiveChatId(next[0].id);\n                    else {\n                        // ensure at least one plot chat exists\n                        const created = await api.createChat(projectId, {\n                            type: \"plot\"\n                        });\n                        setChats([\n                            created\n                        ]);\n                        setActiveChatId(created.id);\n                    }\n                }\n            } catch  {}\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        projectId,\n        hasChatsCache,\n        activeChatId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        chatsRef.current = chats;\n    }, [\n        chats\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n        setHasChatsCache(Array.isArray(chats) && chats.length > 0);\n    }, [\n        chats,\n        chatsCacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        activeChatId,\n        chatsActiveKey\n    ]);\n    // Persist chapters cache\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n        setHasChaptersCache(Array.isArray(chapters) && chapters.length > 0);\n    }, [\n        chapters,\n        chaptersCacheKey\n    ]);\n    // Persist tabs and active tab\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        tabs,\n        tabsCacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        activeId,\n        activeTabKey\n    ]);\n    // Persist UI toggles\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        leftCollapsed,\n        leftCollapsedKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        rightOpen,\n        rightOpenKey\n    ]);\n    const openTab = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        setTabs((prev)=>prev.includes(id) ? prev : [\n                ...prev,\n                id\n            ]);\n        setActiveId(id);\n        const ch = chapters.find((c)=>c.id === id);\n        setTitle(ch?.title || \"\");\n        setContent(ch?.content || \"\");\n    }, [\n        chapters\n    ]);\n    const closeTab = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        setTabs((prev)=>prev.filter((t)=>t !== id));\n        setActiveId((curr)=>{\n            if (curr !== id) return curr;\n            const idx = tabs.indexOf(id);\n            const next = tabs[idx + 1] || tabs[idx - 1] || null;\n            return next || null;\n        });\n    }, [\n        tabs\n    ]);\n    // Hydrate editor fields when activeId and chapters are restored from cache\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeId) return;\n        if (activeId === SETTINGS_TAB_ID || activeId === CHARACTERS_TAB_ID || activeId === WORLD_TAB_ID) return;\n        const ch = chapters.find((c)=>c.id === activeId);\n        if (!ch) return;\n        setTitle(ch.title || \"\");\n        setContent(ch.content || \"\");\n    }, [\n        activeId,\n        chapters\n    ]);\n    const onDragStart = (e, id)=>{\n        e.dataTransfer.setData(\"text/tab\", id);\n    };\n    const onDrop = (e, targetId)=>{\n        const srcId = e.dataTransfer.getData(\"text/tab\");\n        if (!srcId || srcId === targetId) return;\n        setTabs((prev)=>{\n            const arr = [\n                ...prev\n            ];\n            const si = arr.indexOf(srcId);\n            const ti = arr.indexOf(targetId);\n            if (si < 0 || ti < 0) return prev;\n            arr.splice(ti, 0, arr.splice(si, 1)[0]);\n            return arr;\n        });\n    };\n    // Persist edits (debounced)\n    const scheduleSave = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id, t, c)=>{\n        if (!id) return;\n        if (saveTimer.current) clearTimeout(saveTimer.current);\n        saveTimer.current = setTimeout(async ()=>{\n            setSaving(true);\n            try {\n                await api.updateChapter(projectId, id, {\n                    title: t,\n                    content: c\n                });\n                setChapters((prev)=>prev.map((ch)=>ch.id === id ? {\n                            ...ch,\n                            title: t,\n                            content: c\n                        } : ch));\n            } finally{\n                setSaving(false);\n            }\n        }, 500);\n    }, [\n        api,\n        projectId\n    ]);\n    // Active change handlers\n    const onTitleChange = (v)=>{\n        if (!activeId) return;\n        setTitle(v);\n        scheduleSave(activeId, v, content);\n    };\n    const onContentChange = (v)=>{\n        if (!activeId) return;\n        setContent(v);\n        scheduleSave(activeId, title, v);\n    };\n    const onNewChapter = async ()=>{\n        try {\n            const res = await api.createChapter(projectId, {\n                title: \"Untitled Chapter\"\n            });\n            const createdAt = res.createdAt;\n            setChapters((prev)=>sortChapters([\n                    ...prev,\n                    {\n                        id: res.id,\n                        title: res.title,\n                        content: \"\",\n                        createdAt\n                    }\n                ]));\n            openTab(res.id);\n        } catch  {}\n    };\n    const onDeleteChapter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (id)=>{\n        try {\n            // eslint-disable-next-line no-alert\n            if (!confirm(\"Delete this chapter permanently?\")) return;\n            setDeletingId(id);\n            await api.deleteChapter(projectId, id);\n            setChapters((prev)=>prev.filter((c)=>c.id !== id));\n            setTabs((prev)=>prev.filter((t)=>t !== id));\n            setActiveId((curr)=>curr === id ? null : curr);\n        } catch (e) {\n            const msg = e instanceof Error ? e.message : \"Failed to delete\";\n            setErrorCh(msg);\n        } finally{\n            setDeletingId(null);\n        }\n    }, [\n        api,\n        projectId\n    ]);\n    const activeChapter = chapters.find((c)=>c.id === activeId) || null;\n    const gridCols = `${leftCollapsed ? \"\" : \"260px \"}1fr${rightOpen ? \" 260px\" : \"\"}`;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-screen w-screen bg-bg-primary text-text-primary grid grid-rows-[auto_1fr] relative\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"h-12 border-b border-border-default bg-bg-primary flex items-center relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 min-w-0 flex items-stretch gap-1 px-2 overflow-x-auto\",\n                        children: tabs.map((id)=>{\n                            const ch = chapters.find((c)=>c.id === id);\n                            const active = id === activeId;\n                            const label = id === SETTINGS_TAB_ID ? \"Settings\" : id === CHARACTERS_TAB_ID ? \"Characters\" : ch?.title || \"Untitled\";\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                draggable: true,\n                                onDragStart: (e)=>onDragStart(e, id),\n                                onDragOver: (e)=>e.preventDefault(),\n                                onDrop: (e)=>onDrop(e, id),\n                                onMouseDown: (e)=>{\n                                    if (e.button === 1) {\n                                        e.preventDefault();\n                                        closeTab(id);\n                                    }\n                                },\n                                className: `group flex items-center gap-2 px-4 h-10 rounded-t-md transition-all duration-150 ${active ? \"bg-bg-elevated text-text-primary\" : \"text-text-tertiary hover:text-text-secondary hover:bg-bg-hover\"}`,\n                                onClick: ()=>setActiveId(id),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-sm truncate max-w-[160px]\",\n                                        children: label\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 429,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"opacity-0 group-hover:opacity-100 hover:text-red-400 transition-opacity duration-150\",\n                                        onClick: (e)=>{\n                                            e.stopPropagation();\n                                            closeTab(id);\n                                        },\n                                        children: \"\\xd7\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 430,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, id, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 419,\n                                columnNumber: 15\n                            }, this);\n                        })\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 413,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute inset-0 flex items-center justify-center pointer-events-none\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm font-semibold text-text-primary truncate max-w-[60%] tracking-elegant\",\n                            children: projectTitle || \"Project\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 436,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 435,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute right-2 top-1 z-10 flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"text-xs px-3 py-1.5 rounded-md border border-border-default bg-bg-elevated text-text-secondary hover:text-accent hover:border-accent transition-all duration-150\",\n                                onClick: ()=>setSettingsMenuOpen((v)=>!v),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"sr-only\",\n                                        children: \"Settings\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 443,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                        className: \"w-4 h-4\",\n                                        \"aria-hidden\": \"true\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 444,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 439,\n                                columnNumber: 11\n                            }, this),\n                            settingsMenuOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute right-0 top-10 z-20 w-48 rounded-lg border border-border-default bg-bg-elevated shadow-elevation\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"w-full text-left px-3 py-2 text-sm text-text-secondary hover:bg-bg-hover hover:text-text-primary transition-all duration-150\",\n                                        onClick: ()=>{\n                                            setSettingsMenuOpen(false);\n                                            // Open settings as a central tab\n                                            if (!tabs.includes(SETTINGS_TAB_ID)) setTabs((prev)=>[\n                                                    ...prev,\n                                                    SETTINGS_TAB_ID\n                                                ]);\n                                            setActiveId(SETTINGS_TAB_ID);\n                                            setRenameTitle(projectTitle || \"\");\n                                            setRenameDesc(projectDescription || \"\");\n                                            setRenameError(null);\n                                        },\n                                        children: \"Project Settings\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 448,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"w-full text-left px-3 py-2 text-sm text-text-secondary hover:bg-bg-hover hover:text-text-primary transition-all duration-150\",\n                                        onClick: ()=>{\n                                            setSettingsMenuOpen(false);\n                                            if (!tabs.includes(WORLD_TAB_ID)) setTabs((prev)=>[\n                                                    ...prev,\n                                                    WORLD_TAB_ID\n                                                ]);\n                                            setActiveId(WORLD_TAB_ID);\n                                        },\n                                        children: \"World Settings\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 460,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"w-full text-left px-3 py-2 text-sm text-text-secondary hover:bg-bg-hover hover:text-text-primary transition-all duration-150\",\n                                        onClick: ()=>{\n                                            setSettingsMenuOpen(false);\n                                            if (!tabs.includes(CHARACTERS_TAB_ID)) setTabs((prev)=>[\n                                                    ...prev,\n                                                    CHARACTERS_TAB_ID\n                                                ]);\n                                            setActiveId(CHARACTERS_TAB_ID);\n                                        },\n                                        children: \"Characters\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 468,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 447,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 438,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 412,\n                columnNumber: 7\n            }, this),\n            leftCollapsed && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: \"absolute left-2 top-14 z-10 text-xs px-3 py-2 rounded-md border border-border-default bg-bg-elevated text-text-secondary hover:text-accent hover:border-accent transition-all duration-150 flex items-center gap-1 shadow-elevation\",\n                onClick: ()=>setLeftCollapsed(false),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                        className: \"w-4 h-4\",\n                        \"aria-hidden\": \"true\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 486,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Chapters\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 487,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 482,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"grid min-h-0\",\n                style: {\n                    gridTemplateColumns: gridCols\n                },\n                children: [\n                    !leftCollapsed && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                        className: \"border-r border-border-default bg-bg-primary min-h-0 flex flex-col\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-5 py-4 text-xs font-semibold tracking-[0.05em] uppercase flex items-center justify-between text-text-secondary\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"CHAPTERS\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 497,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"text-text-tertiary hover:text-accent rounded p-1 hover:bg-bg-hover transition-all duration-150\",\n                                        onClick: ()=>setLeftCollapsed(true),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                className: \"w-4 h-4\",\n                                                \"aria-hidden\": \"true\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 499,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"sr-only\",\n                                                children: \"Collapse\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 500,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 498,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 496,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 overflow-y-auto px-4\",\n                                children: [\n                                    loadingCh && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-text-secondary px-2 py-2\",\n                                        children: \"Loading\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 504,\n                                        columnNumber: 27\n                                    }, this),\n                                    errorCh && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-red-400 px-2 py-2 bg-red-950/20 rounded-md border border-red-500/20\",\n                                        children: errorCh\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 505,\n                                        columnNumber: 25\n                                    }, this),\n                                    chapters.map((c, idx)=>{\n                                        const wordCount = c.content ? c.content.trim().split(/\\s+/).filter(Boolean).length : 0;\n                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `group w-full flex items-start justify-between gap-2 px-3 py-3 rounded-lg mb-2 transition-all duration-150 ${activeId === c.id ? \"bg-bg-elevated border-l-3 border-accent\" : \"hover:bg-bg-hover\"}`,\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: \"flex-1 text-left\",\n                                                    onClick: ()=>openTab(c.id),\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs uppercase text-text-tertiary mb-1\",\n                                                            children: [\n                                                                \"Chapter \",\n                                                                idx + 1\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 514,\n                                                            columnNumber: 19\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: `text-sm font-medium mb-1 ${activeId === c.id ? \"text-text-primary\" : \"text-text-secondary\"}`,\n                                                            children: c.title || \"Untitled\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 515,\n                                                            columnNumber: 19\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs text-text-tertiary\",\n                                                            children: [\n                                                                wordCount,\n                                                                \" words\"\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 516,\n                                                            columnNumber: 19\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 510,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: `opacity-0 group-hover:opacity-100 transition-opacity duration-150 ${deletingId === c.id ? \"text-red-400 opacity-60 cursor-not-allowed\" : \"text-text-tertiary hover:text-red-400\"}`,\n                                                    onClick: (e)=>{\n                                                        e.stopPropagation();\n                                                        if (deletingId) return;\n                                                        void onDeleteChapter(c.id);\n                                                    },\n                                                    title: \"Delete chapter\",\n                                                    disabled: deletingId === c.id,\n                                                    children: [\n                                                        deletingId === c.id ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                                            className: \"w-4 h-4 animate-spin\",\n                                                            \"aria-hidden\": \"true\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 524,\n                                                            columnNumber: 42\n                                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                                            className: \"w-4 h-4\",\n                                                            \"aria-hidden\": \"true\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 524,\n                                                            columnNumber: 108\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"sr-only\",\n                                                            children: \"Delete\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 525,\n                                                            columnNumber: 19\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 518,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, c.id, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 509,\n                                            columnNumber: 15\n                                        }, this);\n                                    })\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 503,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"p-4 border-t border-border-default\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"w-full rounded-lg bg-bg-elevated border border-border-default hover:border-accent hover:bg-bg-hover text-text-secondary hover:text-text-primary text-sm px-4 py-3 flex items-center justify-center gap-2 transition-all duration-150 hover:-translate-y-0.5\",\n                                    onClick: onNewChapter,\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                            className: \"w-4 h-4\",\n                                            \"aria-hidden\": \"true\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 532,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"New Chapter\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 533,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 531,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 530,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 495,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                        className: \"min-h-0 overflow-hidden bg-bg-primary flex flex-col\",\n                        children: activeId === SETTINGS_TAB_ID ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-full grid grid-rows-[auto_1fr_auto] bg-bg-elevated\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"border-b border-border-default px-6 py-4\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-base font-semibold text-text-primary tracking-elegant\",\n                                        children: \"Project Settings\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 544,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 543,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"min-h-0 overflow-y-auto px-6 py-6\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"grid gap-4 max-w-2xl\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Title\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 549,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        value: renameTitle,\n                                                        onChange: (e)=>setRenameTitle(e.target.value),\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 550,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 548,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Description\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 557,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                        value: renameDesc,\n                                                        onChange: (e)=>setRenameDesc(e.target.value),\n                                                        rows: 3,\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150 text-sm\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 558,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 556,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Mode\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 566,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                                        value: projMode,\n                                                        onChange: (e)=>setProjMode(e.target.value),\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent transition-colors duration-150\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                                value: \"\",\n                                                                children: \"Select\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 572,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                                value: \"novel\",\n                                                                children: \"Novel\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 573,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                                value: \"manhwa\",\n                                                                children: \"Manhwa\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 574,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 567,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 565,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Genre\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 578,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        value: projGenre,\n                                                        onChange: (e)=>setProjGenre(e.target.value),\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 579,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 577,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Core Conflict\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 587,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        value: projCoreConflict,\n                                                        onChange: (e)=>setProjCoreConflict(e.target.value),\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 588,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 586,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Settings JSON\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 595,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                        value: projSettingsJson,\n                                                        onChange: (e)=>setProjSettingsJson(e.target.value),\n                                                        rows: 10,\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150 font-mono text-xs\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 596,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 594,\n                                                columnNumber: 19\n                                            }, this),\n                                            renameError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-sm text-red-400 p-3 rounded-lg bg-red-950/20 border border-red-500/20\",\n                                                children: renameError\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 603,\n                                                columnNumber: 35\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 547,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 546,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-14 px-6 flex items-center justify-end gap-3 border-t border-border-default bg-bg-primary\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setActiveId(null),\n                                            className: \"px-4 py-2 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover transition-all duration-150\",\n                                            children: \"Close\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 607,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            disabled: savingRename,\n                                            onClick: async ()=>{\n                                                setSavingRename(true);\n                                                setRenameError(null);\n                                                try {\n                                                    const updateBody = {};\n                                                    const t = renameTitle.trim();\n                                                    if (t && t !== projectTitle) updateBody.title = t;\n                                                    if (renameDesc !== projectDescription) updateBody.description = renameDesc;\n                                                    if (Object.keys(updateBody).length > 0) {\n                                                        const updated = await api.updateProject(projectId, updateBody);\n                                                        setProjectTitle(updated?.title || t || projectTitle);\n                                                        setProjectDescription(updated?.description ?? renameDesc ?? projectDescription);\n                                                    }\n                                                    const changes = {};\n                                                    if (projMode) changes.mode = projMode;\n                                                    if (projGenre) changes.genre = projGenre;\n                                                    if (projCoreConflict) changes.coreConflict = projCoreConflict;\n                                                    if (projSettingsJson) {\n                                                        try {\n                                                            changes.settingsJson = JSON.parse(projSettingsJson);\n                                                        } catch  {\n                                                            changes.settingsJson = projSettingsJson;\n                                                        }\n                                                    }\n                                                    if (Object.keys(changes).length > 0) {\n                                                        await api.updateProjectSettings(projectId, changes);\n                                                        if (false) {}\n                                                        // Toast: Settings saved\n                                                        if (toastTimer.current) clearTimeout(toastTimer.current);\n                                                        setToastMsg(\"Settings saved\");\n                                                        toastTimer.current = setTimeout(()=>setToastMsg(\"\"), 3000);\n                                                    }\n                                                } catch (e) {\n                                                    setRenameError(e?.message || \"Failed to save\");\n                                                } finally{\n                                                    setSavingRename(false);\n                                                }\n                                            },\n                                            className: \"px-4 py-2 rounded-md bg-accent hover:bg-accent-hover disabled:opacity-50 text-white transition-all duration-150\",\n                                            children: savingRename ? \"Saving\" : \"Save Settings\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 608,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 606,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 542,\n                            columnNumber: 13\n                        }, this) : activeId === CHARACTERS_TAB_ID ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-full bg-bg-elevated\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_workspace_CharacterManager__WEBPACK_IMPORTED_MODULE_5__.CharacterManager, {\n                                projectId: projectId,\n                                requireImage: projMode === \"manhwa\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 654,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 653,\n                            columnNumber: 13\n                        }, this) : activeId === WORLD_TAB_ID ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-full bg-bg-elevated\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_workspace_WorldSettingsManager__WEBPACK_IMPORTED_MODULE_6__.WorldSettingsManager, {\n                                projectId: projectId\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 658,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 657,\n                            columnNumber: 13\n                        }, this) : activeId ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-full flex flex-col\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 min-h-0 overflow-y-auto bg-bg-elevated flex justify-center\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-full max-w-[800px] px-12 py-16\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: title,\n                                                onChange: (e)=>onTitleChange(e.target.value),\n                                                placeholder: \"Chapter Title\",\n                                                className: \"w-full bg-transparent border-none text-[32px] font-bold text-text-primary placeholder:text-text-tertiary outline-none mb-8 tracking-tight\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 666,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                contentEditable: true,\n                                                suppressContentEditableWarning: true,\n                                                onInput: (e)=>onContentChange(e.currentTarget.textContent || \"\"),\n                                                className: \"w-full min-h-[400px] text-lg leading-[1.8] text-text-primary outline-none\",\n                                                style: {\n                                                    whiteSpace: \"pre-wrap\"\n                                                },\n                                                children: content\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 673,\n                                                columnNumber: 19\n                                            }, this),\n                                            !content && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-lg text-text-tertiary pointer-events-none -mt-[400px] leading-[1.8]\",\n                                                children: \"Start writing your story...\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 683,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 664,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 663,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-12 bg-bg-primary border-t border-border-default px-6 flex items-center justify-between text-[13px] text-text-tertiary\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center gap-6\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center gap-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: `w-1.5 h-1.5 rounded-full ${saving ? \"bg-warning animate-pulse\" : \"bg-success\"}`\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 691,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            children: saving ? \"Saving\" : \"Saved\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 692,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 690,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        content.trim().split(/\\s+/).filter(Boolean).length,\n                                                        \" words\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 694,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        content.length,\n                                                        \" characters\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 695,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        Math.ceil(content.trim().split(/\\s+/).filter(Boolean).length / 200),\n                                                        \" min read\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 696,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 689,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: activeChapter?.createdAt && `Last edited ${new Date(activeChapter.createdAt).toLocaleString()}`\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 698,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 688,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 661,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-full bg-bg-elevated flex items-center justify-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-center max-w-md\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-base font-semibold text-text-primary mb-2\",\n                                        children: \"No Chapter Selected\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 706,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-sm text-text-secondary\",\n                                        children: \"Open a chapter from the left sidebar to start editing.\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 707,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 705,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 704,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 540,\n                        columnNumber: 9\n                    }, this),\n                    rightOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                        className: \"border-l border-border-default bg-bg-primary min-h-0 flex flex-col relative\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-5 py-4 text-xs font-semibold tracking-[0.05em] uppercase flex items-center justify-between text-text-secondary\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"flex items-center gap-2 text-text-secondary hover:text-text-primary\",\n                                        onClick: ()=>setChatMenuOpen((v)=>!v),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"truncate max-w-[140px] text-text-primary normal-case text-sm font-medium\",\n                                                children: chats.find((c)=>c.id === activeChatId)?.title || \"Select chat\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 718,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                                className: `w-3.5 h-3.5 transition-transform ${chatMenuOpen ? \"rotate-180\" : \"\"}`,\n                                                \"aria-hidden\": \"true\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 719,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 717,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"text-text-tertiary hover:text-accent rounded p-1 hover:bg-bg-hover transition-all duration-150\",\n                                                onClick: ()=>{\n                                                    setNewChatOpen(true);\n                                                    setChatMenuOpen(true);\n                                                },\n                                                title: \"New Chat\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                                    className: \"w-4 h-4\",\n                                                    \"aria-hidden\": \"true\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 723,\n                                                    columnNumber: 17\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 722,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"text-text-tertiary hover:text-accent rounded p-1 hover:bg-bg-hover transition-all duration-150\",\n                                                onClick: ()=>setRightOpen(false),\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                        className: \"w-4 h-4\",\n                                                        \"aria-hidden\": \"true\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 726,\n                                                        columnNumber: 17\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"sr-only\",\n                                                        children: \"Collapse\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 727,\n                                                        columnNumber: 17\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 725,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 721,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 716,\n                                columnNumber: 11\n                            }, this),\n                            chatMenuOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute left-3 right-3 top-14 z-20 rounded-lg border border-border-default bg-bg-elevated shadow-elevation\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"p-3 border-b border-border-default flex items-center justify-between\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-sm font-semibold text-text-primary\",\n                                                children: \"Chats\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 734,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"text-text-tertiary hover:text-text-primary\",\n                                                onClick: ()=>setChatMenuOpen(false),\n                                                children: \"\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 735,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 733,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"p-3 space-y-3\",\n                                        children: [\n                                            newChatOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"border border-border-default rounded-lg p-3 bg-bg-primary\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-text-tertiary mb-2\",\n                                                        children: \"Create a new chat\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 740,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex items-center gap-2 mb-2\",\n                                                        children: [\n                                                            \"plot\",\n                                                            \"character\",\n                                                            \"world\"\n                                                        ].map((t)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                                className: `text-xs px-3 py-1.5 rounded-md border cursor-pointer ${newChatType === t ? \"border-accent text-accent\" : \"border-border-default text-text-secondary hover:text-text-primary\"}`,\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                        type: \"radio\",\n                                                                        name: \"chat-type\",\n                                                                        className: \"hidden\",\n                                                                        checked: newChatType === t,\n                                                                        onChange: ()=>setNewChatType(t)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                        lineNumber: 744,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    t\n                                                                ]\n                                                            }, t, true, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 743,\n                                                                columnNumber: 25\n                                                            }, this))\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 741,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        value: newChatTitle,\n                                                        onChange: (e)=>setNewChatTitle(e.target.value),\n                                                        placeholder: \"Title (optional)\",\n                                                        className: \"w-full bg-bg-elevated border border-border-default rounded-md px-3 py-2 text-text-primary outline-none focus:border-accent text-sm\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 748,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    createChatError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"mt-2 text-xs text-red-400\",\n                                                        children: createChatError\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 749,\n                                                        columnNumber: 41\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"mt-3 flex items-center justify-end gap-2\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                className: \"px-3 py-1.5 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover\",\n                                                                onClick: ()=>{\n                                                                    setNewChatOpen(false);\n                                                                    setNewChatTitle(\"\");\n                                                                    setCreateChatError(null);\n                                                                },\n                                                                children: \"Cancel\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 751,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                className: \"px-3 py-1.5 rounded-md bg-accent hover:bg-accent-hover text-white disabled:opacity-50\",\n                                                                disabled: creatingChat,\n                                                                onClick: async ()=>{\n                                                                    setCreatingChat(true);\n                                                                    setCreateChatError(null);\n                                                                    try {\n                                                                        const c = await api.createChat(projectId, {\n                                                                            type: newChatType,\n                                                                            title: newChatTitle || undefined\n                                                                        });\n                                                                        setChats((prev)=>[\n                                                                                ...prev,\n                                                                                c\n                                                                            ]);\n                                                                        setActiveChatId(c.id);\n                                                                        setNewChatOpen(false);\n                                                                        setNewChatTitle(\"\");\n                                                                        setChatMenuOpen(false);\n                                                                    } catch (e) {\n                                                                        setCreateChatError(e?.message || \"Failed to create chat\");\n                                                                    } finally{\n                                                                        setCreatingChat(false);\n                                                                    }\n                                                                },\n                                                                children: creatingChat ? \"Creating\" : \"Create\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 752,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 750,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 739,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"max-h-64 overflow-y-auto pr-1\",\n                                                children: [\n                                                    !chats.length && !newChatOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-text-tertiary px-2 py-2\",\n                                                        children: [\n                                                            \"No chats yet. \",\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                className: \"underline\",\n                                                                onClick: ()=>{\n                                                                    setNewChatType(\"plot\");\n                                                                    setNewChatOpen(true);\n                                                                },\n                                                                children: \"Create your first chat\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 770,\n                                                                columnNumber: 89\n                                                            }, this),\n                                                            \".\"\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 770,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    chats.map((c)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: `group w-full flex items-center justify-between gap-2 px-3 py-2 rounded-md mb-1 transition-all duration-150 ${activeChatId === c.id ? \"bg-bg-hover\" : \"hover:bg-bg-hover\"}`,\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    className: \"flex-1 text-left\",\n                                                                    onClick: ()=>{\n                                                                        setActiveChatId(c.id);\n                                                                        setChatMenuOpen(false);\n                                                                    },\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"text-[10px] uppercase text-text-tertiary mb-0.5\",\n                                                                            children: c.type\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                            lineNumber: 775,\n                                                                            columnNumber: 25\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: `text-sm font-medium ${activeChatId === c.id ? \"text-text-primary\" : \"text-text-secondary\"}`,\n                                                                            children: c.title\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                            lineNumber: 776,\n                                                                            columnNumber: 25\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                    lineNumber: 774,\n                                                                    columnNumber: 23\n                                                                }, this),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    className: `opacity-0 group-hover:opacity-100 transition-opacity duration-150 text-text-tertiary hover:text-red-400`,\n                                                                    onClick: async (e)=>{\n                                                                        e.stopPropagation();\n                                                                        if (!confirm(\"Delete this chat?\")) return;\n                                                                        try {\n                                                                            await api.deleteChat(projectId, c.id);\n                                                                            setChats((prev)=>prev.filter((x)=>x.id !== c.id));\n                                                                            if (activeChatId === c.id) setActiveChatId(chats.find((x)=>x.id !== c.id)?.id || null);\n                                                                        } catch  {}\n                                                                    },\n                                                                    title: \"Delete chat\",\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                                                            className: \"w-4 h-4\",\n                                                                            \"aria-hidden\": \"true\"\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                            lineNumber: 783,\n                                                                            columnNumber: 25\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                            className: \"sr-only\",\n                                                                            children: \"Delete\"\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                            lineNumber: 784,\n                                                                            columnNumber: 25\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                    lineNumber: 778,\n                                                                    columnNumber: 23\n                                                                }, this)\n                                                            ]\n                                                        }, c.id, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 773,\n                                                            columnNumber: 21\n                                                        }, this))\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 768,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 737,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 732,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"min-h-0 flex-1 overflow-hidden border-t border-border-default\",\n                                children: activeChatId ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_Chat__WEBPACK_IMPORTED_MODULE_4__.Chat, {\n                                    chatId: activeChatId\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 795,\n                                    columnNumber: 15\n                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-full grid place-items-center text-xs text-text-tertiary\",\n                                    children: \"Open the chat menu to create or select a chat.\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 797,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 793,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 715,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 492,\n                columnNumber: 7\n            }, this),\n            !rightOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: \"absolute right-2 top-14 z-10 text-xs px-3 py-2 rounded-md border border-border-default bg-bg-elevated text-text-secondary hover:text-accent hover:border-accent transition-all duration-150 flex items-center gap-1 shadow-elevation\",\n                onClick: ()=>setRightOpen(true),\n                children: \"Open Chats\"\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 805,\n                columnNumber: 9\n            }, this),\n            settingsOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 z-50 grid place-items-center bg-black/60 backdrop-blur-sm\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"w-full max-w-md bg-bg-elevated border border-border-default rounded-xl p-6 shadow-elevation\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-between mb-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-lg font-semibold text-text-primary\",\n                                    children: \"Project Settings\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 814,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>setSettingsOpen(false),\n                                    className: \"text-text-tertiary hover:text-text-primary transition-colors duration-150\",\n                                    children: \"\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 815,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 813,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid gap-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"grid gap-1 text-sm\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs text-text-tertiary\",\n                                            children: \"Title\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 819,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            value: renameTitle,\n                                            onChange: (e)=>setRenameTitle(e.target.value),\n                                            className: \"bg-bg-primary border border-border-default rounded-md px-3 py-2 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 820,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 818,\n                                    columnNumber: 15\n                                }, this),\n                                renameError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-sm text-red-400 p-3 rounded-lg bg-red-950/20 border border-red-500/20\",\n                                    children: renameError\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 826,\n                                    columnNumber: 31\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center justify-end gap-2 mt-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setSettingsOpen(false),\n                                            className: \"px-4 py-2 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover transition-all duration-150\",\n                                            children: \"Cancel\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 828,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            disabled: savingRename || !renameTitle.trim(),\n                                            onClick: async ()=>{\n                                                setSavingRename(true);\n                                                setRenameError(null);\n                                                try {\n                                                    const updated = await api.updateProject(projectId, {\n                                                        title: renameTitle.trim()\n                                                    });\n                                                    setProjectTitle(updated?.title || renameTitle.trim());\n                                                    setSettingsOpen(false);\n                                                } catch (e) {\n                                                    setRenameError(e?.message || \"Failed to save\");\n                                                } finally{\n                                                    setSavingRename(false);\n                                                }\n                                            },\n                                            className: \"px-4 py-2 rounded-md bg-accent hover:bg-accent-hover disabled:opacity-50 text-white transition-all duration-150\",\n                                            children: savingRename ? \"Saving\" : \"Save\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 829,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 827,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 817,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                    lineNumber: 812,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 811,\n                columnNumber: 9\n            }, this),\n            toastMsg && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed top-4 right-4 z-50 animate-in slide-in-from-bottom-4 duration-200\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-4 py-3 rounded-lg bg-bg-elevated border border-border-default text-text-primary text-sm shadow-elevation\",\n                    children: toastMsg\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                    lineNumber: 856,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 855,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n        lineNumber: 410,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvV29ya3NwYWNlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFMEU7QUFDSjtBQUNoQztBQUNRO0FBQzZCO0FBQ1E7QUFDb0M7QUFVaEgsU0FBU2tCLFVBQVUsRUFBRUMsU0FBUyxFQUF5QjtJQUM1RCxNQUFNQyxXQUFXZixtRkFBV0E7SUFDNUIsTUFBTWdCLE1BQU1uQiw4Q0FBT0EsQ0FBQyxJQUFNSSxtREFBU0EsQ0FBQ2MsV0FBVztRQUFDQTtLQUFTO0lBRXpELE1BQU0sQ0FBQ0UsVUFBVUMsWUFBWSxHQUFHbkIsK0NBQVFBLENBQWdCLEVBQUU7SUFDMUQsTUFBTSxDQUFDb0IsV0FBV0MsYUFBYSxHQUFHckIsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDc0IsU0FBU0MsV0FBVyxHQUFHdkIsK0NBQVFBLENBQWdCO0lBRXRELE1BQU0sQ0FBQ3dCLE1BQU1DLFFBQVEsR0FBR3pCLCtDQUFRQSxDQUFXLEVBQUU7SUFDN0MsTUFBTSxDQUFDMEIsVUFBVUMsWUFBWSxHQUFHM0IsK0NBQVFBLENBQWdCO0lBRXhELE1BQU0sQ0FBQzRCLE9BQU9DLFNBQVMsR0FBRzdCLCtDQUFRQSxDQUFDO0lBQ25DLE1BQU0sQ0FBQzhCLFNBQVNDLFdBQVcsR0FBRy9CLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ2dDLFFBQVFDLFVBQVUsR0FBR2pDLCtDQUFRQSxDQUFDO0lBQ3JDLE1BQU1rQyxZQUFZbkMsNkNBQU1BLENBQXVDO0lBQy9ELE1BQU0sQ0FBQ29DLGVBQWVDLGlCQUFpQixHQUFHcEMsK0NBQVFBLENBQUM7SUFDbkQsTUFBTSxDQUFDcUMsWUFBWUMsY0FBYyxHQUFHdEMsK0NBQVFBLENBQUM7SUFDN0MsTUFBTSxDQUFDdUMsWUFBWUMsY0FBYyxHQUFHeEMsK0NBQVFBLENBQWdCO0lBQzVELE1BQU0sQ0FBQ3lDLGNBQWNDLGdCQUFnQixHQUFHMUMsK0NBQVFBLENBQVM7SUFDekQs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d29ya3NwYWNlL1dvcmtzcGFjZS50c3g/NTg1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlU3VwYWJhc2UgfSBmcm9tIFwiQC9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyXCI7XG5pbXBvcnQgeyBjcmVhdGVBcGkgfSBmcm9tIFwiQC9saWIvYXBpXCI7XG5pbXBvcnQgeyBDaGF0IH0gZnJvbSBcIkAvY29tcG9uZW50cy9jaGF0L0NoYXRcIjtcbmltcG9ydCB7IENoYXJhY3Rlck1hbmFnZXIgfSBmcm9tIFwiQC9jb21wb25lbnRzL3dvcmtzcGFjZS9DaGFyYWN0ZXJNYW5hZ2VyXCI7XG5pbXBvcnQgeyBXb3JsZFNldHRpbmdzTWFuYWdlciB9IGZyb20gXCJAL2NvbXBvbmVudHMvd29ya3NwYWNlL1dvcmxkU2V0dGluZ3NNYW5hZ2VyXCI7XG5pbXBvcnQgeyBTZXR0aW5ncyBhcyBJY29uU2V0dGluZ3MsIENoZXZyb25MZWZ0LCBDaGV2cm9uUmlnaHQsIFBsdXMsIFRyYXNoMiwgTG9hZGVyMiwgQ2hldnJvbkRvd24gfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5cbnR5cGUgQ2hhcHRlckl0ZW0gPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGNvbnRlbnQ/OiBzdHJpbmcgfCBudWxsO1xuICBwYW5lbFNjcmlwdD86IGFueSB8IG51bGw7XG4gIGNyZWF0ZWRBdD86IHN0cmluZztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBXb3Jrc3BhY2UoeyBwcm9qZWN0SWQgfTogeyBwcm9qZWN0SWQ6IHN0cmluZyB9KSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gdXNlU3VwYWJhc2UoKTtcbiAgY29uc3QgYXBpID0gdXNlTWVtbygoKSA9PiBjcmVhdGVBcGkoc3VwYWJhc2UpLCBbc3VwYWJhc2VdKTtcblxuICBjb25zdCBbY2hhcHRlcnMsIHNldENoYXB0ZXJzXSA9IHVzZVN0YXRlPENoYXB0ZXJJdGVtW10+KFtdKTtcbiAgY29uc3QgW2xvYWRpbmdDaCwgc2V0TG9hZGluZ0NoXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZXJyb3JDaCwgc2V0RXJyb3JDaF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBbdGFicywgc2V0VGFic10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICBjb25zdCBbYWN0aXZlSWQsIHNldEFjdGl2ZUlkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IFt0aXRsZSwgc2V0VGl0bGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtjb250ZW50LCBzZXRDb250ZW50XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbc2F2aW5nLCBzZXRTYXZpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBzYXZlVGltZXIgPSB1c2VSZWY8UmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2xlZnRDb2xsYXBzZWQsIHNldExlZnRDb2xsYXBzZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWlNdXNlT3Blbiwgc2V0QWlNdXNlT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtkZWxldGluZ0lkLCBzZXREZWxldGluZ0lkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbcHJvamVjdFRpdGxlLCBzZXRQcm9qZWN0VGl0bGVdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgW3Byb2plY3REZXNjcmlwdGlvbiwgc2V0UHJvamVjdERlc2NyaXB0aW9uXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFtzZXR0aW5nc09wZW4sIHNldFNldHRpbmdzT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtyZW5hbWVUaXRsZSwgc2V0UmVuYW1lVGl0bGVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZW5hbWVEZXNjLCBzZXRSZW5hbWVEZXNjXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbc2F2aW5nUmVuYW1lLCBzZXRTYXZpbmdSZW5hbWVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVuYW1lRXJyb3IsIHNldFJlbmFtZUVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2V0dGluZ3NNZW51T3Blbiwgc2V0U2V0dGluZ3NNZW51T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwcm9qTW9kZSwgc2V0UHJvak1vZGVdID0gdXNlU3RhdGU8J25vdmVsJyB8ICdtYW5od2EnIHwgJyc+KCcnKTtcbiAgY29uc3QgW3Byb2pHZW5yZSwgc2V0UHJvakdlbnJlXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIC8vIFJlbW92ZWQgd29ybGROYW1lIGZpZWxkIGZyb20gUHJvamVjdFxuICBjb25zdCBbcHJvakNvcmVDb25mbGljdCwgc2V0UHJvakNvcmVDb25mbGljdF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbcHJvalNldHRpbmdzSnNvbiwgc2V0UHJvalNldHRpbmdzSnNvbl0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbdG9hc3RNc2csIHNldFRvYXN0TXNnXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IHRvYXN0VGltZXIgPSB1c2VSZWY8UmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsPihudWxsKTtcblxuICBjb25zdCBTRVRUSU5HU19UQUJfSUQgPSAnX19zZXR0aW5nc19fJztcbiAgY29uc3QgQ0hBUkFDVEVSU19UQUJfSUQgPSAnX19jaGFyYWN0ZXJzX18nO1xuICBjb25zdCBXT1JMRF9UQUJfSUQgPSAnX193b3JsZF9fJztcblxuICAvLyBDaGF0cyBzaWRlYmFyIChyaWdodClcbiAgY29uc3QgW3JpZ2h0T3Blbiwgc2V0UmlnaHRPcGVuXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBjaGF0c0NhY2hlS2V5ID0gdXNlTWVtbygoKSA9PiBgaW5rdmVyc2VfcHJvamVjdF8ke3Byb2plY3RJZH1fY2hhdHNgLCBbcHJvamVjdElkXSk7XG4gIGNvbnN0IGNoYXRzQWN0aXZlS2V5ID0gdXNlTWVtbygoKSA9PiBgaW5rdmVyc2VfcHJvamVjdF8ke3Byb2plY3RJZH1fYWN0aXZlX2NoYXRgLCBbcHJvamVjdElkXSk7XG4gIGNvbnN0IGNoYXB0ZXJzQ2FjaGVLZXkgPSB1c2VNZW1vKCgpID0+IGBpbmt2ZXJzZV9wcm9qZWN0XyR7cHJvamVjdElkfV9jaGFwdGVyc2AsIFtwcm9qZWN0SWRdKTtcbiAgY29uc3QgdGFic0NhY2hlS2V5ID0gdXNlTWVtbygoKSA9PiBgaW5rdmVyc2VfcHJvamVjdF8ke3Byb2plY3RJZH1fb3Blbl90YWJzYCwgW3Byb2plY3RJZF0pO1xuICBjb25zdCBhY3RpdmVUYWJLZXkgPSB1c2VNZW1vKCgpID0+IGBpbmt2ZXJzZV9wcm9qZWN0XyR7cHJvamVjdElkfV9hY3RpdmVfdGFiYCwgW3Byb2plY3RJZF0pO1xuICBjb25zdCBsZWZ0Q29sbGFwc2VkS2V5ID0gdXNlTWVtbygoKSA9PiBgaW5rdmVyc2VfcHJvamVjdF8ke3Byb2plY3RJZH1fbGVmdF9jb2xsYXBzZWRgLCBbcHJvamVjdElkXSk7XG4gIGNvbnN0IHJpZ2h0T3BlbktleSA9IHVzZU1lbW8oKCkgPT4gYGlua3ZlcnNlX3Byb2plY3RfJHtwcm9qZWN0SWR9X3JpZ2h0X29wZW5gLCBbcHJvamVjdElkXSk7XG4gIGNvbnN0IFtjaGF0cywgc2V0Q2hhdHNdID0gdXNlU3RhdGU8QXJyYXk8eyBpZDogc3RyaW5nOyB0eXBlOiAncGxvdCd8J2NoYXJhY3Rlcid8J3dvcmxkJzsgdGl0bGU6IHN0cmluZyB9Pj4oW10pO1xuICBjb25zdCBbYWN0aXZlQ2hhdElkLCBzZXRBY3RpdmVDaGF0SWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtoYXNDaGF0c0NhY2hlLCBzZXRIYXNDaGF0c0NhY2hlXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgY2hhdHNSZWYgPSB1c2VSZWYoY2hhdHMpO1xuICBjb25zdCBbbmV3Q2hhdFR5cGUsIHNldE5ld0NoYXRUeXBlXSA9IHVzZVN0YXRlPCdwbG90J3wnY2hhcmFjdGVyJ3wnd29ybGQnPigncGxvdCcpO1xuICBjb25zdCBbbmV3Q2hhdFRpdGxlLCBzZXROZXdDaGF0VGl0bGVdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbbmV3Q2hhdE9wZW4sIHNldE5ld0NoYXRPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NyZWF0aW5nQ2hhdCwgc2V0Q3JlYXRpbmdDaGF0XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2NyZWF0ZUNoYXRFcnJvciwgc2V0Q3JlYXRlQ2hhdEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbY2hhdE1lbnVPcGVuLCBzZXRDaGF0TWVudU9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaGFzQ2hhcHRlcnNDYWNoZSwgc2V0SGFzQ2hhcHRlcnNDYWNoZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG5cbiAgLy8gSHlkcmF0ZSBjaGF0cyBmcm9tIGxvY2FsU3RvcmFnZSBhZnRlciBtb3VudCAocHJldmVudHMgU1NSL2NsaWVudCBtaXNtYXRjaClcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IHMgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2hhdHNDYWNoZUtleSk7XG4gICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgY29uc3QgYXJyID0gSlNPTi5wYXJzZShzKTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgICAgICAgICBzZXRDaGF0cyhhcnIgYXMgYW55KTtcbiAgICAgICAgICAgIHNldEhhc0NoYXRzQ2FjaGUoKGFyciBhcyBhbnlbXSkubGVuZ3RoID4gMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHYgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2hhdHNBY3RpdmVLZXkpO1xuICAgICAgICBpZiAodikgc2V0QWN0aXZlQ2hhdElkKHYpO1xuICAgICAgICAvLyBIeWRyYXRlIGNoYXB0ZXJzXG4gICAgICAgIGNvbnN0IGNocyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjaGFwdGVyc0NhY2hlS2V5KTtcbiAgICAgICAgaWYgKGNocykge1xuICAgICAgICAgIGNvbnN0IGFyciA9IEpTT04ucGFyc2UoY2hzKTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgICAgICAgICBzZXRDaGFwdGVycyhhcnIgYXMgYW55KTtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkID0gKGFyciBhcyBhbnlbXSkubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIHNldEhhc0NoYXB0ZXJzQ2FjaGUodmFsaWQpO1xuICAgICAgICAgICAgaWYgKHZhbGlkKSBzZXRMb2FkaW5nQ2goZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBIeWRyYXRlIHRhYnMgYW5kIGFjdGl2ZSB0YWJcbiAgICAgICAgY29uc3QgdCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0YWJzQ2FjaGVLZXkpO1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgIGNvbnN0IGFyciA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgc2V0VGFicyhhcnIgYXMgYW55KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShhY3RpdmVUYWJLZXkpO1xuICAgICAgICBpZiAoYXQpIHNldEFjdGl2ZUlkKGF0KTtcbiAgICAgICAgLy8gSHlkcmF0ZSBVSSB0b2dnbGVzXG4gICAgICAgIGNvbnN0IGxjID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGxlZnRDb2xsYXBzZWRLZXkpO1xuICAgICAgICBpZiAobGMgIT09IG51bGwpIHNldExlZnRDb2xsYXBzZWQobGMgPT09ICcxJyk7XG4gICAgICAgIGNvbnN0IHJvID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHJpZ2h0T3BlbktleSk7XG4gICAgICAgIGlmIChybyAhPT0gbnVsbCkgc2V0UmlnaHRPcGVuKHJvID09PSAnMScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge31cbiAgfSwgW2NoYXRzQ2FjaGVLZXksIGNoYXRzQWN0aXZlS2V5LCBjaGFwdGVyc0NhY2hlS2V5LCB0YWJzQ2FjaGVLZXksIGFjdGl2ZVRhYktleSwgbGVmdENvbGxhcHNlZEtleSwgcmlnaHRPcGVuS2V5XSk7XG5cbiAgLy8gSGVscGVyOiBzb3J0IGNoYXB0ZXJzIGJ5IGNyZWF0ZWRBdCBhc2MgKGZhbGxiYWNrIGJ5IHRpdGxlKVxuICBjb25zdCBzb3J0Q2hhcHRlcnMgPSB1c2VDYWxsYmFjaygoYXJyOiBDaGFwdGVySXRlbVtdKSA9PiB7XG4gICAgcmV0dXJuIFsuLi5hcnJdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IHRhID0gYS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShhLmNyZWF0ZWRBdCkuZ2V0VGltZSgpIDogMDtcbiAgICAgIGNvbnN0IHRiID0gYi5jcmVhdGVkQXQgPyBuZXcgRGF0ZShiLmNyZWF0ZWRBdCkuZ2V0VGltZSgpIDogMDtcbiAgICAgIGlmICh0YSAhPT0gdGIpIHJldHVybiB0YSAtIHRiO1xuICAgICAgcmV0dXJuIChhLnRpdGxlIHx8ICcnKS5sb2NhbGVDb21wYXJlKGIudGl0bGUgfHwgJycpO1xuICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgLy8gTG9hZCBjaGFwdGVycyBmb3IgdHJlZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBtb3VudGVkID0gdHJ1ZTtcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGhhc0NoYXB0ZXJzQ2FjaGUpIHsgcmV0dXJuOyB9XG4gICAgICB0cnkge1xuICAgICAgICBzZXRMb2FkaW5nQ2godHJ1ZSk7XG4gICAgICAgIGNvbnN0IHsgaXRlbXMgfSA9IGF3YWl0IGFwaS5saXN0Q2hhcHRlcnNQYWdpbmF0ZWQocHJvamVjdElkLCAwLCAxMDApO1xuICAgICAgICBpZiAoIW1vdW50ZWQpIHJldHVybjtcbiAgICAgICAgc2V0Q2hhcHRlcnMoc29ydENoYXB0ZXJzKGl0ZW1zIGFzIENoYXB0ZXJJdGVtW10pKTtcbiAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICBpZiAobW91bnRlZCkgc2V0RXJyb3JDaChlPy5tZXNzYWdlIHx8IFwiRmFpbGVkIHRvIGxvYWQgY2hhcHRlcnNcIik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAobW91bnRlZCkgc2V0TG9hZGluZ0NoKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KSgpO1xuICAgIHJldHVybiAoKSA9PiB7IG1vdW50ZWQgPSBmYWxzZTsgfTtcbiAgfSwgW2FwaSwgcHJvamVjdElkLCBzb3J0Q2hhcHRlcnMsIGhhc0NoYXB0ZXJzQ2FjaGVdKTtcblxuICAvLyBSZWZsZWN0IHNldHRpbmdzIHVwZGF0ZXMgdHJpZ2dlcmVkIGZyb20gQ2hhdCBvciBlbHNld2hlcmUgaW1tZWRpYXRlbHlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBvblNldHRpbmdzID0gKGU6IGFueSkgPT4ge1xuICAgICAgY29uc3QgZGV0YWlsID0gZT8uZGV0YWlsIHx8IHt9O1xuICAgICAgY29uc3QgY2hhbmdlcyA9IGRldGFpbC5jaGFuZ2VzIHx8IHt9O1xuICAgICAgaWYgKGNoYW5nZXMubW9kZSkgc2V0UHJvak1vZGUoY2hhbmdlcy5tb2RlKTtcbiAgICAgIGlmIChjaGFuZ2VzLmdlbnJlICE9PSB1bmRlZmluZWQpIHNldFByb2pHZW5yZShjaGFuZ2VzLmdlbnJlIHx8ICcnKTtcbiAgICAgIGlmIChjaGFuZ2VzLmNvcmVDb25mbGljdCAhPT0gdW5kZWZpbmVkKSBzZXRQcm9qQ29yZUNvbmZsaWN0KGNoYW5nZXMuY29yZUNvbmZsaWN0IHx8ICcnKTtcbiAgICAgIGlmIChjaGFuZ2VzLnNldHRpbmdzSnNvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRyeSB7IHNldFByb2pTZXR0aW5nc0pzb24odHlwZW9mIGNoYW5nZXMuc2V0dGluZ3NKc29uID09PSAnc3RyaW5nJyA/IGNoYW5nZXMuc2V0dGluZ3NKc29uIDogSlNPTi5zdHJpbmdpZnkoY2hhbmdlcy5zZXR0aW5nc0pzb24pKTsgfSBjYXRjaCB7IHNldFByb2pTZXR0aW5nc0pzb24oJycpOyB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBvbk1vZGUgPSAoZTogYW55KSA9PiB7XG4gICAgICBjb25zdCBtID0gZT8uZGV0YWlsPy5tb2RlO1xuICAgICAgaWYgKG0gPT09ICdub3ZlbCcgfHwgbSA9PT0gJ21hbmh3YScpIHNldFByb2pNb2RlKG0pO1xuICAgIH07XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncHJvamVjdDpzZXR0aW5ncy11cGRhdGVkJywgb25TZXR0aW5ncyBhcyBhbnkpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2plY3Q6bW9kZS11cGRhdGVkJywgb25Nb2RlIGFzIGFueSk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Byb2plY3Q6c2V0dGluZ3MtdXBkYXRlZCcsIG9uU2V0dGluZ3MgYXMgYW55KTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Byb2plY3Q6bW9kZS11cGRhdGVkJywgb25Nb2RlIGFzIGFueSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIC8vIExpc3RlbiBmb3IgY2hhdCBhY3Rpb25zIHRvIGNyZWF0ZS9vcGVuIGNoYXB0ZXJzIGluIGVkaXRvclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSBhc3luYyAoZTogYW55KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkZXRhaWwgPSBlPy5kZXRhaWwgfHwge307XG4gICAgICAgIGNvbnN0IHQgPSBTdHJpbmcoZGV0YWlsLnRpdGxlIHx8ICdVbnRpdGxlZCBDaGFwdGVyJyk7XG4gICAgICAgIGNvbnN0IGMgPSBkZXRhaWwuY29udGVudCAhPT0gdW5kZWZpbmVkID8gU3RyaW5nKGRldGFpbC5jb250ZW50KSA6ICcnO1xuICAgICAgICBjb25zdCBwYW5lbF9zY3JpcHQgPSBkZXRhaWwucGFuZWxfc2NyaXB0ID8/IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmNyZWF0ZUNoYXB0ZXIocHJvamVjdElkLCBwYW5lbF9zY3JpcHQgPyB7IHRpdGxlOiB0LCBwYW5lbF9zY3JpcHQgfSA6IHsgdGl0bGU6IHQsIGNvbnRlbnQ6IGMgfSk7XG4gICAgICAgIGNvbnN0IG5ld0lkID0gKHJlcyBhcyBhbnkpLmlkIGFzIHN0cmluZztcbiAgICAgICAgY29uc3QgY3JlYXRlZEF0ID0gKHJlcyBhcyBhbnkpLmNyZWF0ZWRBdCBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICAgIHNldENoYXB0ZXJzKChwcmV2KSA9PiBzb3J0Q2hhcHRlcnMoWy4uLnByZXYsIHsgaWQ6IG5ld0lkLCB0aXRsZTogKHJlcyBhcyBhbnkpLnRpdGxlLCBjb250ZW50OiBwYW5lbF9zY3JpcHQgPyAnJyA6IGMsIGNyZWF0ZWRBdCB9XSkpO1xuICAgICAgICBzZXRUYWJzKChwcmV2KSA9PiAocHJldi5pbmNsdWRlcyhuZXdJZCkgPyBwcmV2IDogWy4uLnByZXYsIG5ld0lkXSkpO1xuICAgICAgICBzZXRBY3RpdmVJZChuZXdJZCk7XG4gICAgICAgIHNldFRpdGxlKChyZXMgYXMgYW55KS50aXRsZSk7XG4gICAgICAgIHNldENvbnRlbnQocGFuZWxfc2NyaXB0ID8gJycgOiBjKTtcbiAgICAgIH0gY2F0Y2gge31cbiAgICB9O1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3dvcmtzcGFjZTpjcmVhdGUtZHJhZnQnLCBoYW5kbGVyIGFzIGFueSk7XG4gICAgcmV0dXJuICgpID0+IHsgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignd29ya3NwYWNlOmNyZWF0ZS1kcmFmdCcsIGhhbmRsZXIgYXMgYW55KTsgfTtcbiAgfSwgW2FwaSwgcHJvamVjdElkLCBzb3J0Q2hhcHRlcnNdKTtcblxuICAvLyBMaXN0ZW4gZm9yIGNoYXQtZHJpdmVuIGNoYXB0ZXIgdXBkYXRlcyAocmV3cml0ZSlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVyID0gYXN5bmMgKGU6IGFueSkgPT4ge1xuICAgICAgY29uc3QgZGV0YWlsID0gZT8uZGV0YWlsIHx8IHt9O1xuICAgICAgY29uc3QgY29udGVudCA9IFN0cmluZyhkZXRhaWwuY29udGVudCB8fCAnJyk7XG4gICAgICBsZXQgdGFyZ2V0SWQ6IHN0cmluZyB8IG51bGwgPSBkZXRhaWwuaWQgfHwgbnVsbDtcbiAgICAgIGlmICghdGFyZ2V0SWQpIHtcbiAgICAgICAgLy8gUmVzb2x2ZSBieSBjaGFwdGVyX251bWJlciAoMS1iYXNlZCkgYWdhaW5zdCBzb3J0ZWQgb3JkZXJcbiAgICAgICAgaWYgKGRldGFpbC5jaGFwdGVyX251bWJlciAmJiBOdW1iZXIuaXNJbnRlZ2VyKGRldGFpbC5jaGFwdGVyX251bWJlcikpIHtcbiAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBzb3J0Q2hhcHRlcnMoY2hhcHRlcnMpO1xuICAgICAgICAgIGNvbnN0IGlkeCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHNvcnRlZC5sZW5ndGggLSAxLCBkZXRhaWwuY2hhcHRlcl9udW1iZXIgLSAxKSk7XG4gICAgICAgICAgdGFyZ2V0SWQgPSBzb3J0ZWRbaWR4XT8uaWQgfHwgbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChkZXRhaWwudGl0bGUpIHtcbiAgICAgICAgICBjb25zdCBtYXRjaCA9IGNoYXB0ZXJzLmZpbmQoKGMpID0+IChjLnRpdGxlIHx8ICcnKS50b0xvd2VyQ2FzZSgpID09PSBTdHJpbmcoZGV0YWlsLnRpdGxlKS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICB0YXJnZXRJZCA9IG1hdGNoPy5pZCB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXRhcmdldElkKSByZXR1cm47XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgYXBpLnVwZGF0ZUNoYXB0ZXIocHJvamVjdElkLCB0YXJnZXRJZCwgeyBjb250ZW50IH0pO1xuICAgICAgICBzZXRDaGFwdGVycygocHJldikgPT4gcHJldi5tYXAoKGMpID0+IGMuaWQgPT09IHRhcmdldElkID8geyAuLi5jLCBjb250ZW50IH0gOiBjKSk7XG4gICAgICAgIC8vIE9wZW4gb3IgcmVmcmVzaCBhY3RpdmUgdGFiXG4gICAgICAgIGlmICghdGFicy5pbmNsdWRlcyh0YXJnZXRJZCkpIHNldFRhYnMoKHByZXYpID0+IFsuLi5wcmV2LCB0YXJnZXRJZCFdKTtcbiAgICAgICAgc2V0QWN0aXZlSWQodGFyZ2V0SWQpO1xuICAgICAgICBpZiAoYWN0aXZlSWQgPT09IHRhcmdldElkKSBzZXRDb250ZW50KGNvbnRlbnQpO1xuICAgICAgfSBjYXRjaCB7fVxuICAgIH07XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd29ya3NwYWNlOnVwZGF0ZS1jaGFwdGVyJywgaGFuZGxlciBhcyBhbnkpO1xuICAgIHJldHVybiAoKSA9PiB7IGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dvcmtzcGFjZTp1cGRhdGUtY2hhcHRlcicsIGhhbmRsZXIgYXMgYW55KTsgfTtcbiAgfSwgW2FwaSwgcHJvamVjdElkLCBjaGFwdGVycywgdGFicywgYWN0aXZlSWQsIHNvcnRDaGFwdGVyc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG1vdW50ZWQgPSB0cnVlO1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwID0gYXdhaXQgYXBpLmdldFByb2plY3QocHJvamVjdElkKTtcbiAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgIHNldFByb2plY3RUaXRsZShwPy50aXRsZSB8fCBcIlwiKTtcbiAgICAgICAgc2V0UHJvamVjdERlc2NyaXB0aW9uKHA/LmRlc2NyaXB0aW9uIHx8IFwiXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChwPy5tb2RlICYmIChwLm1vZGUgPT09ICdub3ZlbCcgfHwgcC5tb2RlID09PSAnbWFuaHdhJykpIHNldFByb2pNb2RlKHAubW9kZSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiBwPy5nZW5yZSA9PT0gJ3N0cmluZycpIHNldFByb2pHZW5yZShwLmdlbnJlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHA/LmNvcmVDb25mbGljdCA9PT0gJ3N0cmluZycpIHNldFByb2pDb3JlQ29uZmxpY3QocC5jb3JlQ29uZmxpY3QpO1xuICAgICAgICAgIGlmIChwPy5zZXR0aW5nc0pzb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2V0UHJvalNldHRpbmdzSnNvbih0eXBlb2YgcC5zZXR0aW5nc0pzb24gPT09ICdzdHJpbmcnID8gcC5zZXR0aW5nc0pzb24gOiBKU09OLnN0cmluZ2lmeShwLnNldHRpbmdzSnNvbikpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCB7fVxuICAgICAgfSBjYXRjaCB7fVxuICAgIH0pKCk7XG4gICAgcmV0dXJuICgpID0+IHsgbW91bnRlZCA9IGZhbHNlOyB9O1xuICB9LCBbYXBpLCBwcm9qZWN0SWRdKTtcblxuICAvLyBMb2FkIGNoYXRzIChoeWRyYXRlIGZyb20gY2FjaGUgZmlyc3QsIHRoZW4gcmV2YWxpZGF0ZSlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgbW91bnRlZCA9IHRydWU7XG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgIGlmIChoYXNDaGF0c0NhY2hlKSB7IHJldHVybjsgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeHMgPSBhd2FpdCBhcGkubGlzdENoYXRzKHByb2plY3RJZCk7XG4gICAgICAgIGlmICghbW91bnRlZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuZXh0ID0geHMgfHwgW107XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGhhc0NoYXRzQ2FjaGUgJiYgSlNPTi5zdHJpbmdpZnkobmV4dCkgPT09IEpTT04uc3RyaW5naWZ5KGNoYXRzUmVmLmN1cnJlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHt9XG4gICAgICAgIHNldENoYXRzKG5leHQpO1xuICAgICAgICBpZiAoIWFjdGl2ZUNoYXRJZCkge1xuICAgICAgICAgIGlmIChuZXh0ICYmIG5leHQubGVuZ3RoKSBzZXRBY3RpdmVDaGF0SWQobmV4dFswXS5pZCk7XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBlbnN1cmUgYXQgbGVhc3Qgb25lIHBsb3QgY2hhdCBleGlzdHNcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCBhcGkuY3JlYXRlQ2hhdChwcm9qZWN0SWQsIHsgdHlwZTogJ3Bsb3QnIH0pO1xuICAgICAgICAgICAgc2V0Q2hhdHMoW2NyZWF0ZWRdKTtcbiAgICAgICAgICAgIHNldEFjdGl2ZUNoYXRJZChjcmVhdGVkLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2gge31cbiAgICB9KSgpO1xuICAgIHJldHVybiAoKSA9PiB7IG1vdW50ZWQgPSBmYWxzZTsgfTtcbiAgfSwgW2FwaSwgcHJvamVjdElkLCBoYXNDaGF0c0NhY2hlLCBhY3RpdmVDaGF0SWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4geyBjaGF0c1JlZi5jdXJyZW50ID0gY2hhdHM7IH0sIFtjaGF0c10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7IGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNoYXRzQ2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KGNoYXRzKSk7IH0gY2F0Y2gge31cbiAgICBzZXRIYXNDaGF0c0NhY2hlKEFycmF5LmlzQXJyYXkoY2hhdHMpICYmIGNoYXRzLmxlbmd0aCA+IDApO1xuICB9LCBbY2hhdHMsIGNoYXRzQ2FjaGVLZXldKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0cnkgeyBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgYWN0aXZlQ2hhdElkKSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oY2hhdHNBY3RpdmVLZXksIGFjdGl2ZUNoYXRJZCk7IH0gY2F0Y2gge31cbiAgfSwgW2FjdGl2ZUNoYXRJZCwgY2hhdHNBY3RpdmVLZXldKTtcbiAgLy8gUGVyc2lzdCBjaGFwdGVycyBjYWNoZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7IGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNoYXB0ZXJzQ2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KGNoYXB0ZXJzKSk7IH0gY2F0Y2gge31cbiAgICBzZXRIYXNDaGFwdGVyc0NhY2hlKEFycmF5LmlzQXJyYXkoY2hhcHRlcnMpICYmIGNoYXB0ZXJzLmxlbmd0aCA+IDApO1xuICB9LCBbY2hhcHRlcnMsIGNoYXB0ZXJzQ2FjaGVLZXldKTtcbiAgLy8gUGVyc2lzdCB0YWJzIGFuZCBhY3RpdmUgdGFiXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHsgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0odGFic0NhY2hlS2V5LCBKU09OLnN0cmluZ2lmeSh0YWJzKSk7IH0gY2F0Y2gge31cbiAgfSwgW3RhYnMsIHRhYnNDYWNoZUtleV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7IGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBhY3RpdmVJZCkgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGFjdGl2ZVRhYktleSwgYWN0aXZlSWQpOyB9IGNhdGNoIHt9XG4gIH0sIFthY3RpdmVJZCwgYWN0aXZlVGFiS2V5XSk7XG4gIC8vIFBlcnNpc3QgVUkgdG9nZ2xlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7IGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGxlZnRDb2xsYXBzZWRLZXksIGxlZnRDb2xsYXBzZWQgPyAnMScgOiAnMCcpOyB9IGNhdGNoIHt9XG4gIH0sIFtsZWZ0Q29sbGFwc2VkLCBsZWZ0Q29sbGFwc2VkS2V5XSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHsgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0ocmlnaHRPcGVuS2V5LCByaWdodE9wZW4gPyAnMScgOiAnMCcpOyB9IGNhdGNoIHt9XG4gIH0sIFtyaWdodE9wZW4sIHJpZ2h0T3BlbktleV0pO1xuXG4gIGNvbnN0IG9wZW5UYWIgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4ge1xuICAgIHNldFRhYnMoKHByZXYpID0+IChwcmV2LmluY2x1ZGVzKGlkKSA/IHByZXYgOiBbLi4ucHJldiwgaWRdKSk7XG4gICAgc2V0QWN0aXZlSWQoaWQpO1xuICAgIGNvbnN0IGNoID0gY2hhcHRlcnMuZmluZCgoYykgPT4gYy5pZCA9PT0gaWQpO1xuICAgIHNldFRpdGxlKGNoPy50aXRsZSB8fCBcIlwiKTtcbiAgICBzZXRDb250ZW50KChjaD8uY29udGVudCB8fCBcIlwiKSBhcyBzdHJpbmcpO1xuICB9LCBbY2hhcHRlcnNdKTtcblxuICBjb25zdCBjbG9zZVRhYiA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7XG4gICAgc2V0VGFicygocHJldikgPT4gcHJldi5maWx0ZXIoKHQpID0+IHQgIT09IGlkKSk7XG4gICAgc2V0QWN0aXZlSWQoKGN1cnIpID0+IHtcbiAgICAgIGlmIChjdXJyICE9PSBpZCkgcmV0dXJuIGN1cnI7XG4gICAgICBjb25zdCBpZHggPSB0YWJzLmluZGV4T2YoaWQpO1xuICAgICAgY29uc3QgbmV4dCA9IHRhYnNbaWR4ICsgMV0gfHwgdGFic1tpZHggLSAxXSB8fCBudWxsO1xuICAgICAgcmV0dXJuIG5leHQgfHwgbnVsbDtcbiAgICB9KTtcbiAgfSwgW3RhYnNdKTtcblxuICAvLyBIeWRyYXRlIGVkaXRvciBmaWVsZHMgd2hlbiBhY3RpdmVJZCBhbmQgY2hhcHRlcnMgYXJlIHJlc3RvcmVkIGZyb20gY2FjaGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUlkKSByZXR1cm47XG4gICAgaWYgKGFjdGl2ZUlkID09PSBTRVRUSU5HU19UQUJfSUQgfHwgYWN0aXZlSWQgPT09IENIQVJBQ1RFUlNfVEFCX0lEIHx8IGFjdGl2ZUlkID09PSBXT1JMRF9UQUJfSUQpIHJldHVybjtcbiAgICBjb25zdCBjaCA9IGNoYXB0ZXJzLmZpbmQoKGMpID0+IGMuaWQgPT09IGFjdGl2ZUlkKTtcbiAgICBpZiAoIWNoKSByZXR1cm47XG4gICAgc2V0VGl0bGUoY2gudGl0bGUgfHwgXCJcIik7XG4gICAgc2V0Q29udGVudCgoY2guY29udGVudCB8fCBcIlwiKSBhcyBzdHJpbmcpO1xuICB9LCBbYWN0aXZlSWQsIGNoYXB0ZXJzXSk7XG5cbiAgY29uc3Qgb25EcmFnU3RhcnQgPSAoZTogUmVhY3QuRHJhZ0V2ZW50PEhUTUxEaXZFbGVtZW50PiwgaWQ6IHN0cmluZykgPT4ge1xuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJ0ZXh0L3RhYlwiLCBpZCk7XG4gIH07XG4gIGNvbnN0IG9uRHJvcCA9IChlOiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+LCB0YXJnZXRJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3Qgc3JjSWQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwidGV4dC90YWJcIik7XG4gICAgaWYgKCFzcmNJZCB8fCBzcmNJZCA9PT0gdGFyZ2V0SWQpIHJldHVybjtcbiAgICBzZXRUYWJzKChwcmV2KSA9PiB7XG4gICAgICBjb25zdCBhcnIgPSBbLi4ucHJldl07XG4gICAgICBjb25zdCBzaSA9IGFyci5pbmRleE9mKHNyY0lkKTtcbiAgICAgIGNvbnN0IHRpID0gYXJyLmluZGV4T2YodGFyZ2V0SWQpO1xuICAgICAgaWYgKHNpIDwgMCB8fCB0aSA8IDApIHJldHVybiBwcmV2O1xuICAgICAgYXJyLnNwbGljZSh0aSwgMCwgYXJyLnNwbGljZShzaSwgMSlbMF0pO1xuICAgICAgcmV0dXJuIGFycjtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBQZXJzaXN0IGVkaXRzIChkZWJvdW5jZWQpXG4gIGNvbnN0IHNjaGVkdWxlU2F2ZSA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nLCB0OiBzdHJpbmcsIGM6IHN0cmluZykgPT4ge1xuICAgIGlmICghaWQpIHJldHVybjtcbiAgICBpZiAoc2F2ZVRpbWVyLmN1cnJlbnQpIGNsZWFyVGltZW91dChzYXZlVGltZXIuY3VycmVudCk7XG4gICAgc2F2ZVRpbWVyLmN1cnJlbnQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgIHNldFNhdmluZyh0cnVlKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGFwaS51cGRhdGVDaGFwdGVyKHByb2plY3RJZCwgaWQsIHsgdGl0bGU6IHQsIGNvbnRlbnQ6IGMgfSk7XG4gICAgICAgIHNldENoYXB0ZXJzKChwcmV2KSA9PiBwcmV2Lm1hcCgoY2gpID0+IGNoLmlkID09PSBpZCA/IHsgLi4uY2gsIHRpdGxlOiB0LCBjb250ZW50OiBjIH0gOiBjaCkpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0U2F2aW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LCA1MDApO1xuICB9LCBbYXBpLCBwcm9qZWN0SWRdKTtcblxuICAvLyBBY3RpdmUgY2hhbmdlIGhhbmRsZXJzXG4gIGNvbnN0IG9uVGl0bGVDaGFuZ2UgPSAodjogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVJZCkgcmV0dXJuO1xuICAgIHNldFRpdGxlKHYpO1xuICAgIHNjaGVkdWxlU2F2ZShhY3RpdmVJZCwgdiwgY29udGVudCk7XG4gIH07XG4gIGNvbnN0IG9uQ29udGVudENoYW5nZSA9ICh2OiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUlkKSByZXR1cm47XG4gICAgc2V0Q29udGVudCh2KTtcbiAgICBzY2hlZHVsZVNhdmUoYWN0aXZlSWQsIHRpdGxlLCB2KTtcbiAgfTtcblxuICBjb25zdCBvbk5ld0NoYXB0ZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5jcmVhdGVDaGFwdGVyKHByb2plY3RJZCwgeyB0aXRsZTogXCJVbnRpdGxlZCBDaGFwdGVyXCIgfSk7XG4gICAgICBjb25zdCBjcmVhdGVkQXQgPSAocmVzIGFzIGFueSkuY3JlYXRlZEF0IGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgIHNldENoYXB0ZXJzKChwcmV2KSA9PiBzb3J0Q2hhcHRlcnMoWy4uLnByZXYsIHsgaWQ6IChyZXMgYXMgYW55KS5pZCwgdGl0bGU6IChyZXMgYXMgYW55KS50aXRsZSwgY29udGVudDogXCJcIiwgY3JlYXRlZEF0IH1dKSk7XG4gICAgICBvcGVuVGFiKChyZXMgYXMgYW55KS5pZCk7XG4gICAgfSBjYXRjaCB7fVxuICB9O1xuXG4gIGNvbnN0IG9uRGVsZXRlQ2hhcHRlciA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hbGVydFxuICAgICAgaWYgKCFjb25maXJtKCdEZWxldGUgdGhpcyBjaGFwdGVyIHBlcm1hbmVudGx5PycpKSByZXR1cm47XG4gICAgICBzZXREZWxldGluZ0lkKGlkKTtcbiAgICAgIGF3YWl0IGFwaS5kZWxldGVDaGFwdGVyKHByb2plY3RJZCwgaWQpO1xuICAgICAgc2V0Q2hhcHRlcnMoKHByZXYpID0+IHByZXYuZmlsdGVyKChjKSA9PiBjLmlkICE9PSBpZCkpO1xuICAgICAgc2V0VGFicygocHJldikgPT4gcHJldi5maWx0ZXIoKHQpID0+IHQgIT09IGlkKSk7XG4gICAgICBzZXRBY3RpdmVJZCgoY3VycikgPT4gKGN1cnIgPT09IGlkID8gbnVsbCA6IGN1cnIpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zdCBtc2cgPSBlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGRlbGV0ZSc7XG4gICAgICBzZXRFcnJvckNoKG1zZyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldERlbGV0aW5nSWQobnVsbCk7XG4gICAgfVxuICB9LCBbYXBpLCBwcm9qZWN0SWRdKTtcblxuICBjb25zdCBhY3RpdmVDaGFwdGVyID0gY2hhcHRlcnMuZmluZCgoYykgPT4gYy5pZCA9PT0gYWN0aXZlSWQpIHx8IG51bGw7XG5cbiAgY29uc3QgZ3JpZENvbHMgPSBgJHtsZWZ0Q29sbGFwc2VkID8gJycgOiAnMjYwcHggJ30xZnIke3JpZ2h0T3BlbiA/ICcgMjYwcHgnIDogJyd9YDtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1zY3JlZW4gdy1zY3JlZW4gYmctYmctcHJpbWFyeSB0ZXh0LXRleHQtcHJpbWFyeSBncmlkIGdyaWQtcm93cy1bYXV0b18xZnJdIHJlbGF0aXZlXCI+XG4gICAgICB7LyogVG9wIFRhYnMgQmFyICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTEyIGJvcmRlci1iIGJvcmRlci1ib3JkZXItZGVmYXVsdCBiZy1iZy1wcmltYXJ5IGZsZXggaXRlbXMtY2VudGVyIHJlbGF0aXZlXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTAgZmxleCBpdGVtcy1zdHJldGNoIGdhcC0xIHB4LTIgb3ZlcmZsb3cteC1hdXRvXCI+XG4gICAgICAgICAge3RhYnMubWFwKChpZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2ggPSBjaGFwdGVycy5maW5kKChjKSA9PiBjLmlkID09PSBpZCk7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmUgPSBpZCA9PT0gYWN0aXZlSWQ7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IGlkID09PSBTRVRUSU5HU19UQUJfSUQgPyAnU2V0dGluZ3MnIDogKGlkID09PSBDSEFSQUNURVJTX1RBQl9JRCA/ICdDaGFyYWN0ZXJzJyA6IChjaD8udGl0bGUgfHwgJ1VudGl0bGVkJykpO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGtleT17aWR9XG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlXG4gICAgICAgICAgICAgICAgb25EcmFnU3RhcnQ9eyhlKSA9PiBvbkRyYWdTdGFydChlLCBpZCl9XG4gICAgICAgICAgICAgICAgb25EcmFnT3Zlcj17KGUpID0+IGUucHJldmVudERlZmF1bHQoKX1cbiAgICAgICAgICAgICAgICBvbkRyb3A9eyhlKSA9PiBvbkRyb3AoZSwgaWQpfVxuICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXsoZSkgPT4geyBpZiAoZS5idXR0b24gPT09IDEpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBjbG9zZVRhYihpZCk7IH0gfX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Bncm91cCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBweC00IGgtMTAgcm91bmRlZC10LW1kIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MCAke2FjdGl2ZSA/ICdiZy1iZy1lbGV2YXRlZCB0ZXh0LXRleHQtcHJpbWFyeScgOiAndGV4dC10ZXh0LXRlcnRpYXJ5IGhvdmVyOnRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6YmctYmctaG92ZXInfWB9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlSWQoaWQpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSB0cnVuY2F0ZSBtYXgtdy1bMTYwcHhdXCI+e2xhYmVsfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cIm9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCBob3Zlcjp0ZXh0LXJlZC00MDAgdHJhbnNpdGlvbi1vcGFjaXR5IGR1cmF0aW9uLTE1MFwiIG9uQ2xpY2s9eyhlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGNsb3NlVGFiKGlkKTsgfX0+w5c8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHBvaW50ZXItZXZlbnRzLW5vbmVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LXRleHQtcHJpbWFyeSB0cnVuY2F0ZSBtYXgtdy1bNjAlXSB0cmFja2luZy1lbGVnYW50XCI+e3Byb2plY3RUaXRsZSB8fCAnUHJvamVjdCd9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHJpZ2h0LTIgdG9wLTEgei0xMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQteHMgcHgtMyBweS0xLjUgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLWVsZXZhdGVkIHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6dGV4dC1hY2NlbnQgaG92ZXI6Ym9yZGVyLWFjY2VudCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2V0dGluZ3NNZW51T3BlbigodikgPT4gIXYpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNyLW9ubHlcIj5TZXR0aW5nczwvc3Bhbj5cbiAgICAgICAgICAgIDxJY29uU2V0dGluZ3MgY2xhc3NOYW1lPVwidy00IGgtNFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAge3NldHRpbmdzTWVudU9wZW4gJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0wIHRvcC0xMCB6LTIwIHctNDggcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLWVsZXZhdGVkIHNoYWRvdy1lbGV2YXRpb25cIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHRleHQtc20gdGV4dC10ZXh0LXNlY29uZGFyeSBob3ZlcjpiZy1iZy1ob3ZlciBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldFNldHRpbmdzTWVudU9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgLy8gT3BlbiBzZXR0aW5ncyBhcyBhIGNlbnRyYWwgdGFiXG4gICAgICAgICAgICAgICAgICBpZiAoIXRhYnMuaW5jbHVkZXMoU0VUVElOR1NfVEFCX0lEKSkgc2V0VGFicygocHJldikgPT4gWy4uLnByZXYsIFNFVFRJTkdTX1RBQl9JRF0pO1xuICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlSWQoU0VUVElOR1NfVEFCX0lEKTtcbiAgICAgICAgICAgICAgICAgIHNldFJlbmFtZVRpdGxlKHByb2plY3RUaXRsZSB8fCAnJyk7XG4gICAgICAgICAgICAgICAgICBzZXRSZW5hbWVEZXNjKHByb2plY3REZXNjcmlwdGlvbiB8fCAnJyk7XG4gICAgICAgICAgICAgICAgICBzZXRSZW5hbWVFcnJvcihudWxsKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+UHJvamVjdCBTZXR0aW5nczwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgdGV4dC1zbSB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOmJnLWJnLWhvdmVyIGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0U2V0dGluZ3NNZW51T3BlbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICBpZiAoIXRhYnMuaW5jbHVkZXMoV09STERfVEFCX0lEKSkgc2V0VGFicygocHJldikgPT4gWy4uLnByZXYsIFdPUkxEX1RBQl9JRF0pO1xuICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlSWQoV09STERfVEFCX0lEKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+V29ybGQgU2V0dGluZ3M8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHRleHQtc20gdGV4dC10ZXh0LXNlY29uZGFyeSBob3ZlcjpiZy1iZy1ob3ZlciBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldFNldHRpbmdzTWVudU9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgaWYgKCF0YWJzLmluY2x1ZGVzKENIQVJBQ1RFUlNfVEFCX0lEKSkgc2V0VGFicygocHJldikgPT4gWy4uLnByZXYsIENIQVJBQ1RFUlNfVEFCX0lEXSk7XG4gICAgICAgICAgICAgICAgICBzZXRBY3RpdmVJZChDSEFSQUNURVJTX1RBQl9JRCk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPkNoYXJhY3RlcnM8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHtsZWZ0Q29sbGFwc2VkICYmIChcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGxlZnQtMiB0b3AtMTQgei0xMCB0ZXh0LXhzIHB4LTMgcHktMiByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgYmctYmctZWxldmF0ZWQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LWFjY2VudCBob3Zlcjpib3JkZXItYWNjZW50IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBzaGFkb3ctZWxldmF0aW9uXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRMZWZ0Q29sbGFwc2VkKGZhbHNlKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxDaGV2cm9uUmlnaHQgY2xhc3NOYW1lPVwidy00IGgtNFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICAgICAgPHNwYW4+Q2hhcHRlcnM8L3NwYW4+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgKX1cblxuICAgICAgey8qIExheW91dDogTGVmdCBzaWRlYmFyICsgTWFpbiBlZGl0b3IgKyBSaWdodCBzaWRlYmFyICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIG1pbi1oLTBcIiBzdHlsZT17eyBncmlkVGVtcGxhdGVDb2x1bW5zOiBncmlkQ29scyB9fT5cbiAgICAgICAgey8qIExlZnQ6IENoYXB0ZXIgVHJlZSAqL31cbiAgICAgICAgeyFsZWZ0Q29sbGFwc2VkICYmIChcbiAgICAgICAgPGFzaWRlIGNsYXNzTmFtZT1cImJvcmRlci1yIGJvcmRlci1ib3JkZXItZGVmYXVsdCBiZy1iZy1wcmltYXJ5IG1pbi1oLTAgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNSBweS00IHRleHQteHMgZm9udC1zZW1pYm9sZCB0cmFja2luZy1bMC4wNWVtXSB1cHBlcmNhc2UgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHRleHQtdGV4dC1zZWNvbmRhcnlcIj5cbiAgICAgICAgICAgIDxzcGFuPkNIQVBURVJTPC9zcGFuPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJ0ZXh0LXRleHQtdGVydGlhcnkgaG92ZXI6dGV4dC1hY2NlbnQgcm91bmRlZCBwLTEgaG92ZXI6YmctYmctaG92ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwXCIgb25DbGljaz17KCkgPT4gc2V0TGVmdENvbGxhcHNlZCh0cnVlKX0+XG4gICAgICAgICAgICAgIDxDaGV2cm9uTGVmdCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3Itb25seVwiPkNvbGxhcHNlPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHB4LTRcIj5cbiAgICAgICAgICAgIHtsb2FkaW5nQ2ggJiYgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC1zZWNvbmRhcnkgcHgtMiBweS0yXCI+TG9hZGluZ+KApjwvZGl2Pn1cbiAgICAgICAgICAgIHtlcnJvckNoICYmIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXJlZC00MDAgcHgtMiBweS0yIGJnLXJlZC05NTAvMjAgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLXJlZC01MDAvMjBcIj57ZXJyb3JDaH08L2Rpdj59XG4gICAgICAgICAgICB7Y2hhcHRlcnMubWFwKChjLCBpZHgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgd29yZENvdW50ID0gYy5jb250ZW50ID8gYy5jb250ZW50LnRyaW0oKS5zcGxpdCgvXFxzKy8pLmZpbHRlcihCb29sZWFuKS5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17Yy5pZH0gY2xhc3NOYW1lPXtgZ3JvdXAgdy1mdWxsIGZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuIGdhcC0yIHB4LTMgcHktMyByb3VuZGVkLWxnIG1iLTIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwICR7YWN0aXZlSWQgPT09IGMuaWQgPyAnYmctYmctZWxldmF0ZWQgYm9yZGVyLWwtMyBib3JkZXItYWNjZW50JyA6ICdob3ZlcjpiZy1iZy1ob3Zlcid9YH0+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIHRleHQtbGVmdFwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvcGVuVGFiKGMuaWQpfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB1cHBlcmNhc2UgdGV4dC10ZXh0LXRlcnRpYXJ5IG1iLTFcIj5DaGFwdGVyIHtpZHggKyAxfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTEgJHthY3RpdmVJZCA9PT0gYy5pZCA/ICd0ZXh0LXRleHQtcHJpbWFyeScgOiAndGV4dC10ZXh0LXNlY29uZGFyeSd9YH0+e2MudGl0bGUgfHwgJ1VudGl0bGVkJ308L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnlcIj57d29yZENvdW50fSB3b3JkczwvZGl2PlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHkgZHVyYXRpb24tMTUwICR7ZGVsZXRpbmdJZCA9PT0gYy5pZCA/ICd0ZXh0LXJlZC00MDAgb3BhY2l0eS02MCBjdXJzb3Itbm90LWFsbG93ZWQnIDogJ3RleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LXJlZC00MDAnfWB9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBpZiAoZGVsZXRpbmdJZCkgcmV0dXJuOyB2b2lkIG9uRGVsZXRlQ2hhcHRlcihjLmlkKTsgfX1cbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiRGVsZXRlIGNoYXB0ZXJcIlxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2RlbGV0aW5nSWQgPT09IGMuaWR9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2RlbGV0aW5nSWQgPT09IGMuaWQgPyA8TG9hZGVyMiBjbGFzc05hbWU9XCJ3LTQgaC00IGFuaW1hdGUtc3BpblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+IDogPFRyYXNoMiBjbGFzc05hbWU9XCJ3LTQgaC00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz59XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzci1vbmx5XCI+RGVsZXRlPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7fSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgYm9yZGVyLXQgYm9yZGVyLWJvcmRlci1kZWZhdWx0XCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInctZnVsbCByb3VuZGVkLWxnIGJnLWJnLWVsZXZhdGVkIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgaG92ZXI6Ym9yZGVyLWFjY2VudCBob3ZlcjpiZy1iZy1ob3ZlciB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gcHgtNCBweS0zIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MCBob3ZlcjotdHJhbnNsYXRlLXktMC41XCIgb25DbGljaz17b25OZXdDaGFwdGVyfT5cbiAgICAgICAgICAgICAgPFBsdXMgY2xhc3NOYW1lPVwidy00IGgtNFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICAgICAgICAgIDxzcGFuPk5ldyBDaGFwdGVyPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvYXNpZGU+XG4gICAgICAgICl9XG5cbiAgICAgICAgey8qIENlbnRlcjogRWRpdG9yICovfVxuICAgICAgICA8bWFpbiBjbGFzc05hbWU9XCJtaW4taC0wIG92ZXJmbG93LWhpZGRlbiBiZy1iZy1wcmltYXJ5IGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICB7YWN0aXZlSWQgPT09IFNFVFRJTkdTX1RBQl9JRCA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGdyaWQgZ3JpZC1yb3dzLVthdXRvXzFmcl9hdXRvXSBiZy1iZy1lbGV2YXRlZFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci1iIGJvcmRlci1ib3JkZXItZGVmYXVsdCBweC02IHB5LTRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtYmFzZSBmb250LXNlbWlib2xkIHRleHQtdGV4dC1wcmltYXJ5IHRyYWNraW5nLWVsZWdhbnRcIj5Qcm9qZWN0IFNldHRpbmdzPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLTAgb3ZlcmZsb3cteS1hdXRvIHB4LTYgcHktNlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtNCBtYXgtdy0yeGxcIj5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVcIj5UaXRsZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3JlbmFtZVRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UmVuYW1lVGl0bGUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBweC00IHB5LTIuNSB0ZXh0LXRleHQtcHJpbWFyeSBwbGFjZWhvbGRlcjp0ZXh0LXRleHQtdGVydGlhcnkgb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnQgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+RGVzY3JpcHRpb248L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtyZW5hbWVEZXNjfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UmVuYW1lRGVzYyhlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtNCBweS0yLjUgdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTE1MCB0ZXh0LXNtXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+TW9kZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtwcm9qTW9kZX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFByb2pNb2RlKGUudGFyZ2V0LnZhbHVlIGFzIGFueSl9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTQgcHktMi41IHRleHQtdGV4dC1wcmltYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+U2VsZWN04oCmPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm5vdmVsXCI+Tm92ZWw8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibWFuaHdhXCI+TWFuaHdhPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVcIj5HZW5yZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3Byb2pHZW5yZX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFByb2pHZW5yZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTQgcHktMi41IHRleHQtdGV4dC1wcmltYXJ5IHBsYWNlaG9sZGVyOnRleHQtdGV4dC10ZXJ0aWFyeSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIHsvKiBXb3JsZCBOYW1lIHJlbW92ZWQgKi99XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+Q29yZSBDb25mbGljdDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3Byb2pDb3JlQ29uZmxpY3R9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRQcm9qQ29yZUNvbmZsaWN0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtNCBweS0yLjUgdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImdyaWQgZ2FwLTIgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZVwiPlNldHRpbmdzIEpTT048L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtwcm9qU2V0dGluZ3NKc29ufVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UHJvalNldHRpbmdzSnNvbihlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgcm93cz17MTB9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTQgcHktMi41IHRleHQtdGV4dC1wcmltYXJ5IHBsYWNlaG9sZGVyOnRleHQtdGV4dC10ZXJ0aWFyeSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0xNTAgZm9udC1tb25vIHRleHQteHNcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIHtyZW5hbWVFcnJvciAmJiA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1yZWQtNDAwIHAtMyByb3VuZGVkLWxnIGJnLXJlZC05NTAvMjAgYm9yZGVyIGJvcmRlci1yZWQtNTAwLzIwXCI+e3JlbmFtZUVycm9yfTwvZGl2Pn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC0xNCBweC02IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0zIGJvcmRlci10IGJvcmRlci1ib3JkZXItZGVmYXVsdCBiZy1iZy1wcmltYXJ5XCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVJZChudWxsKX0gY2xhc3NOYW1lPVwicHgtNCBweS0yIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOmJnLWJnLWhvdmVyIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiPkNsb3NlPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NhdmluZ1JlbmFtZX1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2F2aW5nUmVuYW1lKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZW5hbWVFcnJvcihudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVCb2R5OiBhbnkgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gcmVuYW1lVGl0bGUudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIHQgIT09IHByb2plY3RUaXRsZSkgdXBkYXRlQm9keS50aXRsZSA9IHQ7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbmFtZURlc2MgIT09IHByb2plY3REZXNjcmlwdGlvbikgdXBkYXRlQm9keS5kZXNjcmlwdGlvbiA9IHJlbmFtZURlc2M7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZUJvZHkpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBhcGkudXBkYXRlUHJvamVjdChwcm9qZWN0SWQsIHVwZGF0ZUJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvamVjdFRpdGxlKHVwZGF0ZWQ/LnRpdGxlIHx8IHQgfHwgcHJvamVjdFRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFByb2plY3REZXNjcmlwdGlvbih1cGRhdGVkPy5kZXNjcmlwdGlvbiA/PyByZW5hbWVEZXNjID8/IHByb2plY3REZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZXM6IGFueSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9qTW9kZSkgY2hhbmdlcy5tb2RlID0gcHJvak1vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2pHZW5yZSkgY2hhbmdlcy5nZW5yZSA9IHByb2pHZW5yZTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvakNvcmVDb25mbGljdCkgY2hhbmdlcy5jb3JlQ29uZmxpY3QgPSBwcm9qQ29yZUNvbmZsaWN0O1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9qU2V0dGluZ3NKc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkgeyBjaGFuZ2VzLnNldHRpbmdzSnNvbiA9IEpTT04ucGFyc2UocHJvalNldHRpbmdzSnNvbik7IH0gY2F0Y2ggeyBjaGFuZ2VzLnNldHRpbmdzSnNvbiA9IHByb2pTZXR0aW5nc0pzb247IH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNoYW5nZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwaS51cGRhdGVQcm9qZWN0U2V0dGluZ3MocHJvamVjdElkLCBjaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3Byb2plY3Q6c2V0dGluZ3MtdXBkYXRlZCcsIHsgZGV0YWlsOiB7IHByb2plY3RJZCwgY2hhbmdlcyB9IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvYXN0OiBTZXR0aW5ncyBzYXZlZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvYXN0VGltZXIuY3VycmVudCkgY2xlYXJUaW1lb3V0KHRvYXN0VGltZXIuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUb2FzdE1zZygnU2V0dGluZ3Mgc2F2ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0VGltZXIuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0VG9hc3RNc2coJycpLCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICAgIHNldFJlbmFtZUVycm9yKGU/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBzYXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0U2F2aW5nUmVuYW1lKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiByb3VuZGVkLW1kIGJnLWFjY2VudCBob3ZlcjpiZy1hY2NlbnQtaG92ZXIgZGlzYWJsZWQ6b3BhY2l0eS01MCB0ZXh0LXdoaXRlIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge3NhdmluZ1JlbmFtZSA/ICdTYXZpbmfigKYnIDogJ1NhdmUgU2V0dGluZ3MnfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBhY3RpdmVJZCA9PT0gQ0hBUkFDVEVSU19UQUJfSUQgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtZnVsbCBiZy1iZy1lbGV2YXRlZFwiPlxuICAgICAgICAgICAgICA8Q2hhcmFjdGVyTWFuYWdlciBwcm9qZWN0SWQ9e3Byb2plY3RJZH0gcmVxdWlyZUltYWdlPXtwcm9qTW9kZSA9PT0gJ21hbmh3YSd9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogYWN0aXZlSWQgPT09IFdPUkxEX1RBQl9JRCA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGJnLWJnLWVsZXZhdGVkXCI+XG4gICAgICAgICAgICAgIDxXb3JsZFNldHRpbmdzTWFuYWdlciBwcm9qZWN0SWQ9e3Byb2plY3RJZH0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBhY3RpdmVJZCA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgey8qIEVkaXRvciBDYW52YXMgLSBFbGV2YXRlZCBTdXJmYWNlICovfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4taC0wIG92ZXJmbG93LXktYXV0byBiZy1iZy1lbGV2YXRlZCBmbGV4IGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctWzgwMHB4XSBweC0xMiBweS0xNlwiPlxuICAgICAgICAgICAgICAgICAgey8qIENoYXB0ZXIgVGl0bGUgSW5wdXQgKi99XG4gICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RpdGxlfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uVGl0bGVDaGFuZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkNoYXB0ZXIgVGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctdHJhbnNwYXJlbnQgYm9yZGVyLW5vbmUgdGV4dC1bMzJweF0gZm9udC1ib2xkIHRleHQtdGV4dC1wcmltYXJ5IHBsYWNlaG9sZGVyOnRleHQtdGV4dC10ZXJ0aWFyeSBvdXRsaW5lLW5vbmUgbWItOCB0cmFja2luZy10aWdodFwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgey8qIENoYXB0ZXIgQ29udGVudCAtIENvbnRlbnRlZGl0YWJsZSAqL31cbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEVkaXRhYmxlXG4gICAgICAgICAgICAgICAgICAgIHN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZ1xuICAgICAgICAgICAgICAgICAgICBvbklucHV0PXsoZSkgPT4gb25Db250ZW50Q2hhbmdlKGUuY3VycmVudFRhcmdldC50ZXh0Q29udGVudCB8fCAnJyl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBtaW4taC1bNDAwcHhdIHRleHQtbGcgbGVhZGluZy1bMS44XSB0ZXh0LXRleHQtcHJpbWFyeSBvdXRsaW5lLW5vbmVcIlxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aGl0ZVNwYWNlOiAncHJlLXdyYXAnIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtjb250ZW50fVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7IWNvbnRlbnQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbGcgdGV4dC10ZXh0LXRlcnRpYXJ5IHBvaW50ZXItZXZlbnRzLW5vbmUgLW10LVs0MDBweF0gbGVhZGluZy1bMS44XVwiPlN0YXJ0IHdyaXRpbmcgeW91ciBzdG9yeS4uLjwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHsvKiBTdGF0dXMgQmFyICovfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtMTIgYmctYmctcHJpbWFyeSBib3JkZXItdCBib3JkZXItYm9yZGVyLWRlZmF1bHQgcHgtNiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gdGV4dC1bMTNweF0gdGV4dC10ZXh0LXRlcnRpYXJ5XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNlwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHctMS41IGgtMS41IHJvdW5kZWQtZnVsbCAke3NhdmluZyA/ICdiZy13YXJuaW5nIGFuaW1hdGUtcHVsc2UnIDogJ2JnLXN1Y2Nlc3MnfWB9IC8+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPntzYXZpbmcgPyAnU2F2aW5n4oCmJyA6ICdTYXZlZCd9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2Pntjb250ZW50LnRyaW0oKS5zcGxpdCgvXFxzKy8pLmZpbHRlcihCb29sZWFuKS5sZW5ndGh9IHdvcmRzPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2Pntjb250ZW50Lmxlbmd0aH0gY2hhcmFjdGVyczwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdj57TWF0aC5jZWlsKGNvbnRlbnQudHJpbSgpLnNwbGl0KC9cXHMrLykuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aCAvIDIwMCl9IG1pbiByZWFkPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIHthY3RpdmVDaGFwdGVyPy5jcmVhdGVkQXQgJiYgYExhc3QgZWRpdGVkICR7bmV3IERhdGUoYWN0aXZlQ2hhcHRlci5jcmVhdGVkQXQpLnRvTG9jYWxlU3RyaW5nKCl9YH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgYmctYmctZWxldmF0ZWQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtYXgtdy1tZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC10ZXh0LXByaW1hcnkgbWItMlwiPk5vIENoYXB0ZXIgU2VsZWN0ZWQ8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC10ZXh0LXNlY29uZGFyeVwiPk9wZW4gYSBjaGFwdGVyIGZyb20gdGhlIGxlZnQgc2lkZWJhciB0byBzdGFydCBlZGl0aW5nLjwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvbWFpbj5cblxuICAgICAgICB7LyogUmlnaHQ6IENoYXRzIFNpZGViYXIgKi99XG4gICAgICAgIHtyaWdodE9wZW4gJiYgKFxuICAgICAgICA8YXNpZGUgY2xhc3NOYW1lPVwiYm9yZGVyLWwgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLXByaW1hcnkgbWluLWgtMCBmbGV4IGZsZXgtY29sIHJlbGF0aXZlXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC01IHB5LTQgdGV4dC14cyBmb250LXNlbWlib2xkIHRyYWNraW5nLVswLjA1ZW1dIHVwcGVyY2FzZSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gdGV4dC10ZXh0LXNlY29uZGFyeVwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5XCIgb25DbGljaz17KCkgPT4gc2V0Q2hhdE1lbnVPcGVuKCh2KT0+IXYpfT5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidHJ1bmNhdGUgbWF4LXctWzE0MHB4XSB0ZXh0LXRleHQtcHJpbWFyeSBub3JtYWwtY2FzZSB0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+eyhjaGF0cy5maW5kKGM9PmMuaWQ9PT1hY3RpdmVDaGF0SWQpPy50aXRsZSkgfHwgJ1NlbGVjdCBjaGF0J308L3NwYW4+XG4gICAgICAgICAgICAgIDxDaGV2cm9uRG93biBjbGFzc05hbWU9e2B3LTMuNSBoLTMuNSB0cmFuc2l0aW9uLXRyYW5zZm9ybSAke2NoYXRNZW51T3BlbiA/ICdyb3RhdGUtMTgwJyA6ICcnfWB9IGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJ0ZXh0LXRleHQtdGVydGlhcnkgaG92ZXI6dGV4dC1hY2NlbnQgcm91bmRlZCBwLTEgaG92ZXI6YmctYmctaG92ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwXCIgb25DbGljaz17KCkgPT4geyBzZXROZXdDaGF0T3Blbih0cnVlKTsgc2V0Q2hhdE1lbnVPcGVuKHRydWUpOyB9fSB0aXRsZT1cIk5ldyBDaGF0XCI+XG4gICAgICAgICAgICAgICAgPFBsdXMgY2xhc3NOYW1lPVwidy00IGgtNFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LWFjY2VudCByb3VuZGVkIHAtMSBob3ZlcjpiZy1iZy1ob3ZlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIiBvbkNsaWNrPXsoKSA9PiBzZXRSaWdodE9wZW4oZmFsc2UpfT5cbiAgICAgICAgICAgICAgICA8Q2hldnJvblJpZ2h0IGNsYXNzTmFtZT1cInctNCBoLTRcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNyLW9ubHlcIj5Db2xsYXBzZTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7Y2hhdE1lbnVPcGVuICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0zIHJpZ2h0LTMgdG9wLTE0IHotMjAgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLWVsZXZhdGVkIHNoYWRvdy1lbGV2YXRpb25cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTMgYm9yZGVyLWIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtdGV4dC1wcmltYXJ5XCI+Q2hhdHM8L2Rpdj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeVwiIG9uQ2xpY2s9eygpPT4gc2V0Q2hhdE1lbnVPcGVuKGZhbHNlKX0+4pyVPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMyBzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICB7bmV3Q2hhdE9wZW4gJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbGcgcC0zIGJnLWJnLXByaW1hcnlcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSBtYi0yXCI+Q3JlYXRlIGEgbmV3IGNoYXQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgeyhbJ3Bsb3QnLCdjaGFyYWN0ZXInLCd3b3JsZCddIGFzIGNvbnN0KS5tYXAoKHQpPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGtleT17dH0gY2xhc3NOYW1lPXtgdGV4dC14cyBweC0zIHB5LTEuNSByb3VuZGVkLW1kIGJvcmRlciBjdXJzb3ItcG9pbnRlciAke25ld0NoYXRUeXBlPT09dCA/ICdib3JkZXItYWNjZW50IHRleHQtYWNjZW50JyA6ICdib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSd9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiY2hhdC10eXBlXCIgY2xhc3NOYW1lPVwiaGlkZGVuXCIgY2hlY2tlZD17bmV3Q2hhdFR5cGU9PT10fSBvbkNoYW5nZT17KCk9PnNldE5ld0NoYXRUeXBlKHQpfSAvPnt0fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT17bmV3Q2hhdFRpdGxlfSBvbkNoYW5nZT17KGUpPT5zZXROZXdDaGF0VGl0bGUoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj1cIlRpdGxlIChvcHRpb25hbClcIiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctYmctZWxldmF0ZWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTMgcHktMiB0ZXh0LXRleHQtcHJpbWFyeSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudCB0ZXh0LXNtXCIgLz5cbiAgICAgICAgICAgICAgICAgICAge2NyZWF0ZUNoYXRFcnJvciAmJiA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC14cyB0ZXh0LXJlZC00MDBcIj57Y3JlYXRlQ2hhdEVycm9yfTwvZGl2Pn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJweC0zIHB5LTEuNSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3ZlcjpiZy1iZy1ob3ZlclwiIG9uQ2xpY2s9eygpPT57IHNldE5ld0NoYXRPcGVuKGZhbHNlKTsgc2V0TmV3Q2hhdFRpdGxlKCcnKTsgc2V0Q3JlYXRlQ2hhdEVycm9yKG51bGwpOyB9fT5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInB4LTMgcHktMS41IHJvdW5kZWQtbWQgYmctYWNjZW50IGhvdmVyOmJnLWFjY2VudC1ob3ZlciB0ZXh0LXdoaXRlIGRpc2FibGVkOm9wYWNpdHktNTBcIiBkaXNhYmxlZD17Y3JlYXRpbmdDaGF0fSBvbkNsaWNrPXthc3luYyAoKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3JlYXRpbmdDaGF0KHRydWUpOyBzZXRDcmVhdGVDaGF0RXJyb3IobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gYXdhaXQgYXBpLmNyZWF0ZUNoYXQocHJvamVjdElkLCB7IHR5cGU6IG5ld0NoYXRUeXBlLCB0aXRsZTogbmV3Q2hhdFRpdGxlIHx8IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2hhdHMoKHByZXYpPT5bLi4ucHJldiwgY10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRBY3RpdmVDaGF0SWQoYy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldE5ld0NoYXRPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TmV3Q2hhdFRpdGxlKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2hhdE1lbnVPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDcmVhdGVDaGF0RXJyb3IoZT8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGNyZWF0ZSBjaGF0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgeyBzZXRDcmVhdGluZ0NoYXQoZmFsc2UpOyB9XG4gICAgICAgICAgICAgICAgICAgICAgfX0+e2NyZWF0aW5nQ2hhdCA/ICdDcmVhdGluZ+KApicgOiAnQ3JlYXRlJ308L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LWgtNjQgb3ZlcmZsb3cteS1hdXRvIHByLTFcIj5cbiAgICAgICAgICAgICAgICAgIHshY2hhdHMubGVuZ3RoICYmICFuZXdDaGF0T3BlbiAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgcHgtMiBweS0yXCI+Tm8gY2hhdHMgeWV0LiA8YnV0dG9uIGNsYXNzTmFtZT1cInVuZGVybGluZVwiIG9uQ2xpY2s9eygpPT57IHNldE5ld0NoYXRUeXBlKCdwbG90Jyk7IHNldE5ld0NoYXRPcGVuKHRydWUpOyB9fT5DcmVhdGUgeW91ciBmaXJzdCBjaGF0PC9idXR0b24+LjwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtjaGF0cy5tYXAoKGMpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2MuaWR9IGNsYXNzTmFtZT17YGdyb3VwIHctZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gZ2FwLTIgcHgtMyBweS0yIHJvdW5kZWQtbWQgbWItMSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTAgJHthY3RpdmVDaGF0SWQ9PT1jLmlkID8gJ2JnLWJnLWhvdmVyJyA6ICdob3ZlcjpiZy1iZy1ob3Zlcid9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJmbGV4LTEgdGV4dC1sZWZ0XCIgb25DbGljaz17KCkgPT4geyBzZXRBY3RpdmVDaGF0SWQoYy5pZCk7IHNldENoYXRNZW51T3BlbihmYWxzZSk7IH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LVsxMHB4XSB1cHBlcmNhc2UgdGV4dC10ZXh0LXRlcnRpYXJ5IG1iLTAuNVwiPntjLnR5cGV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHRleHQtc20gZm9udC1tZWRpdW0gJHthY3RpdmVDaGF0SWQ9PT1jLmlkID8gJ3RleHQtdGV4dC1wcmltYXJ5JyA6ICd0ZXh0LXRleHQtc2Vjb25kYXJ5J31gfT57Yy50aXRsZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5IGR1cmF0aW9uLTE1MCB0ZXh0LXRleHQtdGVydGlhcnkgaG92ZXI6dGV4dC1yZWQtNDAwYH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jIChlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGlmICghY29uZmlybSgnRGVsZXRlIHRoaXMgY2hhdD8nKSkgcmV0dXJuOyB0cnkgeyBhd2FpdCBhcGkuZGVsZXRlQ2hhdChwcm9qZWN0SWQsIGMuaWQpOyBzZXRDaGF0cygocHJldik9PnByZXYuZmlsdGVyKHg9PnguaWQhPT1jLmlkKSk7IGlmIChhY3RpdmVDaGF0SWQ9PT1jLmlkKSBzZXRBY3RpdmVDaGF0SWQoY2hhdHMuZmluZCh4PT54LmlkIT09Yy5pZCk/LmlkIHx8IG51bGwpOyB9IGNhdGNoIHt9IH19XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkRlbGV0ZSBjaGF0XCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT1cInctNCBoLTRcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3Itb25seVwiPkRlbGV0ZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHsvKiBDaGF0IHZpZXcgZmlsbHMgdGhlIHNpZGViYXIgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC0wIGZsZXgtMSBvdmVyZmxvdy1oaWRkZW4gYm9yZGVyLXQgYm9yZGVyLWJvcmRlci1kZWZhdWx0XCI+XG4gICAgICAgICAgICB7YWN0aXZlQ2hhdElkID8gKFxuICAgICAgICAgICAgICA8Q2hhdCBjaGF0SWQ9e2FjdGl2ZUNoYXRJZH0gLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGdyaWQgcGxhY2UtaXRlbXMtY2VudGVyIHRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5XCI+T3BlbiB0aGUgY2hhdCBtZW51IHRvIGNyZWF0ZSBvciBzZWxlY3QgYSBjaGF0LjwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9hc2lkZT5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7IXJpZ2h0T3BlbiAmJiAoXG4gICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYWJzb2x1dGUgcmlnaHQtMiB0b3AtMTQgei0xMCB0ZXh0LXhzIHB4LTMgcHktMiByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgYmctYmctZWxldmF0ZWQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LWFjY2VudCBob3Zlcjpib3JkZXItYWNjZW50IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBzaGFkb3ctZWxldmF0aW9uXCIgb25DbGljaz17KCkgPT4gc2V0UmlnaHRPcGVuKHRydWUpfT5PcGVuIENoYXRzPC9idXR0b24+XG4gICAgICApfVxuXG4gICAgICB7LyogTm8gbW9kYWw6IGRyb3Bkb3duIGlzIGFuY2hvcmVkIHRvIGhlYWRlciBpbnNpZGUgdGhlIHNpZGViYXIgKi99XG5cbiAgICAgIHtzZXR0aW5nc09wZW4gJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgei01MCBncmlkIHBsYWNlLWl0ZW1zLWNlbnRlciBiZy1ibGFjay82MCBiYWNrZHJvcC1ibHVyLXNtXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctbWQgYmctYmctZWxldmF0ZWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLXhsIHAtNiBzaGFkb3ctZWxldmF0aW9uXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi00XCI+XG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC10ZXh0LXByaW1hcnlcIj5Qcm9qZWN0IFNldHRpbmdzPC9oMz5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRTZXR0aW5nc09wZW4oZmFsc2UpfSBjbGFzc05hbWU9XCJ0ZXh0LXRleHQtdGVydGlhcnkgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnkgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwXCI+4pyVPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtM1wiPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMSB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnlcIj5UaXRsZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtyZW5hbWVUaXRsZX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UmVuYW1lVGl0bGUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtMyBweS0yIHRleHQtdGV4dC1wcmltYXJ5IHBsYWNlaG9sZGVyOnRleHQtdGV4dC10ZXJ0aWFyeSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgIHtyZW5hbWVFcnJvciAmJiA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1yZWQtNDAwIHAtMyByb3VuZGVkLWxnIGJnLXJlZC05NTAvMjAgYm9yZGVyIGJvcmRlci1yZWQtNTAwLzIwXCI+e3JlbmFtZUVycm9yfTwvZGl2Pn1cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWVuZCBnYXAtMiBtdC00XCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRTZXR0aW5nc09wZW4oZmFsc2UpfSBjbGFzc05hbWU9XCJweC00IHB5LTIgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6YmctYmctaG92ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NhdmluZ1JlbmFtZSB8fCAhcmVuYW1lVGl0bGUudHJpbSgpfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRTYXZpbmdSZW5hbWUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNldFJlbmFtZUVycm9yKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBhcGkudXBkYXRlUHJvamVjdChwcm9qZWN0SWQsIHsgdGl0bGU6IHJlbmFtZVRpdGxlLnRyaW0oKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRQcm9qZWN0VGl0bGUodXBkYXRlZD8udGl0bGUgfHwgcmVuYW1lVGl0bGUudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRTZXR0aW5nc09wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRSZW5hbWVFcnJvcihlPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gc2F2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgIHNldFNhdmluZ1JlbmFtZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgcm91bmRlZC1tZCBiZy1hY2NlbnQgaG92ZXI6YmctYWNjZW50LWhvdmVyIGRpc2FibGVkOm9wYWNpdHktNTAgdGV4dC13aGl0ZSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtzYXZpbmdSZW5hbWUgPyAnU2F2aW5n4oCmJyA6ICdTYXZlJ31cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7dG9hc3RNc2cgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIHRvcC00IHJpZ2h0LTQgei01MCBhbmltYXRlLWluIHNsaWRlLWluLWZyb20tYm90dG9tLTQgZHVyYXRpb24tMjAwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC00IHB5LTMgcm91bmRlZC1sZyBiZy1iZy1lbGV2YXRlZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gc2hhZG93LWVsZXZhdGlvblwiPlxuICAgICAgICAgICAge3RvYXN0TXNnfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlUmVmIiwidXNlU3RhdGUiLCJ1c2VTdXBhYmFzZSIsImNyZWF0ZUFwaSIsIkNoYXQiLCJDaGFyYWN0ZXJNYW5hZ2VyIiwiV29ybGRTZXR0aW5nc01hbmFnZXIiLCJTZXR0aW5ncyIsIkljb25TZXR0aW5ncyIsIkNoZXZyb25MZWZ0IiwiQ2hldnJvblJpZ2h0IiwiUGx1cyIsIlRyYXNoMiIsIkxvYWRlcjIiLCJDaGV2cm9uRG93biIsIldvcmtzcGFjZSIsInByb2plY3RJZCIsInN1cGFiYXNlIiwiYXBpIiwiY2hhcHRlcnMiLCJzZXRDaGFwdGVycyIsImxvYWRpbmdDaCIsInNldExvYWRpbmdDaCIsImVycm9yQ2giLCJzZXRFcnJvckNoIiwidGFicyIsInNldFRhYnMiLCJhY3RpdmVJZCIsInNldEFjdGl2ZUlkIiwidGl0bGUiLCJzZXRUaXRsZSIsImNvbnRlbnQiLCJzZXRDb250ZW50Iiwic2F2aW5nIiwic2V0U2F2aW5nIiwic2F2ZVRpbWVyIiwibGVmdENvbGxhcHNlZCIsInNldExlZnRDb2xsYXBzZWQiLCJhaU11c2VPcGVuIiwic2V0QWlNdXNlT3BlbiIsImRlbGV0aW5nSWQiLCJzZXREZWxldGluZ0lkIiwicHJvamVjdFRpdGxlIiwic2V0UHJvamVjdFRpdGxlIiwicHJvamVjdERlc2NyaXB0aW9uIiwic2V0UHJvamVjdERlc2NyaXB0aW9uIiwic2V0dGluZ3NPcGVuIiwic2V0U2V0dGluZ3NPcGVuIiwicmVuYW1lVGl0bGUiLCJzZXRSZW5hbWVUaXRsZSIsInJlbmFtZURlc2MiLCJzZXRSZW5hbWVEZXNjIiwic2F2aW5nUmVuYW1lIiwic2V0U2F2aW5nUmVuYW1lIiwicmVuYW1lRXJyb3IiLCJzZXRSZW5hbWVFcnJvciIsInNldHRpbmdzTWVudU9wZW4iLCJzZXRTZXR0aW5nc01lbnVPcGVuIiwicHJvak1vZGUiLCJzZXRQcm9qTW9kZSIsInByb2pHZW5yZSIsInNldFByb2pHZW5yZSIsInByb2pDb3JlQ29uZmxpY3QiLCJzZXRQcm9qQ29yZUNvbmZsaWN0IiwicHJvalNldHRpbmdzSnNvbiIsInNldFByb2pTZXR0aW5nc0pzb24iLCJ0b2FzdE1zZyIsInNldFRvYXN0TXNnIiwidG9hc3RUaW1lciIsIlNFVFRJTkdTX1RBQl9JRCIsIkNIQVJBQ1RFUlNfVEFCX0lEIiwiV09STERfVEFCX0lEIiwicmlnaHRPcGVuIiwic2V0UmlnaHRPcGVuIiwiY2hhdHNDYWNoZUtleSIsImNoYXRzQWN0aXZlS2V5IiwiY2hhcHRlcnNDYWNoZUtleSIsInRhYnNDYWNoZUtleSIsImFjdGl2ZVRhYktleSIsImxlZnRDb2xsYXBzZWRLZXkiLCJyaWdodE9wZW5LZXkiLCJjaGF0cyIsInNldENoYXRzIiwiYWN0aXZlQ2hhdElkIiwic2V0QWN0aXZlQ2hhdElkIiwiaGFzQ2hhdHNDYWNoZSIsInNldEhhc0NoYXRzQ2FjaGUiLCJjaGF0c1JlZiIsIm5ld0NoYXRUeXBlIiwic2V0TmV3Q2hhdFR5cGUiLCJuZXdDaGF0VGl0bGUiLCJzZXROZXdDaGF0VGl0bGUiLCJuZXdDaGF0T3BlbiIsInNldE5ld0NoYXRPcGVuIiwiY3JlYXRpbmdDaGF0Iiwic2V0Q3JlYXRpbmdDaGF0IiwiY3JlYXRlQ2hhdEVycm9yIiwic2V0Q3JlYXRlQ2hhdEVycm9yIiwiY2hhdE1lbnVPcGVuIiwic2V0Q2hhdE1lbnVPcGVuIiwiaGFzQ2hhcHRlcnNDYWNoZSIsInNldEhhc0NoYXB0ZXJzQ2FjaGUiLCJzIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImFyciIsIkpTT04iLCJwYXJzZSIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsInYiLCJjaHMiLCJ2YWxpZCIsInQiLCJhdCIsImxjIiwicm8iLCJzb3J0Q2hhcHRlcnMiLCJzb3J0IiwiYSIsImIiLCJ0YSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJnZXRUaW1lIiwidGIiLCJsb2NhbGVDb21wYXJlIiwibW91bnRlZCIsIml0ZW1zIiwibGlzdENoYXB0ZXJzUGFnaW5hdGVkIiwiZSIsIm1lc3NhZ2UiLCJvblNldHRpbmdzIiwiZGV0YWlsIiwiY2hhbmdlcyIsIm1vZGUiLCJnZW5yZSIsInVuZGVmaW5lZCIsImNvcmVDb25mbGljdCIsInNldHRpbmdzSnNvbiIsInN0cmluZ2lmeSIsIm9uTW9kZSIsIm0iLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZXIiLCJTdHJpbmciLCJjIiwicGFuZWxfc2NyaXB0IiwicmVzIiwiY3JlYXRlQ2hhcHRlciIsIm5ld0lkIiwiaWQiLCJwcmV2IiwiaW5jbHVkZXMiLCJ0YXJnZXRJZCIsImNoYXB0ZXJfbnVtYmVyIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwic29ydGVkIiwiaWR4IiwiTWF0aCIsIm1heCIsIm1pbiIsIm1hdGNoIiwiZmluZCIsInRvTG93ZXJDYXNlIiwidXBkYXRlZCIsInVwZGF0ZUNoYXB0ZXIiLCJtYXAiLCJwIiwiZ2V0UHJvamVjdCIsImRlc2NyaXB0aW9uIiwieHMiLCJsaXN0Q2hhdHMiLCJuZXh0IiwiY3VycmVudCIsImNyZWF0ZWQiLCJjcmVhdGVDaGF0IiwidHlwZSIsInNldEl0ZW0iLCJvcGVuVGFiIiwiY2giLCJjbG9zZVRhYiIsImZpbHRlciIsImN1cnIiLCJpbmRleE9mIiwib25EcmFnU3RhcnQiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwib25Ecm9wIiwic3JjSWQiLCJnZXREYXRhIiwic2kiLCJ0aSIsInNwbGljZSIsInNjaGVkdWxlU2F2ZSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJvblRpdGxlQ2hhbmdlIiwib25Db250ZW50Q2hhbmdlIiwib25OZXdDaGFwdGVyIiwib25EZWxldGVDaGFwdGVyIiwiY29uZmlybSIsImRlbGV0ZUNoYXB0ZXIiLCJtc2ciLCJFcnJvciIsImFjdGl2ZUNoYXB0ZXIiLCJncmlkQ29scyIsImRpdiIsImNsYXNzTmFtZSIsImFjdGl2ZSIsImxhYmVsIiwiZHJhZ2dhYmxlIiwib25EcmFnT3ZlciIsInByZXZlbnREZWZhdWx0Iiwib25Nb3VzZURvd24iLCJidXR0b24iLCJvbkNsaWNrIiwic3BhbiIsInN0b3BQcm9wYWdhdGlvbiIsImFyaWEtaGlkZGVuIiwic3R5bGUiLCJncmlkVGVtcGxhdGVDb2x1bW5zIiwiYXNpZGUiLCJ3b3JkQ291bnQiLCJ0cmltIiwic3BsaXQiLCJCb29sZWFuIiwiZGlzYWJsZWQiLCJtYWluIiwiaW5wdXQiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwidGV4dGFyZWEiLCJyb3dzIiwic2VsZWN0Iiwib3B0aW9uIiwidXBkYXRlQm9keSIsIk9iamVjdCIsImtleXMiLCJ1cGRhdGVQcm9qZWN0IiwidXBkYXRlUHJvamVjdFNldHRpbmdzIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwicmVxdWlyZUltYWdlIiwicGxhY2Vob2xkZXIiLCJjb250ZW50RWRpdGFibGUiLCJzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmciLCJvbklucHV0IiwiY3VycmVudFRhcmdldCIsInRleHRDb250ZW50Iiwid2hpdGVTcGFjZSIsImNlaWwiLCJ0b0xvY2FsZVN0cmluZyIsIm5hbWUiLCJjaGVja2VkIiwiZGVsZXRlQ2hhdCIsIngiLCJjaGF0SWQiLCJoMyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/components/workspace/Workspace.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/workspace/WorldSettingsManager.tsx":
/*!***********************************************************!*\
  !*** ./src/components/workspace/WorldSettingsManager.tsx ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorldSettingsManager: () => (/* binding */ WorldSettingsManager)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(ssr)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/api */ \"(ssr)/./src/lib/api.ts\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/plus.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/upload.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* __next_internal_client_entry_do_not_use__ WorldSettingsManager auto */ \n\n\n\n\nfunction classNames(...xs) {\n    return xs.filter(Boolean).join(\" \");\n}\nfunction WorldSettingsManager({ projectId }) {\n    const supabase = (0,_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase)();\n    const api = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>(0,_lib_api__WEBPACK_IMPORTED_MODULE_3__.createApi)(supabase), [\n        supabase\n    ]);\n    const [items, setItems] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [filter, setFilter] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [activeId, setActiveId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [deleting, setDeleting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [toast, setToast] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const toastTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [form, setForm] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        name: \"\"\n    });\n    const [traits, setTraits] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [uploading, setUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const dropRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_world`, [\n        projectId\n    ]);\n    const activeKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_world_active`, [\n        projectId\n    ]);\n    const [hasCache, setHasCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const itemsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(items);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const s =  false ? 0 : null;\n            if (s) {\n                const arr = JSON.parse(s);\n                if (Array.isArray(arr)) {\n                    setItems(arr);\n                    const valid = arr.length > 0;\n                    setHasCache(valid);\n                    if (valid) setLoading(false);\n                }\n            }\n        } catch  {}\n    }, [\n        cacheKey\n    ]);\n    const notify = (msg)=>{\n        if (toastTimer.current) clearTimeout(toastTimer.current);\n        setToast(msg);\n        toastTimer.current = setTimeout(()=>setToast(\"\"), 2500);\n    };\n    const onUploadFile = async (file)=>{\n        if (!file) return;\n        setUploading(true);\n        try {\n            const bucket = process.env.NEXT_PUBLIC_SUPABASE_WORLD_BUCKET || \"world-images\";\n            const ext = file.name.split(\".\").pop() || \"jpg\";\n            const path = `${projectId}/${Date.now()}-${Math.random().toString(36).slice(2)}.${ext}`;\n            const { error: upErr } = await supabase.storage.from(bucket).upload(path, file, {\n                upsert: true,\n                contentType: file.type\n            });\n            if (upErr) throw upErr;\n            const { data } = supabase.storage.from(bucket).getPublicUrl(path);\n            const url = data.publicUrl;\n            setForm((f)=>({\n                    ...f,\n                    images: [\n                        ...f.images || [],\n                        url\n                    ]\n                }));\n            notify(\"Image uploaded\");\n        } catch (e) {\n            notify(e?.message || \"Upload failed\");\n        } finally{\n            setUploading(false);\n        }\n    };\n    // Drag & drop handlers\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const el = dropRef.current;\n        if (!el) return;\n        const onDrop = (e)=>{\n            e.preventDefault();\n            const f = e.dataTransfer?.files?.[0];\n            if (f) void onUploadFile(f);\n            el.classList.remove(\"ring-2\", \"ring-blue-500\");\n        };\n        const onDrag = (e)=>{\n            e.preventDefault();\n            el.classList.add(\"ring-2\", \"ring-blue-500\");\n        };\n        const onLeave = (e)=>{\n            e.preventDefault();\n            el.classList.remove(\"ring-2\", \"ring-blue-500\");\n        };\n        el.addEventListener(\"drop\", onDrop);\n        el.addEventListener(\"dragover\", onDrag);\n        el.addEventListener(\"dragleave\", onLeave);\n        return ()=>{\n            el.removeEventListener(\"drop\", onDrop);\n            el.removeEventListener(\"dragover\", onDrag);\n            el.removeEventListener(\"dragleave\", onLeave);\n        };\n    }, [\n        onUploadFile\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasCache) {\n                return;\n            }\n            try {\n                if (!hasCache) setLoading(true);\n                const res = await api.listWorldSettings(projectId);\n                if (!mounted) return;\n                const next = res || [];\n                try {\n                    if (hasCache && JSON.stringify(next) === JSON.stringify(itemsRef.current)) {\n                        return;\n                    }\n                } catch  {}\n                setItems(next);\n            } catch (e) {\n                if (!mounted) return;\n                setError(e?.message || \"Failed to load world settings\");\n            } finally{\n                if (mounted) setLoading(false);\n            }\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        projectId,\n        hasCache\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        items,\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        itemsRef.current = items;\n    }, [\n        items\n    ]);\n    // Restore/persist last active selection\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const v =  false ? 0 : null;\n            if (v) setActiveId(v);\n        } catch  {}\n    }, [\n        activeKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (activeId && \"undefined\" !== \"undefined\") {}\n        } catch  {}\n    }, [\n        activeId,\n        activeKey\n    ]);\n    // Reflect chat-driven upserts instantly\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onUpsert(ev) {\n            const ce = ev;\n            const item = ce?.detail?.item;\n            if (!item || !item.id) return;\n            setItems((prev)=>{\n                const idx = prev.findIndex((x)=>x.id === item.id);\n                if (idx >= 0) {\n                    const next = [\n                        ...prev\n                    ];\n                    next[idx] = {\n                        ...next[idx],\n                        ...item\n                    };\n                    return next;\n                }\n                return [\n                    ...prev,\n                    item\n                ];\n            });\n            if (activeId === item.id) {\n                setForm({\n                    id: item.id,\n                    name: item.name,\n                    summary: item.summary || \"\",\n                    traits: item.traits || null,\n                    images: item.images || []\n                });\n                setTraits(item.traits || {});\n            }\n            notify(\"World entry updated via chat\");\n        }\n        window.addEventListener(\"workspace:world-upsert\", onUpsert);\n        return ()=>window.removeEventListener(\"workspace:world-upsert\", onUpsert);\n    }, [\n        activeId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeId) return;\n        if (activeId === \"__new__\") {\n            setForm({\n                name: \"\",\n                images: []\n            });\n            setTraits({});\n            return;\n        }\n        const it = items.find((x)=>x.id === activeId);\n        if (!it) return;\n        setForm({\n            id: it.id,\n            name: it.name,\n            summary: it.summary || \"\",\n            traits: it.traits || null,\n            images: it.images || []\n        });\n        setTraits(it.traits || {});\n    }, [\n        activeId,\n        items\n    ]);\n    const filtered = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const q = filter.trim().toLowerCase();\n        if (!q) return items;\n        return items.filter((x)=>(x.name || \"\").toLowerCase().includes(q));\n    }, [\n        items,\n        filter\n    ]);\n    // notify moved earlier so it's available to uploads\n    const onNew = ()=>{\n        setActiveId(\"__new__\");\n        setForm({\n            name: \"\",\n            images: []\n        });\n        setTraits({});\n    };\n    // Traits helpers\n    const clone = (o)=>JSON.parse(JSON.stringify(o ?? {}));\n    const setVal = (path, val)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < path.length - 1; i++)ref = ref[path[i]];\n            ref[path[path.length - 1]] = val;\n            return nxt;\n        });\n    };\n    const delKey = (pathToParent, key)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToParent.length; i++)ref = ref[pathToParent[i]];\n            if (Array.isArray(ref) && typeof key === \"number\") ref.splice(key, 1);\n            else if (ref && typeof ref === \"object\") delete ref[key];\n            return nxt;\n        });\n    };\n    const renameKey = (pathToParent, oldKey, newKey)=>{\n        if (!newKey) return;\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToParent.length; i++)ref = ref[pathToParent[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            if (oldKey === newKey) return nxt;\n            const val = ref[oldKey];\n            delete ref[oldKey];\n            ref[newKey] = val;\n            return nxt;\n        });\n    };\n    const addChild = (pathToObj, depth)=>{\n        if (depth >= 5) return;\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToObj.length; i++)ref = ref[pathToObj[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            let base = \"key\";\n            let i2 = 1;\n            let key = base;\n            while(Object.prototype.hasOwnProperty.call(ref, key)){\n                key = `${base}-${i2++}`;\n            }\n            ref[key] = \"\";\n            return nxt;\n        });\n    };\n    const addRootKey = ()=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let base = \"key\";\n            let i = 1;\n            let k = base;\n            while(Object.prototype.hasOwnProperty.call(nxt, k)){\n                k = `${base}-${i++}`;\n            }\n            nxt[k] = \"\";\n            return nxt;\n        });\n    };\n    const convertType = (path, parentPath, key, nextType, depth)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < parentPath.length; i++)ref = ref[parentPath[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            if (nextType === \"string\") ref[key] = \"\";\n            else if (nextType === \"object\") ref[key] = depth >= 5 ? \"\" : {};\n            else if (nextType === \"array\") ref[key] = [];\n            return nxt;\n        });\n    };\n    const addArrayItem = (pathToArr)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToArr.length; i++)ref = ref[pathToArr[i]];\n            if (Array.isArray(ref)) ref.push(\"\");\n            return nxt;\n        });\n    };\n    TraitObject._parent = {\n        setVal,\n        delKey,\n        renameKey,\n        addChild,\n        convertType,\n        addArrayItem\n    };\n    const onSave = async ()=>{\n        if (!form.name.trim()) {\n            notify(\"Name is required\");\n            return;\n        }\n        setSaving(true);\n        try {\n            const payload = {\n                name: form.name.trim(),\n                summary: form.summary || undefined,\n                traits,\n                images: form.images || []\n            };\n            if (activeId === \"__new__\") {\n                const res = await api.createWorldSetting(projectId, payload);\n                setItems((prev)=>[\n                        ...prev,\n                        res\n                    ]);\n                setActiveId(res.id);\n            } else if (activeId) {\n                const res = await api.updateWorldSetting(projectId, activeId, payload);\n                setItems((prev)=>prev.map((x)=>x.id === res.id ? res : x));\n            }\n            notify(\"Saved\");\n        } catch (e) {\n            notify(e?.message || \"Save failed\");\n        } finally{\n            setSaving(false);\n        }\n    };\n    const onDelete = async ()=>{\n        if (!activeId || activeId === \"__new__\") return;\n        // eslint-disable-next-line no-alert\n        if (!confirm(\"Delete this world entry?\")) return;\n        setDeleting(true);\n        try {\n            await api.deleteWorldSetting(projectId, activeId);\n            setItems((prev)=>prev.filter((x)=>x.id !== activeId));\n            setActiveId(null);\n            setForm({\n                name: \"\",\n                images: []\n            });\n            setTraits({});\n            notify(\"Deleted\");\n        } catch (e) {\n            notify(e?.message || \"Delete failed\");\n        } finally{\n            setDeleting(false);\n        }\n    };\n    const count = items.length;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-full grid grid-rows-[auto_1fr]\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"border-b border-border-default px-6 py-4 flex items-center justify-between\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-base font-semibold text-text-primary\",\n                                children: \"World Settings\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 345,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs px-2 py-1 rounded-md border border-border-default text-text-secondary\",\n                                children: [\n                                    count,\n                                    \" Items\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 346,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 344,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onNew,\n                            className: \"rounded-lg bg-bg-elevated border border-border-default hover:border-accent hover:bg-bg-hover text-text-secondary hover:text-text-primary text-sm px-4 py-3 inline-flex items-center justify-center gap-2 transition-all duration-150 hover:-translate-y-0.5\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                    className: \"w-4 h-4\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                    lineNumber: 350,\n                                    columnNumber: 13\n                                }, this),\n                                \"New Entry\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                            lineNumber: 349,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 348,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 343,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"min-h-0 grid\",\n                style: {\n                    gridTemplateColumns: \"35% 65%\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                        className: \"border-r border-border-default min-h-0 flex flex-col\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"p-3\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            value: filter,\n                                            onChange: (e)=>setFilter(e.target.value),\n                                            placeholder: \"Search world settings\",\n                                            className: \"w-full bg-bg-primary border border-border-default rounded-md pl-9 pr-3 py-2.5 text-sm text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                            lineNumber: 360,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                            className: \"w-4 h-4 absolute left-3 top-3 text-text-tertiary\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                            lineNumber: 361,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                    lineNumber: 359,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 358,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 overflow-y-auto px-3 pb-3\",\n                                children: [\n                                    loading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-text-secondary px-2 py-2\",\n                                        children: \"Loading\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 365,\n                                        columnNumber: 25\n                                    }, this),\n                                    error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-red-400 px-2 py-2 bg-red-950/20 rounded-md border border-red-500/20\",\n                                        children: error\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 366,\n                                        columnNumber: 23\n                                    }, this),\n                                    !loading && !filtered.length && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-10 text-center text-text-tertiary text-sm\",\n                                        children: \"No world settings yet. Create your first entry!\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 368,\n                                        columnNumber: 15\n                                    }, this),\n                                    filtered.map((w)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setActiveId(w.id),\n                                            className: classNames(\"w-full text-left px-3 py-3 rounded-md mb-2 transition-all\", activeId === w.id ? \"border-l-2 border-blue-500 bg-bg-elevated\" : \"hover:bg-bg-hover\"),\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex-1 min-w-0\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-sm font-medium text-text-primary truncate\",\n                                                            children: w.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                            lineNumber: 374,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs text-text-tertiary truncate\",\n                                                            children: w.summary || \"\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                            lineNumber: 375,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                    lineNumber: 373,\n                                                    columnNumber: 19\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 372,\n                                                columnNumber: 17\n                                            }, this)\n                                        }, w.id, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                            lineNumber: 371,\n                                            columnNumber: 15\n                                        }, this))\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 364,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 357,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                        className: \"min-h-0 overflow-y-auto p-6\",\n                        \"aria-label\": \"World details\",\n                        children: activeId ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"max-w-2xl mx-auto\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid gap-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        ref: dropRef,\n                                        className: \"flex flex-col items-start mb-2 p-3 rounded-xl border border-border-default bg-bg-elevated w-full\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-xs text-text-tertiary mb-2\",\n                                                children: \"World Images\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 388,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2 mb-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                        className: \"px-3 py-2 rounded-md border border-border-default bg-bg-primary text-text-secondary hover:text-text-primary inline-flex items-center gap-2 cursor-pointer\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                                                className: \"w-4 h-4\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                lineNumber: 391,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            \"Upload Image\",\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                type: \"file\",\n                                                                accept: \"image/*\",\n                                                                className: \"hidden\",\n                                                                onChange: (e)=>{\n                                                                    const f = e.target.files?.[0];\n                                                                    if (f) void onUploadFile(f);\n                                                                }\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                lineNumber: 393,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 390,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    uploading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-text-tertiary inline-flex items-center gap-2\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                                className: \"w-3 h-3 animate-spin\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                lineNumber: 395,\n                                                                columnNumber: 110\n                                                            }, this),\n                                                            \" Uploading\"\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 395,\n                                                        columnNumber: 35\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 389,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"grid grid-cols-4 gap-2 w-full\",\n                                                children: [\n                                                    (form.images || []).map((url, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"relative group border border-border-default rounded-md overflow-hidden bg-bg-primary\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                                    src: url,\n                                                                    alt: \"world\",\n                                                                    className: \"w-full h-20 object-cover\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                    lineNumber: 400,\n                                                                    columnNumber: 25\n                                                                }, this),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    className: \"absolute top-1 right-1 bg-black/50 text-white rounded p-1 opacity-0 group-hover:opacity-100\",\n                                                                    title: \"Remove\",\n                                                                    onClick: ()=>setForm((f)=>({\n                                                                                ...f,\n                                                                                images: (f.images || []).filter((_, i)=>i !== idx)\n                                                                            })),\n                                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                                        className: \"w-3 h-3\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                        lineNumber: 406,\n                                                                        columnNumber: 27\n                                                                    }, this)\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                    lineNumber: 401,\n                                                                    columnNumber: 25\n                                                                }, this)\n                                                            ]\n                                                        }, idx, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                            lineNumber: 399,\n                                                            columnNumber: 23\n                                                        }, this)),\n                                                    !(form.images || []).length && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-text-tertiary\",\n                                                        children: \"No images yet. Upload or drop here.\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 411,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 397,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 387,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"grid gap-2 text-sm\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                children: \"Name\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 416,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: form.name,\n                                                onChange: (e)=>setForm((f)=>({\n                                                            ...f,\n                                                            name: e.target.value\n                                                        })),\n                                                className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 417,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 415,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"grid gap-2 text-sm\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                children: \"Summary\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 420,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                value: form.summary || \"\",\n                                                onChange: (e)=>setForm((f)=>({\n                                                            ...f,\n                                                            summary: e.target.value\n                                                        })),\n                                                rows: 5,\n                                                className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent text-sm\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 421,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-[11px] text-text-tertiary\",\n                                                children: [\n                                                    (form.summary || \"\").length,\n                                                    \" characters\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 422,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 419,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"grid gap-2 text-sm\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center justify-between\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Traits\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 427,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: addRootKey,\n                                                        className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                                                className: \"w-3 h-3\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                lineNumber: 428,\n                                                                columnNumber: 195\n                                                            }, this),\n                                                            \" Add key\"\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 428,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 426,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-1\",\n                                                children: [\n                                                    Object.keys(traits || {}).length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-text-tertiary\",\n                                                        children: \"No traits yet. Add a key.\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 432,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitObject, {\n                                                        obj: traits,\n                                                        path: [],\n                                                        depth: 1\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 434,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 430,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 425,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center justify-between pt-4\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: onDelete,\n                                                disabled: !activeId || activeId === \"__new__\" || deleting,\n                                                className: \"text-red-400 hover:text-red-300 inline-flex items-center gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                        className: \"w-4 h-4\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 440,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    \"Delete Entry\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 439,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>{\n                                                            setActiveId(null);\n                                                        },\n                                                        className: \"px-4 py-2 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover\",\n                                                        children: \"Cancel\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 444,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: onSave,\n                                                        disabled: saving,\n                                                        className: \"px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-500 text-white\",\n                                                        children: saving ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"inline-flex items-center gap-2\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                                    className: \"w-4 h-4 animate-spin\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                    lineNumber: 446,\n                                                                    columnNumber: 82\n                                                                }, this),\n                                                                \" Saving\"\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                            lineNumber: 446,\n                                                            columnNumber: 33\n                                                        }, this) : \"Save Entry\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 445,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 443,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 438,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 386,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                            lineNumber: 385,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-tertiary\",\n                            children: \"Select a world entry or create a new one.\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                            lineNumber: 453,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 383,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 356,\n                columnNumber: 7\n            }, this),\n            toast && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed top-4 right-4 z-50\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-4 py-3 rounded-lg bg-bg-elevated border border-border-default text-text-primary text-sm shadow-elevation\",\n                    children: toast\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                    lineNumber: 460,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 459,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n        lineNumber: 342,\n        columnNumber: 5\n    }, this);\n}\nfunction useWorldCtx() {\n    return {\n        setVal: ()=>{},\n        delKey: ()=>{},\n        renameKey: ()=>{},\n        addChild: ()=>{},\n        convertType: ()=>{},\n        addArrayItem: ()=>{}\n    };\n}\nfunction TraitObject({ obj, path, depth }) {\n    const parent = TraitObject._parent;\n    const ctx = parent || useWorldCtx();\n    TraitObject._parent = ctx;\n    const keys = Object.keys(obj || {});\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"space-y-2\",\n        children: keys.map((k)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitRow, {\n                k: k,\n                v: obj[k],\n                parentPath: path,\n                depth: depth,\n                ctx: ctx\n            }, k, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 496,\n                columnNumber: 9\n            }, this))\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n        lineNumber: 494,\n        columnNumber: 5\n    }, this);\n}\nfunction TraitRow({ k, v, parentPath, depth, ctx }) {\n    const isArray = Array.isArray(v);\n    const isObject = v && typeof v === \"object\" && !isArray;\n    const type = isArray ? \"array\" : isObject ? \"object\" : \"string\";\n    const [name, setName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(k);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setName(k);\n    }, [\n        k\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"border border-border-default rounded-md p-2 bg-bg-elevated\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        value: name,\n                        onChange: (e)=>setName(e.target.value),\n                        onBlur: ()=>{\n                            if (name !== k && name.trim()) ctx.renameKey(parentPath, k, name.trim());\n                        },\n                        onKeyDown: (e)=>{\n                            if (e.key === \"Enter\") {\n                                e.target.blur();\n                            }\n                        },\n                        placeholder: \"key\",\n                        className: \"flex-none w-48 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 512,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        value: type,\n                        onChange: (e)=>ctx.convertType([\n                                ...parentPath,\n                                k\n                            ], parentPath, k, e.target.value, depth),\n                        className: \"flex-none w-28 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"string\",\n                                children: \"String\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 521,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"object\",\n                                disabled: depth >= 5,\n                                children: \"Object\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 522,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"array\",\n                                children: \"Array\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 523,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 520,\n                        columnNumber: 9\n                    }, this),\n                    type === \"string\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        value: String(v || \"\"),\n                        onChange: (e)=>ctx.setVal([\n                                ...parentPath,\n                                k\n                            ], e.target.value),\n                        placeholder: \"value\",\n                        className: \"flex-1 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 526,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.delKey(parentPath, k),\n                        className: \"text-text-tertiary hover:text-red-400 text-sm ml-auto\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                            className: \"w-4 h-4\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                            lineNumber: 528,\n                            columnNumber: 123\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 528,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 511,\n                columnNumber: 7\n            }, this),\n            type === \"object\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 ml-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.addChild([\n                                ...parentPath,\n                                k\n                            ], depth + 1),\n                        disabled: depth >= 5,\n                        className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                className: \"w-3 h-3\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 532,\n                                columnNumber: 240\n                            }, this),\n                            \" Add child\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 532,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitObject, {\n                        obj: v,\n                        path: [\n                            ...parentPath,\n                            k\n                        ],\n                        depth: depth + 1\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 533,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 531,\n                columnNumber: 9\n            }, this),\n            type === \"array\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 ml-4 space-y-2\",\n                children: [\n                    v.map((item, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-text-tertiary\",\n                                    children: [\n                                        \"[\",\n                                        idx,\n                                        \"]\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                    lineNumber: 540,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    value: item,\n                                    onChange: (e)=>ctx.setVal([\n                                            ...parentPath,\n                                            k,\n                                            idx\n                                        ], e.target.value),\n                                    placeholder: \"value\",\n                                    className: \"flex-1 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                    lineNumber: 541,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>ctx.delKey([\n                                            ...parentPath,\n                                            k\n                                        ], idx),\n                                    className: \"text-text-tertiary hover:text-red-400 text-sm\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 542,\n                                        columnNumber: 131\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                    lineNumber: 542,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, idx, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                            lineNumber: 539,\n                            columnNumber: 13\n                        }, this)),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.addArrayItem([\n                                ...parentPath,\n                                k\n                            ]),\n                        className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                className: \"w-3 h-3\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 545,\n                                columnNumber: 215\n                            }, this),\n                            \" Add item\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 545,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 537,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n        lineNumber: 510,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvV29ybGRTZXR0aW5nc01hbmFnZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRTZEO0FBQ1M7QUFDaEM7QUFDa0M7QUFFeEUsU0FBU1ksV0FBVyxHQUFHQyxFQUE0QztJQUNqRSxPQUFPQSxHQUFHQyxNQUFNLENBQUNDLFNBQVNDLElBQUksQ0FBQztBQUNqQztBQVlPLFNBQVNDLHFCQUFxQixFQUFFQyxTQUFTLEVBQXlCO0lBQ3ZFLE1BQU1DLFdBQVdmLG1GQUFXQTtJQUM1QixNQUFNZ0IsTUFBTW5CLDhDQUFPQSxDQUFDLElBQU1JLG1EQUFTQSxDQUFDYyxXQUFXO1FBQUNBO0tBQVM7SUFFekQsTUFBTSxDQUFDRSxPQUFPQyxTQUFTLEdBQUduQiwrQ0FBUUEsQ0FBYyxFQUFFO0lBQ2xELE1BQU0sQ0FBQ29CLFNBQVNDLFdBQVcsR0FBR3JCLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ3NCLE9BQU9DLFNBQVMsR0FBR3ZCLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUNXLFFBQVFhLFVBQVUsR0FBR3hCLCtDQUFRQSxDQUFDO0lBQ3JDLE1BQU0sQ0FBQ3lCLFVBQVVDLFlBQVksR0FBRzFCLCtDQUFRQSxDQUE0QjtJQUNwRSxNQUFNLENBQUMyQixRQUFRQyxVQUFVLEdBQUc1QiwrQ0FBUUEsQ0FBQztJQUNyQyxNQUFNLENBQUM2QixVQUFVQyxZQUFZLEdBQUc5QiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUMrQixPQUFPQyxTQUFTLEdBQUdoQywrQ0FBUUEsQ0FBQztJQUNuQyxNQUFNaUMsYUFBYWxDLDZDQUFNQSxDQUF1QztJQUVoRSxNQUFNLENBQUNtQyxNQUFNQyxRQUFRLEdBQUduQywrQ0FBUUEsQ0FBWTtRQUFFb0MsTUFBTTtJQUFHO0lBQ3ZELE1BQU0sQ0FBQ0MsUUFBUUMsVUFBVSxHQUFHdEMsK0NBQVFBLENBQU0sQ0FBQztJQUMzQyxNQUFNLENBQUN1QyxXQUFX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O3dCQUFFUixPQUFPQSxRQUFNOzs7Ozs7Ozs7Ozs7WUFHL0RoRSxTQUFPLHlCQUNOLDhEQUFDMkY7Z0JBQUlDLFdBQVU7O29CQUNYakUsRUFBZTJELEdBQUcsQ0FBQyxDQUFDdkQsTUFBTUksb0JBQzFCLDhEQUFDd0Q7NEJBQWNDLFdBQVU7OzhDQUN2Qiw4REFBQ3FCO29DQUFLckIsV0FBVTs7d0NBQTZCO3dDQUFFekQ7d0NBQUk7Ozs7Ozs7OENBQ25ELDhEQUFDK0Q7b0NBQU1DLE9BQU9wRTtvQ0FBTXFFLFVBQVUsQ0FBQzdGLElBQUlrSCxJQUFJeEUsTUFBTSxDQUFDOytDQUFJeUI7NENBQVlGOzRDQUFHckM7eUNBQUksRUFBRTVCLEVBQUU4RixNQUFNLENBQUNGLEtBQUs7b0NBQUdHLGFBQVk7b0NBQVFWLFdBQVU7Ozs7Ozs4Q0FDdEgsOERBQUNDO29DQUFPQyxTQUFTLElBQUkyQixJQUFJbEUsTUFBTSxDQUFDOytDQUFJbUI7NENBQVlGO3lDQUFFLEVBQUVyQztvQ0FBTXlELFdBQVU7OENBQWdELDRFQUFDekssK0dBQUNBO3dDQUFDeUssV0FBVTs7Ozs7Ozs7Ozs7OzJCQUh6SHpEOzs7OztrQ0FNWiw4REFBQzBEO3dCQUFPQyxTQUFTLElBQUkyQixJQUFJN0MsWUFBWSxDQUFDO21DQUFJRjtnQ0FBWUY7NkJBQUU7d0JBQUdvQixXQUFVOzswQ0FBdUksOERBQUM3SywrR0FBSUE7Z0NBQUM2SyxXQUFVOzs7Ozs7NEJBQVk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLbFAiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmt2ZXJzZS1jbGllbnQvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvV29ybGRTZXR0aW5nc01hbmFnZXIudHN4PzYzNjQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlU3VwYWJhc2UgfSBmcm9tIFwiQC9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyXCI7XG5pbXBvcnQgeyBjcmVhdGVBcGkgfSBmcm9tIFwiQC9saWIvYXBpXCI7XG5pbXBvcnQgeyBMb2FkZXIyLCBQbHVzLCBTZWFyY2gsIFRyYXNoMiwgVXBsb2FkLCBYIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuXG5mdW5jdGlvbiBjbGFzc05hbWVzKC4uLnhzOiBBcnJheTxzdHJpbmcgfCBmYWxzZSB8IG51bGwgfCB1bmRlZmluZWQ+KSB7XG4gIHJldHVybiB4cy5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIik7XG59XG5cbnR5cGUgV29ybGRJdGVtID0ge1xuICBpZD86IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzdW1tYXJ5Pzogc3RyaW5nIHwgbnVsbDtcbiAgdHJhaXRzPzogYW55IHwgbnVsbDtcbiAgaW1hZ2VzPzogc3RyaW5nW10gfCBudWxsO1xuICBjcmVhdGVkQXQ/OiBzdHJpbmc7XG4gIHVwZGF0ZWRBdD86IHN0cmluZztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBXb3JsZFNldHRpbmdzTWFuYWdlcih7IHByb2plY3RJZCB9OiB7IHByb2plY3RJZDogc3RyaW5nIH0pIHtcbiAgY29uc3Qgc3VwYWJhc2UgPSB1c2VTdXBhYmFzZSgpO1xuICBjb25zdCBhcGkgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZUFwaShzdXBhYmFzZSksIFtzdXBhYmFzZV0pO1xuXG4gIGNvbnN0IFtpdGVtcywgc2V0SXRlbXNdID0gdXNlU3RhdGU8V29ybGRJdGVtW10+KFtdKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtmaWx0ZXIsIHNldEZpbHRlcl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2FjdGl2ZUlkLCBzZXRBY3RpdmVJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBcIl9fbmV3X19cIiB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2F2aW5nLCBzZXRTYXZpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGVsZXRpbmcsIHNldERlbGV0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3RvYXN0LCBzZXRUb2FzdF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgdG9hc3RUaW1lciA9IHVzZVJlZjxSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IFtmb3JtLCBzZXRGb3JtXSA9IHVzZVN0YXRlPFdvcmxkSXRlbT4oeyBuYW1lOiBcIlwiIH0pO1xuICBjb25zdCBbdHJhaXRzLCBzZXRUcmFpdHNdID0gdXNlU3RhdGU8YW55Pih7fSk7XG4gIGNvbnN0IFt1cGxvYWRpbmcsIHNldFVwbG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGRyb3BSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBjYWNoZUtleSA9IHVzZU1lbW8oKCkgPT4gYGlua3ZlcnNlX3Byb2plY3RfJHtwcm9qZWN0SWR9X3dvcmxkYCwgW3Byb2plY3RJZF0pO1xuICBjb25zdCBhY3RpdmVLZXkgPSB1c2VNZW1vKCgpID0+IGBpbmt2ZXJzZV9wcm9qZWN0XyR7cHJvamVjdElkfV93b3JsZF9hY3RpdmVgLCBbcHJvamVjdElkXSk7XG4gIGNvbnN0IFtoYXNDYWNoZSwgc2V0SGFzQ2FjaGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBpdGVtc1JlZiA9IHVzZVJlZjxXb3JsZEl0ZW1bXT4oaXRlbXMpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHMgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSkgOiBudWxsO1xuICAgICAgaWYgKHMpIHtcbiAgICAgICAgY29uc3QgYXJyID0gSlNPTi5wYXJzZShzKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgICAgICAgIHNldEl0ZW1zKGFyciBhcyBXb3JsZEl0ZW1bXSk7XG4gICAgICAgICAgY29uc3QgdmFsaWQgPSAoYXJyIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuICAgICAgICAgIHNldEhhc0NhY2hlKHZhbGlkKTtcbiAgICAgICAgICBpZiAodmFsaWQpIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCB7fVxuICB9LCBbY2FjaGVLZXldKTtcblxuICBjb25zdCBub3RpZnkgPSAobXNnOiBzdHJpbmcpID0+IHtcbiAgICBpZiAodG9hc3RUaW1lci5jdXJyZW50KSBjbGVhclRpbWVvdXQodG9hc3RUaW1lci5jdXJyZW50KTtcbiAgICBzZXRUb2FzdChtc2cpO1xuICAgIHRvYXN0VGltZXIuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0VG9hc3QoXCJcIiksIDI1MDApO1xuICB9O1xuXG4gIGNvbnN0IG9uVXBsb2FkRmlsZSA9IGFzeW5jIChmaWxlOiBGaWxlKSA9PiB7XG4gICAgaWYgKCFmaWxlKSByZXR1cm47XG4gICAgc2V0VXBsb2FkaW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBidWNrZXQgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9XT1JMRF9CVUNLRVQgfHwgXCJ3b3JsZC1pbWFnZXNcIjtcbiAgICAgIGNvbnN0IGV4dCA9IGZpbGUubmFtZS5zcGxpdCgnLicpLnBvcCgpIHx8ICdqcGcnO1xuICAgICAgY29uc3QgcGF0aCA9IGAke3Byb2plY3RJZH0vJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpfS4ke2V4dH1gO1xuICAgICAgY29uc3QgeyBlcnJvcjogdXBFcnIgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbShidWNrZXQpLnVwbG9hZChwYXRoLCBmaWxlLCB7IHVwc2VydDogdHJ1ZSwgY29udGVudFR5cGU6IGZpbGUudHlwZSB9KTtcbiAgICAgIGlmICh1cEVycikgdGhyb3cgdXBFcnI7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbShidWNrZXQpLmdldFB1YmxpY1VybChwYXRoKTtcbiAgICAgIGNvbnN0IHVybCA9IGRhdGEucHVibGljVXJsO1xuICAgICAgc2V0Rm9ybSgoZikgPT4gKHsgLi4uZiwgaW1hZ2VzOiBbLi4uKGYuaW1hZ2VzIHx8IFtdKSwgdXJsXSB9KSk7XG4gICAgICBub3RpZnkoJ0ltYWdlIHVwbG9hZGVkJyk7XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBub3RpZnkoZT8ubWVzc2FnZSB8fCAnVXBsb2FkIGZhaWxlZCcpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRVcGxvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvLyBEcmFnICYgZHJvcCBoYW5kbGVyc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGVsID0gZHJvcFJlZi5jdXJyZW50O1xuICAgIGlmICghZWwpIHJldHVybjtcbiAgICBjb25zdCBvbkRyb3AgPSAoZTogRHJhZ0V2ZW50KSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBmID0gZS5kYXRhVHJhbnNmZXI/LmZpbGVzPy5bMF07XG4gICAgICBpZiAoZikgdm9pZCBvblVwbG9hZEZpbGUoZik7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKFwicmluZy0yXCIsIFwicmluZy1ibHVlLTUwMFwiKTtcbiAgICB9O1xuICAgIGNvbnN0IG9uRHJhZyA9IChlOiBEcmFnRXZlbnQpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJyaW5nLTJcIiwgXCJyaW5nLWJsdWUtNTAwXCIpO1xuICAgIH07XG4gICAgY29uc3Qgb25MZWF2ZSA9IChlOiBEcmFnRXZlbnQpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJyaW5nLTJcIiwgXCJyaW5nLWJsdWUtNTAwXCIpO1xuICAgIH07XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgb25Ecm9wIGFzIGFueSk7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIG9uRHJhZyBhcyBhbnkpO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgb25MZWF2ZSBhcyBhbnkpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBvbkRyb3AgYXMgYW55KTtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCBvbkRyYWcgYXMgYW55KTtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgb25MZWF2ZSBhcyBhbnkpO1xuICAgIH07XG4gIH0sIFtvblVwbG9hZEZpbGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBtb3VudGVkID0gdHJ1ZTtcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGhhc0NhY2hlKSB7IHJldHVybjsgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFoYXNDYWNoZSkgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmxpc3RXb3JsZFNldHRpbmdzKHByb2plY3RJZCk7XG4gICAgICAgIGlmICghbW91bnRlZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuZXh0ID0gcmVzIHx8IFtdO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChoYXNDYWNoZSAmJiBKU09OLnN0cmluZ2lmeShuZXh0KSA9PT0gSlNPTi5zdHJpbmdpZnkoaXRlbXNSZWYuY3VycmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgc2V0SXRlbXMobmV4dCk7XG4gICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgIHNldEVycm9yKGU/Lm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gbG9hZCB3b3JsZCBzZXR0aW5nc1wiKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChtb3VudGVkKSBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KSgpO1xuICAgIHJldHVybiAoKSA9PiB7IG1vdW50ZWQgPSBmYWxzZTsgfTtcbiAgfSwgW2FwaSwgcHJvamVjdElkLCBoYXNDYWNoZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNhY2hlS2V5LCBKU09OLnN0cmluZ2lmeShpdGVtcykpO1xuICAgIH0gY2F0Y2gge31cbiAgfSwgW2l0ZW1zLCBjYWNoZUtleV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7IGl0ZW1zUmVmLmN1cnJlbnQgPSBpdGVtczsgfSwgW2l0ZW1zXSk7XG5cbiAgLy8gUmVzdG9yZS9wZXJzaXN0IGxhc3QgYWN0aXZlIHNlbGVjdGlvblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oYWN0aXZlS2V5KSA6IG51bGw7XG4gICAgICBpZiAodikgc2V0QWN0aXZlSWQodiBhcyBhbnkpO1xuICAgIH0gY2F0Y2gge31cbiAgfSwgW2FjdGl2ZUtleV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoYWN0aXZlSWQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShhY3RpdmVLZXksIGFjdGl2ZUlkKTtcbiAgICB9IGNhdGNoIHt9XG4gIH0sIFthY3RpdmVJZCwgYWN0aXZlS2V5XSk7XG5cbiAgLy8gUmVmbGVjdCBjaGF0LWRyaXZlbiB1cHNlcnRzIGluc3RhbnRseVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIG9uVXBzZXJ0KGV2OiBFdmVudCkge1xuICAgICAgY29uc3QgY2UgPSBldiBhcyBDdXN0b21FdmVudDtcbiAgICAgIGNvbnN0IGl0ZW0gPSBjZT8uZGV0YWlsPy5pdGVtIGFzIGFueTtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5pZCkgcmV0dXJuO1xuICAgICAgc2V0SXRlbXMoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgaWR4ID0gcHJldi5maW5kSW5kZXgoKHgpID0+IHguaWQgPT09IGl0ZW0uaWQpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gWy4uLnByZXZdO1xuICAgICAgICAgIG5leHRbaWR4XSA9IHsgLi4ubmV4dFtpZHhdLCAuLi5pdGVtIH0gYXMgYW55O1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ucHJldiwgaXRlbV07XG4gICAgICB9KTtcbiAgICAgIGlmIChhY3RpdmVJZCA9PT0gaXRlbS5pZCkge1xuICAgICAgICBzZXRGb3JtKHsgaWQ6IGl0ZW0uaWQsIG5hbWU6IGl0ZW0ubmFtZSwgc3VtbWFyeTogaXRlbS5zdW1tYXJ5IHx8IFwiXCIsIHRyYWl0czogaXRlbS50cmFpdHMgfHwgbnVsbCwgaW1hZ2VzOiAoaXRlbSBhcyBhbnkpLmltYWdlcyB8fCBbXSB9KTtcbiAgICAgICAgc2V0VHJhaXRzKGl0ZW0udHJhaXRzIHx8IHt9KTtcbiAgICAgIH1cbiAgICAgIG5vdGlmeSgnV29ybGQgZW50cnkgdXBkYXRlZCB2aWEgY2hhdCcpO1xuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd29ya3NwYWNlOndvcmxkLXVwc2VydCcsIG9uVXBzZXJ0IGFzIGFueSk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd3b3Jrc3BhY2U6d29ybGQtdXBzZXJ0Jywgb25VcHNlcnQgYXMgYW55KTtcbiAgfSwgW2FjdGl2ZUlkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUlkKSByZXR1cm47XG4gICAgaWYgKGFjdGl2ZUlkID09PSBcIl9fbmV3X19cIikge1xuICAgICAgc2V0Rm9ybSh7IG5hbWU6IFwiXCIsIGltYWdlczogW10gfSk7XG4gICAgICBzZXRUcmFpdHMoe30pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpdCA9IGl0ZW1zLmZpbmQoKHgpID0+IHguaWQgPT09IGFjdGl2ZUlkKTtcbiAgICBpZiAoIWl0KSByZXR1cm47XG4gICAgc2V0Rm9ybSh7IGlkOiBpdC5pZCwgbmFtZTogaXQubmFtZSwgc3VtbWFyeTogaXQuc3VtbWFyeSB8fCBcIlwiLCB0cmFpdHM6IGl0LnRyYWl0cyB8fCBudWxsLCBpbWFnZXM6IChpdCBhcyBhbnkpLmltYWdlcyB8fCBbXSB9KTtcbiAgICBzZXRUcmFpdHMoaXQudHJhaXRzIHx8IHt9KTtcbiAgfSwgW2FjdGl2ZUlkLCBpdGVtc10pO1xuXG4gIGNvbnN0IGZpbHRlcmVkID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcSA9IGZpbHRlci50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIXEpIHJldHVybiBpdGVtcztcbiAgICByZXR1cm4gaXRlbXMuZmlsdGVyKCh4KSA9PiAoeC5uYW1lIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpO1xuICB9LCBbaXRlbXMsIGZpbHRlcl0pO1xuXG4gIC8vIG5vdGlmeSBtb3ZlZCBlYXJsaWVyIHNvIGl0J3MgYXZhaWxhYmxlIHRvIHVwbG9hZHNcblxuICBjb25zdCBvbk5ldyA9ICgpID0+IHtcbiAgICBzZXRBY3RpdmVJZChcIl9fbmV3X19cIik7XG4gICAgc2V0Rm9ybSh7IG5hbWU6IFwiXCIsIGltYWdlczogW10gfSk7XG4gICAgc2V0VHJhaXRzKHt9KTtcbiAgfTtcblxuICAvLyBUcmFpdHMgaGVscGVyc1xuICBjb25zdCBjbG9uZSA9IChvOiBhbnkpID0+IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobyA/PyB7fSkpO1xuICBjb25zdCBzZXRWYWwgPSAocGF0aDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIHZhbDogYW55KSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykgcmVmID0gcmVmW3BhdGhbaV1dO1xuICAgICAgcmVmW3BhdGhbcGF0aC5sZW5ndGggLSAxXV0gPSB2YWw7XG4gICAgICByZXR1cm4gbnh0O1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBkZWxLZXkgPSAocGF0aFRvUGFyZW50OiBBcnJheTxzdHJpbmd8bnVtYmVyPiwga2V5OiBzdHJpbmd8bnVtYmVyKSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoVG9QYXJlbnQubGVuZ3RoOyBpKyspIHJlZiA9IHJlZltwYXRoVG9QYXJlbnRbaV1dO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVmKSAmJiB0eXBlb2Yga2V5ID09PSAnbnVtYmVyJykgcmVmLnNwbGljZShrZXksIDEpO1xuICAgICAgZWxzZSBpZiAocmVmICYmIHR5cGVvZiByZWYgPT09ICdvYmplY3QnKSBkZWxldGUgcmVmW2tleSBhcyBhbnldO1xuICAgICAgcmV0dXJuIG54dDtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgcmVuYW1lS2V5ID0gKHBhdGhUb1BhcmVudDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIG9sZEtleTogc3RyaW5nLCBuZXdLZXk6IHN0cmluZykgPT4ge1xuICAgIGlmICghbmV3S2V5KSByZXR1cm47XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoVG9QYXJlbnQubGVuZ3RoOyBpKyspIHJlZiA9IHJlZltwYXRoVG9QYXJlbnRbaV1dO1xuICAgICAgaWYgKCFyZWYgfHwgdHlwZW9mIHJlZiAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShyZWYpKSByZXR1cm4gbnh0O1xuICAgICAgaWYgKG9sZEtleSA9PT0gbmV3S2V5KSByZXR1cm4gbnh0O1xuICAgICAgY29uc3QgdmFsID0gcmVmW29sZEtleV07XG4gICAgICBkZWxldGUgcmVmW29sZEtleV07XG4gICAgICByZWZbbmV3S2V5XSA9IHZhbDtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFkZENoaWxkID0gKHBhdGhUb09iajogQXJyYXk8c3RyaW5nfG51bWJlcj4sIGRlcHRoOiBudW1iZXIpID0+IHtcbiAgICBpZiAoZGVwdGggPj0gNSkgcmV0dXJuO1xuICAgIHNldFRyYWl0cygoY3VycjogYW55KSA9PiB7XG4gICAgICBjb25zdCBueHQgPSBjbG9uZShjdXJyKTtcbiAgICAgIGxldCByZWY6IGFueSA9IG54dDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aFRvT2JqLmxlbmd0aDsgaSsrKSByZWYgPSByZWZbcGF0aFRvT2JqW2ldXTtcbiAgICAgIGlmICghcmVmIHx8IHR5cGVvZiByZWYgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkocmVmKSkgcmV0dXJuIG54dDtcbiAgICAgIGxldCBiYXNlID0gJ2tleSc7IGxldCBpMiA9IDE7IGxldCBrZXkgPSBiYXNlO1xuICAgICAgd2hpbGUgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZWYsIGtleSkpIHsga2V5ID0gYCR7YmFzZX0tJHtpMisrfWA7IH1cbiAgICAgIHJlZltrZXldID0gXCJcIjtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFkZFJvb3RLZXkgPSAoKSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IGJhc2UgPSAna2V5JzsgbGV0IGkgPSAxOyBsZXQgayA9IGJhc2U7XG4gICAgICB3aGlsZSAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG54dCwgaykpIHsgayA9IGAke2Jhc2V9LSR7aSsrfWA7IH1cbiAgICAgIChueHQgYXMgYW55KVtrXSA9IFwiXCI7XG4gICAgICByZXR1cm4gbnh0O1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBjb252ZXJ0VHlwZSA9IChwYXRoOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgcGFyZW50UGF0aDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIGtleTogc3RyaW5nLCBuZXh0VHlwZTogJ3N0cmluZyd8J29iamVjdCd8J2FycmF5JywgZGVwdGg6IG51bWJlcikgPT4ge1xuICAgIHNldFRyYWl0cygoY3VycjogYW55KSA9PiB7XG4gICAgICBjb25zdCBueHQgPSBjbG9uZShjdXJyKTtcbiAgICAgIGxldCByZWY6IGFueSA9IG54dDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyZW50UGF0aC5sZW5ndGg7IGkrKykgcmVmID0gcmVmW3BhcmVudFBhdGhbaV1dO1xuICAgICAgaWYgKCFyZWYgfHwgdHlwZW9mIHJlZiAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShyZWYpKSByZXR1cm4gbnh0O1xuICAgICAgaWYgKG5leHRUeXBlID09PSAnc3RyaW5nJykgcmVmW2tleV0gPSBcIlwiO1xuICAgICAgZWxzZSBpZiAobmV4dFR5cGUgPT09ICdvYmplY3QnKSByZWZba2V5XSA9IGRlcHRoID49IDUgPyBcIlwiIDoge307XG4gICAgICBlbHNlIGlmIChuZXh0VHlwZSA9PT0gJ2FycmF5JykgcmVmW2tleV0gPSBbXSBhcyBzdHJpbmdbXTtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFkZEFycmF5SXRlbSA9IChwYXRoVG9BcnI6IEFycmF5PHN0cmluZ3xudW1iZXI+KSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoVG9BcnIubGVuZ3RoOyBpKyspIHJlZiA9IHJlZltwYXRoVG9BcnJbaV1dO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVmKSkgcmVmLnB1c2goXCJcIik7XG4gICAgICByZXR1cm4gbnh0O1xuICAgIH0pO1xuICB9O1xuXG4gIChUcmFpdE9iamVjdCBhcyBhbnkpLl9wYXJlbnQgPSB7XG4gICAgc2V0VmFsLCBkZWxLZXksIHJlbmFtZUtleSwgYWRkQ2hpbGQsIGNvbnZlcnRUeXBlLCBhZGRBcnJheUl0ZW0sXG4gIH0gYXMgVHJhaXRDdHg7XG5cbiAgY29uc3Qgb25TYXZlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghZm9ybS5uYW1lLnRyaW0oKSkge1xuICAgICAgbm90aWZ5KFwiTmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0U2F2aW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXlsb2FkID0geyBuYW1lOiBmb3JtLm5hbWUudHJpbSgpLCBzdW1tYXJ5OiBmb3JtLnN1bW1hcnkgfHwgdW5kZWZpbmVkLCB0cmFpdHMsIGltYWdlczogZm9ybS5pbWFnZXMgfHwgW10gfTtcbiAgICAgIGlmIChhY3RpdmVJZCA9PT0gXCJfX25ld19fXCIpIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmNyZWF0ZVdvcmxkU2V0dGluZyhwcm9qZWN0SWQsIHBheWxvYWQpO1xuICAgICAgICBzZXRJdGVtcygocHJldikgPT4gWy4uLnByZXYsIHJlc10pO1xuICAgICAgICBzZXRBY3RpdmVJZChyZXMuaWQpO1xuICAgICAgfSBlbHNlIGlmIChhY3RpdmVJZCkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkudXBkYXRlV29ybGRTZXR0aW5nKHByb2plY3RJZCwgYWN0aXZlSWQsIHBheWxvYWQpO1xuICAgICAgICBzZXRJdGVtcygocHJldikgPT4gcHJldi5tYXAoKHgpID0+ICh4LmlkID09PSByZXMuaWQgPyByZXMgOiB4KSkpO1xuICAgICAgfVxuICAgICAgbm90aWZ5KFwiU2F2ZWRcIik7XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBub3RpZnkoZT8ubWVzc2FnZSB8fCBcIlNhdmUgZmFpbGVkXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTYXZpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvbkRlbGV0ZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUlkIHx8IGFjdGl2ZUlkID09PSBcIl9fbmV3X19cIikgcmV0dXJuO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hbGVydFxuICAgIGlmICghY29uZmlybShcIkRlbGV0ZSB0aGlzIHdvcmxkIGVudHJ5P1wiKSkgcmV0dXJuO1xuICAgIHNldERlbGV0aW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBhcGkuZGVsZXRlV29ybGRTZXR0aW5nKHByb2plY3RJZCwgYWN0aXZlSWQpO1xuICAgICAgc2V0SXRlbXMoKHByZXYpID0+IHByZXYuZmlsdGVyKCh4KSA9PiB4LmlkICE9PSBhY3RpdmVJZCkpO1xuICAgICAgc2V0QWN0aXZlSWQobnVsbCk7XG4gICAgICBzZXRGb3JtKHsgbmFtZTogXCJcIiwgaW1hZ2VzOiBbXSB9KTtcbiAgICAgIHNldFRyYWl0cyh7fSk7XG4gICAgICBub3RpZnkoXCJEZWxldGVkXCIpO1xuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgbm90aWZ5KGU/Lm1lc3NhZ2UgfHwgXCJEZWxldGUgZmFpbGVkXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXREZWxldGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNvdW50ID0gaXRlbXMubGVuZ3RoO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZ3JpZCBncmlkLXJvd3MtW2F1dG9fMWZyXVwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBib3JkZXItYm9yZGVyLWRlZmF1bHQgcHgtNiBweS00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LXRleHQtcHJpbWFyeVwiPldvcmxkIFNldHRpbmdzPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeVwiPntjb3VudH0gSXRlbXM8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uTmV3fSBjbGFzc05hbWU9XCJyb3VuZGVkLWxnIGJnLWJnLWVsZXZhdGVkIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgaG92ZXI6Ym9yZGVyLWFjY2VudCBob3ZlcjpiZy1iZy1ob3ZlciB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gcHgtNCBweS0zIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTAgaG92ZXI6LXRyYW5zbGF0ZS15LTAuNVwiPlxuICAgICAgICAgICAgPFBsdXMgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICBOZXcgRW50cnlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC0wIGdyaWRcIiBzdHlsZT17eyBncmlkVGVtcGxhdGVDb2x1bW5zOiBcIjM1JSA2NSVcIiB9fT5cbiAgICAgICAgPGFzaWRlIGNsYXNzTmFtZT1cImJvcmRlci1yIGJvcmRlci1ib3JkZXItZGVmYXVsdCBtaW4taC0wIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtM1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9e2ZpbHRlcn0gb25DaGFuZ2U9eyhlKSA9PiBzZXRGaWx0ZXIoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj1cIlNlYXJjaCB3b3JsZCBzZXR0aW5nc1wiIGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBwbC05IHByLTMgcHktMi41IHRleHQtc20gdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50XCIgLz5cbiAgICAgICAgICAgICAgPFNlYXJjaCBjbGFzc05hbWU9XCJ3LTQgaC00IGFic29sdXRlIGxlZnQtMyB0b3AtMyB0ZXh0LXRleHQtdGVydGlhcnlcIiAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHB4LTMgcGItM1wiPlxuICAgICAgICAgICAge2xvYWRpbmcgJiYgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC1zZWNvbmRhcnkgcHgtMiBweS0yXCI+TG9hZGluZ+KApjwvZGl2Pn1cbiAgICAgICAgICAgIHtlcnJvciAmJiA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1yZWQtNDAwIHB4LTIgcHktMiBiZy1yZWQtOTUwLzIwIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1yZWQtNTAwLzIwXCI+e2Vycm9yfTwvZGl2Pn1cbiAgICAgICAgICAgIHshbG9hZGluZyAmJiAhZmlsdGVyZWQubGVuZ3RoICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xMCB0ZXh0LWNlbnRlciB0ZXh0LXRleHQtdGVydGlhcnkgdGV4dC1zbVwiPk5vIHdvcmxkIHNldHRpbmdzIHlldC4gQ3JlYXRlIHlvdXIgZmlyc3QgZW50cnkhPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2ZpbHRlcmVkLm1hcCgodykgPT4gKFxuICAgICAgICAgICAgICA8YnV0dG9uIGtleT17dy5pZH0gb25DbGljaz17KCkgPT4gc2V0QWN0aXZlSWQody5pZCEpfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMyByb3VuZGVkLW1kIG1iLTIgdHJhbnNpdGlvbi1hbGxcIiwgYWN0aXZlSWQ9PT13LmlkID8gXCJib3JkZXItbC0yIGJvcmRlci1ibHVlLTUwMCBiZy1iZy1lbGV2YXRlZFwiIDogXCJob3ZlcjpiZy1iZy1ob3ZlclwiKSB9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtdGV4dC1wcmltYXJ5IHRydW5jYXRlXCI+e3cubmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSB0cnVuY2F0ZVwiPnt3LnN1bW1hcnkgfHwgXCJcIn08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2FzaWRlPlxuXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cIm1pbi1oLTAgb3ZlcmZsb3cteS1hdXRvIHAtNlwiIGFyaWEtbGFiZWw9XCJXb3JsZCBkZXRhaWxzXCI+XG4gICAgICAgICAge2FjdGl2ZUlkID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy0yeGwgbXgtYXV0b1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ2FwLTRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17ZHJvcFJlZn0gY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1zdGFydCBtYi0yIHAtMyByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgYmctYmctZWxldmF0ZWQgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IG1iLTJcIj5Xb3JsZCBJbWFnZXM8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwicHgtMyBweS0yIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCBiZy1iZy1wcmltYXJ5IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnkgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPFVwbG9hZCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICBVcGxvYWQgSW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgY2xhc3NOYW1lPVwiaGlkZGVuXCIgb25DaGFuZ2U9eyhlKSA9PiB7IGNvbnN0IGYgPSBlLnRhcmdldC5maWxlcz8uWzBdOyBpZiAoZikgdm9pZCBvblVwbG9hZEZpbGUoZik7IH19IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIHt1cGxvYWRpbmcgJiYgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj48TG9hZGVyMiBjbGFzc05hbWU9XCJ3LTMgaC0zIGFuaW1hdGUtc3BpblwiIC8+IFVwbG9hZGluZ+KApjwvZGl2Pn1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy00IGdhcC0yIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICB7KGZvcm0uaW1hZ2VzIHx8IFtdKS5tYXAoKHVybCwgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwicmVsYXRpdmUgZ3JvdXAgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIG92ZXJmbG93LWhpZGRlbiBiZy1iZy1wcmltYXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17dXJsfSBhbHQ9XCJ3b3JsZFwiIGNsYXNzTmFtZT1cInctZnVsbCBoLTIwIG9iamVjdC1jb3ZlclwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0xIHJpZ2h0LTEgYmctYmxhY2svNTAgdGV4dC13aGl0ZSByb3VuZGVkIHAtMSBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIlJlbW92ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEZvcm0oKGYpPT4gKHsgLi4uZiwgaW1hZ2VzOiAoZi5pbWFnZXMgfHwgW10pLmZpbHRlcigoXyxpKT0+aSE9PWlkeCkgfSkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8WCBjbGFzc05hbWU9XCJ3LTMgaC0zXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgeyEoZm9ybS5pbWFnZXMgfHwgW10pLmxlbmd0aCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeVwiPk5vIGltYWdlcyB5ZXQuIFVwbG9hZCBvciBkcm9wIGhlcmUuPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZVwiPk5hbWU8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9e2Zvcm0ubmFtZX0gb25DaGFuZ2U9eyhlKT0+c2V0Rm9ybSgoZik9Pih7IC4uLmYsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pKX0gY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTQgcHktMi41IHRleHQtdGV4dC1wcmltYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50XCIgLz5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+U3VtbWFyeTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSB2YWx1ZT17Zm9ybS5zdW1tYXJ5IHx8IFwiXCJ9IG9uQ2hhbmdlPXsoZSk9PnNldEZvcm0oKGYpPT4oeyAuLi5mLCBzdW1tYXJ5OiBlLnRhcmdldC52YWx1ZSB9KSl9IHJvd3M9ezV9IGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBweC00IHB5LTIuNSB0ZXh0LXRleHQtcHJpbWFyeSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudCB0ZXh0LXNtXCIgLz5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtWzExcHhdIHRleHQtdGV4dC10ZXJ0aWFyeVwiPnsoZm9ybS5zdW1tYXJ5IHx8IFwiXCIpLmxlbmd0aH0gY2hhcmFjdGVyczwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+VHJhaXRzPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2FkZFJvb3RLZXl9IGNsYXNzTmFtZT1cInB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXhzIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPjxQbHVzIGNsYXNzTmFtZT1cInctMyBoLTNcIiAvPiBBZGQga2V5PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICB7T2JqZWN0LmtleXModHJhaXRzIHx8IHt9KS5sZW5ndGggPT09IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnlcIj5ObyB0cmFpdHMgeWV0LiBBZGQgYSBrZXkuPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxUcmFpdE9iamVjdCBvYmo9e3RyYWl0c30gcGF0aD17W119IGRlcHRoPXsxfSAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwdC00XCI+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uRGVsZXRlfSBkaXNhYmxlZD17IWFjdGl2ZUlkIHx8IGFjdGl2ZUlkPT09XCJfX25ld19fXCIgfHwgZGVsZXRpbmd9IGNsYXNzTmFtZT1cInRleHQtcmVkLTQwMCBob3Zlcjp0ZXh0LXJlZC0zMDAgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgPFRyYXNoMiBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgRGVsZXRlIEVudHJ5XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7IHNldEFjdGl2ZUlkKG51bGwpOyB9fSBjbGFzc05hbWU9XCJweC00IHB5LTIgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6YmctYmctaG92ZXJcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblNhdmV9IGRpc2FibGVkPXtzYXZpbmd9IGNsYXNzTmFtZT1cInB4LTQgcHktMiByb3VuZGVkLW1kIGJnLWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNTAwIHRleHQtd2hpdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7c2F2aW5nID8gPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+PExvYWRlcjIgY2xhc3NOYW1lPVwidy00IGgtNCBhbmltYXRlLXNwaW5cIiAvPiBTYXZpbmfigKY8L3NwYW4+IDogXCJTYXZlIEVudHJ5XCJ9XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXRleHQtdGVydGlhcnlcIj5TZWxlY3QgYSB3b3JsZCBlbnRyeSBvciBjcmVhdGUgYSBuZXcgb25lLjwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7dG9hc3QgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIHRvcC00IHJpZ2h0LTQgei01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBweS0zIHJvdW5kZWQtbGcgYmctYmctZWxldmF0ZWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXNtIHNoYWRvdy1lbGV2YXRpb25cIj57dG9hc3R9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuLy8gTmVzdGVkIHRyYWl0cyBlZGl0b3IgKHNhbWUgYmVoYXZpb3IgYXMgQ2hhcmFjdGVyTWFuYWdlcilcbnR5cGUgVHJhaXRDdHggPSB7XG4gIHNldFZhbDogKHA6IEFycmF5PHN0cmluZ3xudW1iZXI+LCB2OiBhbnkpID0+IHZvaWQ7XG4gIGRlbEtleTogKHBwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgazogYW55KSA9PiB2b2lkO1xuICByZW5hbWVLZXk6IChwcDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIG9sZEs6IHN0cmluZywgbmV3Szogc3RyaW5nKSA9PiB2b2lkO1xuICBhZGRDaGlsZDogKHA6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBkOiBudW1iZXIpID0+IHZvaWQ7XG4gIGNvbnZlcnRUeXBlOiAocDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIHBwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgazogc3RyaW5nLCB0OiAnc3RyaW5nJ3wnb2JqZWN0J3wnYXJyYXknLCBkOiBudW1iZXIpID0+IHZvaWQ7XG4gIGFkZEFycmF5SXRlbTogKHA6IEFycmF5PHN0cmluZ3xudW1iZXI+KSA9PiB2b2lkO1xufTtcblxuZnVuY3Rpb24gdXNlV29ybGRDdHgoKTogVHJhaXRDdHgge1xuICByZXR1cm4ge1xuICAgIHNldFZhbDogKCkgPT4ge30sXG4gICAgZGVsS2V5OiAoKSA9PiB7fSxcbiAgICByZW5hbWVLZXk6ICgpID0+IHt9LFxuICAgIGFkZENoaWxkOiAoKSA9PiB7fSxcbiAgICBjb252ZXJ0VHlwZTogKCkgPT4ge30sXG4gICAgYWRkQXJyYXlJdGVtOiAoKSA9PiB7fSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gVHJhaXRPYmplY3QoeyBvYmosIHBhdGgsIGRlcHRoIH06IHsgb2JqOiBhbnk7IHBhdGg6IEFycmF5PHN0cmluZ3xudW1iZXI+OyBkZXB0aDogbnVtYmVyIH0pIHtcbiAgY29uc3QgcGFyZW50OiBUcmFpdEN0eCB8IHVuZGVmaW5lZCA9IChUcmFpdE9iamVjdCBhcyBhbnkpLl9wYXJlbnQgYXMgVHJhaXRDdHggfCB1bmRlZmluZWQ7XG4gIGNvbnN0IGN0eDogVHJhaXRDdHggPSBwYXJlbnQgfHwgdXNlV29ybGRDdHgoKTtcbiAgKFRyYWl0T2JqZWN0IGFzIGFueSkuX3BhcmVudCA9IGN0eDtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iaiB8fCB7fSk7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgIHtrZXlzLm1hcCgoaykgPT4gKFxuICAgICAgICA8VHJhaXRSb3cga2V5PXtrfSBrPXtrfSB2PXsob2JqIGFzIGFueSlba119IHBhcmVudFBhdGg9e3BhdGh9IGRlcHRoPXtkZXB0aH0gY3R4PXtjdHh9IC8+XG4gICAgICApKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVHJhaXRSb3coeyBrLCB2LCBwYXJlbnRQYXRoLCBkZXB0aCwgY3R4IH06IHsgazogc3RyaW5nOyB2OiBhbnk7IHBhcmVudFBhdGg6IEFycmF5PHN0cmluZ3xudW1iZXI+OyBkZXB0aDogbnVtYmVyOyBjdHg6IFRyYWl0Q3R4IH0pIHtcbiAgY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkodik7XG4gIGNvbnN0IGlzT2JqZWN0ID0gdiAmJiB0eXBlb2YgdiA9PT0gJ29iamVjdCcgJiYgIWlzQXJyYXk7XG4gIGNvbnN0IHR5cGU6ICdzdHJpbmcnfCdvYmplY3QnfCdhcnJheScgPSBpc0FycmF5ID8gJ2FycmF5JyA6IChpc09iamVjdCA/ICdvYmplY3QnIDogJ3N0cmluZycpO1xuICBjb25zdCBbbmFtZSwgc2V0TmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KGspO1xuICB1c2VFZmZlY3QoKCkgPT4geyBzZXROYW1lKGspOyB9LCBba10pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcC0yIGJnLWJnLWVsZXZhdGVkXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSk9PnNldE5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgIG9uQmx1cj17KCk9PnsgaWYgKG5hbWUgIT09IGsgJiYgbmFtZS50cmltKCkpIGN0eC5yZW5hbWVLZXkocGFyZW50UGF0aCwgaywgbmFtZS50cmltKCkpOyB9fVxuICAgICAgICAgIG9uS2V5RG93bj17KGUpPT57IGlmIChlLmtleSA9PT0gJ0VudGVyJykgeyAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuYmx1cigpOyB9IH19XG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJrZXlcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtbm9uZSB3LTQ4IGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTIgcHktMS41IHRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnRcIlxuICAgICAgICAvPlxuICAgICAgICA8c2VsZWN0IHZhbHVlPXt0eXBlfSBvbkNoYW5nZT17KGUpPT5jdHguY29udmVydFR5cGUoWy4uLnBhcmVudFBhdGgsIGtdLCBwYXJlbnRQYXRoLCBrLCBlLnRhcmdldC52YWx1ZSBhcyBhbnksIGRlcHRoKX0gY2xhc3NOYW1lPVwiZmxleC1ub25lIHctMjggYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtMiBweS0xLjUgdGV4dC10ZXh0LXByaW1hcnkgdGV4dC1zbSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudFwiPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJzdHJpbmdcIj5TdHJpbmc8L29wdGlvbj5cbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwib2JqZWN0XCIgZGlzYWJsZWQ9e2RlcHRoPj01fT5PYmplY3Q8L29wdGlvbj5cbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiYXJyYXlcIj5BcnJheTwvb3B0aW9uPlxuICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAge3R5cGU9PT0nc3RyaW5nJyAmJiAoXG4gICAgICAgICAgPGlucHV0IHZhbHVlPXtTdHJpbmcodiB8fCAnJyl9IG9uQ2hhbmdlPXsoZSk9PmN0eC5zZXRWYWwoWy4uLnBhcmVudFBhdGgsIGtdLCBlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPVwidmFsdWVcIiBjbGFzc05hbWU9XCJmbGV4LTEgYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtMiBweS0xLjUgdGV4dC10ZXh0LXByaW1hcnkgdGV4dC1zbSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudFwiIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxidXR0b24gb25DbGljaz17KCk9PmN0eC5kZWxLZXkocGFyZW50UGF0aCwgayl9IGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LXJlZC00MDAgdGV4dC1zbSBtbC1hdXRvXCI+PFggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+PC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICAgIHt0eXBlPT09J29iamVjdCcgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgbWwtNFwiPlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCk9PmN0eC5hZGRDaGlsZChbLi4ucGFyZW50UGF0aCwga10sIGRlcHRoKzEpfSBkaXNhYmxlZD17ZGVwdGg+PTV9IGNsYXNzTmFtZT1cInB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXhzIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPjxQbHVzIGNsYXNzTmFtZT1cInctMyBoLTNcIiAvPiBBZGQgY2hpbGQ8L2J1dHRvbj5cbiAgICAgICAgICA8VHJhaXRPYmplY3Qgb2JqPXt2fSBwYXRoPXtbLi4ucGFyZW50UGF0aCwga119IGRlcHRoPXtkZXB0aCsxfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICB7dHlwZT09PSdhcnJheScgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgbWwtNCBzcGFjZS15LTJcIj5cbiAgICAgICAgICB7KHYgYXMgc3RyaW5nW10pLm1hcCgoaXRlbSwgaWR4KSA9PiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17aWR4fSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeVwiPlt7aWR4fV08L3NwYW4+XG4gICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT17aXRlbX0gb25DaGFuZ2U9eyhlKT0+Y3R4LnNldFZhbChbLi4ucGFyZW50UGF0aCwgaywgaWR4XSwgZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj1cInZhbHVlXCIgY2xhc3NOYW1lPVwiZmxleC0xIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTIgcHktMS41IHRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnRcIiAvPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT5jdHguZGVsS2V5KFsuLi5wYXJlbnRQYXRoLCBrXSwgaWR4KX0gY2xhc3NOYW1lPVwidGV4dC10ZXh0LXRlcnRpYXJ5IGhvdmVyOnRleHQtcmVkLTQwMCB0ZXh0LXNtXCI+PFggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApKX1cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT5jdHguYWRkQXJyYXlJdGVtKFsuLi5wYXJlbnRQYXRoLCBrXSl9IGNsYXNzTmFtZT1cInB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXhzIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPjxQbHVzIGNsYXNzTmFtZT1cInctMyBoLTNcIiAvPiBBZGQgaXRlbTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlU3VwYWJhc2UiLCJjcmVhdGVBcGkiLCJMb2FkZXIyIiwiUGx1cyIsIlNlYXJjaCIsIlRyYXNoMiIsIlVwbG9hZCIsIlgiLCJjbGFzc05hbWVzIiwieHMiLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsIldvcmxkU2V0dGluZ3NNYW5hZ2VyIiwicHJvamVjdElkIiwic3VwYWJhc2UiLCJhcGkiLCJpdGVtcyIsInNldEl0ZW1zIiwibG9hZGluZyIsInNldExvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwic2V0RmlsdGVyIiwiYWN0aXZlSWQiLCJzZXRBY3RpdmVJZCIsInNhdmluZyIsInNldFNhdmluZyIsImRlbGV0aW5nIiwic2V0RGVsZXRpbmciLCJ0b2FzdCIsInNldFRvYXN0IiwidG9hc3RUaW1lciIsImZvcm0iLCJzZXRGb3JtIiwibmFtZSIsInRyYWl0cyIsInNldFRyYWl0cyIsInVwbG9hZGluZyIsInNldFVwbG9hZGluZyIsImRyb3BSZWYiLCJjYWNoZUtleSIsImFjdGl2ZUtleSIsImhhc0NhY2hlIiwic2V0SGFzQ2FjaGUiLCJpdGVtc1JlZiIsInMiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYXJyIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwidmFsaWQiLCJsZW5ndGgiLCJub3RpZnkiLCJtc2ciLCJjdXJyZW50IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIm9uVXBsb2FkRmlsZSIsImZpbGUiLCJidWNrZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfV09STERfQlVDS0VUIiwiZXh0Iiwic3BsaXQiLCJwb3AiLCJwYXRoIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInNsaWNlIiwidXBFcnIiLCJzdG9yYWdlIiwiZnJvbSIsInVwbG9hZCIsInVwc2VydCIsImNvbnRlbnRUeXBlIiwidHlwZSIsImRhdGEiLCJnZXRQdWJsaWNVcmwiLCJ1cmwiLCJwdWJsaWNVcmwiLCJmIiwiaW1hZ2VzIiwiZSIsIm1lc3NhZ2UiLCJlbCIsIm9uRHJvcCIsInByZXZlbnREZWZhdWx0IiwiZGF0YVRyYW5zZmVyIiwiZmlsZXMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJvbkRyYWciLCJhZGQiLCJvbkxlYXZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJtb3VudGVkIiwicmVzIiwibGlzdFdvcmxkU2V0dGluZ3MiLCJuZXh0Iiwic3RyaW5naWZ5Iiwic2V0SXRlbSIsInYiLCJvblVwc2VydCIsImV2IiwiY2UiLCJpdGVtIiwiZGV0YWlsIiwiaWQiLCJwcmV2IiwiaWR4IiwiZmluZEluZGV4IiwieCIsInN1bW1hcnkiLCJpdCIsImZpbmQiLCJmaWx0ZXJlZCIsInEiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsIm9uTmV3IiwiY2xvbmUiLCJvIiwic2V0VmFsIiwidmFsIiwiY3VyciIsIm54dCIsInJlZiIsImkiLCJkZWxLZXkiLCJwYXRoVG9QYXJlbnQiLCJrZXkiLCJzcGxpY2UiLCJyZW5hbWVLZXkiLCJvbGRLZXkiLCJuZXdLZXkiLCJhZGRDaGlsZCIsInBhdGhUb09iaiIsImRlcHRoIiwiYmFzZSIsImkyIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYWRkUm9vdEtleSIsImsiLCJjb252ZXJ0VHlwZSIsInBhcmVudFBhdGgiLCJuZXh0VHlwZSIsImFkZEFycmF5SXRlbSIsInBhdGhUb0FyciIsInB1c2giLCJUcmFpdE9iamVjdCIsIl9wYXJlbnQiLCJvblNhdmUiLCJwYXlsb2FkIiwidW5kZWZpbmVkIiwiY3JlYXRlV29ybGRTZXR0aW5nIiwidXBkYXRlV29ybGRTZXR0aW5nIiwibWFwIiwib25EZWxldGUiLCJjb25maXJtIiwiZGVsZXRlV29ybGRTZXR0aW5nIiwiY291bnQiLCJkaXYiLCJjbGFzc05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwic3R5bGUiLCJncmlkVGVtcGxhdGVDb2x1bW5zIiwiYXNpZGUiLCJpbnB1dCIsInZhbHVlIiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJwbGFjZWhvbGRlciIsInciLCJzZWN0aW9uIiwiYXJpYS1sYWJlbCIsImxhYmVsIiwiYWNjZXB0IiwiaW1nIiwic3JjIiwiYWx0IiwidGl0bGUiLCJfIiwic3BhbiIsInRleHRhcmVhIiwicm93cyIsImtleXMiLCJvYmoiLCJkaXNhYmxlZCIsInVzZVdvcmxkQ3R4IiwicGFyZW50IiwiY3R4IiwiVHJhaXRSb3ciLCJpc09iamVjdCIsInNldE5hbWUiLCJvbkJsdXIiLCJvbktleURvd24iLCJibHVyIiwic2VsZWN0Iiwib3B0aW9uIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/workspace/WorldSettingsManager.tsx\n");

/***/ }),

/***/ "(ssr)/./src/lib/api.ts":
/*!************************!*\
  !*** ./src/lib/api.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createApi: () => (/* binding */ createApi),\n/* harmony export */   useSSE: () => (/* binding */ useSSE)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ createApi,useSSE auto */ \nconst API_BASE = \"http://localhost:3000\" || 0;\nasync function authHeaders(supabase) {\n    const { data: { session } } = await supabase.auth.getSession();\n    const token = session?.access_token;\n    return token ? {\n        Authorization: `Bearer ${token}`\n    } : {};\n}\nasync function apiFetch(supabase, input, init = {}) {\n    const hasBody = init.body !== undefined && init.body !== null;\n    const baseHeaders = {\n        ...await authHeaders(supabase),\n        ...init.headers || {}\n    };\n    const headers = hasBody ? {\n        \"Content-Type\": \"application/json\",\n        ...baseHeaders\n    } : baseHeaders;\n    const res = await fetch(`${API_BASE}${input}`, {\n        ...init,\n        headers\n    });\n    if (!res.ok) {\n        const text = await res.text().catch(()=>\"\");\n        throw new Error(`API ${res.status}: ${text}`);\n    }\n    if (res.status === 204) return undefined;\n    return await res.json();\n}\nfunction createApi(supabase) {\n    return {\n        // Projects CRUD\n        listProjects: ()=>apiFetch(supabase, `/api/project`),\n        createProject: (body)=>apiFetch(supabase, `/api/project`, {\n                method: \"POST\",\n                body: JSON.stringify(body)\n            }),\n        getProject: (id)=>apiFetch(supabase, `/api/project/${id}`),\n        updateProject: (id, body)=>apiFetch(supabase, `/api/project/${id}`, {\n                method: \"PATCH\",\n                body: JSON.stringify(body)\n            }),\n        deleteProject: (id)=>apiFetch(supabase, `/api/project/${id}`, {\n                method: \"DELETE\"\n            }),\n        // Project settings\n        updateProjectSettings: (id, body)=>apiFetch(supabase, `/api/project/${id}/settings`, {\n                method: \"PATCH\",\n                body: JSON.stringify(body)\n            }),\n        // Chat\n        // Legacy (per-project) - will be replaced by chatId-based endpoints\n        getChatMessages: (projectId)=>apiFetch(supabase, `/api/project/${projectId}/chat/messages`),\n        // Chats (per project)\n        listChats: (projectId)=>apiFetch(supabase, `/api/project/${projectId}/chats`),\n        createChat: (projectId, body)=>apiFetch(supabase, `/api/project/${projectId}/chats`, {\n                method: \"POST\",\n                body: JSON.stringify(body)\n            }),\n        renameChat: (projectId, chatId, title)=>apiFetch(supabase, `/api/project/${projectId}/chats/${chatId}`, {\n                method: \"PATCH\",\n                body: JSON.stringify({\n                    title\n                })\n            }),\n        deleteChat: (projectId, chatId)=>apiFetch(supabase, `/api/project/${projectId}/chats/${chatId}`, {\n                method: \"DELETE\"\n            }),\n        // Chat messages by chatId\n        getChatMessagesByChatId: (chatId)=>apiFetch(supabase, `/api/chat/${chatId}/messages`),\n        // Chapters\n        createChapter: (projectId, payload)=>apiFetch(supabase, `/api/project/${projectId}/chapter`, {\n                method: \"POST\",\n                body: JSON.stringify(payload)\n            }),\n        // Chapter previews\n        getChapterSummary: (projectId)=>apiFetch(supabase, `/api/project/${projectId}/chapters/summary`),\n        // Paginated chapters for reader\n        listChaptersPaginated: (projectId, page, limit)=>apiFetch(supabase, `/api/project/${projectId}/chapters?page=${encodeURIComponent(page)}&limit=${encodeURIComponent(limit)}`),\n        // Update chapter\n        updateChapter: (projectId, chapterId, payload)=>apiFetch(supabase, `/api/project/${projectId}/chapter/${chapterId}`, {\n                method: \"PATCH\",\n                body: JSON.stringify(payload)\n            }),\n        // Delete chapter\n        deleteChapter: (projectId, chapterId)=>apiFetch(supabase, `/api/project/${projectId}/chapter/${chapterId}`, {\n                method: \"DELETE\"\n            }),\n        // Characters\n        listCharacters: (projectId)=>apiFetch(supabase, `/api/project/${projectId}/characters`),\n        createCharacter: (projectId, body)=>apiFetch(supabase, `/api/project/${projectId}/characters`, {\n                method: \"POST\",\n                body: JSON.stringify(body)\n            }),\n        updateCharacter: (projectId, charId, body)=>apiFetch(supabase, `/api/project/${projectId}/characters/${charId}`, {\n                method: \"PATCH\",\n                body: JSON.stringify(body)\n            }),\n        deleteCharacter: (projectId, charId)=>apiFetch(supabase, `/api/project/${projectId}/characters/${charId}`, {\n                method: \"DELETE\"\n            }),\n        // World Settings\n        listWorldSettings: (projectId)=>apiFetch(supabase, `/api/project/${projectId}/world`),\n        createWorldSetting: (projectId, body)=>apiFetch(supabase, `/api/project/${projectId}/world`, {\n                method: \"POST\",\n                body: JSON.stringify(body)\n            }),\n        updateWorldSetting: (projectId, wsId, body)=>apiFetch(supabase, `/api/project/${projectId}/world/${wsId}`, {\n                method: \"PATCH\",\n                body: JSON.stringify(body)\n            }),\n        deleteWorldSetting: (projectId, wsId)=>apiFetch(supabase, `/api/project/${projectId}/world/${wsId}`, {\n                method: \"DELETE\"\n            }),\n        // Chat (SSE should be used via useSSE below)\n        // Streaming chat by chatId (SSE)\n        postChat: async (chatId, body, onEvent)=>{\n            const headers = {\n                \"Content-Type\": \"application/json\",\n                ...await authHeaders(supabase)\n            };\n            const res = await fetch(`${API_BASE}/api/chat/${chatId}`, {\n                method: \"POST\",\n                headers,\n                body: JSON.stringify(body)\n            });\n            if (!res.ok || !res.body) {\n                const text = await res.text().catch(()=>\"\");\n                throw new Error(`Chat stream error ${res.status}: ${text}`);\n            }\n            const reader = res.body.getReader();\n            const decoder = new TextDecoder();\n            try {\n                while(true){\n                    const { value, done } = await reader.read();\n                    if (done) break;\n                    const chunk = decoder.decode(value, {\n                        stream: true\n                    });\n                    for (const line of chunk.split(\"\\n\")){\n                        const trimmed = line.trim();\n                        if (!trimmed.startsWith(\"data:\")) continue;\n                        const data = trimmed.slice(5).trim();\n                        if (!data) continue;\n                        try {\n                            onEvent(JSON.parse(data));\n                        } catch  {}\n                    }\n                }\n            } finally{\n                reader.releaseLock();\n            }\n        },\n        // Text generation (SSE)\n        generateTextStream: async (body, onEvent)=>{\n            const headers = {\n                \"Content-Type\": \"application/json\",\n                ...await authHeaders(supabase)\n            };\n            const res = await fetch(`${API_BASE}/api/generate/text`, {\n                method: \"POST\",\n                headers,\n                body: JSON.stringify(body)\n            });\n            if (!res.ok || !res.body) {\n                const text = await res.text().catch(()=>\"\");\n                throw new Error(`Text stream error ${res.status}: ${text}`);\n            }\n            const reader = res.body.getReader();\n            const decoder = new TextDecoder();\n            try {\n                while(true){\n                    const { value, done } = await reader.read();\n                    if (done) break;\n                    const chunk = decoder.decode(value, {\n                        stream: true\n                    });\n                    for (const line of chunk.split(\"\\n\")){\n                        const trimmed = line.trim();\n                        if (!trimmed.startsWith(\"data:\")) continue;\n                        const data = trimmed.slice(5).trim();\n                        if (!data) continue;\n                        try {\n                            onEvent(JSON.parse(data));\n                        } catch  {}\n                    }\n                }\n            } finally{\n                reader.releaseLock();\n            }\n        },\n        // Image generation (queued)\n        generateImage: (body)=>apiFetch(supabase, `/api/generate/image`, {\n                method: \"POST\",\n                body: JSON.stringify(body)\n            })\n    };\n}\n// Generic SSE hook for any endpoint that streams Server-Sent Events (data: {json})\nfunction useSSE() {\n    const controllerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const [streaming, setStreaming] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        controllerRef.current?.abort();\n        controllerRef.current = null;\n        setStreaming(false);\n    }, []);\n    const start = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (opts)=>{\n        const ctl = new AbortController();\n        controllerRef.current = ctl;\n        setStreaming(true);\n        try {\n            const res = await fetch(opts.url, {\n                method: opts.method || \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    ...opts.headers || {}\n                },\n                body: opts.body ? JSON.stringify(opts.body) : undefined,\n                signal: ctl.signal\n            });\n            if (!res.ok || !res.body) {\n                const text = await res.text().catch(()=>\"\");\n                throw new Error(`SSE ${res.status}: ${text}`);\n            }\n            const reader = res.body.getReader();\n            const decoder = new TextDecoder();\n            try {\n                while(true){\n                    const { value, done } = await reader.read();\n                    if (done) break;\n                    const chunk = decoder.decode(value, {\n                        stream: true\n                    });\n                    for (const line of chunk.split(\"\\n\")){\n                        const trimmed = line.trim();\n                        if (!trimmed.startsWith(\"data:\")) continue;\n                        const data = trimmed.slice(5).trim();\n                        if (!data) continue;\n                        try {\n                            opts.onEvent(JSON.parse(data));\n                        } catch  {}\n                    }\n                }\n                opts.onDone?.();\n            } finally{\n                reader.releaseLock();\n            }\n        } catch (e) {\n            if (e?.name !== \"AbortError\") opts.onError?.(e);\n        } finally{\n            setStreaming(false);\n        }\n    }, []);\n    return {\n        start,\n        stop,\n        streaming\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEI7UUFDRixFQUFFLE9BQU9pQixHQUFRO1lBQ2YsSUFBSUEsR0FBR0MsU0FBUyxjQUFjUCxLQUFLUSxPQUFPLEdBQUdGO1FBQy9DLFNBQVU7WUFDUlgsYUFBYTtRQUNmO0lBQ0YsR0FBRyxFQUFFO0lBRUwsT0FBTztRQUFFSTtRQUFPSDtRQUFNRjtJQUFVO0FBQ2xDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Ly4vc3JjL2xpYi9hcGkudHM/MmZhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHR5cGUgeyBTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuY29uc3QgQVBJX0JBU0UgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xuXG5hc3luYyBmdW5jdGlvbiBhdXRoSGVhZGVycyhzdXBhYmFzZTogU3VwYWJhc2VDbGllbnQpIHtcbiAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XG4gIGNvbnN0IHRva2VuID0gc2Vzc2lvbj8uYWNjZXNzX3Rva2VuO1xuICByZXR1cm4gdG9rZW4gPyB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gIH0gOiB7fTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gYXBpRmV0Y2g8VCA9IGFueT4oXG4gIHN1cGFiYXNlOiBTdXBhYmFzZUNsaWVudCxcbiAgaW5wdXQ6IHN0cmluZyxcbiAgaW5pdDogUmVxdWVzdEluaXQgPSB7fVxuKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IGhhc0JvZHkgPSBpbml0LmJvZHkgIT09IHVuZGVmaW5lZCAmJiBpbml0LmJvZHkgIT09IG51bGw7XG4gIGNvbnN0IGJhc2VIZWFkZXJzID0ge1xuICAgIC4uLihhd2FpdCBhdXRoSGVhZGVycyhzdXBhYmFzZSkpLFxuICAgIC4uLihpbml0LmhlYWRlcnMgfHwge30pLFxuICB9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGNvbnN0IGhlYWRlcnMgPSBoYXNCb2R5ID8geyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAuLi5iYXNlSGVhZGVycyB9IDogYmFzZUhlYWRlcnM7XG5cbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QVBJX0JBU0V9JHtpbnB1dH1gLCB7IC4uLmluaXQsIGhlYWRlcnMgfSk7XG4gIGlmICghcmVzLm9rKSB7XG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCkuY2F0Y2goKCkgPT4gJycpO1xuICAgIHRocm93IG5ldyBFcnJvcihgQVBJICR7cmVzLnN0YXR1c306ICR7dGV4dH1gKTtcbiAgfVxuICBpZiAocmVzLnN0YXR1cyA9PT0gMjA0KSByZXR1cm4gdW5kZWZpbmVkIGFzIHVua25vd24gYXMgVDtcbiAgcmV0dXJuIChhd2FpdCByZXMuanNvbigpKSBhcyBUO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQXBpKHN1cGFiYXNlOiBTdXBhYmFzZUNsaWVudCkge1xuICByZXR1cm4ge1xuICAgIC8vIFByb2plY3RzIENSVURcbiAgICBsaXN0UHJvamVjdHM6ICgpID0+XG4gICAgICBhcGlGZXRjaDxhbnlbXT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3RgKSxcbiAgICBjcmVhdGVQcm9qZWN0OiAoYm9keTogeyB0aXRsZTogc3RyaW5nOyBkZXNjcmlwdGlvbj86IHN0cmluZyB9KSA9PlxuICAgICAgYXBpRmV0Y2g8eyBpZDogc3RyaW5nIH0+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0YCwgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSkgfSksXG5cbiAgICBnZXRQcm9qZWN0OiAoaWQ6IHN0cmluZykgPT5cbiAgICAgIGFwaUZldGNoPGFueT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtpZH1gKSxcblxuICAgIHVwZGF0ZVByb2plY3Q6IChpZDogc3RyaW5nLCBib2R5OiB7IHRpdGxlPzogc3RyaW5nOyBkZXNjcmlwdGlvbj86IHN0cmluZyB9KSA9PlxuICAgICAgYXBpRmV0Y2g8YW55PihzdXBhYmFzZSwgYC9hcGkvcHJvamVjdC8ke2lkfWAsIHsgbWV0aG9kOiAnUEFUQ0gnLCBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSB9KSxcblxuICAgIGRlbGV0ZVByb2plY3Q6IChpZDogc3RyaW5nKSA9PlxuICAgICAgYXBpRmV0Y2g8dm9pZD4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtpZH1gLCB7IG1ldGhvZDogJ0RFTEVURScgfSksXG5cbiAgICAvLyBQcm9qZWN0IHNldHRpbmdzXG4gICAgdXBkYXRlUHJvamVjdFNldHRpbmdzOiAoXG4gICAgICBpZDogc3RyaW5nLFxuICAgICAgYm9keTogeyBnZW5yZT86IHN0cmluZzsgd29ybGROYW1lPzogc3RyaW5nOyBjb3JlQ29uZmxpY3Q/OiBzdHJpbmc7IHNldHRpbmdzSnNvbj86IGFueTsgbW9kZT86ICdub3ZlbCcgfCAnbWFuaHdhJyB8ICdjb252ZXJ0JyB9XG4gICAgKSA9PiBhcGlGZXRjaDxhbnk+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7aWR9L3NldHRpbmdzYCwgeyBtZXRob2Q6ICdQQVRDSCcsIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpIH0pLFxuXG4gICAgLy8gQ2hhdFxuICAgIC8vIExlZ2FjeSAocGVyLXByb2plY3QpIC0gd2lsbCBiZSByZXBsYWNlZCBieSBjaGF0SWQtYmFzZWQgZW5kcG9pbnRzXG4gICAgZ2V0Q2hhdE1lc3NhZ2VzOiAocHJvamVjdElkOiBzdHJpbmcpID0+XG4gICAgICBhcGlGZXRjaDxhbnlbXT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXQvbWVzc2FnZXNgKSxcblxuICAgIC8vIENoYXRzIChwZXIgcHJvamVjdClcbiAgICBsaXN0Q2hhdHM6IChwcm9qZWN0SWQ6IHN0cmluZykgPT5cbiAgICAgIGFwaUZldGNoPGFueVtdPihzdXBhYmFzZSwgYC9hcGkvcHJvamVjdC8ke3Byb2plY3RJZH0vY2hhdHNgKSxcbiAgICBjcmVhdGVDaGF0OiAocHJvamVjdElkOiBzdHJpbmcsIGJvZHk6IHsgdHlwZTogJ3Bsb3QnfCdjaGFyYWN0ZXInfCd3b3JsZCc7IHRpdGxlPzogc3RyaW5nIH0pID0+XG4gICAgICBhcGlGZXRjaDxhbnk+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGF0c2AsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpIH0pLFxuICAgIHJlbmFtZUNoYXQ6IChwcm9qZWN0SWQ6IHN0cmluZywgY2hhdElkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcpID0+XG4gICAgICBhcGlGZXRjaDxhbnk+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGF0cy8ke2NoYXRJZH1gLCB7IG1ldGhvZDogJ1BBVENIJywgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0aXRsZSB9KSB9KSxcbiAgICBkZWxldGVDaGF0OiAocHJvamVjdElkOiBzdHJpbmcsIGNoYXRJZDogc3RyaW5nKSA9PlxuICAgICAgYXBpRmV0Y2g8dm9pZD4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXRzLyR7Y2hhdElkfWAsIHsgbWV0aG9kOiAnREVMRVRFJyB9KSxcblxuICAgIC8vIENoYXQgbWVzc2FnZXMgYnkgY2hhdElkXG4gICAgZ2V0Q2hhdE1lc3NhZ2VzQnlDaGF0SWQ6IChjaGF0SWQ6IHN0cmluZykgPT5cbiAgICAgIGFwaUZldGNoPGFueVtdPihzdXBhYmFzZSwgYC9hcGkvY2hhdC8ke2NoYXRJZH0vbWVzc2FnZXNgKSxcblxuICAgIC8vIENoYXB0ZXJzXG4gICAgY3JlYXRlQ2hhcHRlcjogKHByb2plY3RJZDogc3RyaW5nLCBwYXlsb2FkOiB7IHRpdGxlOiBzdHJpbmc7IGNvbnRlbnQ/OiBzdHJpbmc7IHBhbmVsX3NjcmlwdD86IGFueTsgYnJhbmNoSWQ/OiBzdHJpbmc7IGlzQ2Fub24/OiBib29sZWFuIH0pID0+XG4gICAgICBhcGlGZXRjaDx7IGlkOiBzdHJpbmc7IHRpdGxlOiBzdHJpbmcgfT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXB0ZXJgLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSB9KSxcblxuICAgIC8vIENoYXB0ZXIgcHJldmlld3NcbiAgICBnZXRDaGFwdGVyU3VtbWFyeTogKHByb2plY3RJZDogc3RyaW5nKSA9PlxuICAgICAgYXBpRmV0Y2g8eyBjb3VudDogbnVtYmVyOyBzbmlwcGV0OiBzdHJpbmcgfT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXB0ZXJzL3N1bW1hcnlgKSxcblxuICAgIC8vIFBhZ2luYXRlZCBjaGFwdGVycyBmb3IgcmVhZGVyXG4gICAgbGlzdENoYXB0ZXJzUGFnaW5hdGVkOiAocHJvamVjdElkOiBzdHJpbmcsIHBhZ2U6IG51bWJlciwgbGltaXQ6IG51bWJlcikgPT5cbiAgICAgIGFwaUZldGNoPHsgaXRlbXM6IGFueVtdOyB0b3RhbDogbnVtYmVyIH0+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGFwdGVycz9wYWdlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhZ2UpfSZsaW1pdD0ke2VuY29kZVVSSUNvbXBvbmVudChsaW1pdCl9YCksXG5cbiAgICAvLyBVcGRhdGUgY2hhcHRlclxuICAgIHVwZGF0ZUNoYXB0ZXI6IChcbiAgICAgIHByb2plY3RJZDogc3RyaW5nLFxuICAgICAgY2hhcHRlcklkOiBzdHJpbmcsXG4gICAgICBwYXlsb2FkOiB7IHRpdGxlPzogc3RyaW5nOyBjb250ZW50Pzogc3RyaW5nOyBwYW5lbF9zY3JpcHQ/OiBhbnkgfVxuICAgICkgPT4gYXBpRmV0Y2g8YW55PihzdXBhYmFzZSwgYC9hcGkvcHJvamVjdC8ke3Byb2plY3RJZH0vY2hhcHRlci8ke2NoYXB0ZXJJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICB9KSxcblxuICAgIC8vIERlbGV0ZSBjaGFwdGVyXG4gICAgZGVsZXRlQ2hhcHRlcjogKFxuICAgICAgcHJvamVjdElkOiBzdHJpbmcsXG4gICAgICBjaGFwdGVySWQ6IHN0cmluZyxcbiAgICApID0+IGFwaUZldGNoPHZvaWQ+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGFwdGVyLyR7Y2hhcHRlcklkfWAsIHsgbWV0aG9kOiAnREVMRVRFJyB9KSxcblxuICAgIC8vIENoYXJhY3RlcnNcbiAgICBsaXN0Q2hhcmFjdGVyczogKHByb2plY3RJZDogc3RyaW5nKSA9PlxuICAgICAgYXBpRmV0Y2g8YW55W10+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGFyYWN0ZXJzYCksXG4gICAgY3JlYXRlQ2hhcmFjdGVyOiAoXG4gICAgICBwcm9qZWN0SWQ6IHN0cmluZyxcbiAgICAgIGJvZHk6IHsgbmFtZTogc3RyaW5nOyByb2xlPzogc3RyaW5nOyBzdW1tYXJ5Pzogc3RyaW5nOyBpbWFnZVVybD86IHN0cmluZzsgdHJhaXRzPzogYW55OyB0cmFpdHNPcHM/OiBBcnJheTx7IG9wOiAnc2V0J3wnZGVsZXRlJzsgcGF0aDogc3RyaW5nW107IHZhbHVlPzogYW55IH0+IH1cbiAgICApID0+IGFwaUZldGNoPGFueT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXJhY3RlcnNgLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSB9KSxcbiAgICB1cGRhdGVDaGFyYWN0ZXI6IChcbiAgICAgIHByb2plY3RJZDogc3RyaW5nLFxuICAgICAgY2hhcklkOiBzdHJpbmcsXG4gICAgICBib2R5OiB7IG5hbWU/OiBzdHJpbmc7IHJvbGU/OiBzdHJpbmc7IHN1bW1hcnk/OiBzdHJpbmc7IGltYWdlVXJsPzogc3RyaW5nIHwgbnVsbDsgdHJhaXRzPzogYW55OyB0cmFpdHNPcHM/OiBBcnJheTx7IG9wOiAnc2V0J3wnZGVsZXRlJzsgcGF0aDogc3RyaW5nW107IHZhbHVlPzogYW55IH0+IH1cbiAgICApID0+IGFwaUZldGNoPGFueT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXJhY3RlcnMvJHtjaGFySWR9YCwgeyBtZXRob2Q6ICdQQVRDSCcsIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpIH0pLFxuICAgIGRlbGV0ZUNoYXJhY3RlcjogKFxuICAgICAgcHJvamVjdElkOiBzdHJpbmcsXG4gICAgICBjaGFySWQ6IHN0cmluZyxcbiAgICApID0+IGFwaUZldGNoPHZvaWQ+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGFyYWN0ZXJzLyR7Y2hhcklkfWAsIHsgbWV0aG9kOiAnREVMRVRFJyB9KSxcblxuICAgIC8vIFdvcmxkIFNldHRpbmdzXG4gICAgbGlzdFdvcmxkU2V0dGluZ3M6IChwcm9qZWN0SWQ6IHN0cmluZykgPT5cbiAgICAgIGFwaUZldGNoPGFueVtdPihzdXBhYmFzZSwgYC9hcGkvcHJvamVjdC8ke3Byb2plY3RJZH0vd29ybGRgKSxcbiAgICBjcmVhdGVXb3JsZFNldHRpbmc6IChcbiAgICAgIHByb2plY3RJZDogc3RyaW5nLFxuICAgICAgYm9keTogeyBuYW1lOiBzdHJpbmc7IHN1bW1hcnk/OiBzdHJpbmc7IHRyYWl0cz86IGFueTsgdHJhaXRzT3BzPzogQXJyYXk8eyBvcDogJ3NldCd8J2RlbGV0ZSc7IHBhdGg6IHN0cmluZ1tdOyB2YWx1ZT86IGFueSB9PiB9XG4gICAgKSA9PiBhcGlGZXRjaDxhbnk+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS93b3JsZGAsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpIH0pLFxuICAgIHVwZGF0ZVdvcmxkU2V0dGluZzogKFxuICAgICAgcHJvamVjdElkOiBzdHJpbmcsXG4gICAgICB3c0lkOiBzdHJpbmcsXG4gICAgICBib2R5OiB7IG5hbWU/OiBzdHJpbmc7IHN1bW1hcnk/OiBzdHJpbmc7IHRyYWl0cz86IGFueTsgdHJhaXRzT3BzPzogQXJyYXk8eyBvcDogJ3NldCd8J2RlbGV0ZSc7IHBhdGg6IHN0cmluZ1tdOyB2YWx1ZT86IGFueSB9PiB9XG4gICAgKSA9PiBhcGlGZXRjaDxhbnk+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS93b3JsZC8ke3dzSWR9YCwgeyBtZXRob2Q6ICdQQVRDSCcsIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpIH0pLFxuICAgIGRlbGV0ZVdvcmxkU2V0dGluZzogKFxuICAgICAgcHJvamVjdElkOiBzdHJpbmcsXG4gICAgICB3c0lkOiBzdHJpbmcsXG4gICAgKSA9PiBhcGlGZXRjaDx2b2lkPihzdXBhYmFzZSwgYC9hcGkvcHJvamVjdC8ke3Byb2plY3RJZH0vd29ybGQvJHt3c0lkfWAsIHsgbWV0aG9kOiAnREVMRVRFJyB9KSxcblxuICAgIC8vIENoYXQgKFNTRSBzaG91bGQgYmUgdXNlZCB2aWEgdXNlU1NFIGJlbG93KVxuICAgIC8vIFN0cmVhbWluZyBjaGF0IGJ5IGNoYXRJZCAoU1NFKVxuICAgIHBvc3RDaGF0OiBhc3luYyAoXG4gICAgICBjaGF0SWQ6IHN0cmluZyxcbiAgICAgIGJvZHk6IHsgbWVzc2FnZTogc3RyaW5nOyByZWdlbmVyYXRlUGFuZWxJZD86IHN0cmluZzsgY2xpZW50TW9kZT86ICdjaGF0J3wnYWN0aW9uJzsgbWVudGlvbnM/OiBhbnkgfSxcbiAgICAgIG9uRXZlbnQ6IChldnQ6IGFueSkgPT4gdm9pZFxuICAgICkgPT4ge1xuICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgLi4uKGF3YWl0IGF1dGhIZWFkZXJzKHN1cGFiYXNlKSksXG4gICAgICB9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0FQSV9CQVNFfS9hcGkvY2hhdC8ke2NoYXRJZH1gLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlcy5vayB8fCAhcmVzLmJvZHkpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCkuY2F0Y2goKCkgPT4gJycpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENoYXQgc3RyZWFtIGVycm9yICR7cmVzLnN0YXR1c306ICR7dGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVhZGVyID0gcmVzLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICB0cnkge1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xuICAgICAgICAgIGNvbnN0IGNodW5rID0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pO1xuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBjaHVuay5zcGxpdCgnXFxuJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghdHJpbW1lZC5zdGFydHNXaXRoKCdkYXRhOicpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0cmltbWVkLnNsaWNlKDUpLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghZGF0YSkgY29udGludWU7XG4gICAgICAgICAgICB0cnkgeyBvbkV2ZW50KEpTT04ucGFyc2UoZGF0YSkpOyB9IGNhdGNoIHt9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gVGV4dCBnZW5lcmF0aW9uIChTU0UpXG4gICAgZ2VuZXJhdGVUZXh0U3RyZWFtOiBhc3luYyAoXG4gICAgICBib2R5OiB7IHByb21wdDogc3RyaW5nOyBwcm9qZWN0SWQ6IHN0cmluZyB9LFxuICAgICAgb25FdmVudDogKGV2dDogYW55KSA9PiB2b2lkXG4gICAgKSA9PiB7XG4gICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAuLi4oYXdhaXQgYXV0aEhlYWRlcnMoc3VwYWJhc2UpKSxcbiAgICAgIH0gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QVBJX0JBU0V9L2FwaS9nZW5lcmF0ZS90ZXh0YCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVzLm9rIHx8ICFyZXMuYm9keSkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKS5jYXRjaCgoKSA9PiAnJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVGV4dCBzdHJlYW0gZXJyb3IgJHtyZXMuc3RhdHVzfTogJHt0ZXh0fWApO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVhZGVyID0gcmVzLmJvZHkuZ2V0UmVhZGVyKCk7XG4gICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICB0cnkge1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xuICAgICAgICAgIGNvbnN0IGNodW5rID0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pO1xuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBjaHVuay5zcGxpdCgnXFxuJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghdHJpbW1lZC5zdGFydHNXaXRoKCdkYXRhOicpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0cmltbWVkLnNsaWNlKDUpLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghZGF0YSkgY29udGludWU7XG4gICAgICAgICAgICB0cnkgeyBvbkV2ZW50KEpTT04ucGFyc2UoZGF0YSkpOyB9IGNhdGNoIHt9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gSW1hZ2UgZ2VuZXJhdGlvbiAocXVldWVkKVxuICAgIGdlbmVyYXRlSW1hZ2U6IChib2R5OiB7IGRlc2NyaXB0aW9uOiBzdHJpbmc7IHN0eWxlPzogc3RyaW5nOyBwcm9qZWN0SWQ/OiBzdHJpbmcgfSkgPT5cbiAgICAgIGFwaUZldGNoPHsgam9iSWQ6IHN0cmluZyB9PihzdXBhYmFzZSwgYC9hcGkvZ2VuZXJhdGUvaW1hZ2VgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgIH0pLFxuICB9O1xufVxuXG5leHBvcnQgdHlwZSBTU0VTdGFydE9wdGlvbnMgPSB7XG4gIHVybDogc3RyaW5nO1xuICBtZXRob2Q/OiAnR0VUJyB8ICdQT1NUJyB8ICdQVVQnIHwgJ1BBVENIJyB8ICdERUxFVEUnO1xuICBoZWFkZXJzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgYm9keT86IGFueTtcbiAgb25FdmVudDogKGV2dDogYW55KSA9PiB2b2lkO1xuICBvbkRvbmU/OiAoKSA9PiB2b2lkO1xuICBvbkVycm9yPzogKGVycjogRXJyb3IpID0+IHZvaWQ7XG59O1xuXG4vLyBHZW5lcmljIFNTRSBob29rIGZvciBhbnkgZW5kcG9pbnQgdGhhdCBzdHJlYW1zIFNlcnZlci1TZW50IEV2ZW50cyAoZGF0YToge2pzb259KVxuZXhwb3J0IGZ1bmN0aW9uIHVzZVNTRSgpIHtcbiAgY29uc3QgY29udHJvbGxlclJlZiA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3N0cmVhbWluZywgc2V0U3RyZWFtaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBzdG9wID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnRyb2xsZXJSZWYuY3VycmVudD8uYWJvcnQoKTtcbiAgICBjb250cm9sbGVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIHNldFN0cmVhbWluZyhmYWxzZSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBzdGFydCA9IHVzZUNhbGxiYWNrKGFzeW5jIChvcHRzOiBTU0VTdGFydE9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBjdGwgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29udHJvbGxlclJlZi5jdXJyZW50ID0gY3RsO1xuICAgIHNldFN0cmVhbWluZyh0cnVlKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChvcHRzLnVybCwge1xuICAgICAgICBtZXRob2Q6IG9wdHMubWV0aG9kIHx8ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAuLi4ob3B0cy5oZWFkZXJzIHx8IHt9KSB9LFxuICAgICAgICBib2R5OiBvcHRzLmJvZHkgPyBKU09OLnN0cmluZ2lmeShvcHRzLmJvZHkpIDogdW5kZWZpbmVkLFxuICAgICAgICBzaWduYWw6IGN0bC5zaWduYWwsXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXMub2sgfHwgIXJlcy5ib2R5KSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpLmNhdGNoKCgpID0+ICcnKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTU0UgJHtyZXMuc3RhdHVzfTogJHt0ZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZWFkZXIgPSByZXMuYm9keS5nZXRSZWFkZXIoKTtcbiAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICBpZiAoZG9uZSkgYnJlYWs7XG4gICAgICAgICAgY29uc3QgY2h1bmsgPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGNodW5rLnNwbGl0KCdcXG4nKSkge1xuICAgICAgICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuICAgICAgICAgICAgaWYgKCF0cmltbWVkLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRyaW1tZWQuc2xpY2UoNSkudHJpbSgpO1xuICAgICAgICAgICAgaWYgKCFkYXRhKSBjb250aW51ZTtcbiAgICAgICAgICAgIHRyeSB7IG9wdHMub25FdmVudChKU09OLnBhcnNlKGRhdGEpKTsgfSBjYXRjaCB7fVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvcHRzLm9uRG9uZT8uKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgIGlmIChlPy5uYW1lICE9PSAnQWJvcnRFcnJvcicpIG9wdHMub25FcnJvcj8uKGUpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTdHJlYW1pbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIHJldHVybiB7IHN0YXJ0LCBzdG9wLCBzdHJlYW1pbmcgfSBhcyBjb25zdDtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZVJlZiIsInVzZVN0YXRlIiwiQVBJX0JBU0UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsImF1dGhIZWFkZXJzIiwic3VwYWJhc2UiLCJkYXRhIiwic2Vzc2lvbiIsImF1dGgiLCJnZXRTZXNzaW9uIiwidG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJBdXRob3JpemF0aW9uIiwiYXBpRmV0Y2giLCJpbnB1dCIsImluaXQiLCJoYXNCb2R5IiwiYm9keSIsInVuZGVmaW5lZCIsImJhc2VIZWFkZXJzIiwiaGVhZGVycyIsInJlcyIsImZldGNoIiwib2siLCJ0ZXh0IiwiY2F0Y2giLCJFcnJvciIsInN0YXR1cyIsImpzb24iLCJjcmVhdGVBcGkiLCJsaXN0UHJvamVjdHMiLCJjcmVhdGVQcm9qZWN0IiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldFByb2plY3QiLCJpZCIsInVwZGF0ZVByb2plY3QiLCJkZWxldGVQcm9qZWN0IiwidXBkYXRlUHJvamVjdFNldHRpbmdzIiwiZ2V0Q2hhdE1lc3NhZ2VzIiwicHJvamVjdElkIiwibGlzdENoYXRzIiwiY3JlYXRlQ2hhdCIsInJlbmFtZUNoYXQiLCJjaGF0SWQiLCJ0aXRsZSIsImRlbGV0ZUNoYXQiLCJnZXRDaGF0TWVzc2FnZXNCeUNoYXRJZCIsImNyZWF0ZUNoYXB0ZXIiLCJwYXlsb2FkIiwiZ2V0Q2hhcHRlclN1bW1hcnkiLCJsaXN0Q2hhcHRlcnNQYWdpbmF0ZWQiLCJwYWdlIiwibGltaXQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ1cGRhdGVDaGFwdGVyIiwiY2hhcHRlcklkIiwiZGVsZXRlQ2hhcHRlciIsImxpc3RDaGFyYWN0ZXJzIiwiY3JlYXRlQ2hhcmFjdGVyIiwidXBkYXRlQ2hhcmFjdGVyIiwiY2hhcklkIiwiZGVsZXRlQ2hhcmFjdGVyIiwibGlzdFdvcmxkU2V0dGluZ3MiLCJjcmVhdGVXb3JsZFNldHRpbmciLCJ1cGRhdGVXb3JsZFNldHRpbmciLCJ3c0lkIiwiZGVsZXRlV29ybGRTZXR0aW5nIiwicG9zdENoYXQiLCJvbkV2ZW50IiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwidmFsdWUiLCJkb25lIiwicmVhZCIsImNodW5rIiwiZGVjb2RlIiwic3RyZWFtIiwibGluZSIsInNwbGl0IiwidHJpbW1lZCIsInRyaW0iLCJzdGFydHNXaXRoIiwic2xpY2UiLCJwYXJzZSIsInJlbGVhc2VMb2NrIiwiZ2VuZXJhdGVUZXh0U3RyZWFtIiwiZ2VuZXJhdGVJbWFnZSIsInVzZVNTRSIsImNvbnRyb2xsZXJSZWYiLCJzdHJlYW1pbmciLCJzZXRTdHJlYW1pbmciLCJzdG9wIiwiY3VycmVudCIsImFib3J0Iiwic3RhcnQiLCJvcHRzIiwiY3RsIiwiQWJvcnRDb250cm9sbGVyIiwidXJsIiwic2lnbmFsIiwib25Eb25lIiwiZSIsIm5hbWUiLCJvbkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/api.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/globals.css":
/*!*****************************!*\
  !*** ./src/app/globals.css ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"6b092be5b728\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2dsb2JhbHMuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Ly4vc3JjL2FwcC9nbG9iYWxzLmNzcz9jNWYyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiNmIwOTJiZTViNzI4XCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/globals.css\n");

/***/ }),

/***/ "(rsc)/./src/app/layout.tsx":
/*!****************************!*\
  !*** ./src/app/layout.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata),\n/* harmony export */   viewport: () => (/* binding */ viewport)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./src/app/globals.css\");\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(rsc)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _components_pwa_RegisterSW__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/pwa/RegisterSW */ \"(rsc)/./src/components/pwa/RegisterSW.tsx\");\n\n\n\n\nconst metadata = {\n    title: \"InkVerse\",\n    description: \"AI manhwa creation suite\",\n    manifest: \"/manifest.webmanifest\"\n};\nconst viewport = {\n    themeColor: \"#0f172a\"\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            className: \"min-h-screen bg-slate-950 text-slate-100\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.SupabaseProvider, {\n                    children: children\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/app/layout.tsx\",\n                    lineNumber: 20,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_pwa_RegisterSW__WEBPACK_IMPORTED_MODULE_3__.RegisterSW, {}, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/app/layout.tsx\",\n                    lineNumber: 23,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/lalaina/InkVerse/client/src/app/layout.tsx\",\n            lineNumber: 19,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/app/layout.tsx\",\n        lineNumber: 18,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xheW91dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXVCO0FBRW9EO0FBQ2xCO0FBRWxELE1BQU1FLFdBQXFCO0lBQ2hDQyxPQUFPO0lBQ1BDLGFBQWE7SUFDYkMsVUFBVTtBQUNaLEVBQUU7QUFFSyxNQUFNQyxXQUFXO0lBQ3RCQyxZQUFZO0FBQ2QsRUFBRTtBQUVhLFNBQVNDLFdBQVcsRUFBRUMsUUFBUSxFQUFpQztJQUM1RSxxQkFDRSw4REFBQ0M7UUFBS0MsTUFBSztrQkFDVCw0RUFBQ0M7WUFBS0MsV0FBVTs7OEJBQ2QsOERBQUNiLG9GQUFnQkE7OEJBQ2RTOzs7Ozs7OEJBRUgsOERBQUNSLGtFQUFVQTs7Ozs7Ozs7Ozs7Ozs7OztBQUluQiIsInNvdXJjZXMiOlsid2VicGFjazovL2lua3ZlcnNlLWNsaWVudC8uL3NyYy9hcHAvbGF5b3V0LnRzeD81N2E5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi9nbG9iYWxzLmNzcyc7XG5pbXBvcnQgdHlwZSB7IE1ldGFkYXRhIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBTdXBhYmFzZVByb3ZpZGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyJztcbmltcG9ydCB7IFJlZ2lzdGVyU1cgfSBmcm9tICdAL2NvbXBvbmVudHMvcHdhL1JlZ2lzdGVyU1cnO1xuXG5leHBvcnQgY29uc3QgbWV0YWRhdGE6IE1ldGFkYXRhID0ge1xuICB0aXRsZTogJ0lua1ZlcnNlJyxcbiAgZGVzY3JpcHRpb246ICdBSSBtYW5od2EgY3JlYXRpb24gc3VpdGUnLFxuICBtYW5pZmVzdDogJy9tYW5pZmVzdC53ZWJtYW5pZmVzdCcsXG59O1xuXG5leHBvcnQgY29uc3Qgdmlld3BvcnQgPSB7XG4gIHRoZW1lQ29sb3I6ICcjMGYxNzJhJyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvb3RMYXlvdXQoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuICByZXR1cm4gKFxuICAgIDxodG1sIGxhbmc9XCJlblwiPlxuICAgICAgPGJvZHkgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLXNsYXRlLTk1MCB0ZXh0LXNsYXRlLTEwMFwiPlxuICAgICAgICA8U3VwYWJhc2VQcm92aWRlcj5cbiAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDwvU3VwYWJhc2VQcm92aWRlcj5cbiAgICAgICAgPFJlZ2lzdGVyU1cgLz5cbiAgICAgIDwvYm9keT5cbiAgICA8L2h0bWw+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiU3VwYWJhc2VQcm92aWRlciIsIlJlZ2lzdGVyU1ciLCJtZXRhZGF0YSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJtYW5pZmVzdCIsInZpZXdwb3J0IiwidGhlbWVDb2xvciIsIlJvb3RMYXlvdXQiLCJjaGlsZHJlbiIsImh0bWwiLCJsYW5nIiwiYm9keSIsImNsYXNzTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./src/app/project/[id]/chat/page.tsx":
/*!********************************************!*\
  !*** ./src/app/project/[id]/chat/page.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/home/lalaina/InkVerse/client/src/app/project/[id]/chat/page.tsx#default`));


/***/ }),

/***/ "(rsc)/./src/app/project/[id]/layout.tsx":
/*!*****************************************!*\
  !*** ./src/app/project/[id]/layout.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProjectLayout)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction ProjectLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-screen w-screen overflow-hidden\",\n        children: children\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/app/project/[id]/layout.tsx\",\n        lineNumber: 3,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL3Byb2plY3QvW2lkXS9sYXlvdXQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZSxTQUFTQSxjQUFjLEVBQUVDLFFBQVEsRUFBaUM7SUFDL0UscUJBQ0UsOERBQUNDO1FBQUlDLFdBQVU7a0JBQ1pGOzs7Ozs7QUFHUCIsInNvdXJjZXMiOlsid2VicGFjazovL2lua3ZlcnNlLWNsaWVudC8uL3NyYy9hcHAvcHJvamVjdC9baWRdL2xheW91dC50c3g/NjU4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9qZWN0TGF5b3V0KHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImgtc2NyZWVuIHctc2NyZWVuIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlByb2plY3RMYXlvdXQiLCJjaGlsZHJlbiIsImRpdiIsImNsYXNzTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/project/[id]/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./src/components/providers/SupabaseProvider.tsx":
/*!*******************************************************!*\
  !*** ./src/components/providers/SupabaseProvider.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SupabaseProvider: () => (/* binding */ e0),
/* harmony export */   useSupabase: () => (/* binding */ e1)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");


const e0 = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/home/lalaina/InkVerse/client/src/components/providers/SupabaseProvider.tsx#SupabaseProvider`);

const e1 = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/home/lalaina/InkVerse/client/src/components/providers/SupabaseProvider.tsx#useSupabase`);


/***/ }),

/***/ "(rsc)/./src/components/pwa/RegisterSW.tsx":
/*!*******************************************!*\
  !*** ./src/components/pwa/RegisterSW.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RegisterSW: () => (/* binding */ e0)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");


const e0 = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/home/lalaina/InkVerse/client/src/components/pwa/RegisterSW.tsx#RegisterSW`);


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/lucide-react","vendor-chunks/@babel","vendor-chunks/@swc","vendor-chunks/dnd-core","vendor-chunks/react-dnd","vendor-chunks/react-dnd-html5-backend","vendor-chunks/@react-dnd","vendor-chunks/redux","vendor-chunks/fast-deep-equal"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&page=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&appPaths=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&pagePath=private-next-app-dir%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx&appDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();