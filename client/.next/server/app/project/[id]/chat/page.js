/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/project/[id]/chat/page";
exports.ids = ["app/project/[id]/chat/page"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&page=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&appPaths=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&pagePath=private-next-app-dir%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx&appDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&page=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&appPaths=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&pagePath=private-next-app-dir%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx&appDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/module.compiled.js?d969\");\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/client/components/error-boundary */ \"(rsc)/./node_modules/next/dist/client/components/error-boundary.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"originalPathname\",\"__next_app__\",\"routeModule\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\"TURBOPACK { transition: next-ssr }\";\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        'project',\n        {\n        children: [\n        '[id]',\n        {\n        children: [\n        'chat',\n        {\n        children: ['__PAGE__', {}, {\n          page: [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/project/[id]/chat/page.tsx */ \"(rsc)/./src/app/project/[id]/chat/page.tsx\")), \"/home/lalaina/InkVerse/client/src/app/project/[id]/chat/page.tsx\"],\n          \n        }]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/project/[id]/layout.tsx */ \"(rsc)/./src/app/project/[id]/layout.tsx\")), \"/home/lalaina/InkVerse/client/src/app/project/[id]/layout.tsx\"],\n        \n      }\n      ]\n      },\n        {\n        \n        \n      }\n      ]\n      },\n        {\n        'layout': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/layout.tsx */ \"(rsc)/./src/app/layout.tsx\")), \"/home/lalaina/InkVerse/client/src/app/layout.tsx\"],\n'not-found': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/not-found-error */ \"(rsc)/./node_modules/next/dist/client/components/not-found-error.js\", 23)), \"next/dist/client/components/not-found-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"/home/lalaina/InkVerse/client/src/app/project/[id]/chat/page.tsx\"];\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst originalPathname = \"/project/[id]/chat/page\";\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/project/[id]/chat/page\",\n        pathname: \"/project/[id]/chat\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\",\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZwcm9qZWN0JTJGJTVCaWQlNUQlMkZjaGF0JTJGcGFnZSZwYWdlPSUyRnByb2plY3QlMkYlNUJpZCU1RCUyRmNoYXQlMkZwYWdlJmFwcFBhdGhzPSUyRnByb2plY3QlMkYlNUJpZCU1RCUyRmNoYXQlMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGcHJvamVjdCUyRiU1QmlkJTVEJTJGY2hhdCUyRnBhZ2UudHN4JmFwcERpcj0lMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsYUFBYSxzQkFBc0I7QUFDaUU7QUFDckM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLHVCQUF1QixvTEFBcUc7QUFDNUg7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx5QkFBeUIsOEtBQWtHO0FBQzNIO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EseUJBQXlCLG9KQUFxRjtBQUM5RyxvQkFBb0IsME5BQWdGO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUN1QjtBQUM2RDtBQUNwRiw2QkFBNkIsbUJBQW1CO0FBQ2hEO0FBQ087QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUN1RDtBQUN2RDtBQUNPLHdCQUF3Qiw4R0FBa0I7QUFDakQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Lz8yNzdhIl0sInNvdXJjZXNDb250ZW50IjpbIlwiVFVSQk9QQUNLIHsgdHJhbnNpdGlvbjogbmV4dC1zc3IgfVwiO1xuaW1wb3J0IHsgQXBwUGFnZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXBhZ2UvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuLy8gV2UgaW5qZWN0IHRoZSB0cmVlIGFuZCBwYWdlcyBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgdHJlZSA9IHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgJycsXG4gICAgICAgIHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgJ3Byb2plY3QnLFxuICAgICAgICB7XG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICdbaWRdJyxcbiAgICAgICAge1xuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAnY2hhdCcsXG4gICAgICAgIHtcbiAgICAgICAgY2hpbGRyZW46IFsnX19QQUdFX18nLCB7fSwge1xuICAgICAgICAgIHBhZ2U6IFsoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L3NyYy9hcHAvcHJvamVjdC9baWRdL2NoYXQvcGFnZS50c3hcIiksIFwiL2hvbWUvbGFsYWluYS9JbmtWZXJzZS9jbGllbnQvc3JjL2FwcC9wcm9qZWN0L1tpZF0vY2hhdC9wYWdlLnRzeFwiXSxcbiAgICAgICAgICBcbiAgICAgICAgfV1cbiAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAnbGF5b3V0JzogWygpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2hvbWUvbGFsYWluYS9JbmtWZXJzZS9jbGllbnQvc3JjL2FwcC9wcm9qZWN0L1tpZF0vbGF5b3V0LnRzeFwiKSwgXCIvaG9tZS9sYWxhaW5hL0lua1ZlcnNlL2NsaWVudC9zcmMvYXBwL3Byb2plY3QvW2lkXS9sYXlvdXQudHN4XCJdLFxuICAgICAgICBcbiAgICAgIH1cbiAgICAgIF1cbiAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAnbGF5b3V0JzogWygpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2hvbWUvbGFsYWluYS9JbmtWZXJzZS9jbGllbnQvc3JjL2FwcC9sYXlvdXQudHN4XCIpLCBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L3NyYy9hcHAvbGF5b3V0LnRzeFwiXSxcbidub3QtZm91bmQnOiBbKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbm90LWZvdW5kLWVycm9yXCIpLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9ub3QtZm91bmQtZXJyb3JcIl0sXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfS5jaGlsZHJlbjtcbmNvbnN0IHBhZ2VzID0gW1wiL2hvbWUvbGFsYWluYS9JbmtWZXJzZS9jbGllbnQvc3JjL2FwcC9wcm9qZWN0L1tpZF0vY2hhdC9wYWdlLnRzeFwiXTtcbmV4cG9ydCB7IHRyZWUsIHBhZ2VzIH07XG5leHBvcnQgeyBkZWZhdWx0IGFzIEdsb2JhbEVycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9lcnJvci1ib3VuZGFyeVwiO1xuY29uc3QgX19uZXh0X2FwcF9yZXF1aXJlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fXG5jb25zdCBfX25leHRfYXBwX2xvYWRfY2h1bmtfXyA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXG5leHBvcnQgY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL3Byb2plY3QvW2lkXS9jaGF0L3BhZ2VcIjtcbmV4cG9ydCBjb25zdCBfX25leHRfYXBwX18gPSB7XG4gICAgcmVxdWlyZTogX19uZXh0X2FwcF9yZXF1aXJlX18sXG4gICAgbG9hZENodW5rOiBfX25leHRfYXBwX2xvYWRfY2h1bmtfX1xufTtcbmV4cG9ydCAqIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW50cnktYmFzZVwiO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUGFnZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUEFHRSxcbiAgICAgICAgcGFnZTogXCIvcHJvamVjdC9baWRdL2NoYXQvcGFnZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvcHJvamVjdC9baWRdL2NoYXRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIixcbiAgICAgICAgYXBwUGF0aHM6IFtdXG4gICAgfSxcbiAgICB1c2VybGFuZDoge1xuICAgICAgICBsb2FkZXJUcmVlOiB0cmVlXG4gICAgfVxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1wYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&page=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&appPaths=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&pagePath=private-next-app-dir%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx&appDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/app-router.js */ \"(ssr)/./node_modules/next/dist/client/components/app-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(ssr)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/not-found-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/not-found-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmhvbWUlMkZsYWxhaW5hJTJGSW5rVmVyc2UlMkZjbGllbnQlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZhcHAtcm91dGVyLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmhvbWUlMkZsYWxhaW5hJTJGSW5rVmVyc2UlMkZjbGllbnQlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGZXJyb3ItYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGaG9tZSUyRmxhbGFpbmElMkZJbmtWZXJzZSUyRmNsaWVudCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmxheW91dC1yb3V0ZXIuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGaG9tZSUyRmxhbGFpbmElMkZJbmtWZXJzZSUyRmNsaWVudCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRm5vdC1mb3VuZC1ib3VuZGFyeS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGcmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsa09BQXlIO0FBQ3pIO0FBQ0Esb09BQTBIO0FBQzFIO0FBQ0EsME9BQTZIO0FBQzdIO0FBQ0Esd09BQTRIO0FBQzVIO0FBQ0Esa1BBQWlJO0FBQ2pJO0FBQ0Esc1FBQTJJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Lz8zY2Q1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL2hvbWUvbGFsYWluYS9JbmtWZXJzZS9jbGllbnQvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9hcHAtcm91dGVyLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvaG9tZS9sYWxhaW5hL0lua1ZlcnNlL2NsaWVudC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2NsaWVudC1wYWdlLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvaG9tZS9sYWxhaW5hL0lua1ZlcnNlL2NsaWVudC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2Vycm9yLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvaG9tZS9sYWxhaW5hL0lua1ZlcnNlL2NsaWVudC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2xheW91dC1yb3V0ZXIuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbm90LWZvdW5kLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvaG9tZS9sYWxhaW5hL0lua1ZlcnNlL2NsaWVudC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanNcIik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fproviders%2FSupabaseProvider.tsx%22%2C%22ids%22%3A%5B%22SupabaseProvider%22%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fpwa%2FRegisterSW.tsx%22%2C%22ids%22%3A%5B%22RegisterSW%22%5D%7D&server=true!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fproviders%2FSupabaseProvider.tsx%22%2C%22ids%22%3A%5B%22SupabaseProvider%22%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fpwa%2FRegisterSW.tsx%22%2C%22ids%22%3A%5B%22RegisterSW%22%5D%7D&server=true! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/components/providers/SupabaseProvider.tsx */ \"(ssr)/./src/components/providers/SupabaseProvider.tsx\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/components/pwa/RegisterSW.tsx */ \"(ssr)/./src/components/pwa/RegisterSW.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmhvbWUlMkZsYWxhaW5hJTJGSW5rVmVyc2UlMkZjbGllbnQlMkZzcmMlMkZhcHAlMkZnbG9iYWxzLmNzcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JTJGc3JjJTJGY29tcG9uZW50cyUyRnByb3ZpZGVycyUyRlN1cGFiYXNlUHJvdmlkZXIudHN4JTIyJTJDJTIyaWRzJTIyJTNBJTVCJTIyU3VwYWJhc2VQcm92aWRlciUyMiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZob21lJTJGbGFsYWluYSUyRklua1ZlcnNlJTJGY2xpZW50JTJGc3JjJTJGY29tcG9uZW50cyUyRnB3YSUyRlJlZ2lzdGVyU1cudHN4JTIyJTJDJTIyaWRzJTIyJTNBJTVCJTIyUmVnaXN0ZXJTVyUyMiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsME1BQXNKO0FBQ3RKO0FBQ0Esa0xBQW9JIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Lz9hZWFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiU3VwYWJhc2VQcm92aWRlclwiXSAqLyBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L3NyYy9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyLnRzeFwiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiLCB3ZWJwYWNrRXhwb3J0czogW1wiUmVnaXN0ZXJTV1wiXSAqLyBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L3NyYy9jb21wb25lbnRzL3B3YS9SZWdpc3RlclNXLnRzeFwiKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fglobals.css%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fproviders%2FSupabaseProvider.tsx%22%2C%22ids%22%3A%5B%22SupabaseProvider%22%5D%7D&modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fcomponents%2Fpwa%2FRegisterSW.tsx%22%2C%22ids%22%3A%5B%22RegisterSW%22%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/project/[id]/chat/page.tsx */ \"(ssr)/./src/app/project/[id]/chat/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRmhvbWUlMkZsYWxhaW5hJTJGSW5rVmVyc2UlMkZjbGllbnQlMkZzcmMlMkZhcHAlMkZwcm9qZWN0JTJGJTVCaWQlNUQlMkZjaGF0JTJGcGFnZS50c3glMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLG9MQUFxRyIsInNvdXJjZXMiOlsid2VicGFjazovL2lua3ZlcnNlLWNsaWVudC8/YjA5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9ob21lL2xhbGFpbmEvSW5rVmVyc2UvY2xpZW50L3NyYy9hcHAvcHJvamVjdC9baWRdL2NoYXQvcGFnZS50c3hcIik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./src/app/project/[id]/chat/page.tsx":
/*!********************************************!*\
  !*** ./src/app/project/[id]/chat/page.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProjectChatPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/navigation */ \"(ssr)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _components_workspace_Workspace__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/workspace/Workspace */ \"(ssr)/./src/components/workspace/Workspace.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nfunction ProjectChatPage() {\n    const params = (0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.useParams)();\n    const projectId = params?.id;\n    if (!projectId) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_workspace_Workspace__WEBPACK_IMPORTED_MODULE_2__.Workspace, {\n        projectId: projectId\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/app/project/[id]/chat/page.tsx\",\n        lineNumber: 10,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL3Byb2plY3QvW2lkXS9jaGF0L3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUU0QztBQUNpQjtBQUU5QyxTQUFTRTtJQUN0QixNQUFNQyxTQUFTSCwwREFBU0E7SUFDeEIsTUFBTUksWUFBWUQsUUFBUUU7SUFDMUIsSUFBSSxDQUFDRCxXQUFXLE9BQU87SUFDdkIscUJBQU8sOERBQUNILHNFQUFTQTtRQUFDRyxXQUFXQTs7Ozs7O0FBQy9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Ly4vc3JjL2FwcC9wcm9qZWN0L1tpZF0vY2hhdC9wYWdlLnRzeD85MzgwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHsgV29ya3NwYWNlIH0gZnJvbSAnQC9jb21wb25lbnRzL3dvcmtzcGFjZS9Xb3Jrc3BhY2UnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9qZWN0Q2hhdFBhZ2UoKSB7XG4gIGNvbnN0IHBhcmFtcyA9IHVzZVBhcmFtczx7IGlkOiBzdHJpbmcgfT4oKTtcbiAgY29uc3QgcHJvamVjdElkID0gcGFyYW1zPy5pZCBhcyBzdHJpbmc7XG4gIGlmICghcHJvamVjdElkKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIDxXb3Jrc3BhY2UgcHJvamVjdElkPXtwcm9qZWN0SWR9IC8+O1xufVxuXG4iXSwibmFtZXMiOlsidXNlUGFyYW1zIiwiV29ya3NwYWNlIiwiUHJvamVjdENoYXRQYWdlIiwicGFyYW1zIiwicHJvamVjdElkIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/project/[id]/chat/page.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/chat/Chat.tsx":
/*!**************************************!*\
  !*** ./src/components/chat/Chat.tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Chat: () => (/* binding */ Chat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-dnd */ \"(ssr)/./node_modules/react-dnd/dist/core/DndProvider.js\");\n/* harmony import */ var react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dnd-html5-backend */ \"(ssr)/./node_modules/react-dnd-html5-backend/dist/index.js\");\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(ssr)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _ChatBubble__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ChatBubble */ \"(ssr)/./src/components/chat/ChatBubble.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/api */ \"(ssr)/./src/lib/api.ts\");\n/* harmony import */ var _barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUpRight,ChevronDown!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-down.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUpRight,ChevronDown!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/arrow-up-right.js\");\n/* __next_internal_client_entry_do_not_use__ Chat auto */ \n\n\n\n\n\n\n\nfunction Chat({ chatId, projectId, chatType = \"plot\", initialMessages = [] }) {\n    const supabase = (0,_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase)();\n    const api = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>(0,_lib_api__WEBPACK_IMPORTED_MODULE_4__.createApi)(supabase), [\n        supabase\n    ]);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialMessages);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [streaming, setStreaming] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [inputError, setInputError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const listRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modeMenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modeMenuListRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [saveError, setSaveError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [pendingMode, setPendingMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [pendingSettings, setPendingSettings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [toastMsg, setToastMsg] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const toastTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const apiBase = \"http://localhost:3000\" || 0;\n    const [loadingHistory, setLoadingHistory] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [clientMode, setClientMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"chat\");\n    const [modeMenuOpen, setModeMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [modeMenuIndex, setModeMenuIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const cacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_chat_${chatId}_messages`, [\n        chatId\n    ]);\n    const [hasCache, setHasCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const messagesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(messages);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        listRef.current?.scrollTo({\n            top: listRef.current.scrollHeight,\n            behavior: \"smooth\"\n        });\n    }, [\n        messages.length\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const s =  false ? 0 : null;\n            if (s) {\n                const arr = JSON.parse(s);\n                if (Array.isArray(arr)) {\n                    setMessages(arr);\n                    setHasCache(arr.length > 0);\n                }\n            }\n        } catch  {}\n    }, [\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // If parent provides messages later, set them only if list is empty\n        if (initialMessages.length && messages.length === 0) {\n            setMessages(initialMessages);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        initialMessages\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasCache) {\n                return;\n            }\n            try {\n                if (!hasCache) setLoadingHistory(true);\n                const history = await api.getChatMessagesByChatId(chatId);\n                if (!mounted) return;\n                const next = Array.isArray(history) ? history : [];\n                // Skip update if no change to avoid flicker\n                try {\n                    if (hasCache && JSON.stringify(next) === JSON.stringify(messagesRef.current)) {\n                        return;\n                    }\n                } catch  {}\n                setMessages(next);\n            } catch  {\n            // swallow network errors during initial hydration/revalidation\n            } finally{\n                if (mounted) setLoadingHistory(false);\n            }\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        chatId,\n        hasCache\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        messages,\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        messagesRef.current = messages;\n    }, [\n        messages\n    ]);\n    // Auto-resize textarea height with content, up to a max then scroll\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const el = inputRef.current;\n        if (!el) return;\n        el.style.height = \"auto\";\n        const max = 256; // px max height before scroll\n        const next = Math.min(el.scrollHeight, max);\n        el.style.height = `${next}px`;\n    }, [\n        input\n    ]);\n    // Close mode menu on outside click\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onDocClick(e) {\n            if (!modeMenuOpen) return;\n            const t = e.target;\n            if (modeMenuRef.current && t && !modeMenuRef.current.contains(t)) {\n                setModeMenuOpen(false);\n            }\n        }\n        document.addEventListener(\"mousedown\", onDocClick);\n        return ()=>document.removeEventListener(\"mousedown\", onDocClick);\n    }, [\n        modeMenuOpen\n    ]);\n    // Keyboard: open/close menu and navigate options\n    const onModeButtonKeyDown = (e)=>{\n        if (e.key === \"ArrowDown\" || e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            setModeMenuIndex(clientMode === \"chat\" ? 0 : 1);\n            setModeMenuOpen(true);\n        } else if (e.key === \"Escape\") {\n            setModeMenuOpen(false);\n        }\n    };\n    const onMenuKeyDown = (e)=>{\n        if (e.key === \"ArrowDown\") {\n            e.preventDefault();\n            setModeMenuIndex((i)=>(i + 1) % 2);\n        } else if (e.key === \"ArrowUp\") {\n            e.preventDefault();\n            setModeMenuIndex((i)=>(i + 1 + 2) % 2);\n        } else if (e.key === \"Enter\") {\n            e.preventDefault();\n            if (modeMenuIndex === 0) setClientMode(\"chat\");\n            else setClientMode(\"action\");\n            setModeMenuOpen(false);\n        } else if (e.key === \"Escape\") {\n            setModeMenuOpen(false);\n        }\n    };\n    // Shortcut: Ctrl+L focuses input\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onKey(e) {\n            if ((e.ctrlKey || e.metaKey) && (e.key === \"l\" || e.key === \"L\")) {\n                e.preventDefault();\n                inputRef.current?.focus();\n            }\n        }\n        window.addEventListener(\"keydown\", onKey);\n        return ()=>window.removeEventListener(\"keydown\", onKey);\n    }, []);\n    // Focus menu container when opened for keyboard nav\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (modeMenuOpen) {\n            setTimeout(()=>modeMenuListRef.current?.focus(), 0);\n        }\n    }, [\n        modeMenuOpen\n    ]);\n    const send = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (opts)=>{\n        const text = (opts?.messageOverride ?? input).trim();\n        if (!text && !opts?.regeneratePanelId) {\n            setInputError('Prompt is empty. Try something like: \"Write the opening scene of a dark fantasy.\"');\n            return;\n        }\n        setInputError(null);\n        const { data: { session } } = await supabase.auth.getSession();\n        const token = session?.access_token;\n        if (!token) return;\n        const userMessage = {\n            role: \"user\",\n            content: text,\n            panelId: opts?.regeneratePanelId || null\n        };\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        setInput(\"\");\n        setStreaming(true);\n        // Mentions parsing: @chapter<number> or @\"exact title\"\n        const mNum = /@chapter\\s*([0-9]+)/i.exec(text) || /@chapter_?([0-9]+)/i.exec(text);\n        const mTitle = /@\"([^\"]+)\"/.exec(text);\n        const mentions = {};\n        if (mNum?.[1]) mentions.chapter_number = parseInt(mNum[1], 10);\n        if (mTitle?.[1]) mentions.title = mTitle[1];\n        const res = await fetch(`${apiBase}/api/chat/${chatId}`, {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${token}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                message: userMessage.content,\n                regeneratePanelId: opts?.regeneratePanelId || undefined,\n                clientMode,\n                mentions\n            })\n        });\n        if (!res.body) {\n            setStreaming(false);\n            return;\n        }\n        // Push empty assistant message to stream into\n        let assistantIndex = -1;\n        setMessages((prev)=>{\n            assistantIndex = prev.length;\n            return [\n                ...prev,\n                {\n                    role: \"assistant\",\n                    content: \"\"\n                }\n            ];\n        });\n        const reader = res.body.getReader();\n        const decoder = new TextDecoder();\n        try {\n            while(true){\n                const { value, done } = await reader.read();\n                if (done) break;\n                const chunk = decoder.decode(value, {\n                    stream: true\n                });\n                for (const line of chunk.split(\"\\n\")){\n                    const trimmed = line.trim();\n                    if (!trimmed.startsWith(\"data:\")) continue;\n                    const data = trimmed.slice(5).trim();\n                    if (!data) continue;\n                    try {\n                        const evt = JSON.parse(data);\n                        if (evt.type === \"text\" && evt.content) {\n                            setMessages((prev)=>{\n                                const copy = [\n                                    ...prev\n                                ];\n                                const msg = copy[assistantIndex];\n                                copy[assistantIndex] = {\n                                    ...msg,\n                                    content: (msg?.content || \"\") + evt.content\n                                };\n                                return copy;\n                            });\n                        } else if (evt.action === \"create_chapter\") {\n                            if (chatType !== \"plot\") {} else if (false) {}\n                        } else if (evt.action === \"confirm_mode\" && evt.mode) {\n                            setPendingMode(evt.mode);\n                            setMessages((prev)=>[\n                                    ...prev,\n                                    {\n                                        role: \"assistant\",\n                                        content: `Pending mode change to \"${evt.mode}\". Confirm?`\n                                    }\n                                ]);\n                        } else if (evt.action === \"confirm_settings\" && evt.changes) {\n                            if (clientMode === \"action\" && chatType === \"plot\") {\n                                setPendingSettings(evt.changes);\n                                setMessages((prev)=>[\n                                        ...prev,\n                                        {\n                                            role: \"assistant\",\n                                            content: \"Pending settings update detected. Confirm to apply changes.\"\n                                        }\n                                    ]);\n                            } // ignore in Chat mode for safety\n                        } else if (evt.type === \"image_job\") {\n                        // Optionally reflect job queued state\n                        } else if (evt.action === \"convert_to_manhwa\") {\n                            if (chatType !== \"plot\") {} else if (false) {}\n                        } else if (evt.action === \"update_chapter\") {\n                            if (chatType !== \"plot\") {} else if (false) {}\n                        } else if (evt.action === \"upsert_character\" && evt.item) {\n                            if (chatType !== \"character\") {} else if (false) {}\n                        } else if (evt.action === \"upsert_world\" && evt.item) {\n                            if (chatType !== \"world\") {} else if (false) {}\n                        } else if (evt.type === \"error\") {\n                            // Append error to conversation\n                            setMessages((prev)=>[\n                                    ...prev,\n                                    {\n                                        role: \"assistant\",\n                                        content: `Error: ${evt.message}`\n                                    }\n                                ]);\n                        } else if (evt.type === \"done\") {\n                            setStreaming(false);\n                        }\n                    } catch  {\n                    // ignore partial json lines\n                    }\n                }\n            }\n        } finally{\n            setStreaming(false);\n            reader.releaseLock();\n        }\n    }, [\n        apiBase,\n        input,\n        chatId,\n        supabase,\n        clientMode,\n        chatType\n    ]);\n    const onRegenerate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((panelId)=>{\n        void send({\n            regeneratePanelId: panelId\n        });\n    }, [\n        send\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_dnd__WEBPACK_IMPORTED_MODULE_5__.DndProvider, {\n        backend: react_dnd_html5_backend__WEBPACK_IMPORTED_MODULE_6__.HTML5Backend,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex flex-col bg-bg-elevated\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    ref: listRef,\n                    className: \"flex-1 min-h-0 overflow-y-auto space-y-4 p-4\",\n                    children: [\n                        loadingHistory && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-secondary\",\n                            children: \"Loading previous messages\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 307,\n                            columnNumber: 13\n                        }, this),\n                        messages.map((m, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatBubble__WEBPACK_IMPORTED_MODULE_3__.ChatBubble, {\n                                role: m.role,\n                                content: m.content,\n                                panelId: m.panelId,\n                                onRegenerate: onRegenerate,\n                                draggable: Boolean(m.panelId)\n                            }, i, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                lineNumber: 310,\n                                columnNumber: 13\n                            }, this)),\n                        streaming && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-secondary animate-pulse\",\n                            children: \"AI is typing\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 320,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 305,\n                    columnNumber: 9\n                }, this),\n                toastMsg && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"fixed top-3 right-3 z-50\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"px-3 py-2 rounded bg-slate-950/90 border border-slate-800 text-slate-100 text-sm shadow-lg\",\n                        children: toastMsg\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                        lineNumber: 326,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 325,\n                    columnNumber: 9\n                }, this),\n                (pendingMode || pendingSettings) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"border-t border-border-default p-3 flex items-center justify-between gap-3 bg-bg-primary\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-primary\",\n                            children: [\n                                pendingMode && `Confirm mode change to \"${pendingMode}\"?`,\n                                pendingSettings && !pendingMode && \"Confirm applying pending settings changes?\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 334,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"px-3 py-1.5 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover transition-all duration-150\",\n                                    onClick: ()=>{\n                                        setPendingMode(null);\n                                        setPendingSettings(null);\n                                    },\n                                    children: \"Cancel\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 339,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"px-3 py-1.5 rounded-md bg-accent hover:bg-accent-hover text-white disabled:opacity-50 transition-all duration-150\",\n                                    disabled: saving || clientMode !== \"action\",\n                                    onClick: async ()=>{\n                                        setSaving(true);\n                                        setSaveError(null);\n                                        try {\n                                            if (pendingMode) {\n                                                // Persist mode via settings endpoint\n                                                await api.updateProjectSettings(projectId, {\n                                                    mode: pendingMode\n                                                });\n                                                if (false) {}\n                                                setMessages((prev)=>[\n                                                        ...prev,\n                                                        {\n                                                            role: \"assistant\",\n                                                            content: `Mode updated to ${pendingMode}.`\n                                                        }\n                                                    ]);\n                                                setPendingMode(null);\n                                                if (toastTimer.current) clearTimeout(toastTimer.current);\n                                                setToastMsg(\"Mode saved\");\n                                                toastTimer.current = setTimeout(()=>setToastMsg(\"\"), 3000);\n                                            } else if (pendingSettings) {\n                                                // Persist full settings payload including title/description/coverImage/genre/coreConflict/mode/settingsJson\n                                                await api.updateProjectSettings(projectId, pendingSettings);\n                                                if (false) {}\n                                                setMessages((prev)=>[\n                                                        ...prev,\n                                                        {\n                                                            role: \"assistant\",\n                                                            content: \"Settings updated.\"\n                                                        }\n                                                    ]);\n                                                setPendingSettings(null);\n                                                // Toast from chat confirm\n                                                if (toastTimer.current) clearTimeout(toastTimer.current);\n                                                setToastMsg(\"Settings saved\");\n                                                toastTimer.current = setTimeout(()=>setToastMsg(\"\"), 3000);\n                                            }\n                                        } catch (e) {\n                                            setSaveError(e?.message || \"Failed to save\");\n                                            setMessages((prev)=>[\n                                                    ...prev,\n                                                    {\n                                                        role: \"assistant\",\n                                                        content: `Error persisting changes: ${e?.message || \"Failed to save\"}`\n                                                    }\n                                                ]);\n                                        } finally{\n                                            setSaving(false);\n                                        }\n                                    },\n                                    children: \"Confirm\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 345,\n                                    columnNumber: 15\n                                }, this),\n                                clientMode !== \"action\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-[11px] text-text-tertiary\",\n                                    children: \"Switch to Action mode to apply\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                    lineNumber: 387,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 338,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 333,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"border-t border-border-default p-3 bg-bg-primary\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex gap-3 items-end\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 relative\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                        ref: inputRef,\n                                        value: input,\n                                        onChange: (e)=>setInput(e.target.value),\n                                        placeholder: \"Chat with Cascade\",\n                                        rows: 2,\n                                        className: \"w-full bg-bg-elevated border border-border-default rounded-2xl pl-12 pr-12 pt-2 pb-16 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent resize-none min-h-[80px] max-h-72 overflow-y-auto transition-colors duration-150\",\n                                        onKeyDown: (e)=>{\n                                            if (e.key === \"Enter\" && !e.shiftKey) {\n                                                e.preventDefault();\n                                                void send();\n                                            }\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 397,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute left-2 bottom-2\",\n                                        ref: modeMenuRef,\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                type: \"button\",\n                                                className: `text-xs px-3 py-2 rounded-lg border border-border-default ${clientMode === \"chat\" ? \"text-success\" : \"text-accent\"} bg-bg-elevated hover:bg-bg-hover inline-flex items-center gap-1.5 transition-all duration-150`,\n                                                onClick: ()=>{\n                                                    setModeMenuIndex(clientMode === \"chat\" ? 0 : 1);\n                                                    setModeMenuOpen((v)=>!v);\n                                                },\n                                                \"aria-haspopup\": \"menu\",\n                                                \"aria-expanded\": modeMenuOpen,\n                                                onKeyDown: onModeButtonKeyDown,\n                                                title: \"Mode\",\n                                                children: [\n                                                    clientMode === \"chat\" ? \"Chat\" : \"Action\",\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                        className: \"w-3 h-3\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 423,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 413,\n                                                columnNumber: 17\n                                            }, this),\n                                            modeMenuOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"absolute bottom-full mb-2 left-0 w-64 rounded-lg border border-border-default bg-bg-elevated shadow-elevation p-1.5 text-xs text-text-primary z-20\",\n                                                role: \"menu\",\n                                                tabIndex: -1,\n                                                ref: modeMenuListRef,\n                                                onKeyDown: onMenuKeyDown,\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: `w-full text-left px-3 py-2.5 rounded-md hover:bg-bg-hover transition-all duration-150 ${modeMenuIndex === 0 ? \"ring-1 ring-accent\" : \"\"} ${clientMode === \"chat\" ? \"bg-bg-hover\" : \"\"}`,\n                                                        onClick: ()=>{\n                                                            setClientMode(\"chat\");\n                                                            setModeMenuOpen(false);\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"font-semibold text-text-primary\",\n                                                                children: \"Chat\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 437,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-text-tertiary text-[11px] mt-0.5\",\n                                                                children: \"Brainstorm, outline, preview. No writes.\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 438,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 433,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: `w-full text-left px-3 py-2.5 rounded-md hover:bg-bg-hover transition-all duration-150 mt-1 ${modeMenuIndex === 1 ? \"ring-1 ring-accent\" : \"\"} ${clientMode === \"action\" ? \"bg-bg-hover\" : \"\"}`,\n                                                        onClick: ()=>{\n                                                            setClientMode(\"action\");\n                                                            setModeMenuOpen(false);\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"font-semibold text-text-primary\",\n                                                                children: \"Action\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 444,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-text-tertiary text-[11px] mt-0.5\",\n                                                                children: \"Enable saving settings and chapters.\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                                lineNumber: 445,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                        lineNumber: 440,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 426,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 412,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>void send(),\n                                        disabled: streaming || !input.trim(),\n                                        className: \"absolute right-2 bottom-2 bg-accent hover:bg-accent-hover disabled:opacity-40 disabled:cursor-not-allowed text-white w-8 h-8 rounded-lg inline-flex items-center justify-center transition-all duration-150\",\n                                        title: \"Send\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUpRight_ChevronDown_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                className: \"w-4 h-4\",\n                                                \"aria-hidden\": \"true\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 456,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"sr-only\",\n                                                children: \"Send\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                                lineNumber: 457,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                        lineNumber: 450,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                                lineNumber: 396,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 394,\n                            columnNumber: 11\n                        }, this),\n                        inputError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-2 text-xs text-red-400 p-2 rounded-lg bg-red-950/20 border border-red-500/20\",\n                            children: inputError\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                            lineNumber: 461,\n                            columnNumber: 26\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n                    lineNumber: 393,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n            lineNumber: 303,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/Chat.tsx\",\n        lineNumber: 302,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MERBRU4sOERBQUNwSCxvR0FBWUE7Z0RBQUM2SixXQUFVO2dEQUFVc0IsZUFBWTs7Ozs7OzBEQUM5Qyw4REFBQ1g7Z0RBQUtYLFdBQVU7MERBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3dCQUkvQjlJLDRCQUFjLDhEQUFDNkk7NEJBQUlDLFdBQVU7c0NBQW1GOUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTzNIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Ly4vc3JjL2NvbXBvbmVudHMvY2hhdC9DaGF0LnRzeD81ZTEyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHR5cGUgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRG5kUHJvdmlkZXIgfSBmcm9tICdyZWFjdC1kbmQnO1xuaW1wb3J0IHsgSFRNTDVCYWNrZW5kIH0gZnJvbSAncmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQnO1xuaW1wb3J0IHsgdXNlU3VwYWJhc2UgfSBmcm9tICdAL2NvbXBvbmVudHMvcHJvdmlkZXJzL1N1cGFiYXNlUHJvdmlkZXInO1xuaW1wb3J0IHsgQ2hhdEJ1YmJsZSB9IGZyb20gJy4vQ2hhdEJ1YmJsZSc7XG5pbXBvcnQgeyBjcmVhdGVBcGkgfSBmcm9tICdAL2xpYi9hcGknO1xuaW1wb3J0IHsgQXJyb3dVcFJpZ2h0LCBDaGV2cm9uRG93biB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5cbmV4cG9ydCB0eXBlIENoYXRNZXNzYWdlID0ge1xuICBpZD86IHN0cmluZztcbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgcGFuZWxJZD86IHN0cmluZyB8IG51bGw7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gQ2hhdCh7IGNoYXRJZCwgcHJvamVjdElkLCBjaGF0VHlwZSA9ICdwbG90JywgaW5pdGlhbE1lc3NhZ2VzID0gW10gfTogeyBjaGF0SWQ6IHN0cmluZzsgcHJvamVjdElkOiBzdHJpbmc7IGNoYXRUeXBlPzogJ3Bsb3QnfCdjaGFyYWN0ZXInfCd3b3JsZCc7IGluaXRpYWxNZXNzYWdlcz86IENoYXRNZXNzYWdlW10gfSkge1xuICBjb25zdCBzdXBhYmFzZSA9IHVzZVN1cGFiYXNlKCk7XG4gIGNvbnN0IGFwaSA9IHVzZU1lbW8oKCkgPT4gY3JlYXRlQXBpKHN1cGFiYXNlKSwgW3N1cGFiYXNlXSk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8Q2hhdE1lc3NhZ2VbXT4oaW5pdGlhbE1lc3NhZ2VzKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtzdHJlYW1pbmcsIHNldFN0cmVhbWluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpbnB1dEVycm9yLCBzZXRJbnB1dEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBsaXN0UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgaW5wdXRSZWYgPSB1c2VSZWY8SFRNTFRleHRBcmVhRWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IG1vZGVNZW51UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgbW9kZU1lbnVMaXN0UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcblxuICBjb25zdCBbc2F2aW5nLCBzZXRTYXZpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2F2ZUVycm9yLCBzZXRTYXZlRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgW3BlbmRpbmdNb2RlLCBzZXRQZW5kaW5nTW9kZV0gPSB1c2VTdGF0ZTwnbm92ZWwnIHwgJ21hbmh3YScgfCAnY29udmVydCcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3BlbmRpbmdTZXR0aW5ncywgc2V0UGVuZGluZ1NldHRpbmdzXSA9IHVzZVN0YXRlPGFueSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbdG9hc3RNc2csIHNldFRvYXN0TXNnXSA9IHVzZVN0YXRlPHN0cmluZz4oJycpO1xuICBjb25zdCB0b2FzdFRpbWVyID0gdXNlUmVmPFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgYXBpQmFzZSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCc7XG5cbiAgY29uc3QgW2xvYWRpbmdIaXN0b3J5LCBzZXRMb2FkaW5nSGlzdG9yeV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtjbGllbnRNb2RlLCBzZXRDbGllbnRNb2RlXSA9IHVzZVN0YXRlPCdjaGF0JyB8ICdhY3Rpb24nPignY2hhdCcpO1xuICBjb25zdCBbbW9kZU1lbnVPcGVuLCBzZXRNb2RlTWVudU9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbW9kZU1lbnVJbmRleCwgc2V0TW9kZU1lbnVJbmRleF0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuXG4gIGNvbnN0IGNhY2hlS2V5ID0gdXNlTWVtbygoKSA9PiBgaW5rdmVyc2VfY2hhdF8ke2NoYXRJZH1fbWVzc2FnZXNgLCBbY2hhdElkXSk7XG4gIGNvbnN0IFtoYXNDYWNoZSwgc2V0SGFzQ2FjaGVdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBtZXNzYWdlc1JlZiA9IHVzZVJlZjxDaGF0TWVzc2FnZVtdPihtZXNzYWdlcyk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsaXN0UmVmLmN1cnJlbnQ/LnNjcm9sbFRvKHsgdG9wOiBsaXN0UmVmLmN1cnJlbnQuc2Nyb2xsSGVpZ2h0LCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gIH0sIFttZXNzYWdlcy5sZW5ndGhdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpIDogbnVsbDtcbiAgICAgIGlmIChzKSB7XG4gICAgICAgIGNvbnN0IGFyciA9IEpTT04ucGFyc2Uocyk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICAgICAgICBzZXRNZXNzYWdlcyhhcnIgYXMgQ2hhdE1lc3NhZ2VbXSk7XG4gICAgICAgICAgc2V0SGFzQ2FjaGUoKGFyciBhcyBhbnlbXSkubGVuZ3RoID4gMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIHt9XG4gIH0sIFtjYWNoZUtleV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gSWYgcGFyZW50IHByb3ZpZGVzIG1lc3NhZ2VzIGxhdGVyLCBzZXQgdGhlbSBvbmx5IGlmIGxpc3QgaXMgZW1wdHlcbiAgICBpZiAoaW5pdGlhbE1lc3NhZ2VzLmxlbmd0aCAmJiBtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHNldE1lc3NhZ2VzKGluaXRpYWxNZXNzYWdlcyk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW2luaXRpYWxNZXNzYWdlc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG1vdW50ZWQgPSB0cnVlO1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoaGFzQ2FjaGUpIHsgcmV0dXJuOyB9XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIWhhc0NhY2hlKSBzZXRMb2FkaW5nSGlzdG9yeSh0cnVlKTtcbiAgICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IGFwaS5nZXRDaGF0TWVzc2FnZXNCeUNoYXRJZChjaGF0SWQpO1xuICAgICAgICBpZiAoIW1vdW50ZWQpIHJldHVybjtcbiAgICAgICAgY29uc3QgbmV4dCA9IEFycmF5LmlzQXJyYXkoaGlzdG9yeSkgPyBoaXN0b3J5IGFzIGFueSA6IFtdO1xuICAgICAgICAvLyBTa2lwIHVwZGF0ZSBpZiBubyBjaGFuZ2UgdG8gYXZvaWQgZmxpY2tlclxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChoYXNDYWNoZSAmJiBKU09OLnN0cmluZ2lmeShuZXh0KSA9PT0gSlNPTi5zdHJpbmdpZnkobWVzc2FnZXNSZWYuY3VycmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgc2V0TWVzc2FnZXMobmV4dCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgLy8gc3dhbGxvdyBuZXR3b3JrIGVycm9ycyBkdXJpbmcgaW5pdGlhbCBoeWRyYXRpb24vcmV2YWxpZGF0aW9uXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAobW91bnRlZCkgc2V0TG9hZGluZ0hpc3RvcnkoZmFsc2UpO1xuICAgICAgfVxuICAgIH0pKCk7XG4gICAgcmV0dXJuICgpID0+IHsgbW91bnRlZCA9IGZhbHNlOyB9O1xuICB9LCBbYXBpLCBjaGF0SWQsIGhhc0NhY2hlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oY2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VzKSk7XG4gICAgfSBjYXRjaCB7fVxuICB9LCBbbWVzc2FnZXMsIGNhY2hlS2V5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHsgbWVzc2FnZXNSZWYuY3VycmVudCA9IG1lc3NhZ2VzOyB9LCBbbWVzc2FnZXNdKTtcblxuICAvLyBBdXRvLXJlc2l6ZSB0ZXh0YXJlYSBoZWlnaHQgd2l0aCBjb250ZW50LCB1cCB0byBhIG1heCB0aGVuIHNjcm9sbFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGVsID0gaW5wdXRSZWYuY3VycmVudDtcbiAgICBpZiAoIWVsKSByZXR1cm47XG4gICAgZWwuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgIGNvbnN0IG1heCA9IDI1NjsgLy8gcHggbWF4IGhlaWdodCBiZWZvcmUgc2Nyb2xsXG4gICAgY29uc3QgbmV4dCA9IE1hdGgubWluKGVsLnNjcm9sbEhlaWdodCwgbWF4KTtcbiAgICBlbC5zdHlsZS5oZWlnaHQgPSBgJHtuZXh0fXB4YDtcbiAgfSwgW2lucHV0XSk7XG5cbiAgLy8gQ2xvc2UgbW9kZSBtZW51IG9uIG91dHNpZGUgY2xpY2tcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmdW5jdGlvbiBvbkRvY0NsaWNrKGU6IE1vdXNlRXZlbnQpIHtcbiAgICAgIGlmICghbW9kZU1lbnVPcGVuKSByZXR1cm47XG4gICAgICBjb25zdCB0ID0gZS50YXJnZXQgYXMgTm9kZSB8IG51bGw7XG4gICAgICBpZiAobW9kZU1lbnVSZWYuY3VycmVudCAmJiB0ICYmICFtb2RlTWVudVJlZi5jdXJyZW50LmNvbnRhaW5zKHQpKSB7XG4gICAgICAgIHNldE1vZGVNZW51T3BlbihmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uRG9jQ2xpY2spO1xuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkRvY0NsaWNrKTtcbiAgfSwgW21vZGVNZW51T3Blbl0pO1xuXG4gIC8vIEtleWJvYXJkOiBvcGVuL2Nsb3NlIG1lbnUgYW5kIG5hdmlnYXRlIG9wdGlvbnNcbiAgY29uc3Qgb25Nb2RlQnV0dG9uS2V5RG93biA9IChlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxCdXR0b25FbGVtZW50PikgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gJ0Fycm93RG93bicgfHwgZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc2V0TW9kZU1lbnVJbmRleChjbGllbnRNb2RlID09PSAnY2hhdCcgPyAwIDogMSk7XG4gICAgICBzZXRNb2RlTWVudU9wZW4odHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHNldE1vZGVNZW51T3BlbihmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uTWVudUtleURvd24gPSAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzZXRNb2RlTWVudUluZGV4KChpKSA9PiAoaSArIDEpICUgMik7XG4gICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93VXAnKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzZXRNb2RlTWVudUluZGV4KChpKSA9PiAoaSArIDEgKyAyKSAlIDIpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChtb2RlTWVudUluZGV4ID09PSAwKSBzZXRDbGllbnRNb2RlKCdjaGF0Jyk7XG4gICAgICBlbHNlIHNldENsaWVudE1vZGUoJ2FjdGlvbicpO1xuICAgICAgc2V0TW9kZU1lbnVPcGVuKGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgc2V0TW9kZU1lbnVPcGVuKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2hvcnRjdXQ6IEN0cmwrTCBmb2N1c2VzIGlucHV0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZnVuY3Rpb24gb25LZXkoZTogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiAoZS5rZXkgPT09ICdsJyB8fCBlLmtleSA9PT0gJ0wnKSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlucHV0UmVmLmN1cnJlbnQ/LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXkpO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5KTtcbiAgfSwgW10pO1xuXG4gIC8vIEZvY3VzIG1lbnUgY29udGFpbmVyIHdoZW4gb3BlbmVkIGZvciBrZXlib2FyZCBuYXZcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobW9kZU1lbnVPcGVuKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IG1vZGVNZW51TGlzdFJlZi5jdXJyZW50Py5mb2N1cygpLCAwKTtcbiAgICB9XG4gIH0sIFttb2RlTWVudU9wZW5dKTtcblxuICBjb25zdCBzZW5kID0gdXNlQ2FsbGJhY2soYXN5bmMgKG9wdHM/OiB7IHJlZ2VuZXJhdGVQYW5lbElkPzogc3RyaW5nOyBtZXNzYWdlT3ZlcnJpZGU/OiBzdHJpbmcgfSkgPT4ge1xuICAgIGNvbnN0IHRleHQgPSAob3B0cz8ubWVzc2FnZU92ZXJyaWRlID8/IGlucHV0KS50cmltKCk7XG4gICAgaWYgKCF0ZXh0ICYmICFvcHRzPy5yZWdlbmVyYXRlUGFuZWxJZCkge1xuICAgICAgc2V0SW5wdXRFcnJvcignUHJvbXB0IGlzIGVtcHR5LiBUcnkgc29tZXRoaW5nIGxpa2U6IFwiV3JpdGUgdGhlIG9wZW5pbmcgc2NlbmUgb2YgYSBkYXJrIGZhbnRhc3kuXCInKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0SW5wdXRFcnJvcihudWxsKTtcblxuICAgIGNvbnN0IHsgZGF0YTogeyBzZXNzaW9uIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0U2Vzc2lvbigpO1xuICAgIGNvbnN0IHRva2VuID0gc2Vzc2lvbj8uYWNjZXNzX3Rva2VuO1xuICAgIGlmICghdG9rZW4pIHJldHVybjtcblxuICAgIGNvbnN0IHVzZXJNZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiB0ZXh0LCBwYW5lbElkOiBvcHRzPy5yZWdlbmVyYXRlUGFuZWxJZCB8fCBudWxsIH07XG4gICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB1c2VyTWVzc2FnZV0pO1xuICAgIHNldElucHV0KCcnKTtcbiAgICBzZXRTdHJlYW1pbmcodHJ1ZSk7XG5cbiAgICAvLyBNZW50aW9ucyBwYXJzaW5nOiBAY2hhcHRlcjxudW1iZXI+IG9yIEBcImV4YWN0IHRpdGxlXCJcbiAgICBjb25zdCBtTnVtID0gL0BjaGFwdGVyXFxzKihbMC05XSspL2kuZXhlYyh0ZXh0KSB8fCAvQGNoYXB0ZXJfPyhbMC05XSspL2kuZXhlYyh0ZXh0KTtcbiAgICBjb25zdCBtVGl0bGUgPSAvQFwiKFteXCJdKylcIi8uZXhlYyh0ZXh0KTtcbiAgICBjb25zdCBtZW50aW9uczogYW55ID0ge307XG4gICAgaWYgKG1OdW0/LlsxXSkgbWVudGlvbnMuY2hhcHRlcl9udW1iZXIgPSBwYXJzZUludChtTnVtWzFdLCAxMCk7XG4gICAgaWYgKG1UaXRsZT8uWzFdKSBtZW50aW9ucy50aXRsZSA9IG1UaXRsZVsxXTtcblxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2FwaUJhc2V9L2FwaS9jaGF0LyR7Y2hhdElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogdXNlck1lc3NhZ2UuY29udGVudCwgcmVnZW5lcmF0ZVBhbmVsSWQ6IG9wdHM/LnJlZ2VuZXJhdGVQYW5lbElkIHx8IHVuZGVmaW5lZCwgY2xpZW50TW9kZSwgbWVudGlvbnMgfSksXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlcy5ib2R5KSB7XG4gICAgICBzZXRTdHJlYW1pbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFB1c2ggZW1wdHkgYXNzaXN0YW50IG1lc3NhZ2UgdG8gc3RyZWFtIGludG9cbiAgICBsZXQgYXNzaXN0YW50SW5kZXggPSAtMTtcbiAgICBzZXRNZXNzYWdlcygocHJldikgPT4ge1xuICAgICAgYXNzaXN0YW50SW5kZXggPSBwcmV2Lmxlbmd0aDtcbiAgICAgIHJldHVybiBbLi4ucHJldiwgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJycgfV07XG4gICAgfSk7XG5cbiAgICBjb25zdCByZWFkZXIgPSByZXMuYm9keS5nZXRSZWFkZXIoKTtcbiAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG5cbiAgICB0cnkge1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xuICAgICAgICBjb25zdCBjaHVuayA9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KTtcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGNodW5rLnNwbGl0KCdcXG4nKSkge1xuICAgICAgICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcbiAgICAgICAgICBpZiAoIXRyaW1tZWQuc3RhcnRzV2l0aCgnZGF0YTonKSkgY29udGludWU7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHRyaW1tZWQuc2xpY2UoNSkudHJpbSgpO1xuICAgICAgICAgIGlmICghZGF0YSkgY29udGludWU7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGV2dCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICd0ZXh0JyAmJiBldnQuY29udGVudCkge1xuICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvcHkgPSBbLi4ucHJldl07XG4gICAgICAgICAgICAgICAgY29uc3QgbXNnID0gY29weVthc3Npc3RhbnRJbmRleF07XG4gICAgICAgICAgICAgICAgY29weVthc3Npc3RhbnRJbmRleF0gPSB7IC4uLm1zZywgY29udGVudDogKG1zZz8uY29udGVudCB8fCAnJykgKyBldnQuY29udGVudCB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBjb3B5O1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LmFjdGlvbiA9PT0gJ2NyZWF0ZV9jaGFwdGVyJykge1xuICAgICAgICAgICAgICBpZiAoY2hhdFR5cGUgIT09ICdwbG90JykgeyAvKiBvdXQtb2Ytc2NvcGU7IGlnbm9yZSAqLyB9XG4gICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd3b3Jrc3BhY2U6Y3JlYXRlLWRyYWZ0JywgeyBkZXRhaWw6IHsgdGl0bGU6IGV2dC50aXRsZSB8fCAnVW50aXRsZWQgQ2hhcHRlcicsIGNvbnRlbnQ6IGV2dC5jb250ZW50IHx8ICcnIH0gfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICdjb25maXJtX21vZGUnICYmIGV2dC5tb2RlKSB7XG4gICAgICAgICAgICAgIHNldFBlbmRpbmdNb2RlKGV2dC5tb2RlKTtcbiAgICAgICAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiBgUGVuZGluZyBtb2RlIGNoYW5nZSB0byBcIiR7ZXZ0Lm1vZGV9XCIuIENvbmZpcm0/YCB9XSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICdjb25maXJtX3NldHRpbmdzJyAmJiBldnQuY2hhbmdlcykge1xuICAgICAgICAgICAgICBpZiAoY2xpZW50TW9kZSA9PT0gJ2FjdGlvbicgJiYgY2hhdFR5cGUgPT09ICdwbG90Jykge1xuICAgICAgICAgICAgICAgIHNldFBlbmRpbmdTZXR0aW5ncyhldnQuY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnUGVuZGluZyBzZXR0aW5ncyB1cGRhdGUgZGV0ZWN0ZWQuIENvbmZpcm0gdG8gYXBwbHkgY2hhbmdlcy4nIH1dKTtcbiAgICAgICAgICAgICAgfSAvLyBpZ25vcmUgaW4gQ2hhdCBtb2RlIGZvciBzYWZldHlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdpbWFnZV9qb2InKSB7XG4gICAgICAgICAgICAgIC8vIE9wdGlvbmFsbHkgcmVmbGVjdCBqb2IgcXVldWVkIHN0YXRlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICdjb252ZXJ0X3RvX21hbmh3YScpIHtcbiAgICAgICAgICAgICAgaWYgKGNoYXRUeXBlICE9PSAncGxvdCcpIHsgLyogb3V0LW9mLXNjb3BlOyBpZ25vcmUgKi8gfVxuICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd29ya3NwYWNlOmNyZWF0ZS1kcmFmdCcsIHsgZGV0YWlsOiB7IHRpdGxlOiAnQ29udmVydGVkIFBhbmVscycsIHBhbmVsX3NjcmlwdDogZXZ0LnBhbmVsX3NjcmlwdCB9IH0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQuYWN0aW9uID09PSAndXBkYXRlX2NoYXB0ZXInKSB7XG4gICAgICAgICAgICAgIGlmIChjaGF0VHlwZSAhPT0gJ3Bsb3QnKSB7IC8qIG91dC1vZi1zY29wZTsgaWdub3JlICovIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3dvcmtzcGFjZTp1cGRhdGUtY2hhcHRlcicsIHsgZGV0YWlsOiB7IGlkOiBldnQuaWQsIGNoYXB0ZXJfbnVtYmVyOiBldnQuY2hhcHRlcl9udW1iZXIsIHRpdGxlOiBldnQudGl0bGUsIGNvbnRlbnQ6IGV2dC5jb250ZW50IH0gfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5hY3Rpb24gPT09ICd1cHNlcnRfY2hhcmFjdGVyJyAmJiBldnQuaXRlbSkge1xuICAgICAgICAgICAgICBpZiAoY2hhdFR5cGUgIT09ICdjaGFyYWN0ZXInKSB7IC8qIG91dC1vZi1zY29wZTsgaWdub3JlICovIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3dvcmtzcGFjZTpjaGFyYWN0ZXItdXBzZXJ0JywgeyBkZXRhaWw6IHsgaXRlbTogZXZ0Lml0ZW0gfSB9KSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LmFjdGlvbiA9PT0gJ3Vwc2VydF93b3JsZCcgJiYgZXZ0Lml0ZW0pIHtcbiAgICAgICAgICAgICAgaWYgKGNoYXRUeXBlICE9PSAnd29ybGQnKSB7IC8qIG91dC1vZi1zY29wZTsgaWdub3JlICovIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3dvcmtzcGFjZTp3b3JsZC11cHNlcnQnLCB7IGRldGFpbDogeyBpdGVtOiBldnQuaXRlbSB9IH0pKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAvLyBBcHBlbmQgZXJyb3IgdG8gY29udmVyc2F0aW9uXG4gICAgICAgICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbLi4ucHJldiwgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogYEVycm9yOiAke2V2dC5tZXNzYWdlfWAgfV0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ2RvbmUnKSB7XG4gICAgICAgICAgICAgIHNldFN0cmVhbWluZyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAvLyBpZ25vcmUgcGFydGlhbCBqc29uIGxpbmVzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFN0cmVhbWluZyhmYWxzZSk7XG4gICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICB9XG4gIH0sIFthcGlCYXNlLCBpbnB1dCwgY2hhdElkLCBzdXBhYmFzZSwgY2xpZW50TW9kZSwgY2hhdFR5cGVdKTtcblxuICBjb25zdCBvblJlZ2VuZXJhdGUgPSB1c2VDYWxsYmFjaygocGFuZWxJZDogc3RyaW5nKSA9PiB7XG4gICAgdm9pZCBzZW5kKHsgcmVnZW5lcmF0ZVBhbmVsSWQ6IHBhbmVsSWQgfSk7XG4gIH0sIFtzZW5kXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8RG5kUHJvdmlkZXIgYmFja2VuZD17SFRNTDVCYWNrZW5kfT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGZsZXggZmxleC1jb2wgYmctYmctZWxldmF0ZWRcIj5cbiAgICAgICAgey8qIE1lc3NhZ2VzIEFyZWEgd2l0aCBTY3JvbGxiYXIgKi99XG4gICAgICAgIDxkaXYgcmVmPXtsaXN0UmVmfSBjbGFzc05hbWU9XCJmbGV4LTEgbWluLWgtMCBvdmVyZmxvdy15LWF1dG8gc3BhY2UteS00IHAtNFwiPlxuICAgICAgICAgIHtsb2FkaW5nSGlzdG9yeSAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC10ZXh0LXNlY29uZGFyeVwiPkxvYWRpbmcgcHJldmlvdXMgbWVzc2FnZXPigKY8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHttZXNzYWdlcy5tYXAoKG0sIGkpID0+IChcbiAgICAgICAgICAgIDxDaGF0QnViYmxlXG4gICAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgICAgcm9sZT17bS5yb2xlfVxuICAgICAgICAgICAgICBjb250ZW50PXttLmNvbnRlbnR9XG4gICAgICAgICAgICAgIHBhbmVsSWQ9e20ucGFuZWxJZH1cbiAgICAgICAgICAgICAgb25SZWdlbmVyYXRlPXtvblJlZ2VuZXJhdGV9XG4gICAgICAgICAgICAgIGRyYWdnYWJsZT17Qm9vbGVhbihtLnBhbmVsSWQpfVxuICAgICAgICAgICAgLz4pXG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c3RyZWFtaW5nICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXRleHQtc2Vjb25kYXJ5IGFuaW1hdGUtcHVsc2VcIj5BSSBpcyB0eXBpbmfigKY8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAge3RvYXN0TXNnICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCB0b3AtMyByaWdodC0zIHotNTBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTMgcHktMiByb3VuZGVkIGJnLXNsYXRlLTk1MC85MCBib3JkZXIgYm9yZGVyLXNsYXRlLTgwMCB0ZXh0LXNsYXRlLTEwMCB0ZXh0LXNtIHNoYWRvdy1sZ1wiPlxuICAgICAgICAgICAge3RvYXN0TXNnfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICAgIFxuICAgICAgICB7KHBlbmRpbmdNb2RlIHx8IHBlbmRpbmdTZXR0aW5ncykgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLXQgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHAtMyBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gZ2FwLTMgYmctYmctcHJpbWFyeVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtdGV4dC1wcmltYXJ5XCI+XG4gICAgICAgICAgICAgIHtwZW5kaW5nTW9kZSAmJiBgQ29uZmlybSBtb2RlIGNoYW5nZSB0byBcIiR7cGVuZGluZ01vZGV9XCI/YH1cbiAgICAgICAgICAgICAge3BlbmRpbmdTZXR0aW5ncyAmJiAhcGVuZGluZ01vZGUgJiYgJ0NvbmZpcm0gYXBwbHlpbmcgcGVuZGluZyBzZXR0aW5ncyBjaGFuZ2VzPyd9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTMgcHktMS41IHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOmJnLWJnLWhvdmVyIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBzZXRQZW5kaW5nTW9kZShudWxsKTsgc2V0UGVuZGluZ1NldHRpbmdzKG51bGwpOyB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0xLjUgcm91bmRlZC1tZCBiZy1hY2NlbnQgaG92ZXI6YmctYWNjZW50LWhvdmVyIHRleHQtd2hpdGUgZGlzYWJsZWQ6b3BhY2l0eS01MCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtzYXZpbmcgfHwgY2xpZW50TW9kZSAhPT0gJ2FjdGlvbid9XG4gICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0U2F2aW5nKHRydWUpO1xuICAgICAgICAgICAgICAgICAgc2V0U2F2ZUVycm9yKG51bGwpO1xuICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gUGVyc2lzdCBtb2RlIHZpYSBzZXR0aW5ncyBlbmRwb2ludFxuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwaS51cGRhdGVQcm9qZWN0U2V0dGluZ3MocHJvamVjdElkLCB7IG1vZGU6IHBlbmRpbmdNb2RlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdwcm9qZWN0Om1vZGUtdXBkYXRlZCcsIHsgZGV0YWlsOiB7IG1vZGU6IHBlbmRpbmdNb2RlIH0gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IGBNb2RlIHVwZGF0ZWQgdG8gJHtwZW5kaW5nTW9kZX0uYCB9XSk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0UGVuZGluZ01vZGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHRvYXN0VGltZXIuY3VycmVudCkgY2xlYXJUaW1lb3V0KHRvYXN0VGltZXIuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0VG9hc3RNc2coJ01vZGUgc2F2ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdFRpbWVyLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHNldFRvYXN0TXNnKCcnKSwgMzAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVuZGluZ1NldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gUGVyc2lzdCBmdWxsIHNldHRpbmdzIHBheWxvYWQgaW5jbHVkaW5nIHRpdGxlL2Rlc2NyaXB0aW9uL2NvdmVySW1hZ2UvZ2VucmUvY29yZUNvbmZsaWN0L21vZGUvc2V0dGluZ3NKc29uXG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBpLnVwZGF0ZVByb2plY3RTZXR0aW5ncyhwcm9qZWN0SWQsIHBlbmRpbmdTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3Byb2plY3Q6c2V0dGluZ3MtdXBkYXRlZCcsIHsgZGV0YWlsOiB7IGNoYW5nZXM6IHBlbmRpbmdTZXR0aW5ncyB9IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnU2V0dGluZ3MgdXBkYXRlZC4nIH1dKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRQZW5kaW5nU2V0dGluZ3MobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gVG9hc3QgZnJvbSBjaGF0IGNvbmZpcm1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAodG9hc3RUaW1lci5jdXJyZW50KSBjbGVhclRpbWVvdXQodG9hc3RUaW1lci5jdXJyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRUb2FzdE1zZygnU2V0dGluZ3Mgc2F2ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdFRpbWVyLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHNldFRvYXN0TXNnKCcnKSwgMzAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRTYXZlRXJyb3IoZT8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHNhdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IFsuLi5wcmV2LCB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiBgRXJyb3IgcGVyc2lzdGluZyBjaGFuZ2VzOiAke2U/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBzYXZlJ31gIH1dKTtcbiAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNhdmluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIENvbmZpcm1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIHtjbGllbnRNb2RlICE9PSAnYWN0aW9uJyAmJiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bMTFweF0gdGV4dC10ZXh0LXRlcnRpYXJ5XCI+U3dpdGNoIHRvIEFjdGlvbiBtb2RlIHRvIGFwcGx5PC9zcGFuPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIHsvKiBJbnB1dCBBcmVhIC0gRml4ZWQgYXQgQm90dG9tICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci10IGJvcmRlci1ib3JkZXItZGVmYXVsdCBwLTMgYmctYmctcHJpbWFyeVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMyBpdGVtcy1lbmRcIj5cbiAgICAgICAgICAgIHsvKiBJbnB1dCBGaWVsZCB3aXRoIEludGVncmF0ZWQgU2VuZCBCdXR0b24gYW5kIE1vZGUgU2VsZWN0b3IgaW5zaWRlICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgcmVmPXtpbnB1dFJlZn1cbiAgICAgICAgICAgICAgICB2YWx1ZT17aW5wdXR9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRJbnB1dChlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDaGF0IHdpdGggQ2FzY2FkZVwiXG4gICAgICAgICAgICAgICAgcm93cz17Mn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctYmctZWxldmF0ZWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLTJ4bCBwbC0xMiBwci0xMiBwdC0yIHBiLTE2IHRleHQtdGV4dC1wcmltYXJ5IHBsYWNlaG9sZGVyOnRleHQtdGV4dC10ZXJ0aWFyeSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudCByZXNpemUtbm9uZSBtaW4taC1bODBweF0gbWF4LWgtNzIgb3ZlcmZsb3cteS1hdXRvIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgb25LZXlEb3duPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCBzZW5kKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgey8qIE1vZGUgU2VsZWN0b3IgaW5zaWRlIGlucHV0IGJvdHRvbS1sZWZ0ICovfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGxlZnQtMiBib3R0b20tMlwiIHJlZj17bW9kZU1lbnVSZWZ9PlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdGV4dC14cyBweC0zIHB5LTIgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0ICR7Y2xpZW50TW9kZT09PSdjaGF0JyA/ICd0ZXh0LXN1Y2Nlc3MnIDogJ3RleHQtYWNjZW50J30gYmctYmctZWxldmF0ZWQgaG92ZXI6YmctYmctaG92ZXIgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwYH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHsgc2V0TW9kZU1lbnVJbmRleChjbGllbnRNb2RlPT09J2NoYXQnID8gMCA6IDEpOyBzZXRNb2RlTWVudU9wZW4oKHYpID0+ICF2KTsgfX1cbiAgICAgICAgICAgICAgICAgIGFyaWEtaGFzcG9wdXA9XCJtZW51XCJcbiAgICAgICAgICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9e21vZGVNZW51T3Blbn1cbiAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17b25Nb2RlQnV0dG9uS2V5RG93bn1cbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiTW9kZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2NsaWVudE1vZGUgPT09ICdjaGF0JyA/ICdDaGF0JyA6ICdBY3Rpb24nfVxuICAgICAgICAgICAgICAgICAgPENoZXZyb25Eb3duIGNsYXNzTmFtZT1cInctMyBoLTNcIiAvPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIHttb2RlTWVudU9wZW4gJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBib3R0b20tZnVsbCBtYi0yIGxlZnQtMCB3LTY0IHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCBiZy1iZy1lbGV2YXRlZCBzaGFkb3ctZWxldmF0aW9uIHAtMS41IHRleHQteHMgdGV4dC10ZXh0LXByaW1hcnkgei0yMFwiXG4gICAgICAgICAgICAgICAgICAgIHJvbGU9XCJtZW51XCJcbiAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9ey0xfVxuICAgICAgICAgICAgICAgICAgICByZWY9e21vZGVNZW51TGlzdFJlZn1cbiAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXtvbk1lbnVLZXlEb3dufVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIuNSByb3VuZGVkLW1kIGhvdmVyOmJnLWJnLWhvdmVyIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MCAke21vZGVNZW51SW5kZXg9PT0wID8gJ3JpbmctMSByaW5nLWFjY2VudCcgOiAnJ30gJHtjbGllbnRNb2RlPT09J2NoYXQnID8gJ2JnLWJnLWhvdmVyJyA6ICcnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBzZXRDbGllbnRNb2RlKCdjaGF0Jyk7IHNldE1vZGVNZW51T3BlbihmYWxzZSk7IH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC10ZXh0LXByaW1hcnlcIj5DaGF0PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXRleHQtdGVydGlhcnkgdGV4dC1bMTFweF0gbXQtMC41XCI+QnJhaW5zdG9ybSwgb3V0bGluZSwgcHJldmlldy4gTm8gd3JpdGVzLjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yLjUgcm91bmRlZC1tZCBob3ZlcjpiZy1iZy1ob3ZlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTAgbXQtMSAke21vZGVNZW51SW5kZXg9PT0xID8gJ3JpbmctMSByaW5nLWFjY2VudCcgOiAnJ30gJHtjbGllbnRNb2RlPT09J2FjdGlvbicgPyAnYmctYmctaG92ZXInIDogJyd9YH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IHNldENsaWVudE1vZGUoJ2FjdGlvbicpOyBzZXRNb2RlTWVudU9wZW4oZmFsc2UpOyB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtdGV4dC1wcmltYXJ5XCI+QWN0aW9uPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXRleHQtdGVydGlhcnkgdGV4dC1bMTFweF0gbXQtMC41XCI+RW5hYmxlIHNhdmluZyBzZXR0aW5ncyBhbmQgY2hhcHRlcnMuPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB2b2lkIHNlbmQoKX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17c3RyZWFtaW5nIHx8ICFpbnB1dC50cmltKCl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgcmlnaHQtMiBib3R0b20tMiBiZy1hY2NlbnQgaG92ZXI6YmctYWNjZW50LWhvdmVyIGRpc2FibGVkOm9wYWNpdHktNDAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIHRleHQtd2hpdGUgdy04IGgtOCByb3VuZGVkLWxnIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgICAgIHRpdGxlPVwiU2VuZFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8QXJyb3dVcFJpZ2h0IGNsYXNzTmFtZT1cInctNCBoLTRcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNyLW9ubHlcIj5TZW5kPC9zcGFuPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtpbnB1dEVycm9yICYmIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LXhzIHRleHQtcmVkLTQwMCBwLTIgcm91bmRlZC1sZyBiZy1yZWQtOTUwLzIwIGJvcmRlciBib3JkZXItcmVkLTUwMC8yMFwiPntpbnB1dEVycm9yfTwvZGl2Pn1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIGRyYWZ0cyBhcmUgcm91dGVkIHRvIGNlbnRlciBlZGl0b3IgdmlhIHdvcmtzcGFjZTpjcmVhdGUtZHJhZnQgKi99XG4gICAgPC9EbmRQcm92aWRlcj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZU1lbW8iLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsIkRuZFByb3ZpZGVyIiwiSFRNTDVCYWNrZW5kIiwidXNlU3VwYWJhc2UiLCJDaGF0QnViYmxlIiwiY3JlYXRlQXBpIiwiQXJyb3dVcFJpZ2h0IiwiQ2hldnJvbkRvd24iLCJDaGF0IiwiY2hhdElkIiwicHJvamVjdElkIiwiY2hhdFR5cGUiLCJpbml0aWFsTWVzc2FnZXMiLCJzdXBhYmFzZSIsImFwaSIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJpbnB1dCIsInNldElucHV0Iiwic3RyZWFtaW5nIiwic2V0U3RyZWFtaW5nIiwiaW5wdXRFcnJvciIsInNldElucHV0RXJyb3IiLCJsaXN0UmVmIiwiaW5wdXRSZWYiLCJtb2RlTWVudVJlZiIsIm1vZGVNZW51TGlzdFJlZiIsInNhdmluZyIsInNldFNhdmluZyIsInNhdmVFcnJvciIsInNldFNhdmVFcnJvciIsInBlbmRpbmdNb2RlIiwic2V0UGVuZGluZ01vZGUiLCJwZW5kaW5nU2V0dGluZ3MiLCJzZXRQZW5kaW5nU2V0dGluZ3MiLCJ0b2FzdE1zZyIsInNldFRvYXN0TXNnIiwidG9hc3RUaW1lciIsImFwaUJhc2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsImxvYWRpbmdIaXN0b3J5Iiwic2V0TG9hZGluZ0hpc3RvcnkiLCJjbGllbnRNb2RlIiwic2V0Q2xpZW50TW9kZSIsIm1vZGVNZW51T3BlbiIsInNldE1vZGVNZW51T3BlbiIsIm1vZGVNZW51SW5kZXgiLCJzZXRNb2RlTWVudUluZGV4IiwiY2FjaGVLZXkiLCJoYXNDYWNoZSIsInNldEhhc0NhY2hlIiwibWVzc2FnZXNSZWYiLCJjdXJyZW50Iiwic2Nyb2xsVG8iLCJ0b3AiLCJzY3JvbGxIZWlnaHQiLCJiZWhhdmlvciIsImxlbmd0aCIsInMiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYXJyIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwibW91bnRlZCIsImhpc3RvcnkiLCJnZXRDaGF0TWVzc2FnZXNCeUNoYXRJZCIsIm5leHQiLCJzdHJpbmdpZnkiLCJzZXRJdGVtIiwiZWwiLCJzdHlsZSIsImhlaWdodCIsIm1heCIsIk1hdGgiLCJtaW4iLCJvbkRvY0NsaWNrIiwiZSIsInQiLCJ0YXJnZXQiLCJjb250YWlucyIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvbk1vZGVCdXR0b25LZXlEb3duIiwia2V5IiwicHJldmVudERlZmF1bHQiLCJvbk1lbnVLZXlEb3duIiwiaSIsIm9uS2V5IiwiY3RybEtleSIsIm1ldGFLZXkiLCJmb2N1cyIsInNldFRpbWVvdXQiLCJzZW5kIiwib3B0cyIsInRleHQiLCJtZXNzYWdlT3ZlcnJpZGUiLCJ0cmltIiwicmVnZW5lcmF0ZVBhbmVsSWQiLCJkYXRhIiwic2Vzc2lvbiIsImF1dGgiLCJnZXRTZXNzaW9uIiwidG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJ1c2VyTWVzc2FnZSIsInJvbGUiLCJjb250ZW50IiwicGFuZWxJZCIsInByZXYiLCJtTnVtIiwiZXhlYyIsIm1UaXRsZSIsIm1lbnRpb25zIiwiY2hhcHRlcl9udW1iZXIiLCJwYXJzZUludCIsInRpdGxlIiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJhc3Npc3RhbnRJbmRleCIsInJlYWRlciIsImdldFJlYWRlciIsImRlY29kZXIiLCJUZXh0RGVjb2RlciIsInZhbHVlIiwiZG9uZSIsInJlYWQiLCJjaHVuayIsImRlY29kZSIsInN0cmVhbSIsImxpbmUiLCJzcGxpdCIsInRyaW1tZWQiLCJzdGFydHNXaXRoIiwic2xpY2UiLCJldnQiLCJ0eXBlIiwiY29weSIsIm1zZyIsImFjdGlvbiIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsIm1vZGUiLCJjaGFuZ2VzIiwicGFuZWxfc2NyaXB0IiwiaWQiLCJpdGVtIiwicmVsZWFzZUxvY2siLCJvblJlZ2VuZXJhdGUiLCJiYWNrZW5kIiwiZGl2IiwiY2xhc3NOYW1lIiwicmVmIiwibWFwIiwibSIsImRyYWdnYWJsZSIsIkJvb2xlYW4iLCJidXR0b24iLCJvbkNsaWNrIiwiZGlzYWJsZWQiLCJ1cGRhdGVQcm9qZWN0U2V0dGluZ3MiLCJjbGVhclRpbWVvdXQiLCJzcGFuIiwidGV4dGFyZWEiLCJvbkNoYW5nZSIsInBsYWNlaG9sZGVyIiwicm93cyIsIm9uS2V5RG93biIsInNoaWZ0S2V5IiwidiIsImFyaWEtaGFzcG9wdXAiLCJhcmlhLWV4cGFuZGVkIiwidGFiSW5kZXgiLCJhcmlhLWhpZGRlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/components/chat/Chat.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/chat/ChatBubble.tsx":
/*!********************************************!*\
  !*** ./src/components/chat/ChatBubble.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatBubble: () => (/* binding */ ChatBubble)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dnd */ \"(ssr)/./node_modules/react-dnd/dist/hooks/useDrag/useDrag.js\");\n/* __next_internal_client_entry_do_not_use__ ChatBubble auto */ \n\nfunction ChatBubble({ role, content, panelId, onEdit, onRegenerate, draggable }) {\n    const [{ isDragging }, drag] = (0,react_dnd__WEBPACK_IMPORTED_MODULE_1__.useDrag)(()=>({\n            type: \"PANEL\",\n            item: {\n                panelId\n            },\n            canDrag: ()=>Boolean(draggable && panelId),\n            collect: (monitor)=>({\n                    isDragging: monitor.isDragging()\n                })\n        }), [\n        panelId,\n        draggable\n    ]);\n    const isUser = role === \"user\";\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: draggable ? drag : undefined,\n        className: `group max-w-3xl ${isUser ? \"ml-auto\" : \"\"} ${isDragging ? \"opacity-60\" : \"\"}`,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: `rounded-2xl px-4 py-3 whitespace-pre-wrap shadow-sm border ${isUser ? \"bg-accent border-accent text-white\" : \"bg-bg-primary border-border-default text-text-primary\"}`,\n                children: content\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/ChatBubble.tsx\",\n                lineNumber: 30,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 mt-1\",\n                children: [\n                    onEdit && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: onEdit,\n                        className: \"text-xs text-text-tertiary hover:text-text-primary transition-colors duration-150\",\n                        children: \"Edit\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/ChatBubble.tsx\",\n                        lineNumber: 35,\n                        columnNumber: 11\n                    }, this),\n                    panelId && onRegenerate && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>onRegenerate(panelId),\n                        className: \"text-xs text-text-tertiary hover:text-text-primary transition-colors duration-150\",\n                        children: \"Regenerate Panel\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/ChatBubble.tsx\",\n                        lineNumber: 38,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/chat/ChatBubble.tsx\",\n                lineNumber: 33,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/chat/ChatBubble.tsx\",\n        lineNumber: 26,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9jaGF0L0NoYXRCdWJibGUudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBRW9DO0FBWTdCLFNBQVNDLFdBQVcsRUFBRUMsSUFBSSxFQUFFQyxPQUFPLEVBQUVDLE9BQU8sRUFBRUMsTUFBTSxFQUFFQyxZQUFZLEVBQUVDLFNBQVMsRUFBbUI7SUFDckcsTUFBTSxDQUFDLEVBQUVDLFVBQVUsRUFBRSxFQUFFQyxLQUFLLEdBQUdULGtEQUFPQSxDQUFDLElBQU87WUFDNUNVLE1BQU07WUFDTkMsTUFBTTtnQkFBRVA7WUFBUTtZQUNoQlEsU0FBUyxJQUFNQyxRQUFRTixhQUFhSDtZQUNwQ1UsU0FBUyxDQUFDQyxVQUFnQztvQkFBRVAsWUFBWU8sUUFBUVAsVUFBVTtnQkFBRztRQUMvRSxJQUFJO1FBQUNKO1FBQVNHO0tBQVU7SUFFeEIsTUFBTVMsU0FBU2QsU0FBUztJQUV4QixxQkFDRSw4REFBQ2U7UUFDQ0MsS0FBS1gsWUFBYUUsT0FBZVU7UUFDakNDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRUosU0FBUyxZQUFZLEdBQUcsQ0FBQyxFQUFFUixhQUFhLGVBQWUsR0FBRyxDQUFDOzswQkFFekYsOERBQUNTO2dCQUFJRyxXQUFXLENBQUMsMkRBQTJELEVBQUVKLFNBQVMsdUNBQXVDLHdEQUF3RCxDQUFDOzBCQUNwTGI7Ozs7OzswQkFFSCw4REFBQ2M7Z0JBQUlHLFdBQVU7O29CQUNaZix3QkFDQyw4REFBQ2dCO3dCQUFPQyxTQUFTakI7d0JBQVFlLFdBQVU7a0NBQW9GOzs7Ozs7b0JBRXhIaEIsV0FBV0UsOEJBQ1YsOERBQUNlO3dCQUFPQyxTQUFTLElBQU1oQixhQUFhRjt3QkFBVWdCLFdBQVU7a0NBQW9GOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLdEoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmt2ZXJzZS1jbGllbnQvLi9zcmMvY29tcG9uZW50cy9jaGF0L0NoYXRCdWJibGUudHN4PzM4MzMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZURyYWcgfSBmcm9tICdyZWFjdC1kbmQnO1xuaW1wb3J0IHR5cGUgeyBEcmFnU291cmNlTW9uaXRvciB9IGZyb20gJ3JlYWN0LWRuZCc7XG5cbmV4cG9ydCB0eXBlIENoYXRCdWJibGVQcm9wcyA9IHtcbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgcGFuZWxJZD86IHN0cmluZyB8IG51bGw7XG4gIG9uRWRpdD86ICgpID0+IHZvaWQ7XG4gIG9uUmVnZW5lcmF0ZT86IChwYW5lbElkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGRyYWdnYWJsZT86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gQ2hhdEJ1YmJsZSh7IHJvbGUsIGNvbnRlbnQsIHBhbmVsSWQsIG9uRWRpdCwgb25SZWdlbmVyYXRlLCBkcmFnZ2FibGUgfTogQ2hhdEJ1YmJsZVByb3BzKSB7XG4gIGNvbnN0IFt7IGlzRHJhZ2dpbmcgfSwgZHJhZ10gPSB1c2VEcmFnKCgpID0+ICh7XG4gICAgdHlwZTogJ1BBTkVMJyxcbiAgICBpdGVtOiB7IHBhbmVsSWQgfSxcbiAgICBjYW5EcmFnOiAoKSA9PiBCb29sZWFuKGRyYWdnYWJsZSAmJiBwYW5lbElkKSxcbiAgICBjb2xsZWN0OiAobW9uaXRvcjogRHJhZ1NvdXJjZU1vbml0b3IpID0+ICh7IGlzRHJhZ2dpbmc6IG1vbml0b3IuaXNEcmFnZ2luZygpIH0pLFxuICB9KSwgW3BhbmVsSWQsIGRyYWdnYWJsZV0pO1xuXG4gIGNvbnN0IGlzVXNlciA9IHJvbGUgPT09ICd1c2VyJztcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHJlZj17ZHJhZ2dhYmxlID8gKGRyYWcgYXMgYW55KSA6IHVuZGVmaW5lZH1cbiAgICAgIGNsYXNzTmFtZT17YGdyb3VwIG1heC13LTN4bCAke2lzVXNlciA/ICdtbC1hdXRvJyA6ICcnfSAke2lzRHJhZ2dpbmcgPyAnb3BhY2l0eS02MCcgOiAnJ31gfVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgcm91bmRlZC0yeGwgcHgtNCBweS0zIHdoaXRlc3BhY2UtcHJlLXdyYXAgc2hhZG93LXNtIGJvcmRlciAke2lzVXNlciA/ICdiZy1hY2NlbnQgYm9yZGVyLWFjY2VudCB0ZXh0LXdoaXRlJyA6ICdiZy1iZy1wcmltYXJ5IGJvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtcHJpbWFyeSd9YH0+XG4gICAgICAgIHtjb250ZW50fVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTIgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0xNTAgbXQtMVwiPlxuICAgICAgICB7b25FZGl0ICYmIChcbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uRWRpdH0gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnkgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwXCI+RWRpdDwvYnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICB7cGFuZWxJZCAmJiBvblJlZ2VuZXJhdGUgJiYgKFxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gb25SZWdlbmVyYXRlKHBhbmVsSWQpfSBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0xNTBcIj5SZWdlbmVyYXRlIFBhbmVsPC9idXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VEcmFnIiwiQ2hhdEJ1YmJsZSIsInJvbGUiLCJjb250ZW50IiwicGFuZWxJZCIsIm9uRWRpdCIsIm9uUmVnZW5lcmF0ZSIsImRyYWdnYWJsZSIsImlzRHJhZ2dpbmciLCJkcmFnIiwidHlwZSIsIml0ZW0iLCJjYW5EcmFnIiwiQm9vbGVhbiIsImNvbGxlY3QiLCJtb25pdG9yIiwiaXNVc2VyIiwiZGl2IiwicmVmIiwidW5kZWZpbmVkIiwiY2xhc3NOYW1lIiwiYnV0dG9uIiwib25DbGljayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/components/chat/ChatBubble.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/providers/SupabaseProvider.tsx":
/*!*******************************************************!*\
  !*** ./src/components/providers/SupabaseProvider.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SupabaseProvider: () => (/* binding */ SupabaseProvider),\n/* harmony export */   useSupabase: () => (/* binding */ useSupabase)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(ssr)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* __next_internal_client_entry_do_not_use__ SupabaseProvider,useSupabase auto */ \n\n\nconst SupabaseCtx = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nfunction SupabaseProvider({ children }) {\n    const supabase = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const url = \"https://njnutxvshieiloagkcap.supabase.co\";\n        const anon = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5qbnV0eHZzaGllaWxvYWdrY2FwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNzM5MzcsImV4cCI6MjA3Nzk0OTkzN30.yggP_-zD-4ZREQHzmkRZJCJirEbUF85WS9Z3Ih_cKR4\";\n        if (!url || !anon) {\n            if (false) {}\n        }\n        if (false) {}\n        // Fallback (should not happen in client component SSR path)\n        if (!globalThis.__supabase__) {\n            globalThis.__supabase__ = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(url || \"\", anon || \"\");\n        }\n        return globalThis.__supabase__;\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SupabaseCtx.Provider, {\n        value: supabase,\n        children: children\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/providers/SupabaseProvider.tsx\",\n        lineNumber: 35,\n        columnNumber: 10\n    }, this);\n}\nfunction useSupabase() {\n    const ctx = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(SupabaseCtx);\n    if (!ctx) throw new Error(\"SupabaseProvider is missing\");\n    return ctx;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9wcm92aWRlcnMvU3VwYWJhc2VQcm92aWRlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFMkQ7QUFDZTtBQUUxRSxNQUFNSSw0QkFBY0osb0RBQWFBLENBQXdCO0FBT2xELFNBQVNLLGlCQUFpQixFQUFFQyxRQUFRLEVBQWlDO0lBQzFFLE1BQU1DLFdBQVdMLDhDQUFPQSxDQUFDO1FBQ3ZCLE1BQU1NLE1BQU1DLDBDQUFvQztRQUNoRCxNQUFNRyxPQUFPSCxrTkFBeUM7UUFDdEQsSUFBSSxDQUFDRCxPQUFPLENBQUNJLE1BQU07WUFDakIsSUFBSSxLQUFrQixFQUFhLEVBRWxDO1FBQ0g7UUFDQSxJQUFJLEtBQWtCLEVBQWEsRUFLbEM7UUFDRCw0REFBNEQ7UUFDNUQsSUFBSSxDQUFDTSxXQUFXRCxZQUFZLEVBQUU7WUFDNUJDLFdBQVdELFlBQVksR0FBR2QsbUVBQVlBLENBQUNLLE9BQU8sSUFBSUksUUFBUTtRQUM1RDtRQUNBLE9BQU9NLFdBQVdELFlBQVk7SUFDaEMsR0FBRyxFQUFFO0lBRUwscUJBQU8sOERBQUNiLFlBQVllLFFBQVE7UUFBQ0MsT0FBT2I7a0JBQVdEOzs7Ozs7QUFDakQ7QUFFTyxTQUFTZTtJQUNkLE1BQU1DLE1BQU1yQixpREFBVUEsQ0FBQ0c7SUFDdkIsSUFBSSxDQUFDa0IsS0FBSyxNQUFNLElBQUlDLE1BQU07SUFDMUIsT0FBT0Q7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2lua3ZlcnNlLWNsaWVudC8uL3NyYy9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyLnRzeD9iZWFkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50LCB0eXBlIFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuY29uc3QgU3VwYWJhc2VDdHggPSBjcmVhdGVDb250ZXh0PFN1cGFiYXNlQ2xpZW50IHwgbnVsbD4obnVsbCk7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxuICB2YXIgX19zdXBhYmFzZV9fOiBTdXBhYmFzZUNsaWVudCB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFN1cGFiYXNlUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuICBjb25zdCBzdXBhYmFzZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbiAgICBjb25zdCBhbm9uID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XG4gICAgaWYgKCF1cmwgfHwgIWFub24pIHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1N1cGFiYXNlIGVudiBpcyBtaXNzaW5nIGluIE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCAvIE5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKCF3aW5kb3cuX19zdXBhYmFzZV9fKSB7XG4gICAgICAgIHdpbmRvdy5fX3N1cGFiYXNlX18gPSBjcmVhdGVDbGllbnQodXJsIHx8ICcnLCBhbm9uIHx8ICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3aW5kb3cuX19zdXBhYmFzZV9fO1xuICAgIH1cbiAgICAvLyBGYWxsYmFjayAoc2hvdWxkIG5vdCBoYXBwZW4gaW4gY2xpZW50IGNvbXBvbmVudCBTU1IgcGF0aClcbiAgICBpZiAoIWdsb2JhbFRoaXMuX19zdXBhYmFzZV9fKSB7XG4gICAgICBnbG9iYWxUaGlzLl9fc3VwYWJhc2VfXyA9IGNyZWF0ZUNsaWVudCh1cmwgfHwgJycsIGFub24gfHwgJycpO1xuICAgIH1cbiAgICByZXR1cm4gZ2xvYmFsVGhpcy5fX3N1cGFiYXNlX187XG4gIH0sIFtdKTtcblxuICByZXR1cm4gPFN1cGFiYXNlQ3R4LlByb3ZpZGVyIHZhbHVlPXtzdXBhYmFzZX0+e2NoaWxkcmVufTwvU3VwYWJhc2VDdHguUHJvdmlkZXI+O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU3VwYWJhc2UoKSB7XG4gIGNvbnN0IGN0eCA9IHVzZUNvbnRleHQoU3VwYWJhc2VDdHgpO1xuICBpZiAoIWN0eCkgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZVByb3ZpZGVyIGlzIG1pc3NpbmcnKTtcbiAgcmV0dXJuIGN0eDtcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZU1lbW8iLCJjcmVhdGVDbGllbnQiLCJTdXBhYmFzZUN0eCIsIlN1cGFiYXNlUHJvdmlkZXIiLCJjaGlsZHJlbiIsInN1cGFiYXNlIiwidXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsImFub24iLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJ3YXJuIiwid2luZG93IiwiX19zdXBhYmFzZV9fIiwiZ2xvYmFsVGhpcyIsIlByb3ZpZGVyIiwidmFsdWUiLCJ1c2VTdXBhYmFzZSIsImN0eCIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/providers/SupabaseProvider.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/pwa/RegisterSW.tsx":
/*!*******************************************!*\
  !*** ./src/components/pwa/RegisterSW.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RegisterSW: () => (/* binding */ RegisterSW)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ RegisterSW auto */ \nfunction RegisterSW() {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (\"serviceWorker\" in navigator) {\n            const swUrl = \"/sw.js\";\n            navigator.serviceWorker.register(swUrl).catch((err)=>console.warn(\"[PWA] SW registration failed\", err));\n        }\n    }, []);\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9wd2EvUmVnaXN0ZXJTVy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O2dFQUVrQztBQUUzQixTQUFTQztJQUNkRCxnREFBU0EsQ0FBQztRQUNSLElBQUksbUJBQW1CRSxXQUFXO1lBQ2hDLE1BQU1DLFFBQVE7WUFDZEQsVUFBVUUsYUFBYSxDQUNwQkMsUUFBUSxDQUFDRixPQUNURyxLQUFLLENBQUMsQ0FBQ0MsTUFBUUMsUUFBUUMsSUFBSSxDQUFDLGdDQUFnQ0Y7UUFDakU7SUFDRixHQUFHLEVBQUU7SUFDTCxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmt2ZXJzZS1jbGllbnQvLi9zcmMvY29tcG9uZW50cy9wd2EvUmVnaXN0ZXJTVy50c3g/MTdjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gUmVnaXN0ZXJTVygpIHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuICAgICAgY29uc3Qgc3dVcmwgPSAnL3N3LmpzJztcbiAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyXG4gICAgICAgIC5yZWdpc3Rlcihzd1VybClcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUud2FybignW1BXQV0gU1cgcmVnaXN0cmF0aW9uIGZhaWxlZCcsIGVycikpO1xuICAgIH1cbiAgfSwgW10pO1xuICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJSZWdpc3RlclNXIiwibmF2aWdhdG9yIiwic3dVcmwiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJ3YXJuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/pwa/RegisterSW.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/workspace/CharacterManager.tsx":
/*!*******************************************************!*\
  !*** ./src/components/workspace/CharacterManager.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CharacterManager: () => (/* binding */ CharacterManager)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(ssr)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/api */ \"(ssr)/./src/lib/api.ts\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/plus.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/upload.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* __next_internal_client_entry_do_not_use__ CharacterManager auto */ \n\n\n\n\nfunction classNames(...xs) {\n    return xs.filter(Boolean).join(\" \");\n}\nfunction setByPath(base, path, value) {\n    const root = base && typeof base === \"object\" ? {\n        ...base\n    } : {};\n    let curr = root;\n    for(let i = 0; i < path.length - 1; i++){\n        const k = path[i];\n        if (!curr[k] || typeof curr[k] !== \"object\") curr[k] = {};\n        curr = curr[k];\n    }\n    curr[path[path.length - 1]] = value;\n    return root;\n}\nfunction delByPath(base, path) {\n    const root = base && typeof base === \"object\" ? {\n        ...base\n    } : {};\n    let curr = root;\n    for(let i = 0; i < path.length - 1; i++){\n        const k = path[i];\n        if (!curr[k] || typeof curr[k] !== \"object\") return root;\n        curr = curr[k];\n    }\n    delete curr[path[path.length - 1]];\n    return root;\n}\nfunction toNestedFromTags(tags) {\n    let obj = {};\n    for (const t of tags){\n        const parts = t.key.split(\".\").map((s)=>s.trim()).filter(Boolean);\n        if (!parts.length) continue;\n        obj = setByPath(obj, parts, t.value);\n    }\n    return obj;\n}\nfunction CharacterManager({ projectId, requireImage }) {\n    const supabase = (0,_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase)();\n    const api = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>(0,_lib_api__WEBPACK_IMPORTED_MODULE_3__.createApi)(supabase), [\n        supabase\n    ]);\n    const [items, setItems] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [filter, setFilter] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [activeId, setActiveId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [deleting, setDeleting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [toast, setToast] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const toastTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [form, setForm] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        name: \"\",\n        images: []\n    });\n    const [traits, setTraits] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [uploading, setUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const dropRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_characters`, [\n        projectId\n    ]);\n    const activeKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_characters_active`, [\n        projectId\n    ]);\n    const [hasCache, setHasCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const itemsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(items);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const s =  false ? 0 : null;\n            if (s) {\n                const arr = JSON.parse(s);\n                if (Array.isArray(arr)) {\n                    setItems(arr);\n                    const valid = arr.length > 0;\n                    setHasCache(valid);\n                    if (valid) setLoading(false);\n                }\n            }\n        } catch  {}\n    }, [\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasCache) {\n                return;\n            }\n            try {\n                if (!hasCache) setLoading(true);\n                const res = await api.listCharacters(projectId);\n                if (!mounted) return;\n                const next = res || [];\n                try {\n                    if (hasCache && JSON.stringify(next) === JSON.stringify(itemsRef.current)) {\n                        return;\n                    }\n                } catch  {}\n                setItems(next);\n            } catch (e) {\n                if (!mounted) return;\n                setError(e?.message || \"Failed to load characters\");\n            } finally{\n                if (mounted) setLoading(false);\n            }\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        projectId,\n        hasCache\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        items,\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        itemsRef.current = items;\n    }, [\n        items\n    ]);\n    // Restore last active selection\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const v =  false ? 0 : null;\n            if (v) setActiveId(v);\n        } catch  {}\n    }, [\n        activeKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (activeId && \"undefined\" !== \"undefined\") {}\n        } catch  {}\n    }, [\n        activeId,\n        activeKey\n    ]);\n    // Reflect chat-driven upserts instantly\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onUpsert(ev) {\n            const ce = ev;\n            const item = ce?.detail?.item;\n            if (!item || !item.id) return;\n            setItems((prev)=>{\n                const idx = prev.findIndex((x)=>x.id === item.id);\n                if (idx >= 0) {\n                    const next = [\n                        ...prev\n                    ];\n                    next[idx] = {\n                        ...next[idx],\n                        ...item\n                    };\n                    return next;\n                }\n                return [\n                    ...prev,\n                    item\n                ];\n            });\n            if (activeId === item.id) {\n                setForm({\n                    id: item.id,\n                    name: item.name,\n                    role: item.role || \"\",\n                    summary: item.summary || \"\",\n                    images: item.images ?? (item.imageUrl ? [\n                        item.imageUrl\n                    ] : []),\n                    traits: item.traits || null\n                });\n                setTraits(item.traits || {});\n            }\n            notify(\"Character updated via chat\");\n        }\n        window.addEventListener(\"workspace:character-upsert\", onUpsert);\n        return ()=>window.removeEventListener(\"workspace:character-upsert\", onUpsert);\n    }, [\n        activeId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeId) return;\n        if (activeId === \"__new__\") {\n            setForm({\n                name: \"\",\n                images: []\n            });\n            setTraits({});\n            return;\n        }\n        const it = items.find((x)=>x.id === activeId);\n        if (!it) return;\n        setForm({\n            id: it.id,\n            name: it.name,\n            role: it.role || \"\",\n            summary: it.summary || \"\",\n            images: it.images ?? (it.imageUrl ? [\n                it.imageUrl\n            ] : []),\n            traits: it.traits || null\n        });\n        setTraits(it.traits || {});\n    }, [\n        activeId,\n        items\n    ]);\n    const filtered = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const q = filter.trim().toLowerCase();\n        if (!q) return items;\n        return items.filter((x)=>(x.name || \"\").toLowerCase().includes(q) || (x.role || \"\").toLowerCase().includes(q));\n    }, [\n        items,\n        filter\n    ]);\n    const onNew = ()=>{\n        setActiveId(\"__new__\");\n        setForm({\n            name: \"\",\n            images: []\n        });\n        setTraits({});\n    };\n    // Removed brainstorm/refine suggestion logic\n    const notify = (msg)=>{\n        if (toastTimer.current) clearTimeout(toastTimer.current);\n        setToast(msg);\n        toastTimer.current = setTimeout(()=>setToast(\"\"), 2500);\n    };\n    const onUploadFile = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (file)=>{\n        if (!file) return;\n        setUploading(true);\n        try {\n            const bucket = process.env.NEXT_PUBLIC_SUPABASE_CHAR_BUCKET || \"character-images\";\n            const ext = file.name.split(\".\").pop() || \"jpg\";\n            const path = `${projectId}/${Date.now()}-${Math.random().toString(36).slice(2)}.${ext}`;\n            const { error: upErr } = await supabase.storage.from(bucket).upload(path, file, {\n                upsert: true,\n                contentType: file.type\n            });\n            if (upErr) throw upErr;\n            const { data } = supabase.storage.from(bucket).getPublicUrl(path);\n            const url = data.publicUrl;\n            setForm((f)=>({\n                    ...f,\n                    images: [\n                        url\n                    ]\n                }));\n            notify(\"Image uploaded\");\n        } catch (e) {\n            notify(e?.message || \"Upload failed\");\n        } finally{\n            setUploading(false);\n        }\n    }, [\n        projectId,\n        supabase\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const el = dropRef.current;\n        if (!el) return;\n        const onDrop = (e)=>{\n            e.preventDefault();\n            const f = e.dataTransfer?.files?.[0];\n            if (f) void onUploadFile(f);\n            el.classList.remove(\"ring-2\", \"ring-blue-500\");\n        };\n        const onDrag = (e)=>{\n            e.preventDefault();\n            el.classList.add(\"ring-2\", \"ring-blue-500\");\n        };\n        const onLeave = (e)=>{\n            e.preventDefault();\n            el.classList.remove(\"ring-2\", \"ring-blue-500\");\n        };\n        el.addEventListener(\"drop\", onDrop);\n        el.addEventListener(\"dragover\", onDrag);\n        el.addEventListener(\"dragleave\", onLeave);\n        return ()=>{\n            el.removeEventListener(\"drop\", onDrop);\n            el.removeEventListener(\"dragover\", onDrag);\n            el.removeEventListener(\"dragleave\", onLeave);\n        };\n    }, [\n        onUploadFile\n    ]);\n    // ----- Traits editor helpers (strings-only values, arrays supported, depth<=5) -----\n    const clone = (o)=>JSON.parse(JSON.stringify(o ?? {}));\n    const isObj = (v)=>v && typeof v === \"object\" && !Array.isArray(v);\n    const setVal = (path, val)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < path.length - 1; i++)ref = ref[path[i]];\n            ref[path[path.length - 1]] = val;\n            return nxt;\n        });\n    };\n    const delKey = (pathToParent, key)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToParent.length; i++)ref = ref[pathToParent[i]];\n            if (Array.isArray(ref) && typeof key === \"number\") ref.splice(key, 1);\n            else if (ref && typeof ref === \"object\") delete ref[key];\n            return nxt;\n        });\n    };\n    const renameKey = (pathToParent, oldKey, newKey)=>{\n        if (!newKey) return;\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToParent.length; i++)ref = ref[pathToParent[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            if (oldKey === newKey) return nxt;\n            const val = ref[oldKey];\n            delete ref[oldKey];\n            ref[newKey] = val;\n            return nxt;\n        });\n    };\n    const addChild = (pathToObj, depth)=>{\n        if (depth >= 5) return; // depth limit\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToObj.length; i++)ref = ref[pathToObj[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            let base = \"key\";\n            let i2 = 1;\n            let key = base;\n            while(Object.prototype.hasOwnProperty.call(ref, key)){\n                key = `${base}-${i2++}`;\n            }\n            ref[key] = \"\"; // default as string leaf\n            return nxt;\n        });\n    };\n    const addRootKey = ()=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let base = \"key\";\n            let i = 1;\n            let k = base;\n            while(Object.prototype.hasOwnProperty.call(nxt, k)){\n                k = `${base}-${i++}`;\n            }\n            nxt[k] = \"\";\n            return nxt;\n        });\n    };\n    const convertType = (path, parentPath, key, nextType, depth)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < parentPath.length; i++)ref = ref[parentPath[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            if (nextType === \"string\") ref[key] = \"\";\n            else if (nextType === \"object\") ref[key] = depth >= 5 ? \"\" : {};\n            else if (nextType === \"array\") ref[key] = [];\n            return nxt;\n        });\n    };\n    const addArrayItem = (pathToArr)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToArr.length; i++)ref = ref[pathToArr[i]];\n            if (Array.isArray(ref)) ref.push(\"\");\n            return nxt;\n        });\n    };\n    // Expose handlers to nested TraitObject/TraitRow without prop-drilling\n    TraitObject._parent = {\n        setVal,\n        delKey,\n        renameKey,\n        addChild,\n        convertType,\n        addArrayItem\n    };\n    const onSave = async ()=>{\n        if (!form.name.trim()) {\n            notify(\"Name is required\");\n            return;\n        }\n        if (requireImage && !(Array.isArray(form.images) && form.images.length > 0)) {\n            notify(\"Image is required in manhwa mode\");\n            return;\n        }\n        setSaving(true);\n        try {\n            const traitsObj = traits;\n            if (activeId === \"__new__\") {\n                const res = await api.createCharacter(projectId, {\n                    name: form.name.trim(),\n                    role: form.role || undefined,\n                    summary: form.summary || undefined,\n                    images: Array.isArray(form.images) ? form.images : undefined,\n                    traits: traitsObj\n                });\n                setItems((prev)=>[\n                        ...prev,\n                        res\n                    ]);\n                setActiveId(res.id);\n            } else if (activeId) {\n                const res = await api.updateCharacter(projectId, activeId, {\n                    name: form.name.trim(),\n                    role: form.role || undefined,\n                    summary: form.summary || undefined,\n                    images: Array.isArray(form.images) ? form.images : undefined,\n                    traits: traitsObj\n                });\n                setItems((prev)=>prev.map((x)=>x.id === res.id ? res : x));\n            }\n            notify(\"Saved\");\n        } catch (e) {\n            notify(e?.message || \"Save failed\");\n        } finally{\n            setSaving(false);\n        }\n    };\n    const onDelete = async ()=>{\n        if (!activeId || activeId === \"__new__\") return;\n        if (!confirm(\"Delete this character?\")) return;\n        setDeleting(true);\n        try {\n            await api.deleteCharacter(projectId, activeId);\n            setItems((prev)=>prev.filter((x)=>x.id !== activeId));\n            setActiveId(null);\n            setForm({\n                name: \"\",\n                images: []\n            });\n            setTraits({});\n            notify(\"Deleted\");\n        } catch (e) {\n            notify(e?.message || \"Delete failed\");\n        } finally{\n            setDeleting(false);\n        }\n    };\n    const count = items.length;\n    const active = activeId === \"__new__\" ? form : items.find((x)=>x.id === activeId) || null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-full grid grid-rows-[auto_1fr]\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"border-b border-border-default px-6 py-4 flex items-center justify-between\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-base font-semibold text-text-primary\",\n                                children: \"Character Management\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 392,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs px-2 py-1 rounded-md border border-border-default text-text-secondary\",\n                                children: [\n                                    count,\n                                    \" Characters\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 393,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 391,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onNew,\n                            className: \"rounded-lg bg-bg-elevated border border-border-default hover:border-accent hover:bg-bg-hover text-text-secondary hover:text-text-primary text-sm px-4 py-3 inline-flex items-center justify-center gap-2 transition-all duration-150 hover:-translate-y-0.5\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                    className: \"w-4 h-4\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 397,\n                                    columnNumber: 13\n                                }, this),\n                                \"New Character\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                            lineNumber: 396,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 395,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 390,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"min-h-0 grid\",\n                style: {\n                    gridTemplateColumns: \"35% 65%\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                        className: \"border-r border-border-default min-h-0 flex flex-col\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"p-3\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            value: filter,\n                                            onChange: (e)=>setFilter(e.target.value),\n                                            placeholder: \"Search characters\",\n                                            className: \"w-full bg-bg-primary border border-border-default rounded-md pl-9 pr-3 py-2.5 text-sm text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 407,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                            className: \"w-4 h-4 absolute left-3 top-3 text-text-tertiary\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 408,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 406,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 405,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 overflow-y-auto px-3 pb-3\",\n                                children: [\n                                    loading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-text-secondary px-2 py-2\",\n                                        children: \"Loading\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                        lineNumber: 412,\n                                        columnNumber: 25\n                                    }, this),\n                                    error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-red-400 px-2 py-2 bg-red-950/20 rounded-md border border-red-500/20\",\n                                        children: error\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                        lineNumber: 413,\n                                        columnNumber: 23\n                                    }, this),\n                                    !loading && !filtered.length && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-10 text-center text-text-tertiary text-sm\",\n                                        children: \"No characters yet. Create your first character!\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                        lineNumber: 415,\n                                        columnNumber: 15\n                                    }, this),\n                                    filtered.map((c)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setActiveId(c.id),\n                                            className: classNames(\"w-full text-left px-3 py-3 rounded-md mb-2 transition-all\", activeId === c.id ? \"border-l-2 border-blue-500 bg-bg-elevated\" : \"hover:bg-bg-hover\"),\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"w-12 h-12 rounded-full bg-bg-primary border border-border-default overflow-hidden flex items-center justify-center\",\n                                                        children: c.images?.[0] || c.imageUrl ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                            src: c.images?.[0] || c.imageUrl,\n                                                            alt: c.name,\n                                                            className: \"w-full h-full object-cover\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 422,\n                                                            columnNumber: 23\n                                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs text-text-tertiary\",\n                                                            children: \"No Img\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 424,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                        lineNumber: 420,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex-1 min-w-0\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-sm font-medium text-text-primary truncate\",\n                                                                children: c.name\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                                lineNumber: 428,\n                                                                columnNumber: 21\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-xs text-text-tertiary truncate\",\n                                                                children: c.role || \"\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                                lineNumber: 429,\n                                                                columnNumber: 21\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                        lineNumber: 427,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                lineNumber: 419,\n                                                columnNumber: 17\n                                            }, this)\n                                        }, c.id, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 418,\n                                            columnNumber: 15\n                                        }, this))\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 411,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 404,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                        className: \"min-h-0 overflow-y-auto p-6\",\n                        \"aria-label\": \"Character details\",\n                        children: activeId ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"max-w-2xl mx-auto\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    ref: dropRef,\n                                    className: \"flex flex-col items-center mb-6 p-4 rounded-xl border border-border-default bg-bg-elevated\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"w-30 h-30 w-[120px] h-[120px] rounded-full overflow-hidden border border-border-default bg-bg-primary flex items-center justify-center\",\n                                            children: form.images?.[0] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                src: form.images[0],\n                                                alt: \"avatar\",\n                                                className: \"w-full h-full object-cover\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                lineNumber: 442,\n                                                columnNumber: 41\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-xs text-text-tertiary\",\n                                                children: \"No Image\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                lineNumber: 442,\n                                                columnNumber: 124\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 441,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"mt-3 flex items-center gap-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                    className: \"px-3 py-2 rounded-md border border-border-default bg-bg-primary text-text-secondary hover:text-text-primary inline-flex items-center gap-2 cursor-pointer\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                                            className: \"w-4 h-4\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 446,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        form.images?.[0] ? \"Change Image\" : \"Upload Image\",\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: \"file\",\n                                                            accept: \"image/*\",\n                                                            className: \"hidden\",\n                                                            onChange: (e)=>{\n                                                                const f = e.target.files?.[0];\n                                                                if (f) void onUploadFile(f);\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 448,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 445,\n                                                    columnNumber: 19\n                                                }, this),\n                                                form.images && form.images.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: ()=>setForm((f)=>({\n                                                                ...f,\n                                                                images: []\n                                                            })),\n                                                    className: \"text-text-tertiary hover:text-red-400 text-sm inline-flex items-center gap-1\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                            className: \"w-4 h-4\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 452,\n                                                            columnNumber: 23\n                                                        }, this),\n                                                        \"Remove\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 451,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 444,\n                                            columnNumber: 17\n                                        }, this),\n                                        uploading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"mt-2 text-xs text-text-tertiary inline-flex items-center gap-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                    className: \"w-3 h-3 animate-spin\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 457,\n                                                    columnNumber: 111\n                                                }, this),\n                                                \" Uploading\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 457,\n                                            columnNumber: 31\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 440,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"grid gap-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"grid gap-2 text-sm\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                    children: \"Name\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 462,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    value: form.name,\n                                                    onChange: (e)=>setForm((f)=>({\n                                                                ...f,\n                                                                name: e.target.value\n                                                            })),\n                                                    className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 463,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 461,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"grid gap-2 text-sm\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                    children: \"Role\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 466,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                    value: form.role || \"\",\n                                                    onChange: (e)=>setForm((f)=>({\n                                                                ...f,\n                                                                role: e.target.value\n                                                            })),\n                                                    list: \"roles\",\n                                                    className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 467,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"datalist\", {\n                                                    id: \"roles\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                            value: \"Protagonist\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 469,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                            value: \"Antagonist\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 470,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                            value: \"Supporting\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 471,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                            value: \"Mentor\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 472,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                            value: \"Love Interest\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 473,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 468,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 465,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"grid gap-2 text-sm\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                    children: \"Summary\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 477,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                    value: form.summary || \"\",\n                                                    onChange: (e)=>setForm((f)=>({\n                                                                ...f,\n                                                                summary: e.target.value\n                                                            })),\n                                                    rows: 5,\n                                                    className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent text-sm\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 478,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-[11px] text-text-tertiary\",\n                                                    children: [\n                                                        (form.summary || \"\").length,\n                                                        \" characters\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 479,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 476,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"grid gap-2 text-sm\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center justify-between\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                            children: \"Traits\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 484,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                            onClick: addRootKey,\n                                                            className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                                                    className: \"w-3 h-3\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                                    lineNumber: 485,\n                                                                    columnNumber: 195\n                                                                }, this),\n                                                                \" Add key\"\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 485,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 483,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"mt-1\",\n                                                    children: [\n                                                        Object.keys(traits || {}).length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs text-text-tertiary\",\n                                                            children: \"No traits yet. Add a key.\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 489,\n                                                            columnNumber: 23\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitObject, {\n                                                            obj: traits,\n                                                            path: [],\n                                                            depth: 1\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 491,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 487,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 482,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center justify-between pt-4\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: onDelete,\n                                                    disabled: !activeId || activeId === \"__new__\" || deleting,\n                                                    className: \"text-red-400 hover:text-red-300 inline-flex items-center gap-2 text-sm\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                            className: \"w-4 h-4\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 497,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        \"Delete Character\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 496,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center gap-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                            onClick: ()=>{\n                                                                setActiveId(null);\n                                                            },\n                                                            className: \"px-4 py-2 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover\",\n                                                            children: \"Cancel\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 501,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                            onClick: onSave,\n                                                            disabled: saving,\n                                                            className: \"px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-500 text-white\",\n                                                            children: saving ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                className: \"inline-flex items-center gap-2\",\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                                        className: \"w-4 h-4 animate-spin\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                                        lineNumber: 503,\n                                                                        columnNumber: 82\n                                                                    }, this),\n                                                                    \" Saving\"\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                                lineNumber: 503,\n                                                                columnNumber: 33\n                                                            }, this) : \"Save Character\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                            lineNumber: 502,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                                    lineNumber: 500,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                            lineNumber: 495,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 460,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                            lineNumber: 439,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-tertiary\",\n                            children: \"Select a character or create a new one.\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                            lineNumber: 510,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 437,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 403,\n                columnNumber: 7\n            }, this),\n            toast && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed top-4 right-4 z-50\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-4 py-3 rounded-lg bg-bg-elevated border border-border-default text-text-primary text-sm shadow-elevation\",\n                    children: toast\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                    lineNumber: 517,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 516,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n        lineNumber: 389,\n        columnNumber: 5\n    }, this);\n}\nfunction TraitObject({ obj, path, depth }) {\n    const [_, setTick] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    // Access editor functions from outer scope via window proxy is not ideal; we rely on closures in parent component.\n    // This inline component depends on functions bound on window by parent closure.\n    // To keep everything in one file and avoid prop-drilling many handlers, we will re-grab them from React context via closures.\n    const parent = TraitObject._parent;\n    const ctx = parent || useCharacterManagerContext();\n    TraitObject._parent = ctx;\n    const keys = Object.keys(obj || {});\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"space-y-2\",\n        children: keys.map((k)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitRow, {\n                k: k,\n                v: obj[k],\n                parentPath: path,\n                depth: depth,\n                ctx: ctx\n            }, k, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 546,\n                columnNumber: 9\n            }, this))\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n        lineNumber: 544,\n        columnNumber: 5\n    }, this);\n}\nfunction TraitRow({ k, v, parentPath, depth, ctx }) {\n    const isArray = Array.isArray(v);\n    const isObject = v && typeof v === \"object\" && !isArray;\n    const type = isArray ? \"array\" : isObject ? \"object\" : \"string\";\n    const [name, setName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(k);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setName(k);\n    }, [\n        k\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"border border-border-default rounded-md p-2 bg-bg-elevated\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        value: name,\n                        onChange: (e)=>setName(e.target.value),\n                        onBlur: ()=>{\n                            if (name !== k && name.trim()) ctx.renameKey(parentPath, k, name.trim());\n                        },\n                        onKeyDown: (e)=>{\n                            if (e.key === \"Enter\") {\n                                e.target.blur();\n                            }\n                        },\n                        placeholder: \"key\",\n                        className: \"flex-none w-48 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 562,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        value: type,\n                        onChange: (e)=>ctx.convertType([\n                                ...parentPath,\n                                k\n                            ], parentPath, k, e.target.value, depth),\n                        className: \"flex-none w-28 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"string\",\n                                children: \"String\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 571,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"object\",\n                                disabled: depth >= 5,\n                                children: \"Object\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 572,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"array\",\n                                children: \"Array\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 573,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 570,\n                        columnNumber: 9\n                    }, this),\n                    type === \"string\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        value: String(v || \"\"),\n                        onChange: (e)=>ctx.setVal([\n                                ...parentPath,\n                                k\n                            ], e.target.value),\n                        placeholder: \"value\",\n                        className: \"flex-1 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 576,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.delKey(parentPath, k),\n                        className: \"text-text-tertiary hover:text-red-400 text-sm ml-auto\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                            className: \"w-4 h-4\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                            lineNumber: 578,\n                            columnNumber: 123\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 578,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 561,\n                columnNumber: 7\n            }, this),\n            type === \"object\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 ml-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.addChild([\n                                ...parentPath,\n                                k\n                            ], depth + 1),\n                        disabled: depth >= 5,\n                        className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                className: \"w-3 h-3\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 582,\n                                columnNumber: 240\n                            }, this),\n                            \" Add child\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 582,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitObject, {\n                        obj: v,\n                        path: [\n                            ...parentPath,\n                            k\n                        ],\n                        depth: depth + 1\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 583,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 581,\n                columnNumber: 9\n            }, this),\n            type === \"array\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 ml-4 space-y-2\",\n                children: [\n                    v.map((item, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-text-tertiary\",\n                                    children: [\n                                        \"[\",\n                                        idx,\n                                        \"]\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 590,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    value: item,\n                                    onChange: (e)=>ctx.setVal([\n                                            ...parentPath,\n                                            k,\n                                            idx\n                                        ], e.target.value),\n                                    placeholder: \"value\",\n                                    className: \"flex-1 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 591,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>ctx.delKey([\n                                            ...parentPath,\n                                            k\n                                        ], idx),\n                                    className: \"text-text-tertiary hover:text-red-400 text-sm\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                        lineNumber: 592,\n                                        columnNumber: 131\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                    lineNumber: 592,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, idx, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                            lineNumber: 589,\n                            columnNumber: 13\n                        }, this)),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.addArrayItem([\n                                ...parentPath,\n                                k\n                            ]),\n                        className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                className: \"w-3 h-3\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                                lineNumber: 595,\n                                columnNumber: 215\n                            }, this),\n                            \" Add item\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                        lineNumber: 595,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n                lineNumber: 587,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/CharacterManager.tsx\",\n        lineNumber: 560,\n        columnNumber: 5\n    }, this);\n}\n// Lightweight context via closure binding\nfunction useCharacterManagerContext() {\n    // Find the nearest CharacterManager by walking React closure. In TSX single-file component, we pass handlers by property in TraitObject._parent above.\n    // Instead of a real React Context provider (extra boilerplate), expose noop fallbacks; they get overwritten when first TraitObject renders.\n    return {\n        setVal: (_p, _v)=>{},\n        delKey: (_pp, _k)=>{},\n        renameKey: (_pp, _old, _n)=>{},\n        addChild: (_p, _d)=>{},\n        convertType: (_p, _pp, _k, _t, _d)=>{},\n        addArrayItem: (_p)=>{}\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvQ2hhcmFjdGVyTWFuYWdlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFMEU7QUFDSjtBQUNoQztBQUNrQztBQWN4RSxTQUFTYSxXQUFXLEdBQUdDLEVBQTRDO0lBQ2pFLE9BQU9BLEdBQUdDLE1BQU0sQ0FBQ0MsU0FBU0MsSUFBSSxDQUFDO0FBQ2pDO0FBRUEsU0FBU0MsVUFBVUMsSUFBUyxFQUFFQyxJQUFjLEVBQUVDLEtBQVU7SUFDdEQsTUFBTUMsT0FBT0gsUUFBUSxPQUFPQSxTQUFTLFdBQVc7UUFBRSxHQUFHQSxJQUFJO0lBQUMsSUFBSSxDQUFDO0lBQy9ELElBQUlJLE9BQVlEO0lBQ2hCLElBQUssSUFBSUUsSUFBSSxHQUFHQSxJQUFJSixLQUFLSyxNQUFNLEdBQUcsR0FBR0QsSUFBSztRQUN4QyxNQUFNRSxJQUFJTixJQUFJLENBQUNJLEVBQUU7UUFDakIsSUFBSSxDQUFDRCxJQUFJLENBQUNHLEVBQUUsSUFBSSxPQUFPSCxJQUFJLENBQUNHLEVBQUUsS0FBSyxVQUFVSCxJQUFJLENBQUNHLEVBQUUsR0FBRyxDQUFDO1FBQ3hESCxPQUFPQSxJQUFJLENBQUNHLEVBQUU7SUFDaEI7SUFDQUgsSUFBSSxDQUFDSCxJQUFJLENBQUNBLEtBQUtLLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBR0o7SUFDOUIsT0FBT0M7QUFDVDtBQUVBLFNBQVNLLFVBQVVSLElBQVMsRUFBRUMsSUFBYztJQUMxQyxNQUFNRSxPQUFPSCxRQUFRLE9BQU9BLFNBQVMsV0FBVztRQUFFLEdBQUdBLElBQUk7SUFBQyxJQUFJLENBQUM7SUFDL0QsSUFBSUksT0FBWUQ7SUFDaEIsSUFBSyxJQUFJRSxJQUFJLEdBQUdBLElBQUlKLEtBQUtLLE1BQU0sR0FBRyxHQUFHRCxJQUFLO1FBQ3hDLE1BQU1FLElBQUlOLElBQUksQ0FBQ0ksRUFBRTtRQUNqQixJQUFJLENBQUNELElBQUksQ0FBQ0csRUFBRSxJQUFJLE9B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Q2tCO29DQUFLbEIsV0FBVTs7d0NBQTZCO3dDQUFFaEc7d0NBQUk7Ozs7Ozs7OENBQ25ELDhEQUFDc0c7b0NBQU1wTCxPQUFPMEU7b0NBQU0yRyxVQUFVLENBQUNsSCxJQUFJd0ksSUFBSW5FLE1BQU0sQ0FBQzsrQ0FBSW9COzRDQUFZdko7NENBQUd5RTt5Q0FBSSxFQUFFWCxFQUFFbUgsTUFBTSxDQUFDdEwsS0FBSztvQ0FBR3VMLGFBQVk7b0NBQVFULFdBQVU7Ozs7Ozs4Q0FDdEgsOERBQUNDO29DQUFPQyxTQUFTLElBQUkyQixJQUFJL0QsTUFBTSxDQUFDOytDQUFJZ0I7NENBQVl2Sjt5Q0FBRSxFQUFFeUU7b0NBQU1nRyxXQUFVOzhDQUFnRCw0RUFBQ3ZMLCtHQUFDQTt3Q0FBQ3VMLFdBQVU7Ozs7Ozs7Ozs7OzsyQkFIekhoRzs7Ozs7a0NBTVosOERBQUNpRzt3QkFBT0MsU0FBUyxJQUFJMkIsSUFBSTdDLFlBQVksQ0FBQzttQ0FBSUY7Z0NBQVl2Sjs2QkFBRTt3QkFBR3lLLFdBQVU7OzBDQUF1SSw4REFBQzNMLCtHQUFJQTtnQ0FBQzJMLFdBQVU7Ozs7Ozs0QkFBWTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUtsUDtBQUVBLDBDQUEwQztBQUMxQyxTQUFTOEI7SUFDUCx1SkFBdUo7SUFDdkosNElBQTRJO0lBQzVJLE9BQU87UUFDTHBFLFFBQVEsQ0FBQzZFLElBQTBCQyxNQUFhO1FBQ2hEMUUsUUFBUSxDQUFDMkUsS0FBMkJDLE1BQWE7UUFDakR6RSxXQUFXLENBQUN3RSxLQUEyQkUsTUFBY0MsTUFBZ0I7UUFDckV4RSxVQUFVLENBQUNtRSxJQUEwQk0sTUFBZ0I7UUFDckRoRSxhQUFhLENBQUMwRCxJQUEwQkUsS0FBMkJDLElBQVlJLElBQStCRCxNQUFnQjtRQUM5SDdELGNBQWMsQ0FBQ3VELE1BQThCO0lBQy9DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmt2ZXJzZS1jbGllbnQvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvQ2hhcmFjdGVyTWFuYWdlci50c3g/OTRkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlU3VwYWJhc2UgfSBmcm9tIFwiQC9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyXCI7XG5pbXBvcnQgeyBjcmVhdGVBcGkgfSBmcm9tIFwiQC9saWIvYXBpXCI7XG5pbXBvcnQgeyBMb2FkZXIyLCBQbHVzLCBTZWFyY2gsIFRyYXNoMiwgVXBsb2FkLCBYIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuXG50eXBlIENoYXJhY3Rlckl0ZW0gPSB7XG4gIGlkPzogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHJvbGU/OiBzdHJpbmcgfCBudWxsO1xuICBzdW1tYXJ5Pzogc3RyaW5nIHwgbnVsbDtcbiAgaW1hZ2VzPzogc3RyaW5nW10gfCBudWxsO1xuICBpbWFnZVVybD86IHN0cmluZyB8IG51bGw7XG4gIHRyYWl0cz86IGFueSB8IG51bGw7XG4gIGNyZWF0ZWRBdD86IHN0cmluZztcbiAgdXBkYXRlZEF0Pzogc3RyaW5nO1xufTtcblxuZnVuY3Rpb24gY2xhc3NOYW1lcyguLi54czogQXJyYXk8c3RyaW5nIHwgZmFsc2UgfCBudWxsIHwgdW5kZWZpbmVkPikge1xuICByZXR1cm4geHMuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpO1xufVxuXG5mdW5jdGlvbiBzZXRCeVBhdGgoYmFzZTogYW55LCBwYXRoOiBzdHJpbmdbXSwgdmFsdWU6IGFueSkge1xuICBjb25zdCByb290ID0gYmFzZSAmJiB0eXBlb2YgYmFzZSA9PT0gXCJvYmplY3RcIiA/IHsgLi4uYmFzZSB9IDoge307XG4gIGxldCBjdXJyOiBhbnkgPSByb290O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgY29uc3QgayA9IHBhdGhbaV07XG4gICAgaWYgKCFjdXJyW2tdIHx8IHR5cGVvZiBjdXJyW2tdICE9PSBcIm9iamVjdFwiKSBjdXJyW2tdID0ge307XG4gICAgY3VyciA9IGN1cnJba107XG4gIH1cbiAgY3VycltwYXRoW3BhdGgubGVuZ3RoIC0gMV1dID0gdmFsdWU7XG4gIHJldHVybiByb290O1xufVxuXG5mdW5jdGlvbiBkZWxCeVBhdGgoYmFzZTogYW55LCBwYXRoOiBzdHJpbmdbXSkge1xuICBjb25zdCByb290ID0gYmFzZSAmJiB0eXBlb2YgYmFzZSA9PT0gXCJvYmplY3RcIiA/IHsgLi4uYmFzZSB9IDoge307XG4gIGxldCBjdXJyOiBhbnkgPSByb290O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgY29uc3QgayA9IHBhdGhbaV07XG4gICAgaWYgKCFjdXJyW2tdIHx8IHR5cGVvZiBjdXJyW2tdICE9PSBcIm9iamVjdFwiKSByZXR1cm4gcm9vdDtcbiAgICBjdXJyID0gY3VycltrXTtcbiAgfVxuICBkZWxldGUgY3VycltwYXRoW3BhdGgubGVuZ3RoIC0gMV1dO1xuICByZXR1cm4gcm9vdDtcbn1cblxuZnVuY3Rpb24gdG9OZXN0ZWRGcm9tVGFncyh0YWdzOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+KSB7XG4gIGxldCBvYmo6IGFueSA9IHt9O1xuICBmb3IgKGNvbnN0IHQgb2YgdGFncykge1xuICAgIGNvbnN0IHBhcnRzID0gdC5rZXkuc3BsaXQoXCIuXCIpLm1hcCgocykgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcbiAgICBpZiAoIXBhcnRzLmxlbmd0aCkgY29udGludWU7XG4gICAgb2JqID0gc2V0QnlQYXRoKG9iaiwgcGFydHMsIHQudmFsdWUpO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDaGFyYWN0ZXJNYW5hZ2VyKHsgcHJvamVjdElkLCByZXF1aXJlSW1hZ2UgfTogeyBwcm9qZWN0SWQ6IHN0cmluZzsgcmVxdWlyZUltYWdlOiBib29sZWFuIH0pIHtcbiAgY29uc3Qgc3VwYWJhc2UgPSB1c2VTdXBhYmFzZSgpO1xuICBjb25zdCBhcGkgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZUFwaShzdXBhYmFzZSksIFtzdXBhYmFzZV0pO1xuXG4gIGNvbnN0IFtpdGVtcywgc2V0SXRlbXNdID0gdXNlU3RhdGU8Q2hhcmFjdGVySXRlbVtdPihbXSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbZmlsdGVyLCBzZXRGaWx0ZXJdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFthY3RpdmVJZCwgc2V0QWN0aXZlSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgXCJfX25ld19fXCIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3NhdmluZywgc2V0U2F2aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2RlbGV0aW5nLCBzZXREZWxldGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt0b2FzdCwgc2V0VG9hc3RdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IHRvYXN0VGltZXIgPSB1c2VSZWY8UmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsPihudWxsKTtcblxuICBjb25zdCBbZm9ybSwgc2V0Rm9ybV0gPSB1c2VTdGF0ZTxDaGFyYWN0ZXJJdGVtPih7IG5hbWU6IFwiXCIsIGltYWdlczogW10gfSk7XG4gIGNvbnN0IFt0cmFpdHMsIHNldFRyYWl0c10gPSB1c2VTdGF0ZTxhbnk+KHt9KTtcbiAgY29uc3QgW3VwbG9hZGluZywgc2V0VXBsb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgZHJvcFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudCB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IGNhY2hlS2V5ID0gdXNlTWVtbygoKSA9PiBgaW5rdmVyc2VfcHJvamVjdF8ke3Byb2plY3RJZH1fY2hhcmFjdGVyc2AsIFtwcm9qZWN0SWRdKTtcbiAgY29uc3QgYWN0aXZlS2V5ID0gdXNlTWVtbygoKSA9PiBgaW5rdmVyc2VfcHJvamVjdF8ke3Byb2plY3RJZH1fY2hhcmFjdGVyc19hY3RpdmVgLCBbcHJvamVjdElkXSk7XG4gIGNvbnN0IFtoYXNDYWNoZSwgc2V0SGFzQ2FjaGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBpdGVtc1JlZiA9IHVzZVJlZjxDaGFyYWN0ZXJJdGVtW10+KGl0ZW1zKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpIDogbnVsbDtcbiAgICAgIGlmIChzKSB7XG4gICAgICAgIGNvbnN0IGFyciA9IEpTT04ucGFyc2Uocyk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICAgICAgICBzZXRJdGVtcyhhcnIgYXMgQ2hhcmFjdGVySXRlbVtdKTtcbiAgICAgICAgICBjb25zdCB2YWxpZCA9IChhcnIgYXMgYW55W10pLmxlbmd0aCA+IDA7XG4gICAgICAgICAgc2V0SGFzQ2FjaGUodmFsaWQpO1xuICAgICAgICAgIGlmICh2YWxpZCkgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIHt9XG4gIH0sIFtjYWNoZUtleV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG1vdW50ZWQgPSB0cnVlO1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoaGFzQ2FjaGUpIHsgcmV0dXJuOyB9XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIWhhc0NhY2hlKSBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkubGlzdENoYXJhY3RlcnMocHJvamVjdElkKTtcbiAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG5leHQgPSByZXMgfHwgW107XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGhhc0NhY2hlICYmIEpTT04uc3RyaW5naWZ5KG5leHQpID09PSBKU09OLnN0cmluZ2lmeShpdGVtc1JlZi5jdXJyZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCB7fVxuICAgICAgICBzZXRJdGVtcyhuZXh0KTtcbiAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICBpZiAoIW1vdW50ZWQpIHJldHVybjtcbiAgICAgICAgc2V0RXJyb3IoZT8ubWVzc2FnZSB8fCBcIkZhaWxlZCB0byBsb2FkIGNoYXJhY3RlcnNcIik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAobW91bnRlZCkgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfSkoKTtcbiAgICByZXR1cm4gKCkgPT4geyBtb3VudGVkID0gZmFsc2U7IH07XG4gIH0sIFthcGksIHByb2plY3RJZCwgaGFzQ2FjaGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShjYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkoaXRlbXMpKTtcbiAgICB9IGNhdGNoIHt9XG4gIH0sIFtpdGVtcywgY2FjaGVLZXldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4geyBpdGVtc1JlZi5jdXJyZW50ID0gaXRlbXM7IH0sIFtpdGVtc10pO1xuXG4gIC8vIFJlc3RvcmUgbGFzdCBhY3RpdmUgc2VsZWN0aW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHYgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShhY3RpdmVLZXkpIDogbnVsbDtcbiAgICAgIGlmICh2KSBzZXRBY3RpdmVJZCh2IGFzIGFueSk7XG4gICAgfSBjYXRjaCB7fVxuICB9LCBbYWN0aXZlS2V5XSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChhY3RpdmVJZCAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGFjdGl2ZUtleSwgYWN0aXZlSWQpO1xuICAgIH0gY2F0Y2gge31cbiAgfSwgW2FjdGl2ZUlkLCBhY3RpdmVLZXldKTtcblxuICAvLyBSZWZsZWN0IGNoYXQtZHJpdmVuIHVwc2VydHMgaW5zdGFudGx5XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZnVuY3Rpb24gb25VcHNlcnQoZXY6IEV2ZW50KSB7XG4gICAgICBjb25zdCBjZSA9IGV2IGFzIEN1c3RvbUV2ZW50O1xuICAgICAgY29uc3QgaXRlbSA9IGNlPy5kZXRhaWw/Lml0ZW0gYXMgYW55O1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLmlkKSByZXR1cm47XG4gICAgICBzZXRJdGVtcygocHJldikgPT4ge1xuICAgICAgICBjb25zdCBpZHggPSBwcmV2LmZpbmRJbmRleCgoeCkgPT4geC5pZCA9PT0gaXRlbS5pZCk7XG4gICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgIGNvbnN0IG5leHQgPSBbLi4ucHJldl07XG4gICAgICAgICAgbmV4dFtpZHhdID0geyAuLi5uZXh0W2lkeF0sIC4uLml0ZW0gfSBhcyBhbnk7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5wcmV2LCBpdGVtXTtcbiAgICAgIH0pO1xuICAgICAgaWYgKGFjdGl2ZUlkID09PSBpdGVtLmlkKSB7XG4gICAgICAgIHNldEZvcm0oeyBpZDogaXRlbS5pZCwgbmFtZTogaXRlbS5uYW1lLCByb2xlOiBpdGVtLnJvbGUgfHwgXCJcIiwgc3VtbWFyeTogaXRlbS5zdW1tYXJ5IHx8IFwiXCIsIGltYWdlczogKGl0ZW0gYXMgYW55KS5pbWFnZXMgPz8gKChpdGVtIGFzIGFueSkuaW1hZ2VVcmwgPyBbKGl0ZW0gYXMgYW55KS5pbWFnZVVybF0gOiBbXSksIHRyYWl0czogaXRlbS50cmFpdHMgfHwgbnVsbCB9KTtcbiAgICAgICAgc2V0VHJhaXRzKGl0ZW0udHJhaXRzIHx8IHt9KTtcbiAgICAgIH1cbiAgICAgIG5vdGlmeShcIkNoYXJhY3RlciB1cGRhdGVkIHZpYSBjaGF0XCIpO1xuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd29ya3NwYWNlOmNoYXJhY3Rlci11cHNlcnQnLCBvblVwc2VydCBhcyBhbnkpO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignd29ya3NwYWNlOmNoYXJhY3Rlci11cHNlcnQnLCBvblVwc2VydCBhcyBhbnkpO1xuICB9LCBbYWN0aXZlSWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYWN0aXZlSWQpIHJldHVybjtcbiAgICBpZiAoYWN0aXZlSWQgPT09IFwiX19uZXdfX1wiKSB7XG4gICAgICBzZXRGb3JtKHsgbmFtZTogXCJcIiwgaW1hZ2VzOiBbXSB9KTtcbiAgICAgIHNldFRyYWl0cyh7fSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGl0ID0gaXRlbXMuZmluZCgoeCkgPT4geC5pZCA9PT0gYWN0aXZlSWQpO1xuICAgIGlmICghaXQpIHJldHVybjtcbiAgICBzZXRGb3JtKHsgaWQ6IGl0LmlkLCBuYW1lOiBpdC5uYW1lLCByb2xlOiBpdC5yb2xlIHx8IFwiXCIsIHN1bW1hcnk6IGl0LnN1bW1hcnkgfHwgXCJcIiwgaW1hZ2VzOiAoaXQgYXMgYW55KS5pbWFnZXMgPz8gKGl0LmltYWdlVXJsID8gW2l0LmltYWdlVXJsXSA6IFtdKSwgdHJhaXRzOiBpdC50cmFpdHMgfHwgbnVsbCB9KTtcbiAgICBzZXRUcmFpdHMoaXQudHJhaXRzIHx8IHt9KTtcbiAgfSwgW2FjdGl2ZUlkLCBpdGVtc10pO1xuXG4gIGNvbnN0IGZpbHRlcmVkID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcSA9IGZpbHRlci50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIXEpIHJldHVybiBpdGVtcztcbiAgICByZXR1cm4gaXRlbXMuZmlsdGVyKCh4KSA9PiAoeC5uYW1lIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkgfHwgKHgucm9sZSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpKTtcbiAgfSwgW2l0ZW1zLCBmaWx0ZXJdKTtcblxuICBjb25zdCBvbk5ldyA9ICgpID0+IHtcbiAgICBzZXRBY3RpdmVJZChcIl9fbmV3X19cIik7XG4gICAgc2V0Rm9ybSh7IG5hbWU6IFwiXCIsIGltYWdlczogW10gfSk7XG4gICAgc2V0VHJhaXRzKHt9KTtcbiAgfTtcblxuICAvLyBSZW1vdmVkIGJyYWluc3Rvcm0vcmVmaW5lIHN1Z2dlc3Rpb24gbG9naWNcblxuICBjb25zdCBub3RpZnkgPSAobXNnOiBzdHJpbmcpID0+IHtcbiAgICBpZiAodG9hc3RUaW1lci5jdXJyZW50KSBjbGVhclRpbWVvdXQodG9hc3RUaW1lci5jdXJyZW50KTtcbiAgICBzZXRUb2FzdChtc2cpO1xuICAgIHRvYXN0VGltZXIuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0VG9hc3QoXCJcIiksIDI1MDApO1xuICB9O1xuXG4gIGNvbnN0IG9uVXBsb2FkRmlsZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChmaWxlOiBGaWxlKSA9PiB7XG4gICAgaWYgKCFmaWxlKSByZXR1cm47XG4gICAgc2V0VXBsb2FkaW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBidWNrZXQgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9DSEFSX0JVQ0tFVCB8fCBcImNoYXJhY3Rlci1pbWFnZXNcIjtcbiAgICAgIGNvbnN0IGV4dCA9IGZpbGUubmFtZS5zcGxpdChcIi5cIikucG9wKCkgfHwgXCJqcGdcIjtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHtwcm9qZWN0SWR9LyR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKX0uJHtleHR9YDtcbiAgICAgIGNvbnN0IHsgZXJyb3I6IHVwRXJyIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlLmZyb20oYnVja2V0KS51cGxvYWQocGF0aCwgZmlsZSwgeyB1cHNlcnQ6IHRydWUsIGNvbnRlbnRUeXBlOiBmaWxlLnR5cGUgfSk7XG4gICAgICBpZiAodXBFcnIpIHRocm93IHVwRXJyO1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBzdXBhYmFzZS5zdG9yYWdlLmZyb20oYnVja2V0KS5nZXRQdWJsaWNVcmwocGF0aCk7XG4gICAgICBjb25zdCB1cmwgPSBkYXRhLnB1YmxpY1VybDtcbiAgICAgIHNldEZvcm0oKGYpID0+ICh7IC4uLmYsIGltYWdlczogW3VybF0gfSkpO1xuICAgICAgbm90aWZ5KFwiSW1hZ2UgdXBsb2FkZWRcIik7XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBub3RpZnkoZT8ubWVzc2FnZSB8fCBcIlVwbG9hZCBmYWlsZWRcIik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFVwbG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9LCBbcHJvamVjdElkLCBzdXBhYmFzZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZWwgPSBkcm9wUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFlbCkgcmV0dXJuO1xuICAgIGNvbnN0IG9uRHJvcCA9IChlOiBEcmFnRXZlbnQpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGYgPSBlLmRhdGFUcmFuc2Zlcj8uZmlsZXM/LlswXTtcbiAgICAgIGlmIChmKSB2b2lkIG9uVXBsb2FkRmlsZShmKTtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJyaW5nLTJcIiwgXCJyaW5nLWJsdWUtNTAwXCIpO1xuICAgIH07XG4gICAgY29uc3Qgb25EcmFnID0gKGU6IERyYWdFdmVudCkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChcInJpbmctMlwiLCBcInJpbmctYmx1ZS01MDBcIik7XG4gICAgfTtcbiAgICBjb25zdCBvbkxlYXZlID0gKGU6IERyYWdFdmVudCkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShcInJpbmctMlwiLCBcInJpbmctYmx1ZS01MDBcIik7XG4gICAgfTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBvbkRyb3AgYXMgYW55KTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgb25EcmFnIGFzIGFueSk7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLCBvbkxlYXZlIGFzIGFueSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIG9uRHJvcCBhcyBhbnkpO1xuICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIG9uRHJhZyBhcyBhbnkpO1xuICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLCBvbkxlYXZlIGFzIGFueSk7XG4gICAgfTtcbiAgfSwgW29uVXBsb2FkRmlsZV0pO1xuXG4gIC8vIC0tLS0tIFRyYWl0cyBlZGl0b3IgaGVscGVycyAoc3RyaW5ncy1vbmx5IHZhbHVlcywgYXJyYXlzIHN1cHBvcnRlZCwgZGVwdGg8PTUpIC0tLS0tXG4gIGNvbnN0IGNsb25lID0gKG86IGFueSkgPT4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvID8/IHt9KSk7XG4gIGNvbnN0IGlzT2JqID0gKHY6IGFueSkgPT4gdiAmJiB0eXBlb2YgdiA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkodik7XG5cbiAgY29uc3Qgc2V0VmFsID0gKHBhdGg6IEFycmF5PHN0cmluZ3xudW1iZXI+LCB2YWw6IGFueSkgPT4ge1xuICAgIHNldFRyYWl0cygoY3VycjogYW55KSA9PiB7XG4gICAgICBjb25zdCBueHQgPSBjbG9uZShjdXJyKTtcbiAgICAgIGxldCByZWY6IGFueSA9IG54dDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5sZW5ndGggLSAxOyBpKyspIHJlZiA9IHJlZltwYXRoW2ldXTtcbiAgICAgIHJlZltwYXRoW3BhdGgubGVuZ3RoIC0gMV1dID0gdmFsO1xuICAgICAgcmV0dXJuIG54dDtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgZGVsS2V5ID0gKHBhdGhUb1BhcmVudDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIGtleTogc3RyaW5nfG51bWJlcikgPT4ge1xuICAgIHNldFRyYWl0cygoY3VycjogYW55KSA9PiB7XG4gICAgICBjb25zdCBueHQgPSBjbG9uZShjdXJyKTtcbiAgICAgIGxldCByZWY6IGFueSA9IG54dDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aFRvUGFyZW50Lmxlbmd0aDsgaSsrKSByZWYgPSByZWZbcGF0aFRvUGFyZW50W2ldXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlZikgJiYgdHlwZW9mIGtleSA9PT0gJ251bWJlcicpIHJlZi5zcGxpY2Uoa2V5LCAxKTtcbiAgICAgIGVsc2UgaWYgKHJlZiAmJiB0eXBlb2YgcmVmID09PSAnb2JqZWN0JykgZGVsZXRlIHJlZltrZXkgYXMgYW55XTtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHJlbmFtZUtleSA9IChwYXRoVG9QYXJlbnQ6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBvbGRLZXk6IHN0cmluZywgbmV3S2V5OiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIW5ld0tleSkgcmV0dXJuO1xuICAgIHNldFRyYWl0cygoY3VycjogYW55KSA9PiB7XG4gICAgICBjb25zdCBueHQgPSBjbG9uZShjdXJyKTtcbiAgICAgIGxldCByZWY6IGFueSA9IG54dDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aFRvUGFyZW50Lmxlbmd0aDsgaSsrKSByZWYgPSByZWZbcGF0aFRvUGFyZW50W2ldXTtcbiAgICAgIGlmICghcmVmIHx8IHR5cGVvZiByZWYgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkocmVmKSkgcmV0dXJuIG54dDtcbiAgICAgIGlmIChvbGRLZXkgPT09IG5ld0tleSkgcmV0dXJuIG54dDtcbiAgICAgIGNvbnN0IHZhbCA9IHJlZltvbGRLZXldO1xuICAgICAgZGVsZXRlIHJlZltvbGRLZXldO1xuICAgICAgcmVmW25ld0tleV0gPSB2YWw7XG4gICAgICByZXR1cm4gbnh0O1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBhZGRDaGlsZCA9IChwYXRoVG9PYmo6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBkZXB0aDogbnVtYmVyKSA9PiB7XG4gICAgaWYgKGRlcHRoID49IDUpIHJldHVybjsgLy8gZGVwdGggbGltaXRcbiAgICBzZXRUcmFpdHMoKGN1cnI6IGFueSkgPT4ge1xuICAgICAgY29uc3Qgbnh0ID0gY2xvbmUoY3Vycik7XG4gICAgICBsZXQgcmVmOiBhbnkgPSBueHQ7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGhUb09iai5sZW5ndGg7IGkrKykgcmVmID0gcmVmW3BhdGhUb09ialtpXV07XG4gICAgICBpZiAoIXJlZiB8fCB0eXBlb2YgcmVmICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHJlZikpIHJldHVybiBueHQ7XG4gICAgICBsZXQgYmFzZSA9ICdrZXknOyBsZXQgaTIgPSAxOyBsZXQga2V5ID0gYmFzZTtcbiAgICAgIHdoaWxlIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVmLCBrZXkpKSB7IGtleSA9IGAke2Jhc2V9LSR7aTIrK31gOyB9XG4gICAgICByZWZba2V5XSA9IFwiXCI7IC8vIGRlZmF1bHQgYXMgc3RyaW5nIGxlYWZcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFkZFJvb3RLZXkgPSAoKSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IGJhc2UgPSAna2V5JzsgbGV0IGkgPSAxOyBsZXQgayA9IGJhc2U7XG4gICAgICB3aGlsZSAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG54dCwgaykpIHsgayA9IGAke2Jhc2V9LSR7aSsrfWA7IH1cbiAgICAgIChueHQgYXMgYW55KVtrXSA9IFwiXCI7XG4gICAgICByZXR1cm4gbnh0O1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBjb252ZXJ0VHlwZSA9IChwYXRoOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgcGFyZW50UGF0aDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIGtleTogc3RyaW5nLCBuZXh0VHlwZTogJ3N0cmluZyd8J29iamVjdCd8J2FycmF5JywgZGVwdGg6IG51bWJlcikgPT4ge1xuICAgIHNldFRyYWl0cygoY3VycjogYW55KSA9PiB7XG4gICAgICBjb25zdCBueHQgPSBjbG9uZShjdXJyKTtcbiAgICAgIGxldCByZWY6IGFueSA9IG54dDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyZW50UGF0aC5sZW5ndGg7IGkrKykgcmVmID0gcmVmW3BhcmVudFBhdGhbaV1dO1xuICAgICAgaWYgKCFyZWYgfHwgdHlwZW9mIHJlZiAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShyZWYpKSByZXR1cm4gbnh0O1xuICAgICAgaWYgKG5leHRUeXBlID09PSAnc3RyaW5nJykgcmVmW2tleV0gPSBcIlwiO1xuICAgICAgZWxzZSBpZiAobmV4dFR5cGUgPT09ICdvYmplY3QnKSByZWZba2V5XSA9IGRlcHRoID49IDUgPyBcIlwiIDoge307XG4gICAgICBlbHNlIGlmIChuZXh0VHlwZSA9PT0gJ2FycmF5JykgcmVmW2tleV0gPSBbXSBhcyBzdHJpbmdbXTtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFkZEFycmF5SXRlbSA9IChwYXRoVG9BcnI6IEFycmF5PHN0cmluZ3xudW1iZXI+KSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoVG9BcnIubGVuZ3RoOyBpKyspIHJlZiA9IHJlZltwYXRoVG9BcnJbaV1dO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVmKSkgcmVmLnB1c2goXCJcIik7XG4gICAgICByZXR1cm4gbnh0O1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEV4cG9zZSBoYW5kbGVycyB0byBuZXN0ZWQgVHJhaXRPYmplY3QvVHJhaXRSb3cgd2l0aG91dCBwcm9wLWRyaWxsaW5nXG4gIChUcmFpdE9iamVjdCBhcyBhbnkpLl9wYXJlbnQgPSB7XG4gICAgc2V0VmFsLFxuICAgIGRlbEtleSxcbiAgICByZW5hbWVLZXksXG4gICAgYWRkQ2hpbGQsXG4gICAgY29udmVydFR5cGUsXG4gICAgYWRkQXJyYXlJdGVtLFxuICB9IGFzIFRyYWl0Q3R4O1xuXG4gIGNvbnN0IG9uU2F2ZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWZvcm0ubmFtZS50cmltKCkpIHtcbiAgICAgIG5vdGlmeShcIk5hbWUgaXMgcmVxdWlyZWRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChyZXF1aXJlSW1hZ2UgJiYgIShBcnJheS5pc0FycmF5KGZvcm0uaW1hZ2VzKSAmJiBmb3JtLmltYWdlcy5sZW5ndGggPiAwKSkge1xuICAgICAgbm90aWZ5KFwiSW1hZ2UgaXMgcmVxdWlyZWQgaW4gbWFuaHdhIG1vZGVcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldFNhdmluZyh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdHJhaXRzT2JqID0gdHJhaXRzO1xuICAgICAgaWYgKGFjdGl2ZUlkID09PSBcIl9fbmV3X19cIikge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuY3JlYXRlQ2hhcmFjdGVyKHByb2plY3RJZCwgeyBuYW1lOiBmb3JtLm5hbWUudHJpbSgpLCByb2xlOiBmb3JtLnJvbGUgfHwgdW5kZWZpbmVkLCBzdW1tYXJ5OiBmb3JtLnN1bW1hcnkgfHwgdW5kZWZpbmVkLCBpbWFnZXM6IEFycmF5LmlzQXJyYXkoZm9ybS5pbWFnZXMpID8gZm9ybS5pbWFnZXMgOiB1bmRlZmluZWQsIHRyYWl0czogdHJhaXRzT2JqIH0pO1xuICAgICAgICBzZXRJdGVtcygocHJldikgPT4gWy4uLnByZXYsIHJlc10pO1xuICAgICAgICBzZXRBY3RpdmVJZChyZXMuaWQpO1xuICAgICAgfSBlbHNlIGlmIChhY3RpdmVJZCkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkudXBkYXRlQ2hhcmFjdGVyKHByb2plY3RJZCwgYWN0aXZlSWQsIHsgbmFtZTogZm9ybS5uYW1lLnRyaW0oKSwgcm9sZTogZm9ybS5yb2xlIHx8IHVuZGVmaW5lZCwgc3VtbWFyeTogZm9ybS5zdW1tYXJ5IHx8IHVuZGVmaW5lZCwgaW1hZ2VzOiBBcnJheS5pc0FycmF5KGZvcm0uaW1hZ2VzKSA/IGZvcm0uaW1hZ2VzIDogdW5kZWZpbmVkLCB0cmFpdHM6IHRyYWl0c09iaiB9KTtcbiAgICAgICAgc2V0SXRlbXMoKHByZXYpID0+IHByZXYubWFwKCh4KSA9PiAoeC5pZCA9PT0gcmVzLmlkID8gcmVzIDogeCkpKTtcbiAgICAgIH1cbiAgICAgIG5vdGlmeShcIlNhdmVkXCIpO1xuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgbm90aWZ5KGU/Lm1lc3NhZ2UgfHwgXCJTYXZlIGZhaWxlZFwiKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0U2F2aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25EZWxldGUgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmVJZCB8fCBhY3RpdmVJZCA9PT0gXCJfX25ld19fXCIpIHJldHVybjtcbiAgICBpZiAoIWNvbmZpcm0oXCJEZWxldGUgdGhpcyBjaGFyYWN0ZXI/XCIpKSByZXR1cm47XG4gICAgc2V0RGVsZXRpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGFwaS5kZWxldGVDaGFyYWN0ZXIocHJvamVjdElkLCBhY3RpdmVJZCk7XG4gICAgICBzZXRJdGVtcygocHJldikgPT4gcHJldi5maWx0ZXIoKHgpID0+IHguaWQgIT09IGFjdGl2ZUlkKSk7XG4gICAgICBzZXRBY3RpdmVJZChudWxsKTtcbiAgICAgIHNldEZvcm0oeyBuYW1lOiBcIlwiLCBpbWFnZXM6IFtdIH0pO1xuICAgICAgc2V0VHJhaXRzKHt9KTtcbiAgICAgIG5vdGlmeShcIkRlbGV0ZWRcIik7XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBub3RpZnkoZT8ubWVzc2FnZSB8fCBcIkRlbGV0ZSBmYWlsZWRcIik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldERlbGV0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY291bnQgPSBpdGVtcy5sZW5ndGg7XG4gIGNvbnN0IGFjdGl2ZSA9IGFjdGl2ZUlkID09PSBcIl9fbmV3X19cIiA/IGZvcm0gOiBpdGVtcy5maW5kKCh4KSA9PiB4LmlkID09PSBhY3RpdmVJZCkgfHwgbnVsbDtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGdyaWQgZ3JpZC1yb3dzLVthdXRvXzFmcl1cIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHB4LTYgcHktNCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC10ZXh0LXByaW1hcnlcIj5DaGFyYWN0ZXIgTWFuYWdlbWVudDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBweC0yIHB5LTEgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnlcIj57Y291bnR9IENoYXJhY3RlcnM8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uTmV3fSBjbGFzc05hbWU9XCJyb3VuZGVkLWxnIGJnLWJnLWVsZXZhdGVkIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgaG92ZXI6Ym9yZGVyLWFjY2VudCBob3ZlcjpiZy1iZy1ob3ZlciB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gcHgtNCBweS0zIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTAgaG92ZXI6LXRyYW5zbGF0ZS15LTAuNVwiPlxuICAgICAgICAgICAgPFBsdXMgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICBOZXcgQ2hhcmFjdGVyXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtMCBncmlkXCIgc3R5bGU9e3sgZ3JpZFRlbXBsYXRlQ29sdW1uczogXCIzNSUgNjUlXCIgfX0+XG4gICAgICAgIDxhc2lkZSBjbGFzc05hbWU9XCJib3JkZXItciBib3JkZXItYm9yZGVyLWRlZmF1bHQgbWluLWgtMCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTNcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPXtmaWx0ZXJ9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0RmlsdGVyKGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9XCJTZWFyY2ggY2hhcmFjdGVyc1wiIGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBwbC05IHByLTMgcHktMi41IHRleHQtc20gdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50XCIgLz5cbiAgICAgICAgICAgICAgPFNlYXJjaCBjbGFzc05hbWU9XCJ3LTQgaC00IGFic29sdXRlIGxlZnQtMyB0b3AtMyB0ZXh0LXRleHQtdGVydGlhcnlcIiAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHB4LTMgcGItM1wiPlxuICAgICAgICAgICAge2xvYWRpbmcgJiYgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC1zZWNvbmRhcnkgcHgtMiBweS0yXCI+TG9hZGluZ+KApjwvZGl2Pn1cbiAgICAgICAgICAgIHtlcnJvciAmJiA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1yZWQtNDAwIHB4LTIgcHktMiBiZy1yZWQtOTUwLzIwIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1yZWQtNTAwLzIwXCI+e2Vycm9yfTwvZGl2Pn1cbiAgICAgICAgICAgIHshbG9hZGluZyAmJiAhZmlsdGVyZWQubGVuZ3RoICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xMCB0ZXh0LWNlbnRlciB0ZXh0LXRleHQtdGVydGlhcnkgdGV4dC1zbVwiPk5vIGNoYXJhY3RlcnMgeWV0LiBDcmVhdGUgeW91ciBmaXJzdCBjaGFyYWN0ZXIhPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2ZpbHRlcmVkLm1hcCgoYykgPT4gKFxuICAgICAgICAgICAgICA8YnV0dG9uIGtleT17Yy5pZH0gb25DbGljaz17KCkgPT4gc2V0QWN0aXZlSWQoYy5pZCEpfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMyByb3VuZGVkLW1kIG1iLTIgdHJhbnNpdGlvbi1hbGxcIiwgYWN0aXZlSWQ9PT1jLmlkID8gXCJib3JkZXItbC0yIGJvcmRlci1ibHVlLTUwMCBiZy1iZy1lbGV2YXRlZFwiIDogXCJob3ZlcjpiZy1iZy1ob3ZlclwiKSB9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMiBoLTEyIHJvdW5kZWQtZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgb3ZlcmZsb3ctaGlkZGVuIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIHsoKChjIGFzIGFueSkuaW1hZ2VzPy5bMF0pIHx8IGMuaW1hZ2VVcmwpID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXsoKChjIGFzIGFueSkuaW1hZ2VzPy5bMF0pIHx8IGMuaW1hZ2VVcmwpIGFzIHN0cmluZ30gYWx0PXtjLm5hbWV9IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5XCI+Tm8gSW1nPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtdGV4dC1wcmltYXJ5IHRydW5jYXRlXCI+e2MubmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSB0cnVuY2F0ZVwiPntjLnJvbGUgfHwgXCJcIn08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2FzaWRlPlxuXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cIm1pbi1oLTAgb3ZlcmZsb3cteS1hdXRvIHAtNlwiIGFyaWEtbGFiZWw9XCJDaGFyYWN0ZXIgZGV0YWlsc1wiPlxuICAgICAgICAgIHthY3RpdmVJZCA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctMnhsIG14LWF1dG9cIj5cbiAgICAgICAgICAgICAgPGRpdiByZWY9e2Ryb3BSZWZ9IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIG1iLTYgcC00IHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCBiZy1iZy1lbGV2YXRlZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0zMCBoLTMwIHctWzEyMHB4XSBoLVsxMjBweF0gcm91bmRlZC1mdWxsIG92ZXJmbG93LWhpZGRlbiBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLXByaW1hcnkgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgIHsoZm9ybS5pbWFnZXM/LlswXSkgPyA8aW1nIHNyYz17Zm9ybS5pbWFnZXNbMF19IGFsdD1cImF2YXRhclwiIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyXCIgLz4gOiA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5XCI+Tm8gSW1hZ2U8L2Rpdj59XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwicHgtMyBweS0yIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCBiZy1iZy1wcmltYXJ5IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnkgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxVcGxvYWQgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIHsoZm9ybS5pbWFnZXM/LlswXSkgPyBcIkNoYW5nZSBJbWFnZVwiIDogXCJVcGxvYWQgSW1hZ2VcIn1cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIGNsYXNzTmFtZT1cImhpZGRlblwiIG9uQ2hhbmdlPXsoZSkgPT4geyBjb25zdCBmID0gZS50YXJnZXQuZmlsZXM/LlswXTsgaWYgKGYpIHZvaWQgb25VcGxvYWRGaWxlKGYpOyB9fSAvPlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIHsoZm9ybS5pbWFnZXMgJiYgZm9ybS5pbWFnZXMubGVuZ3RoID4gMCkgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldEZvcm0oKGYpPT4oeyAuLi5mLCBpbWFnZXM6IFtdIH0pKX0gY2xhc3NOYW1lPVwidGV4dC10ZXh0LXRlcnRpYXJ5IGhvdmVyOnRleHQtcmVkLTQwMCB0ZXh0LXNtIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxYIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIFJlbW92ZVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAge3VwbG9hZGluZyAmJiA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+PExvYWRlcjIgY2xhc3NOYW1lPVwidy0zIGgtMyBhbmltYXRlLXNwaW5cIiAvPiBVcGxvYWRpbmfigKY8L2Rpdj59XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtNFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+TmFtZTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT17Zm9ybS5uYW1lfSBvbkNoYW5nZT17KGUpPT5zZXRGb3JtKChmKT0+KHsgLi4uZiwgbmFtZTogZS50YXJnZXQudmFsdWUgfSkpfSBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtNCBweS0yLjUgdGV4dC10ZXh0LXByaW1hcnkgb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnRcIiAvPlxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImdyaWQgZ2FwLTIgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVcIj5Sb2xlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPXtmb3JtLnJvbGUgfHwgXCJcIn0gb25DaGFuZ2U9eyhlKT0+c2V0Rm9ybSgoZik9Pih7IC4uLmYsIHJvbGU6IGUudGFyZ2V0LnZhbHVlIH0pKX0gbGlzdD1cInJvbGVzXCIgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTQgcHktMi41IHRleHQtdGV4dC1wcmltYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50XCIgLz5cbiAgICAgICAgICAgICAgICAgIDxkYXRhbGlzdCBpZD1cInJvbGVzXCI+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJQcm90YWdvbmlzdFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJBbnRhZ29uaXN0XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlN1cHBvcnRpbmdcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiTWVudG9yXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIkxvdmUgSW50ZXJlc3RcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9kYXRhbGlzdD5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+U3VtbWFyeTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSB2YWx1ZT17Zm9ybS5zdW1tYXJ5IHx8IFwiXCJ9IG9uQ2hhbmdlPXsoZSk9PnNldEZvcm0oKGYpPT4oeyAuLi5mLCBzdW1tYXJ5OiBlLnRhcmdldC52YWx1ZSB9KSl9IHJvd3M9ezV9IGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBweC00IHB5LTIuNSB0ZXh0LXRleHQtcHJpbWFyeSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudCB0ZXh0LXNtXCIgLz5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtWzExcHhdIHRleHQtdGV4dC10ZXJ0aWFyeVwiPnsoZm9ybS5zdW1tYXJ5IHx8IFwiXCIpLmxlbmd0aH0gY2hhcmFjdGVyczwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+VHJhaXRzPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2FkZFJvb3RLZXl9IGNsYXNzTmFtZT1cInB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXhzIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPjxQbHVzIGNsYXNzTmFtZT1cInctMyBoLTNcIiAvPiBBZGQga2V5PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICB7T2JqZWN0LmtleXModHJhaXRzIHx8IHt9KS5sZW5ndGggPT09IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnlcIj5ObyB0cmFpdHMgeWV0LiBBZGQgYSBrZXkuPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxUcmFpdE9iamVjdCBvYmo9e3RyYWl0c30gcGF0aD17W119IGRlcHRoPXsxfSAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwdC00XCI+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uRGVsZXRlfSBkaXNhYmxlZD17IWFjdGl2ZUlkIHx8IGFjdGl2ZUlkPT09XCJfX25ld19fXCIgfHwgZGVsZXRpbmd9IGNsYXNzTmFtZT1cInRleHQtcmVkLTQwMCBob3Zlcjp0ZXh0LXJlZC0zMDAgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgPFRyYXNoMiBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgRGVsZXRlIENoYXJhY3RlclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4geyBzZXRBY3RpdmVJZChudWxsKTsgfX0gY2xhc3NOYW1lPVwicHgtNCBweS0yIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOmJnLWJnLWhvdmVyXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25TYXZlfSBkaXNhYmxlZD17c2F2aW5nfSBjbGFzc05hbWU9XCJweC00IHB5LTIgcm91bmRlZC1tZCBiZy1ibHVlLTYwMCBob3ZlcjpiZy1ibHVlLTUwMCB0ZXh0LXdoaXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAge3NhdmluZyA/IDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPjxMb2FkZXIyIGNsYXNzTmFtZT1cInctNCBoLTQgYW5pbWF0ZS1zcGluXCIgLz4gU2F2aW5n4oCmPC9zcGFuPiA6IFwiU2F2ZSBDaGFyYWN0ZXJcIn1cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtdGV4dC10ZXJ0aWFyeVwiPlNlbGVjdCBhIGNoYXJhY3RlciBvciBjcmVhdGUgYSBuZXcgb25lLjwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7dG9hc3QgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIHRvcC00IHJpZ2h0LTQgei01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBweS0zIHJvdW5kZWQtbGcgYmctYmctZWxldmF0ZWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXNtIHNoYWRvdy1lbGV2YXRpb25cIj57dG9hc3R9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuLy8gLS0tIE5lc3RlZCBUcmFpdHMgRWRpdG9yIChzdHJpbmdzLW9ubHkgbGVhdmVzLCBhcnJheXMgc3VwcG9ydGVkKSAtLS1cbnR5cGUgVHJhaXRDdHggPSB7XG4gIHNldFZhbDogKHA6IEFycmF5PHN0cmluZ3xudW1iZXI+LCB2OiBhbnkpID0+IHZvaWQ7XG4gIGRlbEtleTogKHBwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgazogYW55KSA9PiB2b2lkO1xuICByZW5hbWVLZXk6IChwcDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIG9sZEs6IHN0cmluZywgbmV3Szogc3RyaW5nKSA9PiB2b2lkO1xuICBhZGRDaGlsZDogKHA6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBkOiBudW1iZXIpID0+IHZvaWQ7XG4gIGNvbnZlcnRUeXBlOiAocDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIHBwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgazogc3RyaW5nLCB0OiAnc3RyaW5nJ3wnb2JqZWN0J3wnYXJyYXknLCBkOiBudW1iZXIpID0+IHZvaWQ7XG4gIGFkZEFycmF5SXRlbTogKHA6IEFycmF5PHN0cmluZ3xudW1iZXI+KSA9PiB2b2lkO1xufTtcbmZ1bmN0aW9uIFRyYWl0T2JqZWN0KHsgb2JqLCBwYXRoLCBkZXB0aCB9OiB7IG9iajogYW55OyBwYXRoOiBBcnJheTxzdHJpbmd8bnVtYmVyPjsgZGVwdGg6IG51bWJlciB9KSB7XG4gIGNvbnN0IFtfLCBzZXRUaWNrXSA9IHVzZVN0YXRlKDApO1xuICAvLyBBY2Nlc3MgZWRpdG9yIGZ1bmN0aW9ucyBmcm9tIG91dGVyIHNjb3BlIHZpYSB3aW5kb3cgcHJveHkgaXMgbm90IGlkZWFsOyB3ZSByZWx5IG9uIGNsb3N1cmVzIGluIHBhcmVudCBjb21wb25lbnQuXG4gIC8vIFRoaXMgaW5saW5lIGNvbXBvbmVudCBkZXBlbmRzIG9uIGZ1bmN0aW9ucyBib3VuZCBvbiB3aW5kb3cgYnkgcGFyZW50IGNsb3N1cmUuXG4gIC8vIFRvIGtlZXAgZXZlcnl0aGluZyBpbiBvbmUgZmlsZSBhbmQgYXZvaWQgcHJvcC1kcmlsbGluZyBtYW55IGhhbmRsZXJzLCB3ZSB3aWxsIHJlLWdyYWIgdGhlbSBmcm9tIFJlYWN0IGNvbnRleHQgdmlhIGNsb3N1cmVzLlxuICBjb25zdCBwYXJlbnQ6IFRyYWl0Q3R4IHwgdW5kZWZpbmVkID0gKFRyYWl0T2JqZWN0IGFzIGFueSkuX3BhcmVudCBhcyBUcmFpdEN0eCB8IHVuZGVmaW5lZDtcbiAgY29uc3QgY3R4OiBUcmFpdEN0eCA9IHBhcmVudCB8fCB1c2VDaGFyYWN0ZXJNYW5hZ2VyQ29udGV4dCgpO1xuICAoVHJhaXRPYmplY3QgYXMgYW55KS5fcGFyZW50ID0gY3R4O1xuXG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmogfHwge30pO1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICB7a2V5cy5tYXAoKGspID0+IChcbiAgICAgICAgPFRyYWl0Um93IGtleT17a30gaz17a30gdj17KG9iaiBhcyBhbnkpW2tdfSBwYXJlbnRQYXRoPXtwYXRofSBkZXB0aD17ZGVwdGh9IGN0eD17Y3R4fSAvPlxuICAgICAgKSl9XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFRyYWl0Um93KHsgaywgdiwgcGFyZW50UGF0aCwgZGVwdGgsIGN0eCB9OiB7IGs6IHN0cmluZzsgdjogYW55OyBwYXJlbnRQYXRoOiBBcnJheTxzdHJpbmd8bnVtYmVyPjsgZGVwdGg6IG51bWJlcjsgY3R4OiBUcmFpdEN0eCB9KSB7XG4gIGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5KHYpO1xuICBjb25zdCBpc09iamVjdCA9IHYgJiYgdHlwZW9mIHYgPT09ICdvYmplY3QnICYmICFpc0FycmF5O1xuICBjb25zdCB0eXBlOiAnc3RyaW5nJ3wnb2JqZWN0J3wnYXJyYXknID0gaXNBcnJheSA/ICdhcnJheScgOiAoaXNPYmplY3QgPyAnb2JqZWN0JyA6ICdzdHJpbmcnKTtcbiAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gdXNlU3RhdGU8c3RyaW5nPihrKTtcbiAgdXNlRWZmZWN0KCgpID0+IHsgc2V0TmFtZShrKTsgfSwgW2tdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHAtMiBiZy1iZy1lbGV2YXRlZFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB2YWx1ZT17bmFtZX1cbiAgICAgICAgICBvbkNoYW5nZT17KGUpPT5zZXROYW1lKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICBvbkJsdXI9eygpPT57IGlmIChuYW1lICE9PSBrICYmIG5hbWUudHJpbSgpKSBjdHgucmVuYW1lS2V5KHBhcmVudFBhdGgsIGssIG5hbWUudHJpbSgpKTsgfX1cbiAgICAgICAgICBvbktleURvd249eyhlKT0+eyBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHsgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmJsdXIoKTsgfSB9fVxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwia2V5XCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LW5vbmUgdy00OCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBweC0yIHB5LTEuNSB0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXNtIG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50XCJcbiAgICAgICAgLz5cbiAgICAgICAgPHNlbGVjdCB2YWx1ZT17dHlwZX0gb25DaGFuZ2U9eyhlKT0+Y3R4LmNvbnZlcnRUeXBlKFsuLi5wYXJlbnRQYXRoLCBrXSwgcGFyZW50UGF0aCwgaywgZS50YXJnZXQudmFsdWUgYXMgYW55LCBkZXB0aCl9IGNsYXNzTmFtZT1cImZsZXgtbm9uZSB3LTI4IGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTIgcHktMS41IHRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnRcIj5cbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwic3RyaW5nXCI+U3RyaW5nPC9vcHRpb24+XG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9iamVjdFwiIGRpc2FibGVkPXtkZXB0aD49NX0+T2JqZWN0PC9vcHRpb24+XG4gICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImFycmF5XCI+QXJyYXk8L29wdGlvbj5cbiAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgIHt0eXBlPT09J3N0cmluZycgJiYgKFxuICAgICAgICAgIDxpbnB1dCB2YWx1ZT17U3RyaW5nKHYgfHwgJycpfSBvbkNoYW5nZT17KGUpPT5jdHguc2V0VmFsKFsuLi5wYXJlbnRQYXRoLCBrXSwgZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj1cInZhbHVlXCIgY2xhc3NOYW1lPVwiZmxleC0xIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTIgcHktMS41IHRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnRcIiAvPlxuICAgICAgICApfVxuICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT5jdHguZGVsS2V5KHBhcmVudFBhdGgsIGspfSBjbGFzc05hbWU9XCJ0ZXh0LXRleHQtdGVydGlhcnkgaG92ZXI6dGV4dC1yZWQtNDAwIHRleHQtc20gbWwtYXV0b1wiPjxYIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPjwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICB7dHlwZT09PSdvYmplY3QnICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIG1sLTRcIj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT5jdHguYWRkQ2hpbGQoWy4uLnBhcmVudFBhdGgsIGtdLCBkZXB0aCsxKX0gZGlzYWJsZWQ9e2RlcHRoPj01fSBjbGFzc05hbWU9XCJweC0yIHB5LTEgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnkgdGV4dC14cyBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTFcIj48UGx1cyBjbGFzc05hbWU9XCJ3LTMgaC0zXCIgLz4gQWRkIGNoaWxkPC9idXR0b24+XG4gICAgICAgICAgPFRyYWl0T2JqZWN0IG9iaj17dn0gcGF0aD17Wy4uLnBhcmVudFBhdGgsIGtdfSBkZXB0aD17ZGVwdGgrMX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAge3R5cGU9PT0nYXJyYXknICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIG1sLTQgc3BhY2UteS0yXCI+XG4gICAgICAgICAgeyh2IGFzIHN0cmluZ1tdKS5tYXAoKGl0ZW0sIGlkeCkgPT4gKFxuICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnlcIj5be2lkeH1dPC9zcGFuPlxuICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9e2l0ZW19IG9uQ2hhbmdlPXsoZSk9PmN0eC5zZXRWYWwoWy4uLnBhcmVudFBhdGgsIGssIGlkeF0sIGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9XCJ2YWx1ZVwiIGNsYXNzTmFtZT1cImZsZXgtMSBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBweC0yIHB5LTEuNSB0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXNtIG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50XCIgLz5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKT0+Y3R4LmRlbEtleShbLi4ucGFyZW50UGF0aCwga10sIGlkeCl9IGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LXJlZC00MDAgdGV4dC1zbVwiPjxYIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKT0+Y3R4LmFkZEFycmF5SXRlbShbLi4ucGFyZW50UGF0aCwga10pfSBjbGFzc05hbWU9XCJweC0yIHB5LTEgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnkgdGV4dC14cyBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTFcIj48UGx1cyBjbGFzc05hbWU9XCJ3LTMgaC0zXCIgLz4gQWRkIGl0ZW08L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufVxuXG4vLyBMaWdodHdlaWdodCBjb250ZXh0IHZpYSBjbG9zdXJlIGJpbmRpbmdcbmZ1bmN0aW9uIHVzZUNoYXJhY3Rlck1hbmFnZXJDb250ZXh0KCk6IFRyYWl0Q3R4IHtcbiAgLy8gRmluZCB0aGUgbmVhcmVzdCBDaGFyYWN0ZXJNYW5hZ2VyIGJ5IHdhbGtpbmcgUmVhY3QgY2xvc3VyZS4gSW4gVFNYIHNpbmdsZS1maWxlIGNvbXBvbmVudCwgd2UgcGFzcyBoYW5kbGVycyBieSBwcm9wZXJ0eSBpbiBUcmFpdE9iamVjdC5fcGFyZW50IGFib3ZlLlxuICAvLyBJbnN0ZWFkIG9mIGEgcmVhbCBSZWFjdCBDb250ZXh0IHByb3ZpZGVyIChleHRyYSBib2lsZXJwbGF0ZSksIGV4cG9zZSBub29wIGZhbGxiYWNrczsgdGhleSBnZXQgb3ZlcndyaXR0ZW4gd2hlbiBmaXJzdCBUcmFpdE9iamVjdCByZW5kZXJzLlxuICByZXR1cm4ge1xuICAgIHNldFZhbDogKF9wOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgX3Y6IGFueSkgPT4ge30sXG4gICAgZGVsS2V5OiAoX3BwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgX2s6IGFueSkgPT4ge30sXG4gICAgcmVuYW1lS2V5OiAoX3BwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgX29sZDogc3RyaW5nLCBfbjogc3RyaW5nKSA9PiB7fSxcbiAgICBhZGRDaGlsZDogKF9wOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgX2Q6IG51bWJlcikgPT4ge30sXG4gICAgY29udmVydFR5cGU6IChfcDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIF9wcDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIF9rOiBzdHJpbmcsIF90OiAnc3RyaW5nJ3wnb2JqZWN0J3wnYXJyYXknLCBfZDogbnVtYmVyKSA9PiB7fSxcbiAgICBhZGRBcnJheUl0ZW06IChfcDogQXJyYXk8c3RyaW5nfG51bWJlcj4pID0+IHt9LFxuICB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlU3VwYWJhc2UiLCJjcmVhdGVBcGkiLCJMb2FkZXIyIiwiUGx1cyIsIlNlYXJjaCIsIlRyYXNoMiIsIlVwbG9hZCIsIlgiLCJjbGFzc05hbWVzIiwieHMiLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsInNldEJ5UGF0aCIsImJhc2UiLCJwYXRoIiwidmFsdWUiLCJyb290IiwiY3VyciIsImkiLCJsZW5ndGgiLCJrIiwiZGVsQnlQYXRoIiwidG9OZXN0ZWRGcm9tVGFncyIsInRhZ3MiLCJvYmoiLCJ0IiwicGFydHMiLCJrZXkiLCJzcGxpdCIsIm1hcCIsInMiLCJ0cmltIiwiQ2hhcmFjdGVyTWFuYWdlciIsInByb2plY3RJZCIsInJlcXVpcmVJbWFnZSIsInN1cGFiYXNlIiwiYXBpIiwiaXRlbXMiLCJzZXRJdGVtcyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsInNldEZpbHRlciIsImFjdGl2ZUlkIiwic2V0QWN0aXZlSWQiLCJzYXZpbmciLCJzZXRTYXZpbmciLCJkZWxldGluZyIsInNldERlbGV0aW5nIiwidG9hc3QiLCJzZXRUb2FzdCIsInRvYXN0VGltZXIiLCJmb3JtIiwic2V0Rm9ybSIsIm5hbWUiLCJpbWFnZXMiLCJ0cmFpdHMiLCJzZXRUcmFpdHMiLCJ1cGxvYWRpbmciLCJzZXRVcGxvYWRpbmciLCJkcm9wUmVmIiwiY2FjaGVLZXkiLCJhY3RpdmVLZXkiLCJoYXNDYWNoZSIsInNldEhhc0NhY2hlIiwiaXRlbXNSZWYiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYXJyIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwidmFsaWQiLCJtb3VudGVkIiwicmVzIiwibGlzdENoYXJhY3RlcnMiLCJuZXh0Iiwic3RyaW5naWZ5IiwiY3VycmVudCIsImUiLCJtZXNzYWdlIiwic2V0SXRlbSIsInYiLCJvblVwc2VydCIsImV2IiwiY2UiLCJpdGVtIiwiZGV0YWlsIiwiaWQiLCJwcmV2IiwiaWR4IiwiZmluZEluZGV4IiwieCIsInJvbGUiLCJzdW1tYXJ5IiwiaW1hZ2VVcmwiLCJub3RpZnkiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIml0IiwiZmluZCIsImZpbHRlcmVkIiwicSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJvbk5ldyIsIm1zZyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJvblVwbG9hZEZpbGUiLCJmaWxlIiwiYnVja2V0IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0NIQVJfQlVDS0VUIiwiZXh0IiwicG9wIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInNsaWNlIiwidXBFcnIiLCJzdG9yYWdlIiwiZnJvbSIsInVwbG9hZCIsInVwc2VydCIsImNvbnRlbnRUeXBlIiwidHlwZSIsImRhdGEiLCJnZXRQdWJsaWNVcmwiLCJ1cmwiLCJwdWJsaWNVcmwiLCJmIiwiZWwiLCJvbkRyb3AiLCJwcmV2ZW50RGVmYXVsdCIsImRhdGFUcmFuc2ZlciIsImZpbGVzIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwib25EcmFnIiwiYWRkIiwib25MZWF2ZSIsImNsb25lIiwibyIsImlzT2JqIiwic2V0VmFsIiwidmFsIiwibnh0IiwicmVmIiwiZGVsS2V5IiwicGF0aFRvUGFyZW50Iiwic3BsaWNlIiwicmVuYW1lS2V5Iiwib2xkS2V5IiwibmV3S2V5IiwiYWRkQ2hpbGQiLCJwYXRoVG9PYmoiLCJkZXB0aCIsImkyIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYWRkUm9vdEtleSIsImNvbnZlcnRUeXBlIiwicGFyZW50UGF0aCIsIm5leHRUeXBlIiwiYWRkQXJyYXlJdGVtIiwicGF0aFRvQXJyIiwicHVzaCIsIlRyYWl0T2JqZWN0IiwiX3BhcmVudCIsIm9uU2F2ZSIsInRyYWl0c09iaiIsImNyZWF0ZUNoYXJhY3RlciIsInVuZGVmaW5lZCIsInVwZGF0ZUNoYXJhY3RlciIsIm9uRGVsZXRlIiwiY29uZmlybSIsImRlbGV0ZUNoYXJhY3RlciIsImNvdW50IiwiYWN0aXZlIiwiZGl2IiwiY2xhc3NOYW1lIiwiYnV0dG9uIiwib25DbGljayIsInN0eWxlIiwiZ3JpZFRlbXBsYXRlQ29sdW1ucyIsImFzaWRlIiwiaW5wdXQiLCJvbkNoYW5nZSIsInRhcmdldCIsInBsYWNlaG9sZGVyIiwiYyIsImltZyIsInNyYyIsImFsdCIsInNlY3Rpb24iLCJhcmlhLWxhYmVsIiwibGFiZWwiLCJhY2NlcHQiLCJzcGFuIiwibGlzdCIsImRhdGFsaXN0Iiwib3B0aW9uIiwidGV4dGFyZWEiLCJyb3dzIiwia2V5cyIsImRpc2FibGVkIiwiXyIsInNldFRpY2siLCJwYXJlbnQiLCJjdHgiLCJ1c2VDaGFyYWN0ZXJNYW5hZ2VyQ29udGV4dCIsIlRyYWl0Um93IiwiaXNPYmplY3QiLCJzZXROYW1lIiwib25CbHVyIiwib25LZXlEb3duIiwiYmx1ciIsInNlbGVjdCIsIlN0cmluZyIsIl9wIiwiX3YiLCJfcHAiLCJfayIsIl9vbGQiLCJfbiIsIl9kIiwiX3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/components/workspace/CharacterManager.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/workspace/Workspace.tsx":
/*!************************************************!*\
  !*** ./src/components/workspace/Workspace.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Workspace: () => (/* binding */ Workspace)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(ssr)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/api */ \"(ssr)/./src/lib/api.ts\");\n/* harmony import */ var _components_chat_Chat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/chat/Chat */ \"(ssr)/./src/components/chat/Chat.tsx\");\n/* harmony import */ var _components_workspace_CharacterManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/workspace/CharacterManager */ \"(ssr)/./src/components/workspace/CharacterManager.tsx\");\n/* harmony import */ var _components_workspace_WorldSettingsManager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/workspace/WorldSettingsManager */ \"(ssr)/./src/components/workspace/WorldSettingsManager.tsx\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/settings.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-right.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-left.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/plus.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronLeft,ChevronRight,Loader2,Plus,Settings,Trash2!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/chevron-down.js\");\n/* __next_internal_client_entry_do_not_use__ Workspace auto */ \n\n\n\n\n\n\n\nfunction Workspace({ projectId }) {\n    const supabase = (0,_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase)();\n    const api = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>(0,_lib_api__WEBPACK_IMPORTED_MODULE_3__.createApi)(supabase), [\n        supabase\n    ]);\n    const [chapters, setChapters] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loadingCh, setLoadingCh] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [errorCh, setErrorCh] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [tabs, setTabs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeId, setActiveId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [title, setTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [content, setContent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const saveTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [leftCollapsed, setLeftCollapsed] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [aiMuseOpen, setAiMuseOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [deletingId, setDeletingId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [projectTitle, setProjectTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [projectDescription, setProjectDescription] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [settingsOpen, setSettingsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [renameTitle, setRenameTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [renameDesc, setRenameDesc] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [savingRename, setSavingRename] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [renameError, setRenameError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [settingsMenuOpen, setSettingsMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [projMode, setProjMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [projGenre, setProjGenre] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    // Removed worldName field from Project\n    const [projCoreConflict, setProjCoreConflict] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [projSettingsJson, setProjSettingsJson] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [toastMsg, setToastMsg] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const toastTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const SETTINGS_TAB_ID = \"__settings__\";\n    const CHARACTERS_TAB_ID = \"__characters__\";\n    const WORLD_TAB_ID = \"__world__\";\n    // Chats sidebar (right)\n    const [rightOpen, setRightOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const chatsCacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_chats`, [\n        projectId\n    ]);\n    const chatsActiveKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_active_chat`, [\n        projectId\n    ]);\n    const chaptersCacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_chapters`, [\n        projectId\n    ]);\n    const tabsCacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_open_tabs`, [\n        projectId\n    ]);\n    const activeTabKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_active_tab`, [\n        projectId\n    ]);\n    const leftCollapsedKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_left_collapsed`, [\n        projectId\n    ]);\n    const rightOpenKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_right_open`, [\n        projectId\n    ]);\n    const [chats, setChats] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [activeChatId, setActiveChatId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [hasChatsCache, setHasChatsCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const chatsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(chats);\n    const [newChatType, setNewChatType] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"plot\");\n    const [newChatTitle, setNewChatTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [newChatOpen, setNewChatOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [creatingChat, setCreatingChat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [createChatError, setCreateChatError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [chatMenuOpen, setChatMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [hasChaptersCache, setHasChaptersCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Hydrate chats from localStorage after mount (prevents SSR/client mismatch)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        chatsCacheKey,\n        chatsActiveKey,\n        chaptersCacheKey,\n        tabsCacheKey,\n        activeTabKey,\n        leftCollapsedKey,\n        rightOpenKey\n    ]);\n    // Helper: sort chapters by createdAt asc (fallback by title)\n    const sortChapters = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((arr)=>{\n        return [\n            ...arr\n        ].sort((a, b)=>{\n            const ta = a.createdAt ? new Date(a.createdAt).getTime() : 0;\n            const tb = b.createdAt ? new Date(b.createdAt).getTime() : 0;\n            if (ta !== tb) return ta - tb;\n            return (a.title || \"\").localeCompare(b.title || \"\");\n        });\n    }, []);\n    // Load chapters for tree\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasChaptersCache) {\n                return;\n            }\n            try {\n                setLoadingCh(true);\n                const { items } = await api.listChaptersPaginated(projectId, 0, 100);\n                if (!mounted) return;\n                setChapters(sortChapters(items));\n            } catch (e) {\n                if (mounted) setErrorCh(e?.message || \"Failed to load chapters\");\n            } finally{\n                if (mounted) setLoadingCh(false);\n            }\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        projectId,\n        sortChapters,\n        hasChaptersCache\n    ]);\n    // Reflect settings updates triggered from Chat or elsewhere immediately\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const onSettings = (e)=>{\n            const detail = e?.detail || {};\n            const changes = detail.changes || {};\n            if (changes.title !== undefined) setProjectTitle(changes.title || \"\");\n            if (changes.description !== undefined) setProjectDescription(changes.description || \"\");\n            if (changes.mode) setProjMode(changes.mode);\n            if (changes.genre !== undefined) setProjGenre(changes.genre || \"\");\n            if (changes.coreConflict !== undefined) setProjCoreConflict(changes.coreConflict || \"\");\n            if (changes.settingsJson !== undefined) {\n                try {\n                    setProjSettingsJson(typeof changes.settingsJson === \"string\" ? changes.settingsJson : JSON.stringify(changes.settingsJson));\n                } catch  {\n                    setProjSettingsJson(\"\");\n                }\n            }\n        };\n        const onMode = (e)=>{\n            const m = e?.detail?.mode;\n            if (m === \"novel\" || m === \"manhwa\") setProjMode(m);\n        };\n        if (false) {}\n        return ()=>{\n            if (false) {}\n        };\n    }, []);\n    // Listen for chat actions to create/open chapters in editor\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handler = async (e)=>{\n            try {\n                const detail = e?.detail || {};\n                const t = String(detail.title || \"Untitled Chapter\");\n                const c = detail.content !== undefined ? String(detail.content) : \"\";\n                const panel_script = detail.panel_script ?? undefined;\n                const res = await api.createChapter(projectId, panel_script ? {\n                    title: t,\n                    panel_script\n                } : {\n                    title: t,\n                    content: c\n                });\n                const newId = res.id;\n                const createdAt = res.createdAt;\n                setChapters((prev)=>sortChapters([\n                        ...prev,\n                        {\n                            id: newId,\n                            title: res.title,\n                            content: panel_script ? \"\" : c,\n                            createdAt\n                        }\n                    ]));\n                setTabs((prev)=>prev.includes(newId) ? prev : [\n                        ...prev,\n                        newId\n                    ]);\n                setActiveId(newId);\n                setTitle(res.title);\n                setContent(panel_script ? \"\" : c);\n            } catch  {}\n        };\n        if (false) {}\n        return ()=>{\n            if (false) {}\n        };\n    }, [\n        api,\n        projectId,\n        sortChapters\n    ]);\n    // Listen for chat-driven chapter updates (rewrite)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handler = async (e)=>{\n            const detail = e?.detail || {};\n            const content = String(detail.content || \"\");\n            let targetId = detail.id || null;\n            if (!targetId) {\n                // Resolve by chapter_number (1-based) against sorted order\n                if (detail.chapter_number && Number.isInteger(detail.chapter_number)) {\n                    const sorted = sortChapters(chapters);\n                    const idx = Math.max(0, Math.min(sorted.length - 1, detail.chapter_number - 1));\n                    targetId = sorted[idx]?.id || null;\n                } else if (detail.title) {\n                    const match = chapters.find((c)=>(c.title || \"\").toLowerCase() === String(detail.title).toLowerCase());\n                    targetId = match?.id || null;\n                }\n            }\n            if (!targetId) return;\n            try {\n                const updated = await api.updateChapter(projectId, targetId, {\n                    content\n                });\n                setChapters((prev)=>prev.map((c)=>c.id === targetId ? {\n                            ...c,\n                            content\n                        } : c));\n                // Open or refresh active tab\n                if (!tabs.includes(targetId)) setTabs((prev)=>[\n                        ...prev,\n                        targetId\n                    ]);\n                setActiveId(targetId);\n                if (activeId === targetId) setContent(content);\n            } catch  {}\n        };\n        if (false) {}\n        return ()=>{\n            if (false) {}\n        };\n    }, [\n        api,\n        projectId,\n        chapters,\n        tabs,\n        activeId,\n        sortChapters\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            try {\n                const p = await api.getProject(projectId);\n                if (!mounted) return;\n                setProjectTitle(p?.title || \"\");\n                setProjectDescription(p?.description || \"\");\n                try {\n                    if (p?.mode && (p.mode === \"novel\" || p.mode === \"manhwa\")) setProjMode(p.mode);\n                    if (typeof p?.genre === \"string\") setProjGenre(p.genre);\n                    if (typeof p?.coreConflict === \"string\") setProjCoreConflict(p.coreConflict);\n                    if (p?.settingsJson !== undefined) {\n                        setProjSettingsJson(typeof p.settingsJson === \"string\" ? p.settingsJson : JSON.stringify(p.settingsJson));\n                    }\n                } catch  {}\n            } catch  {}\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        projectId\n    ]);\n    // Initialize Project Settings form fields when the tab opens or project fields hydrate\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (activeId === SETTINGS_TAB_ID) {\n            if (!renameTitle && projectTitle) setRenameTitle(projectTitle);\n            if (!renameDesc && projectDescription !== undefined) setRenameDesc(projectDescription);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        activeId,\n        projectTitle,\n        projectDescription\n    ]);\n    // Load chats (hydrate from cache first, then revalidate)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasChatsCache) {\n                return;\n            }\n            try {\n                const xs = await api.listChats(projectId);\n                if (!mounted) return;\n                const next = xs || [];\n                try {\n                    if (hasChatsCache && JSON.stringify(next) === JSON.stringify(chatsRef.current)) {\n                        return;\n                    }\n                } catch  {}\n                setChats(next);\n                if (!activeChatId) {\n                    if (next && next.length) setActiveChatId(next[0].id);\n                    else {\n                        // ensure at least one plot chat exists\n                        const created = await api.createChat(projectId, {\n                            type: \"plot\"\n                        });\n                        setChats([\n                            created\n                        ]);\n                        setActiveChatId(created.id);\n                    }\n                }\n            } catch  {}\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        projectId,\n        hasChatsCache,\n        activeChatId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        chatsRef.current = chats;\n    }, [\n        chats\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n        setHasChatsCache(Array.isArray(chats) && chats.length > 0);\n    }, [\n        chats,\n        chatsCacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        activeChatId,\n        chatsActiveKey\n    ]);\n    // Persist chapters cache\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n        setHasChaptersCache(Array.isArray(chapters) && chapters.length > 0);\n    }, [\n        chapters,\n        chaptersCacheKey\n    ]);\n    // Persist tabs and active tab\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        tabs,\n        tabsCacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        activeId,\n        activeTabKey\n    ]);\n    // Persist UI toggles\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        leftCollapsed,\n        leftCollapsedKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        rightOpen,\n        rightOpenKey\n    ]);\n    const openTab = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        setTabs((prev)=>prev.includes(id) ? prev : [\n                ...prev,\n                id\n            ]);\n        setActiveId(id);\n        const ch = chapters.find((c)=>c.id === id);\n        setTitle(ch?.title || \"\");\n        setContent(ch?.content || \"\");\n    }, [\n        chapters\n    ]);\n    const closeTab = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        setTabs((prev)=>prev.filter((t)=>t !== id));\n        setActiveId((curr)=>{\n            if (curr !== id) return curr;\n            const idx = tabs.indexOf(id);\n            const next = tabs[idx + 1] || tabs[idx - 1] || null;\n            return next || null;\n        });\n    }, [\n        tabs\n    ]);\n    // Hydrate editor fields when activeId and chapters are restored from cache\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeId) return;\n        if (activeId === SETTINGS_TAB_ID || activeId === CHARACTERS_TAB_ID || activeId === WORLD_TAB_ID) return;\n        const ch = chapters.find((c)=>c.id === activeId);\n        if (!ch) return;\n        setTitle(ch.title || \"\");\n        setContent(ch.content || \"\");\n    }, [\n        activeId,\n        chapters\n    ]);\n    const onDragStart = (e, id)=>{\n        e.dataTransfer.setData(\"text/tab\", id);\n    };\n    const onDrop = (e, targetId)=>{\n        const srcId = e.dataTransfer.getData(\"text/tab\");\n        if (!srcId || srcId === targetId) return;\n        setTabs((prev)=>{\n            const arr = [\n                ...prev\n            ];\n            const si = arr.indexOf(srcId);\n            const ti = arr.indexOf(targetId);\n            if (si < 0 || ti < 0) return prev;\n            arr.splice(ti, 0, arr.splice(si, 1)[0]);\n            return arr;\n        });\n    };\n    // Persist edits (debounced)\n    const scheduleSave = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id, t, c)=>{\n        if (!id) return;\n        if (saveTimer.current) clearTimeout(saveTimer.current);\n        saveTimer.current = setTimeout(async ()=>{\n            setSaving(true);\n            try {\n                await api.updateChapter(projectId, id, {\n                    title: t,\n                    content: c\n                });\n                setChapters((prev)=>prev.map((ch)=>ch.id === id ? {\n                            ...ch,\n                            title: t,\n                            content: c\n                        } : ch));\n            } finally{\n                setSaving(false);\n            }\n        }, 500);\n    }, [\n        api,\n        projectId\n    ]);\n    // Active change handlers\n    const onTitleChange = (v)=>{\n        if (!activeId) return;\n        setTitle(v);\n        scheduleSave(activeId, v, content);\n    };\n    const onContentChange = (v)=>{\n        if (!activeId) return;\n        setContent(v);\n        scheduleSave(activeId, title, v);\n    };\n    const onNewChapter = async ()=>{\n        try {\n            const res = await api.createChapter(projectId, {\n                title: \"Untitled Chapter\"\n            });\n            const createdAt = res.createdAt;\n            setChapters((prev)=>sortChapters([\n                    ...prev,\n                    {\n                        id: res.id,\n                        title: res.title,\n                        content: \"\",\n                        createdAt\n                    }\n                ]));\n            openTab(res.id);\n        } catch  {}\n    };\n    const onDeleteChapter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (id)=>{\n        try {\n            // eslint-disable-next-line no-alert\n            if (!confirm(\"Delete this chapter permanently?\")) return;\n            setDeletingId(id);\n            await api.deleteChapter(projectId, id);\n            setChapters((prev)=>prev.filter((c)=>c.id !== id));\n            setTabs((prev)=>prev.filter((t)=>t !== id));\n            setActiveId((curr)=>curr === id ? null : curr);\n        } catch (e) {\n            const msg = e instanceof Error ? e.message : \"Failed to delete\";\n            setErrorCh(msg);\n        } finally{\n            setDeletingId(null);\n        }\n    }, [\n        api,\n        projectId\n    ]);\n    const activeChapter = chapters.find((c)=>c.id === activeId) || null;\n    const gridCols = `${leftCollapsed ? \"\" : \"260px \"}1fr${rightOpen ? \" 260px\" : \"\"}`;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-screen w-screen bg-bg-primary text-text-primary grid grid-rows-[auto_1fr] relative\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"h-12 border-b border-border-default bg-bg-primary flex items-center relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 min-w-0 flex items-stretch gap-1 px-2 overflow-x-auto\",\n                        children: tabs.map((id)=>{\n                            const ch = chapters.find((c)=>c.id === id);\n                            const active = id === activeId;\n                            const label = id === SETTINGS_TAB_ID ? \"Settings\" : id === CHARACTERS_TAB_ID ? \"Characters\" : ch?.title || \"Untitled\";\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                draggable: true,\n                                onDragStart: (e)=>onDragStart(e, id),\n                                onDragOver: (e)=>e.preventDefault(),\n                                onDrop: (e)=>onDrop(e, id),\n                                onMouseDown: (e)=>{\n                                    if (e.button === 1) {\n                                        e.preventDefault();\n                                        closeTab(id);\n                                    }\n                                },\n                                className: `group flex items-center gap-2 px-4 h-10 rounded-t-md transition-all duration-150 ${active ? \"bg-bg-elevated text-text-primary\" : \"text-text-tertiary hover:text-text-secondary hover:bg-bg-hover\"}`,\n                                onClick: ()=>setActiveId(id),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-sm truncate max-w-[160px]\",\n                                        children: label\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 440,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"opacity-0 group-hover:opacity-100 hover:text-red-400 transition-opacity duration-150\",\n                                        onClick: (e)=>{\n                                            e.stopPropagation();\n                                            closeTab(id);\n                                        },\n                                        children: \"\\xd7\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 441,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, id, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 430,\n                                columnNumber: 15\n                            }, this);\n                        })\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 424,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute inset-0 flex items-center justify-center pointer-events-none\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm font-semibold text-text-primary truncate max-w-[60%] tracking-elegant\",\n                            children: projectTitle || \"Project\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 447,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 446,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute right-2 top-1 z-10 flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"text-xs px-3 py-1.5 rounded-md border border-border-default bg-bg-elevated text-text-secondary hover:text-accent hover:border-accent transition-all duration-150\",\n                                onClick: ()=>setSettingsMenuOpen((v)=>!v),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"sr-only\",\n                                        children: \"Settings\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 454,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                        className: \"w-4 h-4\",\n                                        \"aria-hidden\": \"true\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 455,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 450,\n                                columnNumber: 11\n                            }, this),\n                            settingsMenuOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute right-0 top-10 z-20 w-48 rounded-lg border border-border-default bg-bg-elevated shadow-elevation\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"w-full text-left px-3 py-2 text-sm text-text-secondary hover:bg-bg-hover hover:text-text-primary transition-all duration-150\",\n                                        onClick: ()=>{\n                                            setSettingsMenuOpen(false);\n                                            // Open settings as a central tab\n                                            if (!tabs.includes(SETTINGS_TAB_ID)) setTabs((prev)=>[\n                                                    ...prev,\n                                                    SETTINGS_TAB_ID\n                                                ]);\n                                            setActiveId(SETTINGS_TAB_ID);\n                                            setRenameTitle(projectTitle || \"\");\n                                            setRenameDesc(projectDescription || \"\");\n                                            setRenameError(null);\n                                        },\n                                        children: \"Project Settings\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 459,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"w-full text-left px-3 py-2 text-sm text-text-secondary hover:bg-bg-hover hover:text-text-primary transition-all duration-150\",\n                                        onClick: ()=>{\n                                            setSettingsMenuOpen(false);\n                                            if (!tabs.includes(WORLD_TAB_ID)) setTabs((prev)=>[\n                                                    ...prev,\n                                                    WORLD_TAB_ID\n                                                ]);\n                                            setActiveId(WORLD_TAB_ID);\n                                        },\n                                        children: \"World Settings\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 471,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"w-full text-left px-3 py-2 text-sm text-text-secondary hover:bg-bg-hover hover:text-text-primary transition-all duration-150\",\n                                        onClick: ()=>{\n                                            setSettingsMenuOpen(false);\n                                            if (!tabs.includes(CHARACTERS_TAB_ID)) setTabs((prev)=>[\n                                                    ...prev,\n                                                    CHARACTERS_TAB_ID\n                                                ]);\n                                            setActiveId(CHARACTERS_TAB_ID);\n                                        },\n                                        children: \"Characters\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 479,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 458,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 449,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 423,\n                columnNumber: 7\n            }, this),\n            leftCollapsed && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: \"absolute left-2 top-14 z-10 text-xs px-3 py-2 rounded-md border border-border-default bg-bg-elevated text-text-secondary hover:text-accent hover:border-accent transition-all duration-150 flex items-center gap-1 shadow-elevation\",\n                onClick: ()=>setLeftCollapsed(false),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                        className: \"w-4 h-4\",\n                        \"aria-hidden\": \"true\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 497,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"Chapters\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 498,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 493,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"grid min-h-0\",\n                style: {\n                    gridTemplateColumns: gridCols\n                },\n                children: [\n                    !leftCollapsed && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                        className: \"border-r border-border-default bg-bg-primary min-h-0 flex flex-col\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-5 py-4 text-xs font-semibold tracking-[0.05em] uppercase flex items-center justify-between text-text-secondary\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"CHAPTERS\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 508,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"text-text-tertiary hover:text-accent rounded p-1 hover:bg-bg-hover transition-all duration-150\",\n                                        onClick: ()=>setLeftCollapsed(true),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                className: \"w-4 h-4\",\n                                                \"aria-hidden\": \"true\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 510,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"sr-only\",\n                                                children: \"Collapse\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 511,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 509,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 507,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 overflow-y-auto px-4\",\n                                children: [\n                                    loadingCh && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-text-secondary px-2 py-2\",\n                                        children: \"Loading\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 515,\n                                        columnNumber: 27\n                                    }, this),\n                                    errorCh && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-red-400 px-2 py-2 bg-red-950/20 rounded-md border border-red-500/20\",\n                                        children: errorCh\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 516,\n                                        columnNumber: 25\n                                    }, this),\n                                    chapters.map((c, idx)=>{\n                                        const wordCount = c.content ? c.content.trim().split(/\\s+/).filter(Boolean).length : 0;\n                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `group w-full flex items-start justify-between gap-2 px-3 py-3 rounded-lg mb-2 transition-all duration-150 ${activeId === c.id ? \"bg-bg-elevated border-l-3 border-accent\" : \"hover:bg-bg-hover\"}`,\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: \"flex-1 text-left\",\n                                                    onClick: ()=>openTab(c.id),\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs uppercase text-text-tertiary mb-1\",\n                                                            children: [\n                                                                \"Chapter \",\n                                                                idx + 1\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 525,\n                                                            columnNumber: 19\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: `text-sm font-medium mb-1 ${activeId === c.id ? \"text-text-primary\" : \"text-text-secondary\"}`,\n                                                            children: c.title || \"Untitled\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 526,\n                                                            columnNumber: 19\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs text-text-tertiary\",\n                                                            children: [\n                                                                wordCount,\n                                                                \" words\"\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 527,\n                                                            columnNumber: 19\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 521,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    className: `opacity-0 group-hover:opacity-100 transition-opacity duration-150 ${deletingId === c.id ? \"text-red-400 opacity-60 cursor-not-allowed\" : \"text-text-tertiary hover:text-red-400\"}`,\n                                                    onClick: (e)=>{\n                                                        e.stopPropagation();\n                                                        if (deletingId) return;\n                                                        void onDeleteChapter(c.id);\n                                                    },\n                                                    title: \"Delete chapter\",\n                                                    disabled: deletingId === c.id,\n                                                    children: [\n                                                        deletingId === c.id ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                                            className: \"w-4 h-4 animate-spin\",\n                                                            \"aria-hidden\": \"true\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 535,\n                                                            columnNumber: 42\n                                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                                            className: \"w-4 h-4\",\n                                                            \"aria-hidden\": \"true\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 535,\n                                                            columnNumber: 108\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"sr-only\",\n                                                            children: \"Delete\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 536,\n                                                            columnNumber: 19\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 529,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, c.id, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 520,\n                                            columnNumber: 15\n                                        }, this);\n                                    })\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 514,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"p-4 border-t border-border-default\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    className: \"w-full rounded-lg bg-bg-elevated border border-border-default hover:border-accent hover:bg-bg-hover text-text-secondary hover:text-text-primary text-sm px-4 py-3 flex items-center justify-center gap-2 transition-all duration-150 hover:-translate-y-0.5\",\n                                    onClick: onNewChapter,\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                            className: \"w-4 h-4\",\n                                            \"aria-hidden\": \"true\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 543,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"New Chapter\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 544,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 542,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 541,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 506,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                        className: \"min-h-0 overflow-hidden bg-bg-primary flex flex-col\",\n                        children: activeId === SETTINGS_TAB_ID ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-full grid grid-rows-[auto_1fr_auto] bg-bg-elevated\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"border-b border-border-default px-6 py-4\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-base font-semibold text-text-primary tracking-elegant\",\n                                        children: \"Project Settings\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 555,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 554,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"min-h-0 overflow-y-auto px-6 py-6\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"grid gap-4 max-w-2xl\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Title\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 560,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        value: renameTitle,\n                                                        onChange: (e)=>setRenameTitle(e.target.value),\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 561,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 559,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Description\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 568,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                        value: renameDesc,\n                                                        onChange: (e)=>setRenameDesc(e.target.value),\n                                                        rows: 3,\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150 text-sm\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 569,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 567,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Mode\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 577,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                                        value: projMode,\n                                                        onChange: (e)=>setProjMode(e.target.value),\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent transition-colors duration-150\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                                value: \"\",\n                                                                children: \"Select\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 583,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                                value: \"novel\",\n                                                                children: \"Novel\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 584,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                                value: \"manhwa\",\n                                                                children: \"Manhwa\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 585,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 578,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 576,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Genre\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 589,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        value: projGenre,\n                                                        onChange: (e)=>setProjGenre(e.target.value),\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 590,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 588,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Core Conflict\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 598,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        value: projCoreConflict,\n                                                        onChange: (e)=>setProjCoreConflict(e.target.value),\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 599,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 597,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                className: \"grid gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Settings JSON\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 606,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                        value: projSettingsJson,\n                                                        onChange: (e)=>setProjSettingsJson(e.target.value),\n                                                        rows: 10,\n                                                        className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150 font-mono text-xs\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 607,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 605,\n                                                columnNumber: 19\n                                            }, this),\n                                            renameError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-sm text-red-400 p-3 rounded-lg bg-red-950/20 border border-red-500/20\",\n                                                children: renameError\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 614,\n                                                columnNumber: 35\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 558,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 557,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-14 px-6 flex items-center justify-end gap-3 border-t border-border-default bg-bg-primary\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setActiveId(null),\n                                            className: \"px-4 py-2 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover transition-all duration-150\",\n                                            children: \"Close\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 618,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            disabled: savingRename,\n                                            onClick: async ()=>{\n                                                setSavingRename(true);\n                                                setRenameError(null);\n                                                try {\n                                                    const updateBody = {};\n                                                    const t = renameTitle.trim();\n                                                    if (t && t !== projectTitle) updateBody.title = t;\n                                                    if (renameDesc !== projectDescription) updateBody.description = renameDesc;\n                                                    if (Object.keys(updateBody).length > 0) {\n                                                        const updated = await api.updateProject(projectId, updateBody);\n                                                        setProjectTitle(updated?.title || t || projectTitle);\n                                                        setProjectDescription(updated?.description ?? renameDesc ?? projectDescription);\n                                                    }\n                                                    const changes = {};\n                                                    if (projMode) changes.mode = projMode;\n                                                    if (projGenre) changes.genre = projGenre;\n                                                    if (projCoreConflict) changes.coreConflict = projCoreConflict;\n                                                    if (projSettingsJson) {\n                                                        try {\n                                                            changes.settingsJson = JSON.parse(projSettingsJson);\n                                                        } catch  {\n                                                            changes.settingsJson = projSettingsJson;\n                                                        }\n                                                    }\n                                                    if (Object.keys(changes).length > 0) {\n                                                        await api.updateProjectSettings(projectId, changes);\n                                                        if (false) {}\n                                                        // Toast: Settings saved\n                                                        if (toastTimer.current) clearTimeout(toastTimer.current);\n                                                        setToastMsg(\"Settings saved\");\n                                                        toastTimer.current = setTimeout(()=>setToastMsg(\"\"), 3000);\n                                                    }\n                                                } catch (e) {\n                                                    setRenameError(e?.message || \"Failed to save\");\n                                                } finally{\n                                                    setSavingRename(false);\n                                                }\n                                            },\n                                            className: \"px-4 py-2 rounded-md bg-accent hover:bg-accent-hover disabled:opacity-50 text-white transition-all duration-150\",\n                                            children: savingRename ? \"Saving\" : \"Save Settings\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 619,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 617,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 553,\n                            columnNumber: 13\n                        }, this) : activeId === CHARACTERS_TAB_ID ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-full bg-bg-elevated\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_workspace_CharacterManager__WEBPACK_IMPORTED_MODULE_5__.CharacterManager, {\n                                projectId: projectId,\n                                requireImage: projMode === \"manhwa\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 665,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 664,\n                            columnNumber: 13\n                        }, this) : activeId === WORLD_TAB_ID ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-full bg-bg-elevated\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_workspace_WorldSettingsManager__WEBPACK_IMPORTED_MODULE_6__.WorldSettingsManager, {\n                                projectId: projectId\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 669,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 668,\n                            columnNumber: 13\n                        }, this) : activeId ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-full flex flex-col\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 min-h-0 overflow-y-auto bg-bg-elevated flex justify-center\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-full max-w-[800px] px-12 py-16\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: title,\n                                                onChange: (e)=>onTitleChange(e.target.value),\n                                                placeholder: \"Chapter Title\",\n                                                className: \"w-full bg-transparent border-none text-[32px] font-bold text-text-primary placeholder:text-text-tertiary outline-none mb-8 tracking-tight\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 677,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                contentEditable: true,\n                                                suppressContentEditableWarning: true,\n                                                onInput: (e)=>onContentChange(e.currentTarget.textContent || \"\"),\n                                                className: \"w-full min-h-[400px] text-lg leading-[1.8] text-text-primary outline-none\",\n                                                style: {\n                                                    whiteSpace: \"pre-wrap\"\n                                                },\n                                                children: content\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 684,\n                                                columnNumber: 19\n                                            }, this),\n                                            !content && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-lg text-text-tertiary pointer-events-none -mt-[400px] leading-[1.8]\",\n                                                children: \"Start writing your story...\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 694,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 675,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 674,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-12 bg-bg-primary border-t border-border-default px-6 flex items-center justify-between text-[13px] text-text-tertiary\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center gap-6\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center gap-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: `w-1.5 h-1.5 rounded-full ${saving ? \"bg-warning animate-pulse\" : \"bg-success\"}`\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 702,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            children: saving ? \"Saving\" : \"Saved\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 703,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 701,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        content.trim().split(/\\s+/).filter(Boolean).length,\n                                                        \" words\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 705,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        content.length,\n                                                        \" characters\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 706,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        Math.ceil(content.trim().split(/\\s+/).filter(Boolean).length / 200),\n                                                        \" min read\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 707,\n                                                    columnNumber: 19\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 700,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: activeChapter?.createdAt && `Last edited ${new Date(activeChapter.createdAt).toLocaleString()}`\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 709,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 699,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 672,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-full bg-bg-elevated flex items-center justify-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-center max-w-md\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-base font-semibold text-text-primary mb-2\",\n                                        children: \"No Chapter Selected\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 717,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-sm text-text-secondary\",\n                                        children: \"Open a chapter from the left sidebar to start editing.\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 718,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 716,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 715,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 551,\n                        columnNumber: 9\n                    }, this),\n                    rightOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                        className: \"border-l border-border-default bg-bg-primary min-h-0 flex flex-col relative\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-5 py-4 text-xs font-semibold tracking-[0.05em] uppercase flex items-center justify-between text-text-secondary\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"flex items-center gap-2 text-text-secondary hover:text-text-primary\",\n                                        onClick: ()=>setChatMenuOpen((v)=>!v),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"truncate max-w-[140px] text-text-primary normal-case text-sm font-medium\",\n                                                children: chats.find((c)=>c.id === activeChatId)?.title || \"Select chat\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 729,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                                className: `w-3.5 h-3.5 transition-transform ${chatMenuOpen ? \"rotate-180\" : \"\"}`,\n                                                \"aria-hidden\": \"true\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 730,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 728,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"text-text-tertiary hover:text-accent rounded p-1 hover:bg-bg-hover transition-all duration-150\",\n                                                onClick: ()=>{\n                                                    setNewChatOpen(true);\n                                                    setChatMenuOpen(true);\n                                                },\n                                                title: \"New Chat\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                                    className: \"w-4 h-4\",\n                                                    \"aria-hidden\": \"true\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                    lineNumber: 734,\n                                                    columnNumber: 17\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 733,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"text-text-tertiary hover:text-accent rounded p-1 hover:bg-bg-hover transition-all duration-150\",\n                                                onClick: ()=>setRightOpen(false),\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                        className: \"w-4 h-4\",\n                                                        \"aria-hidden\": \"true\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 737,\n                                                        columnNumber: 17\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"sr-only\",\n                                                        children: \"Collapse\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 738,\n                                                        columnNumber: 17\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 736,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 732,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 727,\n                                columnNumber: 11\n                            }, this),\n                            chatMenuOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute left-3 right-3 top-14 z-20 rounded-lg border border-border-default bg-bg-elevated shadow-elevation\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"p-3 border-b border-border-default flex items-center justify-between\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-sm font-semibold text-text-primary\",\n                                                children: \"Chats\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 745,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                className: \"text-text-tertiary hover:text-text-primary\",\n                                                onClick: ()=>setChatMenuOpen(false),\n                                                children: \"\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 746,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 744,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"p-3 space-y-3\",\n                                        children: [\n                                            newChatOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"border border-border-default rounded-lg p-3 bg-bg-primary\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-text-tertiary mb-2\",\n                                                        children: \"Create a new chat\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 751,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"flex items-center gap-2 mb-2\",\n                                                        children: [\n                                                            \"plot\",\n                                                            \"character\",\n                                                            \"world\"\n                                                        ].map((t)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                                className: `text-xs px-3 py-1.5 rounded-md border cursor-pointer ${newChatType === t ? \"border-accent text-accent\" : \"border-border-default text-text-secondary hover:text-text-primary\"}`,\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                        type: \"radio\",\n                                                                        name: \"chat-type\",\n                                                                        className: \"hidden\",\n                                                                        checked: newChatType === t,\n                                                                        onChange: ()=>setNewChatType(t)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                        lineNumber: 755,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    t\n                                                                ]\n                                                            }, t, true, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 754,\n                                                                columnNumber: 25\n                                                            }, this))\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 752,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        value: newChatTitle,\n                                                        onChange: (e)=>setNewChatTitle(e.target.value),\n                                                        placeholder: \"Title (optional)\",\n                                                        className: \"w-full bg-bg-elevated border border-border-default rounded-md px-3 py-2 text-text-primary outline-none focus:border-accent text-sm\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 759,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    createChatError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"mt-2 text-xs text-red-400\",\n                                                        children: createChatError\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 760,\n                                                        columnNumber: 41\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"mt-3 flex items-center justify-end gap-2\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                className: \"px-3 py-1.5 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover\",\n                                                                onClick: ()=>{\n                                                                    setNewChatOpen(false);\n                                                                    setNewChatTitle(\"\");\n                                                                    setCreateChatError(null);\n                                                                },\n                                                                children: \"Cancel\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 762,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                className: \"px-3 py-1.5 rounded-md bg-accent hover:bg-accent-hover text-white disabled:opacity-50\",\n                                                                disabled: creatingChat,\n                                                                onClick: async ()=>{\n                                                                    setCreatingChat(true);\n                                                                    setCreateChatError(null);\n                                                                    try {\n                                                                        const c = await api.createChat(projectId, {\n                                                                            type: newChatType,\n                                                                            title: newChatTitle || undefined\n                                                                        });\n                                                                        setChats((prev)=>[\n                                                                                ...prev,\n                                                                                c\n                                                                            ]);\n                                                                        setActiveChatId(c.id);\n                                                                        setNewChatOpen(false);\n                                                                        setNewChatTitle(\"\");\n                                                                        setChatMenuOpen(false);\n                                                                    } catch (e) {\n                                                                        setCreateChatError(e?.message || \"Failed to create chat\");\n                                                                    } finally{\n                                                                        setCreatingChat(false);\n                                                                    }\n                                                                },\n                                                                children: creatingChat ? \"Creating\" : \"Create\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 763,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 761,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 750,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"max-h-64 overflow-y-auto pr-1\",\n                                                children: [\n                                                    !chats.length && !newChatOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-text-tertiary px-2 py-2\",\n                                                        children: [\n                                                            \"No chats yet. \",\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                className: \"underline\",\n                                                                onClick: ()=>{\n                                                                    setNewChatType(\"plot\");\n                                                                    setNewChatOpen(true);\n                                                                },\n                                                                children: \"Create your first chat\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                lineNumber: 781,\n                                                                columnNumber: 89\n                                                            }, this),\n                                                            \".\"\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                        lineNumber: 781,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    chats.map((c)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: `group w-full flex items-center justify-between gap-2 px-3 py-2 rounded-md mb-1 transition-all duration-150 ${activeChatId === c.id ? \"bg-bg-hover\" : \"hover:bg-bg-hover\"}`,\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    className: \"flex-1 text-left\",\n                                                                    onClick: ()=>{\n                                                                        setActiveChatId(c.id);\n                                                                        setChatMenuOpen(false);\n                                                                    },\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"text-[10px] uppercase text-text-tertiary mb-0.5\",\n                                                                            children: c.type\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                            lineNumber: 786,\n                                                                            columnNumber: 25\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: `text-sm font-medium ${activeChatId === c.id ? \"text-text-primary\" : \"text-text-secondary\"}`,\n                                                                            children: c.title\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                            lineNumber: 787,\n                                                                            columnNumber: 25\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                    lineNumber: 785,\n                                                                    columnNumber: 23\n                                                                }, this),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    className: `opacity-0 group-hover:opacity-100 transition-opacity duration-150 text-text-tertiary hover:text-red-400`,\n                                                                    onClick: async (e)=>{\n                                                                        e.stopPropagation();\n                                                                        if (!confirm(\"Delete this chat?\")) return;\n                                                                        try {\n                                                                            await api.deleteChat(projectId, c.id);\n                                                                            setChats((prev)=>prev.filter((x)=>x.id !== c.id));\n                                                                            if (activeChatId === c.id) setActiveChatId(chats.find((x)=>x.id !== c.id)?.id || null);\n                                                                        } catch  {}\n                                                                    },\n                                                                    title: \"Delete chat\",\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronLeft_ChevronRight_Loader2_Plus_Settings_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                                                            className: \"w-4 h-4\",\n                                                                            \"aria-hidden\": \"true\"\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                            lineNumber: 794,\n                                                                            columnNumber: 25\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                            className: \"sr-only\",\n                                                                            children: \"Delete\"\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                            lineNumber: 795,\n                                                                            columnNumber: 25\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                                    lineNumber: 789,\n                                                                    columnNumber: 23\n                                                                }, this)\n                                                            ]\n                                                        }, c.id, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                            lineNumber: 784,\n                                                            columnNumber: 21\n                                                        }, this))\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                                lineNumber: 779,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                        lineNumber: 748,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 743,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"min-h-0 flex-1 overflow-hidden border-t border-border-default\",\n                                children: activeChatId ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_chat_Chat__WEBPACK_IMPORTED_MODULE_4__.Chat, {\n                                    chatId: activeChatId,\n                                    projectId: projectId,\n                                    chatType: chats.find((c)=>c.id === activeChatId)?.type || \"plot\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 806,\n                                    columnNumber: 15\n                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-full grid place-items-center text-xs text-text-tertiary\",\n                                    children: \"Open the chat menu to create or select a chat.\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 812,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                lineNumber: 804,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                        lineNumber: 726,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 503,\n                columnNumber: 7\n            }, this),\n            !rightOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: \"absolute right-2 top-14 z-10 text-xs px-3 py-2 rounded-md border border-border-default bg-bg-elevated text-text-secondary hover:text-accent hover:border-accent transition-all duration-150 flex items-center gap-1 shadow-elevation\",\n                onClick: ()=>setRightOpen(true),\n                children: \"Open Chats\"\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 820,\n                columnNumber: 9\n            }, this),\n            settingsOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 z-50 grid place-items-center bg-black/60 backdrop-blur-sm\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"w-full max-w-md bg-bg-elevated border border-border-default rounded-xl p-6 shadow-elevation\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-between mb-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-lg font-semibold text-text-primary\",\n                                    children: \"Project Settings\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 829,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>setSettingsOpen(false),\n                                    className: \"text-text-tertiary hover:text-text-primary transition-colors duration-150\",\n                                    children: \"\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 830,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 828,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid gap-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"grid gap-1 text-sm\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs text-text-tertiary\",\n                                            children: \"Title\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 834,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            value: renameTitle,\n                                            onChange: (e)=>setRenameTitle(e.target.value),\n                                            className: \"bg-bg-primary border border-border-default rounded-md px-3 py-2 text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent transition-colors duration-150\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 835,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 833,\n                                    columnNumber: 15\n                                }, this),\n                                renameError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-sm text-red-400 p-3 rounded-lg bg-red-950/20 border border-red-500/20\",\n                                    children: renameError\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 841,\n                                    columnNumber: 31\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center justify-end gap-2 mt-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setSettingsOpen(false),\n                                            className: \"px-4 py-2 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover transition-all duration-150\",\n                                            children: \"Cancel\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 843,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            disabled: savingRename || !renameTitle.trim(),\n                                            onClick: async ()=>{\n                                                setSavingRename(true);\n                                                setRenameError(null);\n                                                try {\n                                                    const updated = await api.updateProject(projectId, {\n                                                        title: renameTitle.trim()\n                                                    });\n                                                    setProjectTitle(updated?.title || renameTitle.trim());\n                                                    setSettingsOpen(false);\n                                                } catch (e) {\n                                                    setRenameError(e?.message || \"Failed to save\");\n                                                } finally{\n                                                    setSavingRename(false);\n                                                }\n                                            },\n                                            className: \"px-4 py-2 rounded-md bg-accent hover:bg-accent-hover disabled:opacity-50 text-white transition-all duration-150\",\n                                            children: savingRename ? \"Saving\" : \"Save\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                            lineNumber: 844,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                                    lineNumber: 842,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                            lineNumber: 832,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                    lineNumber: 827,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 826,\n                columnNumber: 9\n            }, this),\n            toastMsg && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed top-4 right-4 z-50 animate-in slide-in-from-bottom-4 duration-200\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-4 py-3 rounded-lg bg-bg-elevated border border-border-default text-text-primary text-sm shadow-elevation\",\n                    children: toastMsg\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                    lineNumber: 871,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n                lineNumber: 870,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/Workspace.tsx\",\n        lineNumber: 421,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvV29ya3NwYWNlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFMEU7QUFDSjtBQUNoQztBQUNRO0FBQzZCO0FBQ1E7QUFDb0M7QUFVaEgsU0FBU2tCLFVBQVUsRUFBRUMsU0FBUyxFQUF5QjtJQUM1RCxNQUFNQyxXQUFXZixtRkFBV0E7SUFDNUIsTUFBTWdCLE1BQU1uQiw4Q0FBT0EsQ0FBQyxJQUFNSSxtREFBU0EsQ0FBQ2MsV0FBVztRQUFDQTtLQUFTO0lBRXpELE1BQU0sQ0FBQ0UsVUFBVUMsWUFBWSxHQUFHbkIsK0NBQVFBLENBQWdCLEVBQUU7SUFDMUQsTUFBTSxDQUFDb0IsV0FBV0MsYUFBYSxHQUFHckIsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDc0IsU0FBU0MsV0FBVyxHQUFHdkIsK0NBQVFBLENBQWdCO0lBRXRELE1BQU0sQ0FBQ3dCLE1BQU1DLFFBQVEsR0FBR3pCLCtDQUFRQSxDQUFXLEVBQUU7SUFDN0MsTUFBTSxDQUFDMEIsVUFBVUMsWUFBWSxHQUFHM0IsK0NBQVFBLENBQWdCO0lBRXhELE1BQU0sQ0FBQzRCLE9BQU9DLFNBQVMsR0FBRzdCLCtDQUFRQSxDQUFDO0lBQ25DLE1BQU0sQ0FBQzhCLFNBQVNDLFdBQVcsR0FBRy9CLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ2dDLFFBQVFDLFVBQVUsR0FBR2pDLCtDQUFRQSxDQUFDO0lBQ3JDLE1BQU1rQyxZQUFZbkMsNkNBQU1BLENBQXVDO0lBQy9ELE1BQU0sQ0FBQ29DLGVBQWVDLGlCQUFpQixHQUFHcEMsK0NBQVFBLENBQUM7SUFDbkQsTUFBTSxDQUFDcUMsWUFBWUMsY0FBYyxHQUFHdEMsK0NBQVFBLENBQUM7SUFDN0MsTUFBTSxDQUFDdUMsWUFBWUMsY0FBYyxHQUFHeEMsK0NBQVFBLENBQWdCO0lBQzVELE1BQU0sQ0FBQ3lDLGNBQWNDLGdCQUFnQixHQUFHMUMsK0NBQVFBLENBQVM7SUFDekQs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LE1BQU14SixJQUFJa08sYUFBYSxDQUFDcE8sV0FBVzt3REFBRWEsT0FBT21CLFlBQVlvTCxJQUFJO29EQUFHO29EQUMvRXpMLGdCQUFnQitILFNBQVM3SSxTQUFTbUIsWUFBWW9MLElBQUk7b0RBQ2xEckwsZ0JBQWdCO2dEQUNsQixFQUFFLE9BQU9xRixHQUFRO29EQUNmN0UsZUFBZTZFLEdBQUdDLFdBQVc7Z0RBQy9CLFNBQVU7b0RBQ1JoRixnQkFBZ0I7Z0RBQ2xCOzRDQUNGOzRDQUNBK0osV0FBVTtzREFFVGhLLGVBQWUsWUFBWTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7WUFRdkNjLDBCQUNDLDhEQUFDaUo7Z0JBQUlDLFdBQVU7MEJBQ2IsNEVBQUNEO29CQUFJQyxXQUFVOzhCQUNabEo7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTWIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmt2ZXJzZS1jbGllbnQvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvV29ya3NwYWNlLnRzeD81ODU4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTdXBhYmFzZSB9IGZyb20gXCJAL2NvbXBvbmVudHMvcHJvdmlkZXJzL1N1cGFiYXNlUHJvdmlkZXJcIjtcbmltcG9ydCB7IGNyZWF0ZUFwaSB9IGZyb20gXCJAL2xpYi9hcGlcIjtcbmltcG9ydCB7IENoYXQgfSBmcm9tIFwiQC9jb21wb25lbnRzL2NoYXQvQ2hhdFwiO1xuaW1wb3J0IHsgQ2hhcmFjdGVyTWFuYWdlciB9IGZyb20gXCJAL2NvbXBvbmVudHMvd29ya3NwYWNlL0NoYXJhY3Rlck1hbmFnZXJcIjtcbmltcG9ydCB7IFdvcmxkU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSBcIkAvY29tcG9uZW50cy93b3Jrc3BhY2UvV29ybGRTZXR0aW5nc01hbmFnZXJcIjtcbmltcG9ydCB7IFNldHRpbmdzIGFzIEljb25TZXR0aW5ncywgQ2hldnJvbkxlZnQsIENoZXZyb25SaWdodCwgUGx1cywgVHJhc2gyLCBMb2FkZXIyLCBDaGV2cm9uRG93biB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcblxudHlwZSBDaGFwdGVySXRlbSA9IHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgY29udGVudD86IHN0cmluZyB8IG51bGw7XG4gIHBhbmVsU2NyaXB0PzogYW55IHwgbnVsbDtcbiAgY3JlYXRlZEF0Pzogc3RyaW5nO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIFdvcmtzcGFjZSh7IHByb2plY3RJZCB9OiB7IHByb2plY3RJZDogc3RyaW5nIH0pIHtcbiAgY29uc3Qgc3VwYWJhc2UgPSB1c2VTdXBhYmFzZSgpO1xuICBjb25zdCBhcGkgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZUFwaShzdXBhYmFzZSksIFtzdXBhYmFzZV0pO1xuXG4gIGNvbnN0IFtjaGFwdGVycywgc2V0Q2hhcHRlcnNdID0gdXNlU3RhdGU8Q2hhcHRlckl0ZW1bXT4oW10pO1xuICBjb25zdCBbbG9hZGluZ0NoLCBzZXRMb2FkaW5nQ2hdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtlcnJvckNoLCBzZXRFcnJvckNoXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IFt0YWJzLCBzZXRUYWJzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IFthY3RpdmVJZCwgc2V0QWN0aXZlSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgW3RpdGxlLCBzZXRUaXRsZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NvbnRlbnQsIHNldENvbnRlbnRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzYXZpbmcsIHNldFNhdmluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHNhdmVUaW1lciA9IHVzZVJlZjxSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbGVmdENvbGxhcHNlZCwgc2V0TGVmdENvbGxhcHNlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthaU11c2VPcGVuLCBzZXRBaU11c2VPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2RlbGV0aW5nSWQsIHNldERlbGV0aW5nSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtwcm9qZWN0VGl0bGUsIHNldFByb2plY3RUaXRsZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbcHJvamVjdERlc2NyaXB0aW9uLCBzZXRQcm9qZWN0RGVzY3JpcHRpb25dID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgW3NldHRpbmdzT3Blbiwgc2V0U2V0dGluZ3NPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3JlbmFtZVRpdGxlLCBzZXRSZW5hbWVUaXRsZV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3JlbmFtZURlc2MsIHNldFJlbmFtZURlc2NdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzYXZpbmdSZW5hbWUsIHNldFNhdmluZ1JlbmFtZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtyZW5hbWVFcnJvciwgc2V0UmVuYW1lRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzZXR0aW5nc01lbnVPcGVuLCBzZXRTZXR0aW5nc01lbnVPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Byb2pNb2RlLCBzZXRQcm9qTW9kZV0gPSB1c2VTdGF0ZTwnbm92ZWwnIHwgJ21hbmh3YScgfCAnJz4oJycpO1xuICBjb25zdCBbcHJvakdlbnJlLCBzZXRQcm9qR2VucmVdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgLy8gUmVtb3ZlZCB3b3JsZE5hbWUgZmllbGQgZnJvbSBQcm9qZWN0XG4gIGNvbnN0IFtwcm9qQ29yZUNvbmZsaWN0LCBzZXRQcm9qQ29yZUNvbmZsaWN0XSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFtwcm9qU2V0dGluZ3NKc29uLCBzZXRQcm9qU2V0dGluZ3NKc29uXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFt0b2FzdE1zZywgc2V0VG9hc3RNc2ddID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgdG9hc3RUaW1lciA9IHVzZVJlZjxSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IFNFVFRJTkdTX1RBQl9JRCA9ICdfX3NldHRpbmdzX18nO1xuICBjb25zdCBDSEFSQUNURVJTX1RBQl9JRCA9ICdfX2NoYXJhY3RlcnNfXyc7XG4gIGNvbnN0IFdPUkxEX1RBQl9JRCA9ICdfX3dvcmxkX18nO1xuXG4gIC8vIENoYXRzIHNpZGViYXIgKHJpZ2h0KVxuICBjb25zdCBbcmlnaHRPcGVuLCBzZXRSaWdodE9wZW5dID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IGNoYXRzQ2FjaGVLZXkgPSB1c2VNZW1vKCgpID0+IGBpbmt2ZXJzZV9wcm9qZWN0XyR7cHJvamVjdElkfV9jaGF0c2AsIFtwcm9qZWN0SWRdKTtcbiAgY29uc3QgY2hhdHNBY3RpdmVLZXkgPSB1c2VNZW1vKCgpID0+IGBpbmt2ZXJzZV9wcm9qZWN0XyR7cHJvamVjdElkfV9hY3RpdmVfY2hhdGAsIFtwcm9qZWN0SWRdKTtcbiAgY29uc3QgY2hhcHRlcnNDYWNoZUtleSA9IHVzZU1lbW8oKCkgPT4gYGlua3ZlcnNlX3Byb2plY3RfJHtwcm9qZWN0SWR9X2NoYXB0ZXJzYCwgW3Byb2plY3RJZF0pO1xuICBjb25zdCB0YWJzQ2FjaGVLZXkgPSB1c2VNZW1vKCgpID0+IGBpbmt2ZXJzZV9wcm9qZWN0XyR7cHJvamVjdElkfV9vcGVuX3RhYnNgLCBbcHJvamVjdElkXSk7XG4gIGNvbnN0IGFjdGl2ZVRhYktleSA9IHVzZU1lbW8oKCkgPT4gYGlua3ZlcnNlX3Byb2plY3RfJHtwcm9qZWN0SWR9X2FjdGl2ZV90YWJgLCBbcHJvamVjdElkXSk7XG4gIGNvbnN0IGxlZnRDb2xsYXBzZWRLZXkgPSB1c2VNZW1vKCgpID0+IGBpbmt2ZXJzZV9wcm9qZWN0XyR7cHJvamVjdElkfV9sZWZ0X2NvbGxhcHNlZGAsIFtwcm9qZWN0SWRdKTtcbiAgY29uc3QgcmlnaHRPcGVuS2V5ID0gdXNlTWVtbygoKSA9PiBgaW5rdmVyc2VfcHJvamVjdF8ke3Byb2plY3RJZH1fcmlnaHRfb3BlbmAsIFtwcm9qZWN0SWRdKTtcbiAgY29uc3QgW2NoYXRzLCBzZXRDaGF0c10gPSB1c2VTdGF0ZTxBcnJheTx7IGlkOiBzdHJpbmc7IHR5cGU6ICdwbG90J3wnY2hhcmFjdGVyJ3wnd29ybGQnOyB0aXRsZTogc3RyaW5nIH0+PihbXSk7XG4gIGNvbnN0IFthY3RpdmVDaGF0SWQsIHNldEFjdGl2ZUNoYXRJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2hhc0NoYXRzQ2FjaGUsIHNldEhhc0NoYXRzQ2FjaGVdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBjaGF0c1JlZiA9IHVzZVJlZihjaGF0cyk7XG4gIGNvbnN0IFtuZXdDaGF0VHlwZSwgc2V0TmV3Q2hhdFR5cGVdID0gdXNlU3RhdGU8J3Bsb3QnfCdjaGFyYWN0ZXInfCd3b3JsZCc+KCdwbG90Jyk7XG4gIGNvbnN0IFtuZXdDaGF0VGl0bGUsIHNldE5ld0NoYXRUaXRsZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtuZXdDaGF0T3Blbiwgc2V0TmV3Q2hhdE9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY3JlYXRpbmdDaGF0LCBzZXRDcmVhdGluZ0NoYXRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY3JlYXRlQ2hhdEVycm9yLCBzZXRDcmVhdGVDaGF0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtjaGF0TWVudU9wZW4sIHNldENoYXRNZW51T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtoYXNDaGFwdGVyc0NhY2hlLCBzZXRIYXNDaGFwdGVyc0NhY2hlXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcblxuICAvLyBIeWRyYXRlIGNoYXRzIGZyb20gbG9jYWxTdG9yYWdlIGFmdGVyIG1vdW50IChwcmV2ZW50cyBTU1IvY2xpZW50IG1pc21hdGNoKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgcyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjaGF0c0NhY2hlS2V5KTtcbiAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICBjb25zdCBhcnIgPSBKU09OLnBhcnNlKHMpO1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICAgICAgICAgIHNldENoYXRzKGFyciBhcyBhbnkpO1xuICAgICAgICAgICAgc2V0SGFzQ2hhdHNDYWNoZSgoYXJyIGFzIGFueVtdKS5sZW5ndGggPiAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjaGF0c0FjdGl2ZUtleSk7XG4gICAgICAgIGlmICh2KSBzZXRBY3RpdmVDaGF0SWQodik7XG4gICAgICAgIC8vIEh5ZHJhdGUgY2hhcHRlcnNcbiAgICAgICAgY29uc3QgY2hzID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGNoYXB0ZXJzQ2FjaGVLZXkpO1xuICAgICAgICBpZiAoY2hzKSB7XG4gICAgICAgICAgY29uc3QgYXJyID0gSlNPTi5wYXJzZShjaHMpO1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICAgICAgICAgIHNldENoYXB0ZXJzKGFyciBhcyBhbnkpO1xuICAgICAgICAgICAgY29uc3QgdmFsaWQgPSAoYXJyIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuICAgICAgICAgICAgc2V0SGFzQ2hhcHRlcnNDYWNoZSh2YWxpZCk7XG4gICAgICAgICAgICBpZiAodmFsaWQpIHNldExvYWRpbmdDaChmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEh5ZHJhdGUgdGFicyBhbmQgYWN0aXZlIHRhYlxuICAgICAgICBjb25zdCB0ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKHRhYnNDYWNoZUtleSk7XG4gICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgY29uc3QgYXJyID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSBzZXRUYWJzKGFyciBhcyBhbnkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF0ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGFjdGl2ZVRhYktleSk7XG4gICAgICAgIGlmIChhdCkgc2V0QWN0aXZlSWQoYXQpO1xuICAgICAgICAvLyBIeWRyYXRlIFVJIHRvZ2dsZXNcbiAgICAgICAgY29uc3QgbGMgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0obGVmdENvbGxhcHNlZEtleSk7XG4gICAgICAgIGlmIChsYyAhPT0gbnVsbCkgc2V0TGVmdENvbGxhcHNlZChsYyA9PT0gJzEnKTtcbiAgICAgICAgY29uc3Qgcm8gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0ocmlnaHRPcGVuS2V5KTtcbiAgICAgICAgaWYgKHJvICE9PSBudWxsKSBzZXRSaWdodE9wZW4ocm8gPT09ICcxJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7fVxuICB9LCBbY2hhdHNDYWNoZUtleSwgY2hhdHNBY3RpdmVLZXksIGNoYXB0ZXJzQ2FjaGVLZXksIHRhYnNDYWNoZUtleSwgYWN0aXZlVGFiS2V5LCBsZWZ0Q29sbGFwc2VkS2V5LCByaWdodE9wZW5LZXldKTtcblxuICAvLyBIZWxwZXI6IHNvcnQgY2hhcHRlcnMgYnkgY3JlYXRlZEF0IGFzYyAoZmFsbGJhY2sgYnkgdGl0bGUpXG4gIGNvbnN0IHNvcnRDaGFwdGVycyA9IHVzZUNhbGxiYWNrKChhcnI6IENoYXB0ZXJJdGVtW10pID0+IHtcbiAgICByZXR1cm4gWy4uLmFycl0uc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgdGEgPSBhLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGEuY3JlYXRlZEF0KS5nZXRUaW1lKCkgOiAwO1xuICAgICAgY29uc3QgdGIgPSBiLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGIuY3JlYXRlZEF0KS5nZXRUaW1lKCkgOiAwO1xuICAgICAgaWYgKHRhICE9PSB0YikgcmV0dXJuIHRhIC0gdGI7XG4gICAgICByZXR1cm4gKGEudGl0bGUgfHwgJycpLmxvY2FsZUNvbXBhcmUoYi50aXRsZSB8fCAnJyk7XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICAvLyBMb2FkIGNoYXB0ZXJzIGZvciB0cmVlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IG1vdW50ZWQgPSB0cnVlO1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoaGFzQ2hhcHRlcnNDYWNoZSkgeyByZXR1cm47IH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHNldExvYWRpbmdDaCh0cnVlKTtcbiAgICAgICAgY29uc3QgeyBpdGVtcyB9ID0gYXdhaXQgYXBpLmxpc3RDaGFwdGVyc1BhZ2luYXRlZChwcm9qZWN0SWQsIDAsIDEwMCk7XG4gICAgICAgIGlmICghbW91bnRlZCkgcmV0dXJuO1xuICAgICAgICBzZXRDaGFwdGVycyhzb3J0Q2hhcHRlcnMoaXRlbXMgYXMgQ2hhcHRlckl0ZW1bXSkpO1xuICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgIGlmIChtb3VudGVkKSBzZXRFcnJvckNoKGU/Lm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gbG9hZCBjaGFwdGVyc1wiKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChtb3VudGVkKSBzZXRMb2FkaW5nQ2goZmFsc2UpO1xuICAgICAgfVxuICAgIH0pKCk7XG4gICAgcmV0dXJuICgpID0+IHsgbW91bnRlZCA9IGZhbHNlOyB9O1xuICB9LCBbYXBpLCBwcm9qZWN0SWQsIHNvcnRDaGFwdGVycywgaGFzQ2hhcHRlcnNDYWNoZV0pO1xuXG4gIC8vIFJlZmxlY3Qgc2V0dGluZ3MgdXBkYXRlcyB0cmlnZ2VyZWQgZnJvbSBDaGF0IG9yIGVsc2V3aGVyZSBpbW1lZGlhdGVseVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG9uU2V0dGluZ3MgPSAoZTogYW55KSA9PiB7XG4gICAgICBjb25zdCBkZXRhaWwgPSBlPy5kZXRhaWwgfHwge307XG4gICAgICBjb25zdCBjaGFuZ2VzID0gZGV0YWlsLmNoYW5nZXMgfHwge307XG4gICAgICBpZiAoY2hhbmdlcy50aXRsZSAhPT0gdW5kZWZpbmVkKSBzZXRQcm9qZWN0VGl0bGUoY2hhbmdlcy50aXRsZSB8fCAnJyk7XG4gICAgICBpZiAoY2hhbmdlcy5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkKSBzZXRQcm9qZWN0RGVzY3JpcHRpb24oY2hhbmdlcy5kZXNjcmlwdGlvbiB8fCAnJyk7XG4gICAgICBpZiAoY2hhbmdlcy5tb2RlKSBzZXRQcm9qTW9kZShjaGFuZ2VzLm1vZGUpO1xuICAgICAgaWYgKGNoYW5nZXMuZ2VucmUgIT09IHVuZGVmaW5lZCkgc2V0UHJvakdlbnJlKGNoYW5nZXMuZ2VucmUgfHwgJycpO1xuICAgICAgaWYgKGNoYW5nZXMuY29yZUNvbmZsaWN0ICE9PSB1bmRlZmluZWQpIHNldFByb2pDb3JlQ29uZmxpY3QoY2hhbmdlcy5jb3JlQ29uZmxpY3QgfHwgJycpO1xuICAgICAgaWYgKGNoYW5nZXMuc2V0dGluZ3NKc29uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdHJ5IHsgc2V0UHJvalNldHRpbmdzSnNvbih0eXBlb2YgY2hhbmdlcy5zZXR0aW5nc0pzb24gPT09ICdzdHJpbmcnID8gY2hhbmdlcy5zZXR0aW5nc0pzb24gOiBKU09OLnN0cmluZ2lmeShjaGFuZ2VzLnNldHRpbmdzSnNvbikpOyB9IGNhdGNoIHsgc2V0UHJvalNldHRpbmdzSnNvbignJyk7IH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG9uTW9kZSA9IChlOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG0gPSBlPy5kZXRhaWw/Lm1vZGU7XG4gICAgICBpZiAobSA9PT0gJ25vdmVsJyB8fCBtID09PSAnbWFuaHdhJykgc2V0UHJvak1vZGUobSk7XG4gICAgfTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwcm9qZWN0OnNldHRpbmdzLXVwZGF0ZWQnLCBvblNldHRpbmdzIGFzIGFueSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncHJvamVjdDptb2RlLXVwZGF0ZWQnLCBvbk1vZGUgYXMgYW55KTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJvamVjdDpzZXR0aW5ncy11cGRhdGVkJywgb25TZXR0aW5ncyBhcyBhbnkpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJvamVjdDptb2RlLXVwZGF0ZWQnLCBvbk1vZGUgYXMgYW55KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gTGlzdGVuIGZvciBjaGF0IGFjdGlvbnMgdG8gY3JlYXRlL29wZW4gY2hhcHRlcnMgaW4gZWRpdG9yXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlciA9IGFzeW5jIChlOiBhbnkpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRldGFpbCA9IGU/LmRldGFpbCB8fCB7fTtcbiAgICAgICAgY29uc3QgdCA9IFN0cmluZyhkZXRhaWwudGl0bGUgfHwgJ1VudGl0bGVkIENoYXB0ZXInKTtcbiAgICAgICAgY29uc3QgYyA9IGRldGFpbC5jb250ZW50ICE9PSB1bmRlZmluZWQgPyBTdHJpbmcoZGV0YWlsLmNvbnRlbnQpIDogJyc7XG4gICAgICAgIGNvbnN0IHBhbmVsX3NjcmlwdCA9IGRldGFpbC5wYW5lbF9zY3JpcHQgPz8gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkuY3JlYXRlQ2hhcHRlcihwcm9qZWN0SWQsIHBhbmVsX3NjcmlwdCA/IHsgdGl0bGU6IHQsIHBhbmVsX3NjcmlwdCB9IDogeyB0aXRsZTogdCwgY29udGVudDogYyB9KTtcbiAgICAgICAgY29uc3QgbmV3SWQgPSAocmVzIGFzIGFueSkuaWQgYXMgc3RyaW5nO1xuICAgICAgICBjb25zdCBjcmVhdGVkQXQgPSAocmVzIGFzIGFueSkuY3JlYXRlZEF0IGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgICAgc2V0Q2hhcHRlcnMoKHByZXYpID0+IHNvcnRDaGFwdGVycyhbLi4ucHJldiwgeyBpZDogbmV3SWQsIHRpdGxlOiAocmVzIGFzIGFueSkudGl0bGUsIGNvbnRlbnQ6IHBhbmVsX3NjcmlwdCA/ICcnIDogYywgY3JlYXRlZEF0IH1dKSk7XG4gICAgICAgIHNldFRhYnMoKHByZXYpID0+IChwcmV2LmluY2x1ZGVzKG5ld0lkKSA/IHByZXYgOiBbLi4ucHJldiwgbmV3SWRdKSk7XG4gICAgICAgIHNldEFjdGl2ZUlkKG5ld0lkKTtcbiAgICAgICAgc2V0VGl0bGUoKHJlcyBhcyBhbnkpLnRpdGxlKTtcbiAgICAgICAgc2V0Q29udGVudChwYW5lbF9zY3JpcHQgPyAnJyA6IGMpO1xuICAgICAgfSBjYXRjaCB7fVxuICAgIH07XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd29ya3NwYWNlOmNyZWF0ZS1kcmFmdCcsIGhhbmRsZXIgYXMgYW55KTtcbiAgICByZXR1cm4gKCkgPT4geyBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd3b3Jrc3BhY2U6Y3JlYXRlLWRyYWZ0JywgaGFuZGxlciBhcyBhbnkpOyB9O1xuICB9LCBbYXBpLCBwcm9qZWN0SWQsIHNvcnRDaGFwdGVyc10pO1xuXG4gIC8vIExpc3RlbiBmb3IgY2hhdC1kcml2ZW4gY2hhcHRlciB1cGRhdGVzIChyZXdyaXRlKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSBhc3luYyAoZTogYW55KSA9PiB7XG4gICAgICBjb25zdCBkZXRhaWwgPSBlPy5kZXRhaWwgfHwge307XG4gICAgICBjb25zdCBjb250ZW50ID0gU3RyaW5nKGRldGFpbC5jb250ZW50IHx8ICcnKTtcbiAgICAgIGxldCB0YXJnZXRJZDogc3RyaW5nIHwgbnVsbCA9IGRldGFpbC5pZCB8fCBudWxsO1xuICAgICAgaWYgKCF0YXJnZXRJZCkge1xuICAgICAgICAvLyBSZXNvbHZlIGJ5IGNoYXB0ZXJfbnVtYmVyICgxLWJhc2VkKSBhZ2FpbnN0IHNvcnRlZCBvcmRlclxuICAgICAgICBpZiAoZGV0YWlsLmNoYXB0ZXJfbnVtYmVyICYmIE51bWJlci5pc0ludGVnZXIoZGV0YWlsLmNoYXB0ZXJfbnVtYmVyKSkge1xuICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IHNvcnRDaGFwdGVycyhjaGFwdGVycyk7XG4gICAgICAgICAgY29uc3QgaWR4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc29ydGVkLmxlbmd0aCAtIDEsIGRldGFpbC5jaGFwdGVyX251bWJlciAtIDEpKTtcbiAgICAgICAgICB0YXJnZXRJZCA9IHNvcnRlZFtpZHhdPy5pZCB8fCBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGRldGFpbC50aXRsZSkge1xuICAgICAgICAgIGNvbnN0IG1hdGNoID0gY2hhcHRlcnMuZmluZCgoYykgPT4gKGMudGl0bGUgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09IFN0cmluZyhkZXRhaWwudGl0bGUpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgIHRhcmdldElkID0gbWF0Y2g/LmlkIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghdGFyZ2V0SWQpIHJldHVybjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBhcGkudXBkYXRlQ2hhcHRlcihwcm9qZWN0SWQsIHRhcmdldElkLCB7IGNvbnRlbnQgfSk7XG4gICAgICAgIHNldENoYXB0ZXJzKChwcmV2KSA9PiBwcmV2Lm1hcCgoYykgPT4gYy5pZCA9PT0gdGFyZ2V0SWQgPyB7IC4uLmMsIGNvbnRlbnQgfSA6IGMpKTtcbiAgICAgICAgLy8gT3BlbiBvciByZWZyZXNoIGFjdGl2ZSB0YWJcbiAgICAgICAgaWYgKCF0YWJzLmluY2x1ZGVzKHRhcmdldElkKSkgc2V0VGFicygocHJldikgPT4gWy4uLnByZXYsIHRhcmdldElkIV0pO1xuICAgICAgICBzZXRBY3RpdmVJZCh0YXJnZXRJZCk7XG4gICAgICAgIGlmIChhY3RpdmVJZCA9PT0gdGFyZ2V0SWQpIHNldENvbnRlbnQoY29udGVudCk7XG4gICAgICB9IGNhdGNoIHt9XG4gICAgfTtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd3b3Jrc3BhY2U6dXBkYXRlLWNoYXB0ZXInLCBoYW5kbGVyIGFzIGFueSk7XG4gICAgcmV0dXJuICgpID0+IHsgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignd29ya3NwYWNlOnVwZGF0ZS1jaGFwdGVyJywgaGFuZGxlciBhcyBhbnkpOyB9O1xuICB9LCBbYXBpLCBwcm9qZWN0SWQsIGNoYXB0ZXJzLCB0YWJzLCBhY3RpdmVJZCwgc29ydENoYXB0ZXJzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgbW91bnRlZCA9IHRydWU7XG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHAgPSBhd2FpdCBhcGkuZ2V0UHJvamVjdChwcm9qZWN0SWQpO1xuICAgICAgICBpZiAoIW1vdW50ZWQpIHJldHVybjtcbiAgICAgICAgc2V0UHJvamVjdFRpdGxlKHA/LnRpdGxlIHx8IFwiXCIpO1xuICAgICAgICBzZXRQcm9qZWN0RGVzY3JpcHRpb24ocD8uZGVzY3JpcHRpb24gfHwgXCJcIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHA/Lm1vZGUgJiYgKHAubW9kZSA9PT0gJ25vdmVsJyB8fCBwLm1vZGUgPT09ICdtYW5od2EnKSkgc2V0UHJvak1vZGUocC5tb2RlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHA/LmdlbnJlID09PSAnc3RyaW5nJykgc2V0UHJvakdlbnJlKHAuZ2VucmUpO1xuICAgICAgICAgIGlmICh0eXBlb2YgcD8uY29yZUNvbmZsaWN0ID09PSAnc3RyaW5nJykgc2V0UHJvakNvcmVDb25mbGljdChwLmNvcmVDb25mbGljdCk7XG4gICAgICAgICAgaWYgKHA/LnNldHRpbmdzSnNvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZXRQcm9qU2V0dGluZ3NKc29uKHR5cGVvZiBwLnNldHRpbmdzSnNvbiA9PT0gJ3N0cmluZycgPyBwLnNldHRpbmdzSnNvbiA6IEpTT04uc3RyaW5naWZ5KHAuc2V0dGluZ3NKc29uKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHt9XG4gICAgICB9IGNhdGNoIHt9XG4gICAgfSkoKTtcbiAgICByZXR1cm4gKCkgPT4geyBtb3VudGVkID0gZmFsc2U7IH07XG4gIH0sIFthcGksIHByb2plY3RJZF0pO1xuXG4gIC8vIEluaXRpYWxpemUgUHJvamVjdCBTZXR0aW5ncyBmb3JtIGZpZWxkcyB3aGVuIHRoZSB0YWIgb3BlbnMgb3IgcHJvamVjdCBmaWVsZHMgaHlkcmF0ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhY3RpdmVJZCA9PT0gU0VUVElOR1NfVEFCX0lEKSB7XG4gICAgICBpZiAoIXJlbmFtZVRpdGxlICYmIHByb2plY3RUaXRsZSkgc2V0UmVuYW1lVGl0bGUocHJvamVjdFRpdGxlKTtcbiAgICAgIGlmICghcmVuYW1lRGVzYyAmJiAocHJvamVjdERlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpKSBzZXRSZW5hbWVEZXNjKHByb2plY3REZXNjcmlwdGlvbik7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW2FjdGl2ZUlkLCBwcm9qZWN0VGl0bGUsIHByb2plY3REZXNjcmlwdGlvbl0pO1xuXG4gIC8vIExvYWQgY2hhdHMgKGh5ZHJhdGUgZnJvbSBjYWNoZSBmaXJzdCwgdGhlbiByZXZhbGlkYXRlKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBtb3VudGVkID0gdHJ1ZTtcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGhhc0NoYXRzQ2FjaGUpIHsgcmV0dXJuOyB9XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB4cyA9IGF3YWl0IGFwaS5saXN0Q2hhdHMocHJvamVjdElkKTtcbiAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG5leHQgPSB4cyB8fCBbXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoaGFzQ2hhdHNDYWNoZSAmJiBKU09OLnN0cmluZ2lmeShuZXh0KSA9PT0gSlNPTi5zdHJpbmdpZnkoY2hhdHNSZWYuY3VycmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgc2V0Q2hhdHMobmV4dCk7XG4gICAgICAgIGlmICghYWN0aXZlQ2hhdElkKSB7XG4gICAgICAgICAgaWYgKG5leHQgJiYgbmV4dC5sZW5ndGgpIHNldEFjdGl2ZUNoYXRJZChuZXh0WzBdLmlkKTtcbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVuc3VyZSBhdCBsZWFzdCBvbmUgcGxvdCBjaGF0IGV4aXN0c1xuICAgICAgICAgICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IGFwaS5jcmVhdGVDaGF0KHByb2plY3RJZCwgeyB0eXBlOiAncGxvdCcgfSk7XG4gICAgICAgICAgICBzZXRDaGF0cyhbY3JlYXRlZF0pO1xuICAgICAgICAgICAgc2V0QWN0aXZlQ2hhdElkKGNyZWF0ZWQuaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCB7fVxuICAgIH0pKCk7XG4gICAgcmV0dXJuICgpID0+IHsgbW91bnRlZCA9IGZhbHNlOyB9O1xuICB9LCBbYXBpLCBwcm9qZWN0SWQsIGhhc0NoYXRzQ2FjaGUsIGFjdGl2ZUNoYXRJZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7IGNoYXRzUmVmLmN1cnJlbnQgPSBjaGF0czsgfSwgW2NoYXRzXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHsgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oY2hhdHNDYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkoY2hhdHMpKTsgfSBjYXRjaCB7fVxuICAgIHNldEhhc0NoYXRzQ2FjaGUoQXJyYXkuaXNBcnJheShjaGF0cykgJiYgY2hhdHMubGVuZ3RoID4gMCk7XG4gIH0sIFtjaGF0cywgY2hhdHNDYWNoZUtleV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7IGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBhY3RpdmVDaGF0SWQpIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShjaGF0c0FjdGl2ZUtleSwgYWN0aXZlQ2hhdElkKTsgfSBjYXRjaCB7fVxuICB9LCBbYWN0aXZlQ2hhdElkLCBjaGF0c0FjdGl2ZUtleV0pO1xuICAvLyBQZXJzaXN0IGNoYXB0ZXJzIGNhY2hlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHsgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oY2hhcHRlcnNDYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkoY2hhcHRlcnMpKTsgfSBjYXRjaCB7fVxuICAgIHNldEhhc0NoYXB0ZXJzQ2FjaGUoQXJyYXkuaXNBcnJheShjaGFwdGVycykgJiYgY2hhcHRlcnMubGVuZ3RoID4gMCk7XG4gIH0sIFtjaGFwdGVycywgY2hhcHRlcnNDYWNoZUtleV0pO1xuICAvLyBQZXJzaXN0IHRhYnMgYW5kIGFjdGl2ZSB0YWJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0cnkgeyBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0YWJzQ2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KHRhYnMpKTsgfSBjYXRjaCB7fVxuICB9LCBbdGFicywgdGFic0NhY2hlS2V5XSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHsgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIGFjdGl2ZUlkKSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oYWN0aXZlVGFiS2V5LCBhY3RpdmVJZCk7IH0gY2F0Y2gge31cbiAgfSwgW2FjdGl2ZUlkLCBhY3RpdmVUYWJLZXldKTtcbiAgLy8gUGVyc2lzdCBVSSB0b2dnbGVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHsgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0obGVmdENvbGxhcHNlZEtleSwgbGVmdENvbGxhcHNlZCA/ICcxJyA6ICcwJyk7IH0gY2F0Y2gge31cbiAgfSwgW2xlZnRDb2xsYXBzZWQsIGxlZnRDb2xsYXBzZWRLZXldKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0cnkgeyBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShyaWdodE9wZW5LZXksIHJpZ2h0T3BlbiA/ICcxJyA6ICcwJyk7IH0gY2F0Y2gge31cbiAgfSwgW3JpZ2h0T3BlbiwgcmlnaHRPcGVuS2V5XSk7XG5cbiAgY29uc3Qgb3BlblRhYiA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7XG4gICAgc2V0VGFicygocHJldikgPT4gKHByZXYuaW5jbHVkZXMoaWQpID8gcHJldiA6IFsuLi5wcmV2LCBpZF0pKTtcbiAgICBzZXRBY3RpdmVJZChpZCk7XG4gICAgY29uc3QgY2ggPSBjaGFwdGVycy5maW5kKChjKSA9PiBjLmlkID09PSBpZCk7XG4gICAgc2V0VGl0bGUoY2g/LnRpdGxlIHx8IFwiXCIpO1xuICAgIHNldENvbnRlbnQoKGNoPy5jb250ZW50IHx8IFwiXCIpIGFzIHN0cmluZyk7XG4gIH0sIFtjaGFwdGVyc10pO1xuXG4gIGNvbnN0IGNsb3NlVGFiID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICBzZXRUYWJzKChwcmV2KSA9PiBwcmV2LmZpbHRlcigodCkgPT4gdCAhPT0gaWQpKTtcbiAgICBzZXRBY3RpdmVJZCgoY3VycikgPT4ge1xuICAgICAgaWYgKGN1cnIgIT09IGlkKSByZXR1cm4gY3VycjtcbiAgICAgIGNvbnN0IGlkeCA9IHRhYnMuaW5kZXhPZihpZCk7XG4gICAgICBjb25zdCBuZXh0ID0gdGFic1tpZHggKyAxXSB8fCB0YWJzW2lkeCAtIDFdIHx8IG51bGw7XG4gICAgICByZXR1cm4gbmV4dCB8fCBudWxsO1xuICAgIH0pO1xuICB9LCBbdGFic10pO1xuXG4gIC8vIEh5ZHJhdGUgZWRpdG9yIGZpZWxkcyB3aGVuIGFjdGl2ZUlkIGFuZCBjaGFwdGVycyBhcmUgcmVzdG9yZWQgZnJvbSBjYWNoZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYWN0aXZlSWQpIHJldHVybjtcbiAgICBpZiAoYWN0aXZlSWQgPT09IFNFVFRJTkdTX1RBQl9JRCB8fCBhY3RpdmVJZCA9PT0gQ0hBUkFDVEVSU19UQUJfSUQgfHwgYWN0aXZlSWQgPT09IFdPUkxEX1RBQl9JRCkgcmV0dXJuO1xuICAgIGNvbnN0IGNoID0gY2hhcHRlcnMuZmluZCgoYykgPT4gYy5pZCA9PT0gYWN0aXZlSWQpO1xuICAgIGlmICghY2gpIHJldHVybjtcbiAgICBzZXRUaXRsZShjaC50aXRsZSB8fCBcIlwiKTtcbiAgICBzZXRDb250ZW50KChjaC5jb250ZW50IHx8IFwiXCIpIGFzIHN0cmluZyk7XG4gIH0sIFthY3RpdmVJZCwgY2hhcHRlcnNdKTtcblxuICBjb25zdCBvbkRyYWdTdGFydCA9IChlOiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+LCBpZDogc3RyaW5nKSA9PiB7XG4gICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShcInRleHQvdGFiXCIsIGlkKTtcbiAgfTtcbiAgY29uc3Qgb25Ecm9wID0gKGU6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4sIHRhcmdldElkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBzcmNJZCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJ0ZXh0L3RhYlwiKTtcbiAgICBpZiAoIXNyY0lkIHx8IHNyY0lkID09PSB0YXJnZXRJZCkgcmV0dXJuO1xuICAgIHNldFRhYnMoKHByZXYpID0+IHtcbiAgICAgIGNvbnN0IGFyciA9IFsuLi5wcmV2XTtcbiAgICAgIGNvbnN0IHNpID0gYXJyLmluZGV4T2Yoc3JjSWQpO1xuICAgICAgY29uc3QgdGkgPSBhcnIuaW5kZXhPZih0YXJnZXRJZCk7XG4gICAgICBpZiAoc2kgPCAwIHx8IHRpIDwgMCkgcmV0dXJuIHByZXY7XG4gICAgICBhcnIuc3BsaWNlKHRpLCAwLCBhcnIuc3BsaWNlKHNpLCAxKVswXSk7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFBlcnNpc3QgZWRpdHMgKGRlYm91bmNlZClcbiAgY29uc3Qgc2NoZWR1bGVTYXZlID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcsIHQ6IHN0cmluZywgYzogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFpZCkgcmV0dXJuO1xuICAgIGlmIChzYXZlVGltZXIuY3VycmVudCkgY2xlYXJUaW1lb3V0KHNhdmVUaW1lci5jdXJyZW50KTtcbiAgICBzYXZlVGltZXIuY3VycmVudCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgc2V0U2F2aW5nKHRydWUpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgYXBpLnVwZGF0ZUNoYXB0ZXIocHJvamVjdElkLCBpZCwgeyB0aXRsZTogdCwgY29udGVudDogYyB9KTtcbiAgICAgICAgc2V0Q2hhcHRlcnMoKHByZXYpID0+IHByZXYubWFwKChjaCkgPT4gY2guaWQgPT09IGlkID8geyAuLi5jaCwgdGl0bGU6IHQsIGNvbnRlbnQ6IGMgfSA6IGNoKSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRTYXZpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH0sIDUwMCk7XG4gIH0sIFthcGksIHByb2plY3RJZF0pO1xuXG4gIC8vIEFjdGl2ZSBjaGFuZ2UgaGFuZGxlcnNcbiAgY29uc3Qgb25UaXRsZUNoYW5nZSA9ICh2OiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUlkKSByZXR1cm47XG4gICAgc2V0VGl0bGUodik7XG4gICAgc2NoZWR1bGVTYXZlKGFjdGl2ZUlkLCB2LCBjb250ZW50KTtcbiAgfTtcbiAgY29uc3Qgb25Db250ZW50Q2hhbmdlID0gKHY6IHN0cmluZykgPT4ge1xuICAgIGlmICghYWN0aXZlSWQpIHJldHVybjtcbiAgICBzZXRDb250ZW50KHYpO1xuICAgIHNjaGVkdWxlU2F2ZShhY3RpdmVJZCwgdGl0bGUsIHYpO1xuICB9O1xuXG4gIGNvbnN0IG9uTmV3Q2hhcHRlciA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmNyZWF0ZUNoYXB0ZXIocHJvamVjdElkLCB7IHRpdGxlOiBcIlVudGl0bGVkIENoYXB0ZXJcIiB9KTtcbiAgICAgIGNvbnN0IGNyZWF0ZWRBdCA9IChyZXMgYXMgYW55KS5jcmVhdGVkQXQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgc2V0Q2hhcHRlcnMoKHByZXYpID0+IHNvcnRDaGFwdGVycyhbLi4ucHJldiwgeyBpZDogKHJlcyBhcyBhbnkpLmlkLCB0aXRsZTogKHJlcyBhcyBhbnkpLnRpdGxlLCBjb250ZW50OiBcIlwiLCBjcmVhdGVkQXQgfV0pKTtcbiAgICAgIG9wZW5UYWIoKHJlcyBhcyBhbnkpLmlkKTtcbiAgICB9IGNhdGNoIHt9XG4gIH07XG5cbiAgY29uc3Qgb25EZWxldGVDaGFwdGVyID0gdXNlQ2FsbGJhY2soYXN5bmMgKGlkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWFsZXJ0XG4gICAgICBpZiAoIWNvbmZpcm0oJ0RlbGV0ZSB0aGlzIGNoYXB0ZXIgcGVybWFuZW50bHk/JykpIHJldHVybjtcbiAgICAgIHNldERlbGV0aW5nSWQoaWQpO1xuICAgICAgYXdhaXQgYXBpLmRlbGV0ZUNoYXB0ZXIocHJvamVjdElkLCBpZCk7XG4gICAgICBzZXRDaGFwdGVycygocHJldikgPT4gcHJldi5maWx0ZXIoKGMpID0+IGMuaWQgIT09IGlkKSk7XG4gICAgICBzZXRUYWJzKChwcmV2KSA9PiBwcmV2LmZpbHRlcigodCkgPT4gdCAhPT0gaWQpKTtcbiAgICAgIHNldEFjdGl2ZUlkKChjdXJyKSA9PiAoY3VyciA9PT0gaWQgPyBudWxsIDogY3VycikpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnN0IG1zZyA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICdGYWlsZWQgdG8gZGVsZXRlJztcbiAgICAgIHNldEVycm9yQ2gobXNnKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0RGVsZXRpbmdJZChudWxsKTtcbiAgICB9XG4gIH0sIFthcGksIHByb2plY3RJZF0pO1xuXG4gIGNvbnN0IGFjdGl2ZUNoYXB0ZXIgPSBjaGFwdGVycy5maW5kKChjKSA9PiBjLmlkID09PSBhY3RpdmVJZCkgfHwgbnVsbDtcblxuICBjb25zdCBncmlkQ29scyA9IGAke2xlZnRDb2xsYXBzZWQgPyAnJyA6ICcyNjBweCAnfTFmciR7cmlnaHRPcGVuID8gJyAyNjBweCcgOiAnJ31gO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJoLXNjcmVlbiB3LXNjcmVlbiBiZy1iZy1wcmltYXJ5IHRleHQtdGV4dC1wcmltYXJ5IGdyaWQgZ3JpZC1yb3dzLVthdXRvXzFmcl0gcmVsYXRpdmVcIj5cbiAgICAgIHsvKiBUb3AgVGFicyBCYXIgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtMTIgYm9yZGVyLWIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLXByaW1hcnkgZmxleCBpdGVtcy1jZW50ZXIgcmVsYXRpdmVcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMCBmbGV4IGl0ZW1zLXN0cmV0Y2ggZ2FwLTEgcHgtMiBvdmVyZmxvdy14LWF1dG9cIj5cbiAgICAgICAgICB7dGFicy5tYXAoKGlkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaCA9IGNoYXB0ZXJzLmZpbmQoKGMpID0+IGMuaWQgPT09IGlkKTtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZSA9IGlkID09PSBhY3RpdmVJZDtcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gaWQgPT09IFNFVFRJTkdTX1RBQl9JRCA/ICdTZXR0aW5ncycgOiAoaWQgPT09IENIQVJBQ1RFUlNfVEFCX0lEID8gJ0NoYXJhY3RlcnMnIDogKGNoPy50aXRsZSB8fCAnVW50aXRsZWQnKSk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpZH1cbiAgICAgICAgICAgICAgICBkcmFnZ2FibGVcbiAgICAgICAgICAgICAgICBvbkRyYWdTdGFydD17KGUpID0+IG9uRHJhZ1N0YXJ0KGUsIGlkKX1cbiAgICAgICAgICAgICAgICBvbkRyYWdPdmVyPXsoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpfVxuICAgICAgICAgICAgICAgIG9uRHJvcD17KGUpID0+IG9uRHJvcChlLCBpZCl9XG4gICAgICAgICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiB7IGlmIChlLmJ1dHRvbiA9PT0gMSkgeyBlLnByZXZlbnREZWZhdWx0KCk7IGNsb3NlVGFiKGlkKTsgfSB9fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGdyb3VwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTQgaC0xMCByb3VuZGVkLXQtbWQgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwICR7YWN0aXZlID8gJ2JnLWJnLWVsZXZhdGVkIHRleHQtdGV4dC1wcmltYXJ5JyA6ICd0ZXh0LXRleHQtdGVydGlhcnkgaG92ZXI6dGV4dC10ZXh0LXNlY29uZGFyeSBob3ZlcjpiZy1iZy1ob3Zlcid9YH1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVJZChpZCl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRydW5jYXRlIG1heC13LVsxNjBweF1cIj57bGFiZWx9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwib3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIGhvdmVyOnRleHQtcmVkLTQwMCB0cmFuc2l0aW9uLW9wYWNpdHkgZHVyYXRpb24tMTUwXCIgb25DbGljaz17KGUpID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgY2xvc2VUYWIoaWQpOyB9fT7DlzwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcG9pbnRlci1ldmVudHMtbm9uZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtdGV4dC1wcmltYXJ5IHRydW5jYXRlIG1heC13LVs2MCVdIHRyYWNraW5nLWVsZWdhbnRcIj57cHJvamVjdFRpdGxlIHx8ICdQcm9qZWN0J308L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgcmlnaHQtMiB0b3AtMSB6LTEwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC14cyBweC0zIHB5LTEuNSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgYmctYmctZWxldmF0ZWQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LWFjY2VudCBob3Zlcjpib3JkZXItYWNjZW50IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZXR0aW5nc01lbnVPcGVuKCh2KSA9PiAhdil9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3Itb25seVwiPlNldHRpbmdzPC9zcGFuPlxuICAgICAgICAgICAgPEljb25TZXR0aW5ncyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICB7c2V0dGluZ3NNZW51T3BlbiAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHJpZ2h0LTAgdG9wLTEwIHotMjAgdy00OCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgYmctYmctZWxldmF0ZWQgc2hhZG93LWVsZXZhdGlvblwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgdGV4dC1zbSB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOmJnLWJnLWhvdmVyIGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0U2V0dGluZ3NNZW51T3BlbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAvLyBPcGVuIHNldHRpbmdzIGFzIGEgY2VudHJhbCB0YWJcbiAgICAgICAgICAgICAgICAgIGlmICghdGFicy5pbmNsdWRlcyhTRVRUSU5HU19UQUJfSUQpKSBzZXRUYWJzKChwcmV2KSA9PiBbLi4ucHJldiwgU0VUVElOR1NfVEFCX0lEXSk7XG4gICAgICAgICAgICAgICAgICBzZXRBY3RpdmVJZChTRVRUSU5HU19UQUJfSUQpO1xuICAgICAgICAgICAgICAgICAgc2V0UmVuYW1lVGl0bGUocHJvamVjdFRpdGxlIHx8ICcnKTtcbiAgICAgICAgICAgICAgICAgIHNldFJlbmFtZURlc2MocHJvamVjdERlc2NyaXB0aW9uIHx8ICcnKTtcbiAgICAgICAgICAgICAgICAgIHNldFJlbmFtZUVycm9yKG51bGwpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5Qcm9qZWN0IFNldHRpbmdzPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMiB0ZXh0LXNtIHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6YmctYmctaG92ZXIgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnkgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRTZXR0aW5nc01lbnVPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIGlmICghdGFicy5pbmNsdWRlcyhXT1JMRF9UQUJfSUQpKSBzZXRUYWJzKChwcmV2KSA9PiBbLi4ucHJldiwgV09STERfVEFCX0lEXSk7XG4gICAgICAgICAgICAgICAgICBzZXRBY3RpdmVJZChXT1JMRF9UQUJfSUQpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5Xb3JsZCBTZXR0aW5nczwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgdGV4dC1zbSB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOmJnLWJnLWhvdmVyIGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0U2V0dGluZ3NNZW51T3BlbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICBpZiAoIXRhYnMuaW5jbHVkZXMoQ0hBUkFDVEVSU19UQUJfSUQpKSBzZXRUYWJzKChwcmV2KSA9PiBbLi4ucHJldiwgQ0hBUkFDVEVSU19UQUJfSURdKTtcbiAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZUlkKENIQVJBQ1RFUlNfVEFCX0lEKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+Q2hhcmFjdGVyczwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAge2xlZnRDb2xsYXBzZWQgJiYgKFxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0yIHRvcC0xNCB6LTEwIHRleHQteHMgcHgtMyBweS0yIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCBiZy1iZy1lbGV2YXRlZCB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOnRleHQtYWNjZW50IGhvdmVyOmJvcmRlci1hY2NlbnQgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIHNoYWRvdy1lbGV2YXRpb25cIlxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldExlZnRDb2xsYXBzZWQoZmFsc2UpfVxuICAgICAgICA+XG4gICAgICAgICAgPENoZXZyb25SaWdodCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICA8c3Bhbj5DaGFwdGVyczwvc3Bhbj5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICApfVxuXG4gICAgICB7LyogTGF5b3V0OiBMZWZ0IHNpZGViYXIgKyBNYWluIGVkaXRvciArIFJpZ2h0IHNpZGViYXIgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgbWluLWgtMFwiIHN0eWxlPXt7IGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGdyaWRDb2xzIH19PlxuICAgICAgICB7LyogTGVmdDogQ2hhcHRlciBUcmVlICovfVxuICAgICAgICB7IWxlZnRDb2xsYXBzZWQgJiYgKFxuICAgICAgICA8YXNpZGUgY2xhc3NOYW1lPVwiYm9yZGVyLXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLXByaW1hcnkgbWluLWgtMCBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC01IHB5LTQgdGV4dC14cyBmb250LXNlbWlib2xkIHRyYWNraW5nLVswLjA1ZW1dIHVwcGVyY2FzZSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gdGV4dC10ZXh0LXNlY29uZGFyeVwiPlxuICAgICAgICAgICAgPHNwYW4+Q0hBUFRFUlM8L3NwYW4+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LWFjY2VudCByb3VuZGVkIHAtMSBob3ZlcjpiZy1iZy1ob3ZlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIiBvbkNsaWNrPXsoKSA9PiBzZXRMZWZ0Q29sbGFwc2VkKHRydWUpfT5cbiAgICAgICAgICAgICAgPENoZXZyb25MZWZ0IGNsYXNzTmFtZT1cInctNCBoLTRcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzci1vbmx5XCI+Q29sbGFwc2U8L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gcHgtNFwiPlxuICAgICAgICAgICAge2xvYWRpbmdDaCAmJiA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXNlY29uZGFyeSBweC0yIHB5LTJcIj5Mb2FkaW5n4oCmPC9kaXY+fVxuICAgICAgICAgICAge2Vycm9yQ2ggJiYgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtcmVkLTQwMCBweC0yIHB5LTIgYmctcmVkLTk1MC8yMCByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItcmVkLTUwMC8yMFwiPntlcnJvckNofTwvZGl2Pn1cbiAgICAgICAgICAgIHtjaGFwdGVycy5tYXAoKGMsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB3b3JkQ291bnQgPSBjLmNvbnRlbnQgPyBjLmNvbnRlbnQudHJpbSgpLnNwbGl0KC9cXHMrLykuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtjLmlkfSBjbGFzc05hbWU9e2Bncm91cCB3LWZ1bGwgZmxleCBpdGVtcy1zdGFydCBqdXN0aWZ5LWJldHdlZW4gZ2FwLTIgcHgtMyBweS0zIHJvdW5kZWQtbGcgbWItMiB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTAgJHthY3RpdmVJZCA9PT0gYy5pZCA/ICdiZy1iZy1lbGV2YXRlZCBib3JkZXItbC0zIGJvcmRlci1hY2NlbnQnIDogJ2hvdmVyOmJnLWJnLWhvdmVyJ31gfT5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgdGV4dC1sZWZ0XCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9wZW5UYWIoYy5pZCl9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHVwcGVyY2FzZSB0ZXh0LXRleHQtdGVydGlhcnkgbWItMVwiPkNoYXB0ZXIge2lkeCArIDF9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHRleHQtc20gZm9udC1tZWRpdW0gbWItMSAke2FjdGl2ZUlkID09PSBjLmlkID8gJ3RleHQtdGV4dC1wcmltYXJ5JyA6ICd0ZXh0LXRleHQtc2Vjb25kYXJ5J31gfT57Yy50aXRsZSB8fCAnVW50aXRsZWQnfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeVwiPnt3b3JkQ291bnR9IHdvcmRzPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0xNTAgJHtkZWxldGluZ0lkID09PSBjLmlkID8gJ3RleHQtcmVkLTQwMCBvcGFjaXR5LTYwIGN1cnNvci1ub3QtYWxsb3dlZCcgOiAndGV4dC10ZXh0LXRlcnRpYXJ5IGhvdmVyOnRleHQtcmVkLTQwMCd9YH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGlmIChkZWxldGluZ0lkKSByZXR1cm47IHZvaWQgb25EZWxldGVDaGFwdGVyKGMuaWQpOyB9fVxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJEZWxldGUgY2hhcHRlclwiXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGVsZXRpbmdJZCA9PT0gYy5pZH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7ZGVsZXRpbmdJZCA9PT0gYy5pZCA/IDxMb2FkZXIyIGNsYXNzTmFtZT1cInctNCBoLTQgYW5pbWF0ZS1zcGluXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz4gOiA8VHJhc2gyIGNsYXNzTmFtZT1cInctNCBoLTRcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPn1cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNyLW9ubHlcIj5EZWxldGU8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTt9KX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBib3JkZXItdCBib3JkZXItYm9yZGVyLWRlZmF1bHRcIj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwidy1mdWxsIHJvdW5kZWQtbGcgYmctYmctZWxldmF0ZWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCBob3Zlcjpib3JkZXItYWNjZW50IGhvdmVyOmJnLWJnLWhvdmVyIHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnkgdGV4dC1zbSBweC00IHB5LTMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwIGhvdmVyOi10cmFuc2xhdGUteS0wLjVcIiBvbkNsaWNrPXtvbk5ld0NoYXB0ZXJ9PlxuICAgICAgICAgICAgICA8UGx1cyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICAgICAgPHNwYW4+TmV3IENoYXB0ZXI8L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9hc2lkZT5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogQ2VudGVyOiBFZGl0b3IgKi99XG4gICAgICAgIDxtYWluIGNsYXNzTmFtZT1cIm1pbi1oLTAgb3ZlcmZsb3ctaGlkZGVuIGJnLWJnLXByaW1hcnkgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgIHthY3RpdmVJZCA9PT0gU0VUVElOR1NfVEFCX0lEID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZ3JpZCBncmlkLXJvd3MtW2F1dG9fMWZyX2F1dG9dIGJnLWJnLWVsZXZhdGVkXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHB4LTYgcHktNFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC10ZXh0LXByaW1hcnkgdHJhY2tpbmctZWxlZ2FudFwiPlByb2plY3QgU2V0dGluZ3M8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtMCBvdmVyZmxvdy15LWF1dG8gcHgtNiBweS02XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdhcC00IG1heC13LTJ4bFwiPlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImdyaWQgZ2FwLTIgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZVwiPlRpdGxlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cmVuYW1lVGl0bGV9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRSZW5hbWVUaXRsZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTQgcHktMi41IHRleHQtdGV4dC1wcmltYXJ5IHBsYWNlaG9sZGVyOnRleHQtdGV4dC10ZXJ0aWFyeSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0xNTBcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVcIj5EZXNjcmlwdGlvbjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3JlbmFtZURlc2N9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRSZW5hbWVEZXNjKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBweC00IHB5LTIuNSB0ZXh0LXRleHQtcHJpbWFyeSBwbGFjZWhvbGRlcjp0ZXh0LXRleHQtdGVydGlhcnkgb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnQgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwIHRleHQtc21cIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVcIj5Nb2RlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3Byb2pNb2RlfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UHJvak1vZGUoZS50YXJnZXQudmFsdWUgYXMgYW55KX1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtNCBweS0yLjUgdGV4dC10ZXh0LXByaW1hcnkgb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnQgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj5TZWxlY3TigKY8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibm92ZWxcIj5Ob3ZlbDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJtYW5od2FcIj5NYW5od2E8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImdyaWQgZ2FwLTIgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZVwiPkdlbnJlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJvakdlbnJlfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UHJvakdlbnJlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtNCBweS0yLjUgdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgey8qIFdvcmxkIE5hbWUgcmVtb3ZlZCAqL31cbiAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnkgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVcIj5Db3JlIENvbmZsaWN0PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJvakNvcmVDb25mbGljdH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFByb2pDb3JlQ29uZmxpY3QoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBweC00IHB5LTIuNSB0ZXh0LXRleHQtcHJpbWFyeSBwbGFjZWhvbGRlcjp0ZXh0LXRleHQtdGVydGlhcnkgb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnQgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+U2V0dGluZ3MgSlNPTjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3Byb2pTZXR0aW5nc0pzb259XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRQcm9qU2V0dGluZ3NKc29uKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICByb3dzPXsxMH1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtNCBweS0yLjUgdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTE1MCBmb250LW1vbm8gdGV4dC14c1wiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAge3JlbmFtZUVycm9yICYmIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXJlZC00MDAgcC0zIHJvdW5kZWQtbGcgYmctcmVkLTk1MC8yMCBib3JkZXIgYm9yZGVyLXJlZC01MDAvMjBcIj57cmVuYW1lRXJyb3J9PC9kaXY+fVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTE0IHB4LTYgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1lbmQgZ2FwLTMgYm9yZGVyLXQgYm9yZGVyLWJvcmRlci1kZWZhdWx0IGJnLWJnLXByaW1hcnlcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZUlkKG51bGwpfSBjbGFzc05hbWU9XCJweC00IHB5LTIgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6YmctYmctaG92ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwXCI+Q2xvc2U8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nUmVuYW1lfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRTYXZpbmdSZW5hbWUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNldFJlbmFtZUVycm9yKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUJvZHk6IGFueSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSByZW5hbWVUaXRsZS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgdCAhPT0gcHJvamVjdFRpdGxlKSB1cGRhdGVCb2R5LnRpdGxlID0gdDtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVuYW1lRGVzYyAhPT0gcHJvamVjdERlc2NyaXB0aW9uKSB1cGRhdGVCb2R5LmRlc2NyaXB0aW9uID0gcmVuYW1lRGVzYztcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlQm9keSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IGFwaS51cGRhdGVQcm9qZWN0KHByb2plY3RJZCwgdXBkYXRlQm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQcm9qZWN0VGl0bGUodXBkYXRlZD8udGl0bGUgfHwgdCB8fCBwcm9qZWN0VGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvamVjdERlc2NyaXB0aW9uKHVwZGF0ZWQ/LmRlc2NyaXB0aW9uID8/IHJlbmFtZURlc2MgPz8gcHJvamVjdERlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlczogYW55ID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2pNb2RlKSBjaGFuZ2VzLm1vZGUgPSBwcm9qTW9kZTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvakdlbnJlKSBjaGFuZ2VzLmdlbnJlID0gcHJvakdlbnJlO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9qQ29yZUNvbmZsaWN0KSBjaGFuZ2VzLmNvcmVDb25mbGljdCA9IHByb2pDb3JlQ29uZmxpY3Q7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2pTZXR0aW5nc0pzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7IGNoYW5nZXMuc2V0dGluZ3NKc29uID0gSlNPTi5wYXJzZShwcm9qU2V0dGluZ3NKc29uKTsgfSBjYXRjaCB7IGNoYW5nZXMuc2V0dGluZ3NKc29uID0gcHJvalNldHRpbmdzSnNvbjsgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY2hhbmdlcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBpLnVwZGF0ZVByb2plY3RTZXR0aW5ncyhwcm9qZWN0SWQsIGNoYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgncHJvamVjdDpzZXR0aW5ncy11cGRhdGVkJywgeyBkZXRhaWw6IHsgcHJvamVjdElkLCBjaGFuZ2VzIH0gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVG9hc3Q6IFNldHRpbmdzIHNhdmVkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9hc3RUaW1lci5jdXJyZW50KSBjbGVhclRpbWVvdXQodG9hc3RUaW1lci5jdXJyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRvYXN0TXNnKCdTZXR0aW5ncyBzYXZlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RUaW1lci5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiBzZXRUb2FzdE1zZygnJyksIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0UmVuYW1lRXJyb3IoZT8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHNhdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRTYXZpbmdSZW5hbWUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIHJvdW5kZWQtbWQgYmctYWNjZW50IGhvdmVyOmJnLWFjY2VudC1ob3ZlciBkaXNhYmxlZDpvcGFjaXR5LTUwIHRleHQtd2hpdGUgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7c2F2aW5nUmVuYW1lID8gJ1NhdmluZ+KApicgOiAnU2F2ZSBTZXR0aW5ncyd9XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSA6IGFjdGl2ZUlkID09PSBDSEFSQUNURVJTX1RBQl9JRCA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGJnLWJnLWVsZXZhdGVkXCI+XG4gICAgICAgICAgICAgIDxDaGFyYWN0ZXJNYW5hZ2VyIHByb2plY3RJZD17cHJvamVjdElkfSByZXF1aXJlSW1hZ2U9e3Byb2pNb2RlID09PSAnbWFuaHdhJ30gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiBhY3RpdmVJZCA9PT0gV09STERfVEFCX0lEID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgYmctYmctZWxldmF0ZWRcIj5cbiAgICAgICAgICAgICAgPFdvcmxkU2V0dGluZ3NNYW5hZ2VyIHByb2plY3RJZD17cHJvamVjdElkfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSA6IGFjdGl2ZUlkID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICAgICAgICB7LyogRWRpdG9yIENhbnZhcyAtIEVsZXZhdGVkIFN1cmZhY2UgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi1oLTAgb3ZlcmZsb3cteS1hdXRvIGJnLWJnLWVsZXZhdGVkIGZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1bODAwcHhdIHB4LTEyIHB5LTE2XCI+XG4gICAgICAgICAgICAgICAgICB7LyogQ2hhcHRlciBUaXRsZSBJbnB1dCAqL31cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGl0bGV9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25UaXRsZUNoYW5nZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2hhcHRlciBUaXRsZVwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy10cmFuc3BhcmVudCBib3JkZXItbm9uZSB0ZXh0LVszMnB4XSBmb250LWJvbGQgdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBtYi04IHRyYWNraW5nLXRpZ2h0XCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICB7LyogQ2hhcHRlciBDb250ZW50IC0gQ29udGVudGVkaXRhYmxlICovfVxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50RWRpdGFibGVcbiAgICAgICAgICAgICAgICAgICAgc3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nXG4gICAgICAgICAgICAgICAgICAgIG9uSW5wdXQ9eyhlKSA9PiBvbkNvbnRlbnRDaGFuZ2UoZS5jdXJyZW50VGFyZ2V0LnRleHRDb250ZW50IHx8ICcnKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIG1pbi1oLVs0MDBweF0gdGV4dC1sZyBsZWFkaW5nLVsxLjhdIHRleHQtdGV4dC1wcmltYXJ5IG91dGxpbmUtbm9uZVwiXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdoaXRlU3BhY2U6ICdwcmUtd3JhcCcgfX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2NvbnRlbnR9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIHshY29udGVudCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1sZyB0ZXh0LXRleHQtdGVydGlhcnkgcG9pbnRlci1ldmVudHMtbm9uZSAtbXQtWzQwMHB4XSBsZWFkaW5nLVsxLjhdXCI+U3RhcnQgd3JpdGluZyB5b3VyIHN0b3J5Li4uPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgey8qIFN0YXR1cyBCYXIgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC0xMiBiZy1iZy1wcmltYXJ5IGJvcmRlci10IGJvcmRlci1ib3JkZXItZGVmYXVsdCBweC02IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiB0ZXh0LVsxM3B4XSB0ZXh0LXRleHQtdGVydGlhcnlcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC02XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgdy0xLjUgaC0xLjUgcm91bmRlZC1mdWxsICR7c2F2aW5nID8gJ2JnLXdhcm5pbmcgYW5pbWF0ZS1wdWxzZScgOiAnYmctc3VjY2Vzcyd9YH0gLz5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3NhdmluZyA/ICdTYXZpbmfigKYnIDogJ1NhdmVkJ308L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+e2NvbnRlbnQudHJpbSgpLnNwbGl0KC9cXHMrLykuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aH0gd29yZHM8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+e2NvbnRlbnQubGVuZ3RofSBjaGFyYWN0ZXJzPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2PntNYXRoLmNlaWwoY29udGVudC50cmltKCkuc3BsaXQoL1xccysvKS5maWx0ZXIoQm9vbGVhbikubGVuZ3RoIC8gMjAwKX0gbWluIHJlYWQ8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAge2FjdGl2ZUNoYXB0ZXI/LmNyZWF0ZWRBdCAmJiBgTGFzdCBlZGl0ZWQgJHtuZXcgRGF0ZShhY3RpdmVDaGFwdGVyLmNyZWF0ZWRBdCkudG9Mb2NhbGVTdHJpbmcoKX1gfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtZnVsbCBiZy1iZy1lbGV2YXRlZCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIG1heC13LW1kXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LXRleHQtcHJpbWFyeSBtYi0yXCI+Tm8gQ2hhcHRlciBTZWxlY3RlZDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXRleHQtc2Vjb25kYXJ5XCI+T3BlbiBhIGNoYXB0ZXIgZnJvbSB0aGUgbGVmdCBzaWRlYmFyIHRvIHN0YXJ0IGVkaXRpbmcuPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9tYWluPlxuXG4gICAgICAgIHsvKiBSaWdodDogQ2hhdHMgU2lkZWJhciAqL31cbiAgICAgICAge3JpZ2h0T3BlbiAmJiAoXG4gICAgICAgIDxhc2lkZSBjbGFzc05hbWU9XCJib3JkZXItbCBib3JkZXItYm9yZGVyLWRlZmF1bHQgYmctYmctcHJpbWFyeSBtaW4taC0wIGZsZXggZmxleC1jb2wgcmVsYXRpdmVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTUgcHktNCB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdHJhY2tpbmctWzAuMDVlbV0gdXBwZXJjYXNlIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiB0ZXh0LXRleHQtc2Vjb25kYXJ5XCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnlcIiBvbkNsaWNrPXsoKSA9PiBzZXRDaGF0TWVudU9wZW4oKHYpPT4hdil9PlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0cnVuY2F0ZSBtYXgtdy1bMTQwcHhdIHRleHQtdGV4dC1wcmltYXJ5IG5vcm1hbC1jYXNlIHRleHQtc20gZm9udC1tZWRpdW1cIj57KGNoYXRzLmZpbmQoYz0+Yy5pZD09PWFjdGl2ZUNoYXRJZCk/LnRpdGxlKSB8fCAnU2VsZWN0IGNoYXQnfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPENoZXZyb25Eb3duIGNsYXNzTmFtZT17YHctMy41IGgtMy41IHRyYW5zaXRpb24tdHJhbnNmb3JtICR7Y2hhdE1lbnVPcGVuID8gJ3JvdGF0ZS0xODAnIDogJyd9YH0gYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LWFjY2VudCByb3VuZGVkIHAtMSBob3ZlcjpiZy1iZy1ob3ZlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIiBvbkNsaWNrPXsoKSA9PiB7IHNldE5ld0NoYXRPcGVuKHRydWUpOyBzZXRDaGF0TWVudU9wZW4odHJ1ZSk7IH19IHRpdGxlPVwiTmV3IENoYXRcIj5cbiAgICAgICAgICAgICAgICA8UGx1cyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwidGV4dC10ZXh0LXRlcnRpYXJ5IGhvdmVyOnRleHQtYWNjZW50IHJvdW5kZWQgcC0xIGhvdmVyOmJnLWJnLWhvdmVyIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiIG9uQ2xpY2s9eygpID0+IHNldFJpZ2h0T3BlbihmYWxzZSl9PlxuICAgICAgICAgICAgICAgIDxDaGV2cm9uUmlnaHQgY2xhc3NOYW1lPVwidy00IGgtNFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3Itb25seVwiPkNvbGxhcHNlPC9zcGFuPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtjaGF0TWVudU9wZW4gJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBsZWZ0LTMgcmlnaHQtMyB0b3AtMTQgei0yMCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgYmctYmctZWxldmF0ZWQgc2hhZG93LWVsZXZhdGlvblwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMyBib3JkZXItYiBib3JkZXItYm9yZGVyLWRlZmF1bHQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC10ZXh0LXByaW1hcnlcIj5DaGF0czwvZGl2PlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwidGV4dC10ZXh0LXRlcnRpYXJ5IGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5XCIgb25DbGljaz17KCk9PiBzZXRDaGF0TWVudU9wZW4oZmFsc2UpfT7inJU8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIHNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICAgIHtuZXdDaGF0T3BlbiAmJiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1sZyBwLTMgYmctYmctcHJpbWFyeVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IG1iLTJcIj5DcmVhdGUgYSBuZXcgY2hhdDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG1iLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7KFsncGxvdCcsJ2NoYXJhY3RlcicsJ3dvcmxkJ10gYXMgY29uc3QpLm1hcCgodCk9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwga2V5PXt0fSBjbGFzc05hbWU9e2B0ZXh0LXhzIHB4LTMgcHktMS41IHJvdW5kZWQtbWQgYm9yZGVyIGN1cnNvci1wb2ludGVyICR7bmV3Q2hhdFR5cGU9PT10ID8gJ2JvcmRlci1hY2NlbnQgdGV4dC1hY2NlbnQnIDogJ2JvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5J31gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJjaGF0LXR5cGVcIiBjbGFzc05hbWU9XCJoaWRkZW5cIiBjaGVja2VkPXtuZXdDaGF0VHlwZT09PXR9IG9uQ2hhbmdlPXsoKT0+c2V0TmV3Q2hhdFR5cGUodCl9IC8+e3R9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHZhbHVlPXtuZXdDaGF0VGl0bGV9IG9uQ2hhbmdlPXsoZSk9PnNldE5ld0NoYXRUaXRsZShlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPVwiVGl0bGUgKG9wdGlvbmFsKVwiIGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1lbGV2YXRlZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtMyBweS0yIHRleHQtdGV4dC1wcmltYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50IHRleHQtc21cIiAvPlxuICAgICAgICAgICAgICAgICAgICB7Y3JlYXRlQ2hhdEVycm9yICYmIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LXhzIHRleHQtcmVkLTQwMFwiPntjcmVhdGVDaGF0RXJyb3J9PC9kaXY+fVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1lbmQgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInB4LTMgcHktMS41IHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOmJnLWJnLWhvdmVyXCIgb25DbGljaz17KCk9Pnsgc2V0TmV3Q2hhdE9wZW4oZmFsc2UpOyBzZXROZXdDaGF0VGl0bGUoJycpOyBzZXRDcmVhdGVDaGF0RXJyb3IobnVsbCk7IH19PkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwicHgtMyBweS0xLjUgcm91bmRlZC1tZCBiZy1hY2NlbnQgaG92ZXI6YmctYWNjZW50LWhvdmVyIHRleHQtd2hpdGUgZGlzYWJsZWQ6b3BhY2l0eS01MFwiIGRpc2FibGVkPXtjcmVhdGluZ0NoYXR9IG9uQ2xpY2s9e2FzeW5jICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRDcmVhdGluZ0NoYXQodHJ1ZSk7IHNldENyZWF0ZUNoYXRFcnJvcihudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBhd2FpdCBhcGkuY3JlYXRlQ2hhdChwcm9qZWN0SWQsIHsgdHlwZTogbmV3Q2hhdFR5cGUsIHRpdGxlOiBuZXdDaGF0VGl0bGUgfHwgdW5kZWZpbmVkIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDaGF0cygocHJldik9PlsuLi5wcmV2LCBjXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZUNoYXRJZChjLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TmV3Q2hhdE9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXROZXdDaGF0VGl0bGUoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDaGF0TWVudU9wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldENyZWF0ZUNoYXRFcnJvcihlPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gY3JlYXRlIGNoYXQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7IHNldENyZWF0aW5nQ2hhdChmYWxzZSk7IH1cbiAgICAgICAgICAgICAgICAgICAgICB9fT57Y3JlYXRpbmdDaGF0ID8gJ0NyZWF0aW5n4oCmJyA6ICdDcmVhdGUnfTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtaC02NCBvdmVyZmxvdy15LWF1dG8gcHItMVwiPlxuICAgICAgICAgICAgICAgICAgeyFjaGF0cy5sZW5ndGggJiYgIW5ld0NoYXRPcGVuICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSBweC0yIHB5LTJcIj5ObyBjaGF0cyB5ZXQuIDxidXR0b24gY2xhc3NOYW1lPVwidW5kZXJsaW5lXCIgb25DbGljaz17KCk9Pnsgc2V0TmV3Q2hhdFR5cGUoJ3Bsb3QnKTsgc2V0TmV3Q2hhdE9wZW4odHJ1ZSk7IH19PkNyZWF0ZSB5b3VyIGZpcnN0IGNoYXQ8L2J1dHRvbj4uPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2NoYXRzLm1hcCgoYykgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17Yy5pZH0gY2xhc3NOYW1lPXtgZ3JvdXAgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBnYXAtMiBweC0zIHB5LTIgcm91bmRlZC1tZCBtYi0xIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MCAke2FjdGl2ZUNoYXRJZD09PWMuaWQgPyAnYmctYmctaG92ZXInIDogJ2hvdmVyOmJnLWJnLWhvdmVyJ31gfT5cbiAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImZsZXgtMSB0ZXh0LWxlZnRcIiBvbkNsaWNrPXsoKSA9PiB7IHNldEFjdGl2ZUNoYXRJZChjLmlkKTsgc2V0Q2hhdE1lbnVPcGVuKGZhbHNlKTsgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtWzEwcHhdIHVwcGVyY2FzZSB0ZXh0LXRleHQtdGVydGlhcnkgbWItMC41XCI+e2MudHlwZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgdGV4dC1zbSBmb250LW1lZGl1bSAke2FjdGl2ZUNoYXRJZD09PWMuaWQgPyAndGV4dC10ZXh0LXByaW1hcnknIDogJ3RleHQtdGV4dC1zZWNvbmRhcnknfWB9PntjLnRpdGxlfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHkgZHVyYXRpb24tMTUwIHRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LXJlZC00MDBgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKGUpID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgaWYgKCFjb25maXJtKCdEZWxldGUgdGhpcyBjaGF0PycpKSByZXR1cm47IHRyeSB7IGF3YWl0IGFwaS5kZWxldGVDaGF0KHByb2plY3RJZCwgYy5pZCk7IHNldENoYXRzKChwcmV2KT0+cHJldi5maWx0ZXIoeD0+eC5pZCE9PWMuaWQpKTsgaWYgKGFjdGl2ZUNoYXRJZD09PWMuaWQpIHNldEFjdGl2ZUNoYXRJZChjaGF0cy5maW5kKHg9PnguaWQhPT1jLmlkKT8uaWQgfHwgbnVsbCk7IH0gY2F0Y2gge30gfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiRGVsZXRlIGNoYXRcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFzaDIgY2xhc3NOYW1lPVwidy00IGgtNFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzci1vbmx5XCI+RGVsZXRlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAgey8qIENoYXQgdmlldyBmaWxscyB0aGUgc2lkZWJhciAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLTAgZmxleC0xIG92ZXJmbG93LWhpZGRlbiBib3JkZXItdCBib3JkZXItYm9yZGVyLWRlZmF1bHRcIj5cbiAgICAgICAgICAgIHthY3RpdmVDaGF0SWQgPyAoXG4gICAgICAgICAgICAgIDxDaGF0XG4gICAgICAgICAgICAgICAgY2hhdElkPXthY3RpdmVDaGF0SWR9XG4gICAgICAgICAgICAgICAgcHJvamVjdElkPXtwcm9qZWN0SWR9XG4gICAgICAgICAgICAgICAgY2hhdFR5cGU9eyhjaGF0cy5maW5kKGMgPT4gYy5pZCA9PT0gYWN0aXZlQ2hhdElkKT8udHlwZSkgfHwgJ3Bsb3QnfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZ3JpZCBwbGFjZS1pdGVtcy1jZW50ZXIgdGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnlcIj5PcGVuIHRoZSBjaGF0IG1lbnUgdG8gY3JlYXRlIG9yIHNlbGVjdCBhIGNoYXQuPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2FzaWRlPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHshcmlnaHRPcGVuICYmIChcbiAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0yIHRvcC0xNCB6LTEwIHRleHQteHMgcHgtMyBweS0yIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCBiZy1iZy1lbGV2YXRlZCB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOnRleHQtYWNjZW50IGhvdmVyOmJvcmRlci1hY2NlbnQgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMTUwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIHNoYWRvdy1lbGV2YXRpb25cIiBvbkNsaWNrPXsoKSA9PiBzZXRSaWdodE9wZW4odHJ1ZSl9Pk9wZW4gQ2hhdHM8L2J1dHRvbj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBObyBtb2RhbDogZHJvcGRvd24gaXMgYW5jaG9yZWQgdG8gaGVhZGVyIGluc2lkZSB0aGUgc2lkZWJhciAqL31cblxuICAgICAge3NldHRpbmdzT3BlbiAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LTUwIGdyaWQgcGxhY2UtaXRlbXMtY2VudGVyIGJnLWJsYWNrLzYwIGJhY2tkcm9wLWJsdXItc21cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1tZCBiZy1iZy1lbGV2YXRlZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQteGwgcC02IHNoYWRvdy1lbGV2YXRpb25cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTRcIj5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LXRleHQtcHJpbWFyeVwiPlByb2plY3QgU2V0dGluZ3M8L2gzPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFNldHRpbmdzT3BlbihmYWxzZSl9IGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0xNTBcIj7inJU8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdhcC0zXCI+XG4gICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJncmlkIGdhcC0xIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeVwiPlRpdGxlPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3JlbmFtZVRpdGxlfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRSZW5hbWVUaXRsZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBweC0zIHB5LTIgdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50IHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAge3JlbmFtZUVycm9yICYmIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXJlZC00MDAgcC0zIHJvdW5kZWQtbGcgYmctcmVkLTk1MC8yMCBib3JkZXIgYm9yZGVyLXJlZC01MDAvMjBcIj57cmVuYW1lRXJyb3J9PC9kaXY+fVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0yIG10LTRcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFNldHRpbmdzT3BlbihmYWxzZSl9IGNsYXNzTmFtZT1cInB4LTQgcHktMiByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3ZlcjpiZy1iZy1ob3ZlciB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTBcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17c2F2aW5nUmVuYW1lIHx8ICFyZW5hbWVUaXRsZS50cmltKCl9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFNhdmluZ1JlbmFtZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVuYW1lRXJyb3IobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IGFwaS51cGRhdGVQcm9qZWN0KHByb2plY3RJZCwgeyB0aXRsZTogcmVuYW1lVGl0bGUudHJpbSgpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHNldFByb2plY3RUaXRsZSh1cGRhdGVkPy50aXRsZSB8fCByZW5hbWVUaXRsZS50cmltKCkpO1xuICAgICAgICAgICAgICAgICAgICAgIHNldFNldHRpbmdzT3BlbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICAgIHNldFJlbmFtZUVycm9yKGU/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBzYXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0U2F2aW5nUmVuYW1lKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiByb3VuZGVkLW1kIGJnLWFjY2VudCBob3ZlcjpiZy1hY2NlbnQtaG92ZXIgZGlzYWJsZWQ6b3BhY2l0eS01MCB0ZXh0LXdoaXRlIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTE1MFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge3NhdmluZ1JlbmFtZSA/ICdTYXZpbmfigKYnIDogJ1NhdmUnfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHt0b2FzdE1zZyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgdG9wLTQgcmlnaHQtNCB6LTUwIGFuaW1hdGUtaW4gc2xpZGUtaW4tZnJvbS1ib3R0b20tNCBkdXJhdGlvbi0yMDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTQgcHktMyByb3VuZGVkLWxnIGJnLWJnLWVsZXZhdGVkIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXByaW1hcnkgdGV4dC1zbSBzaGFkb3ctZWxldmF0aW9uXCI+XG4gICAgICAgICAgICB7dG9hc3RNc2d9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZU1lbW8iLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZVN1cGFiYXNlIiwiY3JlYXRlQXBpIiwiQ2hhdCIsIkNoYXJhY3Rlck1hbmFnZXIiLCJXb3JsZFNldHRpbmdzTWFuYWdlciIsIlNldHRpbmdzIiwiSWNvblNldHRpbmdzIiwiQ2hldnJvbkxlZnQiLCJDaGV2cm9uUmlnaHQiLCJQbHVzIiwiVHJhc2gyIiwiTG9hZGVyMiIsIkNoZXZyb25Eb3duIiwiV29ya3NwYWNlIiwicHJvamVjdElkIiwic3VwYWJhc2UiLCJhcGkiLCJjaGFwdGVycyIsInNldENoYXB0ZXJzIiwibG9hZGluZ0NoIiwic2V0TG9hZGluZ0NoIiwiZXJyb3JDaCIsInNldEVycm9yQ2giLCJ0YWJzIiwic2V0VGFicyIsImFjdGl2ZUlkIiwic2V0QWN0aXZlSWQiLCJ0aXRsZSIsInNldFRpdGxlIiwiY29udGVudCIsInNldENvbnRlbnQiLCJzYXZpbmciLCJzZXRTYXZpbmciLCJzYXZlVGltZXIiLCJsZWZ0Q29sbGFwc2VkIiwic2V0TGVmdENvbGxhcHNlZCIsImFpTXVzZU9wZW4iLCJzZXRBaU11c2VPcGVuIiwiZGVsZXRpbmdJZCIsInNldERlbGV0aW5nSWQiLCJwcm9qZWN0VGl0bGUiLCJzZXRQcm9qZWN0VGl0bGUiLCJwcm9qZWN0RGVzY3JpcHRpb24iLCJzZXRQcm9qZWN0RGVzY3JpcHRpb24iLCJzZXR0aW5nc09wZW4iLCJzZXRTZXR0aW5nc09wZW4iLCJyZW5hbWVUaXRsZSIsInNldFJlbmFtZVRpdGxlIiwicmVuYW1lRGVzYyIsInNldFJlbmFtZURlc2MiLCJzYXZpbmdSZW5hbWUiLCJzZXRTYXZpbmdSZW5hbWUiLCJyZW5hbWVFcnJvciIsInNldFJlbmFtZUVycm9yIiwic2V0dGluZ3NNZW51T3BlbiIsInNldFNldHRpbmdzTWVudU9wZW4iLCJwcm9qTW9kZSIsInNldFByb2pNb2RlIiwicHJvakdlbnJlIiwic2V0UHJvakdlbnJlIiwicHJvakNvcmVDb25mbGljdCIsInNldFByb2pDb3JlQ29uZmxpY3QiLCJwcm9qU2V0dGluZ3NKc29uIiwic2V0UHJvalNldHRpbmdzSnNvbiIsInRvYXN0TXNnIiwic2V0VG9hc3RNc2ciLCJ0b2FzdFRpbWVyIiwiU0VUVElOR1NfVEFCX0lEIiwiQ0hBUkFDVEVSU19UQUJfSUQiLCJXT1JMRF9UQUJfSUQiLCJyaWdodE9wZW4iLCJzZXRSaWdodE9wZW4iLCJjaGF0c0NhY2hlS2V5IiwiY2hhdHNBY3RpdmVLZXkiLCJjaGFwdGVyc0NhY2hlS2V5IiwidGFic0NhY2hlS2V5IiwiYWN0aXZlVGFiS2V5IiwibGVmdENvbGxhcHNlZEtleSIsInJpZ2h0T3BlbktleSIsImNoYXRzIiwic2V0Q2hhdHMiLCJhY3RpdmVDaGF0SWQiLCJzZXRBY3RpdmVDaGF0SWQiLCJoYXNDaGF0c0NhY2hlIiwic2V0SGFzQ2hhdHNDYWNoZSIsImNoYXRzUmVmIiwibmV3Q2hhdFR5cGUiLCJzZXROZXdDaGF0VHlwZSIsIm5ld0NoYXRUaXRsZSIsInNldE5ld0NoYXRUaXRsZSIsIm5ld0NoYXRPcGVuIiwic2V0TmV3Q2hhdE9wZW4iLCJjcmVhdGluZ0NoYXQiLCJzZXRDcmVhdGluZ0NoYXQiLCJjcmVhdGVDaGF0RXJyb3IiLCJzZXRDcmVhdGVDaGF0RXJyb3IiLCJjaGF0TWVudU9wZW4iLCJzZXRDaGF0TWVudU9wZW4iLCJoYXNDaGFwdGVyc0NhY2hlIiwic2V0SGFzQ2hhcHRlcnNDYWNoZSIsInMiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYXJyIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwidiIsImNocyIsInZhbGlkIiwidCIsImF0IiwibGMiLCJybyIsInNvcnRDaGFwdGVycyIsInNvcnQiLCJhIiwiYiIsInRhIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImdldFRpbWUiLCJ0YiIsImxvY2FsZUNvbXBhcmUiLCJtb3VudGVkIiwiaXRlbXMiLCJsaXN0Q2hhcHRlcnNQYWdpbmF0ZWQiLCJlIiwibWVzc2FnZSIsIm9uU2V0dGluZ3MiLCJkZXRhaWwiLCJjaGFuZ2VzIiwidW5kZWZpbmVkIiwiZGVzY3JpcHRpb24iLCJtb2RlIiwiZ2VucmUiLCJjb3JlQ29uZmxpY3QiLCJzZXR0aW5nc0pzb24iLCJzdHJpbmdpZnkiLCJvbk1vZGUiLCJtIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVyIiwiU3RyaW5nIiwiYyIsInBhbmVsX3NjcmlwdCIsInJlcyIsImNyZWF0ZUNoYXB0ZXIiLCJuZXdJZCIsImlkIiwicHJldiIsImluY2x1ZGVzIiwidGFyZ2V0SWQiLCJjaGFwdGVyX251bWJlciIsIk51bWJlciIsImlzSW50ZWdlciIsInNvcnRlZCIsImlkeCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJtYXRjaCIsImZpbmQiLCJ0b0xvd2VyQ2FzZSIsInVwZGF0ZWQiLCJ1cGRhdGVDaGFwdGVyIiwibWFwIiwicCIsImdldFByb2plY3QiLCJ4cyIsImxpc3RDaGF0cyIsIm5leHQiLCJjdXJyZW50IiwiY3JlYXRlZCIsImNyZWF0ZUNoYXQiLCJ0eXBlIiwic2V0SXRlbSIsIm9wZW5UYWIiLCJjaCIsImNsb3NlVGFiIiwiZmlsdGVyIiwiY3VyciIsImluZGV4T2YiLCJvbkRyYWdTdGFydCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJvbkRyb3AiLCJzcmNJZCIsImdldERhdGEiLCJzaSIsInRpIiwic3BsaWNlIiwic2NoZWR1bGVTYXZlIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIm9uVGl0bGVDaGFuZ2UiLCJvbkNvbnRlbnRDaGFuZ2UiLCJvbk5ld0NoYXB0ZXIiLCJvbkRlbGV0ZUNoYXB0ZXIiLCJjb25maXJtIiwiZGVsZXRlQ2hhcHRlciIsIm1zZyIsIkVycm9yIiwiYWN0aXZlQ2hhcHRlciIsImdyaWRDb2xzIiwiZGl2IiwiY2xhc3NOYW1lIiwiYWN0aXZlIiwibGFiZWwiLCJkcmFnZ2FibGUiLCJvbkRyYWdPdmVyIiwicHJldmVudERlZmF1bHQiLCJvbk1vdXNlRG93biIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzcGFuIiwic3RvcFByb3BhZ2F0aW9uIiwiYXJpYS1oaWRkZW4iLCJzdHlsZSIsImdyaWRUZW1wbGF0ZUNvbHVtbnMiLCJhc2lkZSIsIndvcmRDb3VudCIsInRyaW0iLCJzcGxpdCIsIkJvb2xlYW4iLCJkaXNhYmxlZCIsIm1haW4iLCJpbnB1dCIsInZhbHVlIiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJ0ZXh0YXJlYSIsInJvd3MiLCJzZWxlY3QiLCJvcHRpb24iLCJ1cGRhdGVCb2R5IiwiT2JqZWN0Iiwia2V5cyIsInVwZGF0ZVByb2plY3QiLCJ1cGRhdGVQcm9qZWN0U2V0dGluZ3MiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJyZXF1aXJlSW1hZ2UiLCJwbGFjZWhvbGRlciIsImNvbnRlbnRFZGl0YWJsZSIsInN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyIsIm9uSW5wdXQiLCJjdXJyZW50VGFyZ2V0IiwidGV4dENvbnRlbnQiLCJ3aGl0ZVNwYWNlIiwiY2VpbCIsInRvTG9jYWxlU3RyaW5nIiwibmFtZSIsImNoZWNrZWQiLCJkZWxldGVDaGF0IiwieCIsImNoYXRJZCIsImNoYXRUeXBlIiwiaDMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/components/workspace/Workspace.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/workspace/WorldSettingsManager.tsx":
/*!***********************************************************!*\
  !*** ./src/components/workspace/WorldSettingsManager.tsx ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorldSettingsManager: () => (/* binding */ WorldSettingsManager)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(ssr)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/api */ \"(ssr)/./src/lib/api.ts\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/plus.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/upload.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2,Plus,Search,Trash2,Upload,X!=!lucide-react */ \"(ssr)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* __next_internal_client_entry_do_not_use__ WorldSettingsManager auto */ \n\n\n\n\nfunction classNames(...xs) {\n    return xs.filter(Boolean).join(\" \");\n}\nfunction WorldSettingsManager({ projectId }) {\n    const supabase = (0,_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.useSupabase)();\n    const api = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>(0,_lib_api__WEBPACK_IMPORTED_MODULE_3__.createApi)(supabase), [\n        supabase\n    ]);\n    const [items, setItems] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [filter, setFilter] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [activeId, setActiveId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [saving, setSaving] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [deleting, setDeleting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [toast, setToast] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const toastTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [form, setForm] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        name: \"\"\n    });\n    const [traits, setTraits] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [uploading, setUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const dropRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cacheKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_world`, [\n        projectId\n    ]);\n    const activeKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>`inkverse_project_${projectId}_world_active`, [\n        projectId\n    ]);\n    const [hasCache, setHasCache] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const itemsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(items);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const s =  false ? 0 : null;\n            if (s) {\n                const arr = JSON.parse(s);\n                if (Array.isArray(arr)) {\n                    setItems(arr);\n                    const valid = arr.length > 0;\n                    setHasCache(valid);\n                    if (valid) setLoading(false);\n                }\n            }\n        } catch  {}\n    }, [\n        cacheKey\n    ]);\n    const notify = (msg)=>{\n        if (toastTimer.current) clearTimeout(toastTimer.current);\n        setToast(msg);\n        toastTimer.current = setTimeout(()=>setToast(\"\"), 2500);\n    };\n    const onUploadFile = async (file)=>{\n        if (!file) return;\n        setUploading(true);\n        try {\n            const bucket = process.env.NEXT_PUBLIC_SUPABASE_WORLD_BUCKET || \"world-images\";\n            const ext = file.name.split(\".\").pop() || \"jpg\";\n            const path = `${projectId}/${Date.now()}-${Math.random().toString(36).slice(2)}.${ext}`;\n            const { error: upErr } = await supabase.storage.from(bucket).upload(path, file, {\n                upsert: true,\n                contentType: file.type\n            });\n            if (upErr) throw upErr;\n            const { data } = supabase.storage.from(bucket).getPublicUrl(path);\n            const url = data.publicUrl;\n            setForm((f)=>({\n                    ...f,\n                    images: [\n                        ...f.images || [],\n                        url\n                    ]\n                }));\n            notify(\"Image uploaded\");\n        } catch (e) {\n            notify(e?.message || \"Upload failed\");\n        } finally{\n            setUploading(false);\n        }\n    };\n    // Drag & drop handlers\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const el = dropRef.current;\n        if (!el) return;\n        const onDrop = (e)=>{\n            e.preventDefault();\n            const f = e.dataTransfer?.files?.[0];\n            if (f) void onUploadFile(f);\n            el.classList.remove(\"ring-2\", \"ring-blue-500\");\n        };\n        const onDrag = (e)=>{\n            e.preventDefault();\n            el.classList.add(\"ring-2\", \"ring-blue-500\");\n        };\n        const onLeave = (e)=>{\n            e.preventDefault();\n            el.classList.remove(\"ring-2\", \"ring-blue-500\");\n        };\n        el.addEventListener(\"drop\", onDrop);\n        el.addEventListener(\"dragover\", onDrag);\n        el.addEventListener(\"dragleave\", onLeave);\n        return ()=>{\n            el.removeEventListener(\"drop\", onDrop);\n            el.removeEventListener(\"dragover\", onDrag);\n            el.removeEventListener(\"dragleave\", onLeave);\n        };\n    }, [\n        onUploadFile\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        (async ()=>{\n            if (hasCache) {\n                return;\n            }\n            try {\n                if (!hasCache) setLoading(true);\n                const res = await api.listWorldSettings(projectId);\n                if (!mounted) return;\n                const next = res || [];\n                try {\n                    if (hasCache && JSON.stringify(next) === JSON.stringify(itemsRef.current)) {\n                        return;\n                    }\n                } catch  {}\n                setItems(next);\n            } catch (e) {\n                if (!mounted) return;\n                setError(e?.message || \"Failed to load world settings\");\n            } finally{\n                if (mounted) setLoading(false);\n            }\n        })();\n        return ()=>{\n            mounted = false;\n        };\n    }, [\n        api,\n        projectId,\n        hasCache\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (false) {}\n        } catch  {}\n    }, [\n        items,\n        cacheKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        itemsRef.current = items;\n    }, [\n        items\n    ]);\n    // Restore/persist last active selection\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            const v =  false ? 0 : null;\n            if (v) setActiveId(v);\n        } catch  {}\n    }, [\n        activeKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        try {\n            if (activeId && \"undefined\" !== \"undefined\") {}\n        } catch  {}\n    }, [\n        activeId,\n        activeKey\n    ]);\n    // Reflect chat-driven upserts instantly\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        function onUpsert(ev) {\n            const ce = ev;\n            const item = ce?.detail?.item;\n            if (!item || !item.id) return;\n            setItems((prev)=>{\n                const idx = prev.findIndex((x)=>x.id === item.id);\n                if (idx >= 0) {\n                    const next = [\n                        ...prev\n                    ];\n                    next[idx] = {\n                        ...next[idx],\n                        ...item\n                    };\n                    return next;\n                }\n                return [\n                    ...prev,\n                    item\n                ];\n            });\n            if (activeId === item.id) {\n                setForm({\n                    id: item.id,\n                    name: item.name,\n                    summary: item.summary || \"\",\n                    traits: item.traits || null,\n                    images: item.images || []\n                });\n                setTraits(item.traits || {});\n            }\n            notify(\"World entry updated via chat\");\n        }\n        window.addEventListener(\"workspace:world-upsert\", onUpsert);\n        return ()=>window.removeEventListener(\"workspace:world-upsert\", onUpsert);\n    }, [\n        activeId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activeId) return;\n        if (activeId === \"__new__\") {\n            setForm({\n                name: \"\",\n                images: []\n            });\n            setTraits({});\n            return;\n        }\n        const it = items.find((x)=>x.id === activeId);\n        if (!it) return;\n        setForm({\n            id: it.id,\n            name: it.name,\n            summary: it.summary || \"\",\n            traits: it.traits || null,\n            images: it.images || []\n        });\n        setTraits(it.traits || {});\n    }, [\n        activeId,\n        items\n    ]);\n    const filtered = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const q = filter.trim().toLowerCase();\n        if (!q) return items;\n        return items.filter((x)=>(x.name || \"\").toLowerCase().includes(q));\n    }, [\n        items,\n        filter\n    ]);\n    // notify moved earlier so it's available to uploads\n    const onNew = ()=>{\n        setActiveId(\"__new__\");\n        setForm({\n            name: \"\",\n            images: []\n        });\n        setTraits({});\n    };\n    // Traits helpers\n    const clone = (o)=>JSON.parse(JSON.stringify(o ?? {}));\n    const setVal = (path, val)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < path.length - 1; i++)ref = ref[path[i]];\n            ref[path[path.length - 1]] = val;\n            return nxt;\n        });\n    };\n    const delKey = (pathToParent, key)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToParent.length; i++)ref = ref[pathToParent[i]];\n            if (Array.isArray(ref) && typeof key === \"number\") ref.splice(key, 1);\n            else if (ref && typeof ref === \"object\") delete ref[key];\n            return nxt;\n        });\n    };\n    const renameKey = (pathToParent, oldKey, newKey)=>{\n        if (!newKey) return;\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToParent.length; i++)ref = ref[pathToParent[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            if (oldKey === newKey) return nxt;\n            const val = ref[oldKey];\n            delete ref[oldKey];\n            ref[newKey] = val;\n            return nxt;\n        });\n    };\n    const addChild = (pathToObj, depth)=>{\n        if (depth >= 5) return;\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToObj.length; i++)ref = ref[pathToObj[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            let base = \"key\";\n            let i2 = 1;\n            let key = base;\n            while(Object.prototype.hasOwnProperty.call(ref, key)){\n                key = `${base}-${i2++}`;\n            }\n            ref[key] = \"\";\n            return nxt;\n        });\n    };\n    const addRootKey = ()=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let base = \"key\";\n            let i = 1;\n            let k = base;\n            while(Object.prototype.hasOwnProperty.call(nxt, k)){\n                k = `${base}-${i++}`;\n            }\n            nxt[k] = \"\";\n            return nxt;\n        });\n    };\n    const convertType = (path, parentPath, key, nextType, depth)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < parentPath.length; i++)ref = ref[parentPath[i]];\n            if (!ref || typeof ref !== \"object\" || Array.isArray(ref)) return nxt;\n            if (nextType === \"string\") ref[key] = \"\";\n            else if (nextType === \"object\") ref[key] = depth >= 5 ? \"\" : {};\n            else if (nextType === \"array\") ref[key] = [];\n            return nxt;\n        });\n    };\n    const addArrayItem = (pathToArr)=>{\n        setTraits((curr)=>{\n            const nxt = clone(curr);\n            let ref = nxt;\n            for(let i = 0; i < pathToArr.length; i++)ref = ref[pathToArr[i]];\n            if (Array.isArray(ref)) ref.push(\"\");\n            return nxt;\n        });\n    };\n    TraitObject._parent = {\n        setVal,\n        delKey,\n        renameKey,\n        addChild,\n        convertType,\n        addArrayItem\n    };\n    const onSave = async ()=>{\n        if (!form.name.trim()) {\n            notify(\"Name is required\");\n            return;\n        }\n        setSaving(true);\n        try {\n            const payload = {\n                name: form.name.trim(),\n                summary: form.summary || undefined,\n                traits,\n                images: form.images || []\n            };\n            if (activeId === \"__new__\") {\n                const res = await api.createWorldSetting(projectId, payload);\n                setItems((prev)=>[\n                        ...prev,\n                        res\n                    ]);\n                setActiveId(res.id);\n            } else if (activeId) {\n                const res = await api.updateWorldSetting(projectId, activeId, payload);\n                setItems((prev)=>prev.map((x)=>x.id === res.id ? res : x));\n            }\n            notify(\"Saved\");\n        } catch (e) {\n            notify(e?.message || \"Save failed\");\n        } finally{\n            setSaving(false);\n        }\n    };\n    const onDelete = async ()=>{\n        if (!activeId || activeId === \"__new__\") return;\n        // eslint-disable-next-line no-alert\n        if (!confirm(\"Delete this world entry?\")) return;\n        setDeleting(true);\n        try {\n            await api.deleteWorldSetting(projectId, activeId);\n            setItems((prev)=>prev.filter((x)=>x.id !== activeId));\n            setActiveId(null);\n            setForm({\n                name: \"\",\n                images: []\n            });\n            setTraits({});\n            notify(\"Deleted\");\n        } catch (e) {\n            notify(e?.message || \"Delete failed\");\n        } finally{\n            setDeleting(false);\n        }\n    };\n    const count = items.length;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-full grid grid-rows-[auto_1fr]\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"border-b border-border-default px-6 py-4 flex items-center justify-between\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-base font-semibold text-text-primary\",\n                                children: \"World Settings\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 345,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs px-2 py-1 rounded-md border border-border-default text-text-secondary\",\n                                children: [\n                                    count,\n                                    \" Items\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 346,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 344,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onNew,\n                            className: \"rounded-lg bg-bg-elevated border border-border-default hover:border-accent hover:bg-bg-hover text-text-secondary hover:text-text-primary text-sm px-4 py-3 inline-flex items-center justify-center gap-2 transition-all duration-150 hover:-translate-y-0.5\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                    className: \"w-4 h-4\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                    lineNumber: 350,\n                                    columnNumber: 13\n                                }, this),\n                                \"New Entry\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                            lineNumber: 349,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 348,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 343,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"min-h-0 grid\",\n                style: {\n                    gridTemplateColumns: \"35% 65%\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"aside\", {\n                        className: \"border-r border-border-default min-h-0 flex flex-col\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"p-3\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            value: filter,\n                                            onChange: (e)=>setFilter(e.target.value),\n                                            placeholder: \"Search world settings\",\n                                            className: \"w-full bg-bg-primary border border-border-default rounded-md pl-9 pr-3 py-2.5 text-sm text-text-primary placeholder:text-text-tertiary outline-none focus:border-accent\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                            lineNumber: 360,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                            className: \"w-4 h-4 absolute left-3 top-3 text-text-tertiary\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                            lineNumber: 361,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                    lineNumber: 359,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 358,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 overflow-y-auto px-3 pb-3\",\n                                children: [\n                                    loading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-text-secondary px-2 py-2\",\n                                        children: \"Loading\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 365,\n                                        columnNumber: 25\n                                    }, this),\n                                    error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-red-400 px-2 py-2 bg-red-950/20 rounded-md border border-red-500/20\",\n                                        children: error\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 366,\n                                        columnNumber: 23\n                                    }, this),\n                                    !loading && !filtered.length && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-10 text-center text-text-tertiary text-sm\",\n                                        children: \"No world settings yet. Create your first entry!\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 368,\n                                        columnNumber: 15\n                                    }, this),\n                                    filtered.map((w)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>setActiveId(w.id),\n                                            className: classNames(\"w-full text-left px-3 py-3 rounded-md mb-2 transition-all\", activeId === w.id ? \"border-l-2 border-blue-500 bg-bg-elevated\" : \"hover:bg-bg-hover\"),\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex-1 min-w-0\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-sm font-medium text-text-primary truncate\",\n                                                            children: w.name\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                            lineNumber: 374,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs text-text-tertiary truncate\",\n                                                            children: w.summary || \"\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                            lineNumber: 375,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                    lineNumber: 373,\n                                                    columnNumber: 19\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 372,\n                                                columnNumber: 17\n                                            }, this)\n                                        }, w.id, false, {\n                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                            lineNumber: 371,\n                                            columnNumber: 15\n                                        }, this))\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 364,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 357,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                        className: \"min-h-0 overflow-y-auto p-6\",\n                        \"aria-label\": \"World details\",\n                        children: activeId ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"max-w-2xl mx-auto\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid gap-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        ref: dropRef,\n                                        className: \"flex flex-col items-start mb-2 p-3 rounded-xl border border-border-default bg-bg-elevated w-full\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-xs text-text-tertiary mb-2\",\n                                                children: \"World Images\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 388,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2 mb-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                        className: \"px-3 py-2 rounded-md border border-border-default bg-bg-primary text-text-secondary hover:text-text-primary inline-flex items-center gap-2 cursor-pointer\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                                                className: \"w-4 h-4\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                lineNumber: 391,\n                                                                columnNumber: 23\n                                                            }, this),\n                                                            \"Upload Image\",\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                                type: \"file\",\n                                                                accept: \"image/*\",\n                                                                className: \"hidden\",\n                                                                onChange: (e)=>{\n                                                                    const f = e.target.files?.[0];\n                                                                    if (f) void onUploadFile(f);\n                                                                }\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                lineNumber: 393,\n                                                                columnNumber: 23\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 390,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    uploading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-text-tertiary inline-flex items-center gap-2\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                                className: \"w-3 h-3 animate-spin\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                lineNumber: 395,\n                                                                columnNumber: 110\n                                                            }, this),\n                                                            \" Uploading\"\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 395,\n                                                        columnNumber: 35\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 389,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"grid grid-cols-4 gap-2 w-full\",\n                                                children: [\n                                                    (form.images || []).map((url, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"relative group border border-border-default rounded-md overflow-hidden bg-bg-primary\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                                    src: url,\n                                                                    alt: \"world\",\n                                                                    className: \"w-full h-20 object-cover\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                    lineNumber: 400,\n                                                                    columnNumber: 25\n                                                                }, this),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                    className: \"absolute top-1 right-1 bg-black/50 text-white rounded p-1 opacity-0 group-hover:opacity-100\",\n                                                                    title: \"Remove\",\n                                                                    onClick: ()=>setForm((f)=>({\n                                                                                ...f,\n                                                                                images: (f.images || []).filter((_, i)=>i !== idx)\n                                                                            })),\n                                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                                        className: \"w-3 h-3\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                        lineNumber: 406,\n                                                                        columnNumber: 27\n                                                                    }, this)\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                    lineNumber: 401,\n                                                                    columnNumber: 25\n                                                                }, this)\n                                                            ]\n                                                        }, idx, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                            lineNumber: 399,\n                                                            columnNumber: 23\n                                                        }, this)),\n                                                    !(form.images || []).length && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-text-tertiary\",\n                                                        children: \"No images yet. Upload or drop here.\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 411,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 397,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 387,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"grid gap-2 text-sm\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                children: \"Name\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 416,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                value: form.name,\n                                                onChange: (e)=>setForm((f)=>({\n                                                            ...f,\n                                                            name: e.target.value\n                                                        })),\n                                                className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 417,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 415,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"grid gap-2 text-sm\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                children: \"Summary\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 420,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                value: form.summary || \"\",\n                                                onChange: (e)=>setForm((f)=>({\n                                                            ...f,\n                                                            summary: e.target.value\n                                                        })),\n                                                rows: 5,\n                                                className: \"w-full bg-bg-primary border border-border-default rounded-md px-4 py-2.5 text-text-primary outline-none focus:border-accent text-sm\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 421,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-[11px] text-text-tertiary\",\n                                                children: [\n                                                    (form.summary || \"\").length,\n                                                    \" characters\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 422,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 419,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"grid gap-2 text-sm\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center justify-between\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs text-text-tertiary uppercase tracking-wide\",\n                                                        children: \"Traits\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 427,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: addRootKey,\n                                                        className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                                                className: \"w-3 h-3\"\n                                                            }, void 0, false, {\n                                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                lineNumber: 428,\n                                                                columnNumber: 195\n                                                            }, this),\n                                                            \" Add key\"\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 428,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 426,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-1\",\n                                                children: [\n                                                    Object.keys(traits || {}).length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"text-xs text-text-tertiary\",\n                                                        children: \"No traits yet. Add a key.\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 432,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitObject, {\n                                                        obj: traits,\n                                                        path: [],\n                                                        depth: 1\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 434,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 430,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 425,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center justify-between pt-4\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: onDelete,\n                                                disabled: !activeId || activeId === \"__new__\" || deleting,\n                                                className: \"text-red-400 hover:text-red-300 inline-flex items-center gap-2 text-sm\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                        className: \"w-4 h-4\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 440,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    \"Delete Entry\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 439,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>{\n                                                            setActiveId(null);\n                                                        },\n                                                        className: \"px-4 py-2 rounded-md border border-border-default text-text-secondary hover:bg-bg-hover\",\n                                                        children: \"Cancel\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 444,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: onSave,\n                                                        disabled: saving,\n                                                        className: \"px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-500 text-white\",\n                                                        children: saving ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"inline-flex items-center gap-2\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                                    className: \"w-4 h-4 animate-spin\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                                    lineNumber: 446,\n                                                                    columnNumber: 82\n                                                                }, this),\n                                                                \" Saving\"\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                            lineNumber: 446,\n                                                            columnNumber: 33\n                                                        }, this) : \"Save Entry\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                        lineNumber: 445,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                                lineNumber: 443,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 438,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 386,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                            lineNumber: 385,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-text-tertiary\",\n                            children: \"Select a world entry or create a new one.\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                            lineNumber: 453,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 383,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 356,\n                columnNumber: 7\n            }, this),\n            toast && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed top-4 right-4 z-50\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-4 py-3 rounded-lg bg-bg-elevated border border-border-default text-text-primary text-sm shadow-elevation\",\n                    children: toast\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                    lineNumber: 460,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 459,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n        lineNumber: 342,\n        columnNumber: 5\n    }, this);\n}\nfunction useWorldCtx() {\n    return {\n        setVal: ()=>{},\n        delKey: ()=>{},\n        renameKey: ()=>{},\n        addChild: ()=>{},\n        convertType: ()=>{},\n        addArrayItem: ()=>{}\n    };\n}\nfunction TraitObject({ obj, path, depth }) {\n    const parent = TraitObject._parent;\n    const ctx = parent || useWorldCtx();\n    TraitObject._parent = ctx;\n    const keys = Object.keys(obj || {});\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"space-y-2\",\n        children: keys.map((k)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitRow, {\n                k: k,\n                v: obj[k],\n                parentPath: path,\n                depth: depth,\n                ctx: ctx\n            }, k, false, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 496,\n                columnNumber: 9\n            }, this))\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n        lineNumber: 494,\n        columnNumber: 5\n    }, this);\n}\nfunction TraitRow({ k, v, parentPath, depth, ctx }) {\n    const isArray = Array.isArray(v);\n    const isObject = v && typeof v === \"object\" && !isArray;\n    const type = isArray ? \"array\" : isObject ? \"object\" : \"string\";\n    const [name, setName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(k);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setName(k);\n    }, [\n        k\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"border border-border-default rounded-md p-2 bg-bg-elevated\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        value: name,\n                        onChange: (e)=>setName(e.target.value),\n                        onBlur: ()=>{\n                            if (name !== k && name.trim()) ctx.renameKey(parentPath, k, name.trim());\n                        },\n                        onKeyDown: (e)=>{\n                            if (e.key === \"Enter\") {\n                                e.target.blur();\n                            }\n                        },\n                        placeholder: \"key\",\n                        className: \"flex-none w-48 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 512,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        value: type,\n                        onChange: (e)=>ctx.convertType([\n                                ...parentPath,\n                                k\n                            ], parentPath, k, e.target.value, depth),\n                        className: \"flex-none w-28 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"string\",\n                                children: \"String\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 521,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"object\",\n                                disabled: depth >= 5,\n                                children: \"Object\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 522,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"array\",\n                                children: \"Array\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 523,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 520,\n                        columnNumber: 9\n                    }, this),\n                    type === \"string\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        value: String(v || \"\"),\n                        onChange: (e)=>ctx.setVal([\n                                ...parentPath,\n                                k\n                            ], e.target.value),\n                        placeholder: \"value\",\n                        className: \"flex-1 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 526,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.delKey(parentPath, k),\n                        className: \"text-text-tertiary hover:text-red-400 text-sm ml-auto\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                            className: \"w-4 h-4\"\n                        }, void 0, false, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                            lineNumber: 528,\n                            columnNumber: 123\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 528,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 511,\n                columnNumber: 7\n            }, this),\n            type === \"object\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 ml-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.addChild([\n                                ...parentPath,\n                                k\n                            ], depth + 1),\n                        disabled: depth >= 5,\n                        className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                className: \"w-3 h-3\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 532,\n                                columnNumber: 240\n                            }, this),\n                            \" Add child\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 532,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TraitObject, {\n                        obj: v,\n                        path: [\n                            ...parentPath,\n                            k\n                        ],\n                        depth: depth + 1\n                    }, void 0, false, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 533,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 531,\n                columnNumber: 9\n            }, this),\n            type === \"array\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 ml-4 space-y-2\",\n                children: [\n                    v.map((item, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-text-tertiary\",\n                                    children: [\n                                        \"[\",\n                                        idx,\n                                        \"]\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                    lineNumber: 540,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    value: item,\n                                    onChange: (e)=>ctx.setVal([\n                                            ...parentPath,\n                                            k,\n                                            idx\n                                        ], e.target.value),\n                                    placeholder: \"value\",\n                                    className: \"flex-1 bg-bg-primary border border-border-default rounded-md px-2 py-1.5 text-text-primary text-sm outline-none focus:border-accent\"\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                    lineNumber: 541,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>ctx.delKey([\n                                            ...parentPath,\n                                            k\n                                        ], idx),\n                                    className: \"text-text-tertiary hover:text-red-400 text-sm\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                        lineNumber: 542,\n                                        columnNumber: 131\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                    lineNumber: 542,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, idx, true, {\n                            fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                            lineNumber: 539,\n                            columnNumber: 13\n                        }, this)),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>ctx.addArrayItem([\n                                ...parentPath,\n                                k\n                            ]),\n                        className: \"px-2 py-1 rounded-md border border-border-default text-text-secondary hover:text-text-primary text-xs inline-flex items-center gap-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_Plus_Search_Trash2_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                className: \"w-3 h-3\"\n                            }, void 0, false, {\n                                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                                lineNumber: 545,\n                                columnNumber: 215\n                            }, this),\n                            \" Add item\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                        lineNumber: 545,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n                lineNumber: 537,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/lalaina/InkVerse/client/src/components/workspace/WorldSettingsManager.tsx\",\n        lineNumber: 510,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvV29ybGRTZXR0aW5nc01hbmFnZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRTZEO0FBQ1M7QUFDaEM7QUFDa0M7QUFFeEUsU0FBU1ksV0FBVyxHQUFHQyxFQUE0QztJQUNqRSxPQUFPQSxHQUFHQyxNQUFNLENBQUNDLFNBQVNDLElBQUksQ0FBQztBQUNqQztBQVlPLFNBQVNDLHFCQUFxQixFQUFFQyxTQUFTLEVBQXlCO0lBQ3ZFLE1BQU1DLFdBQVdmLG1GQUFXQTtJQUM1QixNQUFNZ0IsTUFBTW5CLDhDQUFPQSxDQUFDLElBQU1JLG1EQUFTQSxDQUFDYyxXQUFXO1FBQUNBO0tBQVM7SUFFekQsTUFBTSxDQUFDRSxPQUFPQyxTQUFTLEdBQUduQiwrQ0FBUUEsQ0FBYyxFQUFFO0lBQ2xELE1BQU0sQ0FBQ29CLFNBQVNDLFdBQVcsR0FBR3JCLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ3NCLE9BQU9DLFNBQVMsR0FBR3ZCLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUNXLFFBQVFhLFVBQVUsR0FBR3hCLCtDQUFRQSxDQUFDO0lBQ3JDLE1BQU0sQ0FBQ3lCLFVBQVVDLFlBQVksR0FBRzFCLCtDQUFRQSxDQUE0QjtJQUNwRSxNQUFNLENBQUMyQixRQUFRQyxVQUFVLEdBQUc1QiwrQ0FBUUEsQ0FBQztJQUNyQyxNQUFNLENBQUM2QixVQUFVQyxZQUFZLEdBQUc5QiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUMrQixPQUFPQyxTQUFTLEdBQUdoQywrQ0FBUUEsQ0FBQztJQUNuQyxNQUFNaUMsYUFBYWxDLDZDQUFNQSxDQUF1QztJQUVoRSxNQUFNLENBQUNtQyxNQUFNQyxRQUFRLEdBQUduQywrQ0FBUUEsQ0FBWTtRQUFFb0MsTUFBTTtJQUFHO0lBQ3ZELE1BQU0sQ0FBQ0MsUUFBUUMsVUFBVSxHQUFHdEMsK0NBQVFBLENBQU0sQ0FBQztJQUMzQyxNQUFNLENBQUN1QyxXQUFX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O3dCQUFFUixPQUFPQSxRQUFNOzs7Ozs7Ozs7Ozs7WUFHL0RoRSxTQUFPLHlCQUNOLDhEQUFDMkY7Z0JBQUlDLFdBQVU7O29CQUNYakUsRUFBZTJELEdBQUcsQ0FBQyxDQUFDdkQsTUFBTUksb0JBQzFCLDhEQUFDd0Q7NEJBQWNDLFdBQVU7OzhDQUN2Qiw4REFBQ3FCO29DQUFLckIsV0FBVTs7d0NBQTZCO3dDQUFFekQ7d0NBQUk7Ozs7Ozs7OENBQ25ELDhEQUFDK0Q7b0NBQU1DLE9BQU9wRTtvQ0FBTXFFLFVBQVUsQ0FBQzdGLElBQUlrSCxJQUFJeEUsTUFBTSxDQUFDOytDQUFJeUI7NENBQVlGOzRDQUFHckM7eUNBQUksRUFBRTVCLEVBQUU4RixNQUFNLENBQUNGLEtBQUs7b0NBQUdHLGFBQVk7b0NBQVFWLFdBQVU7Ozs7Ozs4Q0FDdEgsOERBQUNDO29DQUFPQyxTQUFTLElBQUkyQixJQUFJbEUsTUFBTSxDQUFDOytDQUFJbUI7NENBQVlGO3lDQUFFLEVBQUVyQztvQ0FBTXlELFdBQVU7OENBQWdELDRFQUFDekssK0dBQUNBO3dDQUFDeUssV0FBVTs7Ozs7Ozs7Ozs7OzJCQUh6SHpEOzs7OztrQ0FNWiw4REFBQzBEO3dCQUFPQyxTQUFTLElBQUkyQixJQUFJN0MsWUFBWSxDQUFDO21DQUFJRjtnQ0FBWUY7NkJBQUU7d0JBQUdvQixXQUFVOzswQ0FBdUksOERBQUM3SywrR0FBSUE7Z0NBQUM2SyxXQUFVOzs7Ozs7NEJBQVk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLbFAiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbmt2ZXJzZS1jbGllbnQvLi9zcmMvY29tcG9uZW50cy93b3Jrc3BhY2UvV29ybGRTZXR0aW5nc01hbmFnZXIudHN4PzYzNjQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlU3VwYWJhc2UgfSBmcm9tIFwiQC9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyXCI7XG5pbXBvcnQgeyBjcmVhdGVBcGkgfSBmcm9tIFwiQC9saWIvYXBpXCI7XG5pbXBvcnQgeyBMb2FkZXIyLCBQbHVzLCBTZWFyY2gsIFRyYXNoMiwgVXBsb2FkLCBYIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuXG5mdW5jdGlvbiBjbGFzc05hbWVzKC4uLnhzOiBBcnJheTxzdHJpbmcgfCBmYWxzZSB8IG51bGwgfCB1bmRlZmluZWQ+KSB7XG4gIHJldHVybiB4cy5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIik7XG59XG5cbnR5cGUgV29ybGRJdGVtID0ge1xuICBpZD86IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzdW1tYXJ5Pzogc3RyaW5nIHwgbnVsbDtcbiAgdHJhaXRzPzogYW55IHwgbnVsbDtcbiAgaW1hZ2VzPzogc3RyaW5nW10gfCBudWxsO1xuICBjcmVhdGVkQXQ/OiBzdHJpbmc7XG4gIHVwZGF0ZWRBdD86IHN0cmluZztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBXb3JsZFNldHRpbmdzTWFuYWdlcih7IHByb2plY3RJZCB9OiB7IHByb2plY3RJZDogc3RyaW5nIH0pIHtcbiAgY29uc3Qgc3VwYWJhc2UgPSB1c2VTdXBhYmFzZSgpO1xuICBjb25zdCBhcGkgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZUFwaShzdXBhYmFzZSksIFtzdXBhYmFzZV0pO1xuXG4gIGNvbnN0IFtpdGVtcywgc2V0SXRlbXNdID0gdXNlU3RhdGU8V29ybGRJdGVtW10+KFtdKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtmaWx0ZXIsIHNldEZpbHRlcl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2FjdGl2ZUlkLCBzZXRBY3RpdmVJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBcIl9fbmV3X19cIiB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2F2aW5nLCBzZXRTYXZpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZGVsZXRpbmcsIHNldERlbGV0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3RvYXN0LCBzZXRUb2FzdF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgdG9hc3RUaW1lciA9IHVzZVJlZjxSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IFtmb3JtLCBzZXRGb3JtXSA9IHVzZVN0YXRlPFdvcmxkSXRlbT4oeyBuYW1lOiBcIlwiIH0pO1xuICBjb25zdCBbdHJhaXRzLCBzZXRUcmFpdHNdID0gdXNlU3RhdGU8YW55Pih7fSk7XG4gIGNvbnN0IFt1cGxvYWRpbmcsIHNldFVwbG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGRyb3BSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBjYWNoZUtleSA9IHVzZU1lbW8oKCkgPT4gYGlua3ZlcnNlX3Byb2plY3RfJHtwcm9qZWN0SWR9X3dvcmxkYCwgW3Byb2plY3RJZF0pO1xuICBjb25zdCBhY3RpdmVLZXkgPSB1c2VNZW1vKCgpID0+IGBpbmt2ZXJzZV9wcm9qZWN0XyR7cHJvamVjdElkfV93b3JsZF9hY3RpdmVgLCBbcHJvamVjdElkXSk7XG4gIGNvbnN0IFtoYXNDYWNoZSwgc2V0SGFzQ2FjaGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBpdGVtc1JlZiA9IHVzZVJlZjxXb3JsZEl0ZW1bXT4oaXRlbXMpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHMgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSkgOiBudWxsO1xuICAgICAgaWYgKHMpIHtcbiAgICAgICAgY29uc3QgYXJyID0gSlNPTi5wYXJzZShzKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgICAgICAgIHNldEl0ZW1zKGFyciBhcyBXb3JsZEl0ZW1bXSk7XG4gICAgICAgICAgY29uc3QgdmFsaWQgPSAoYXJyIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuICAgICAgICAgIHNldEhhc0NhY2hlKHZhbGlkKTtcbiAgICAgICAgICBpZiAodmFsaWQpIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCB7fVxuICB9LCBbY2FjaGVLZXldKTtcblxuICBjb25zdCBub3RpZnkgPSAobXNnOiBzdHJpbmcpID0+IHtcbiAgICBpZiAodG9hc3RUaW1lci5jdXJyZW50KSBjbGVhclRpbWVvdXQodG9hc3RUaW1lci5jdXJyZW50KTtcbiAgICBzZXRUb2FzdChtc2cpO1xuICAgIHRvYXN0VGltZXIuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4gc2V0VG9hc3QoXCJcIiksIDI1MDApO1xuICB9O1xuXG4gIGNvbnN0IG9uVXBsb2FkRmlsZSA9IGFzeW5jIChmaWxlOiBGaWxlKSA9PiB7XG4gICAgaWYgKCFmaWxlKSByZXR1cm47XG4gICAgc2V0VXBsb2FkaW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBidWNrZXQgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9XT1JMRF9CVUNLRVQgfHwgXCJ3b3JsZC1pbWFnZXNcIjtcbiAgICAgIGNvbnN0IGV4dCA9IGZpbGUubmFtZS5zcGxpdCgnLicpLnBvcCgpIHx8ICdqcGcnO1xuICAgICAgY29uc3QgcGF0aCA9IGAke3Byb2plY3RJZH0vJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpfS4ke2V4dH1gO1xuICAgICAgY29uc3QgeyBlcnJvcjogdXBFcnIgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbShidWNrZXQpLnVwbG9hZChwYXRoLCBmaWxlLCB7IHVwc2VydDogdHJ1ZSwgY29udGVudFR5cGU6IGZpbGUudHlwZSB9KTtcbiAgICAgIGlmICh1cEVycikgdGhyb3cgdXBFcnI7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbShidWNrZXQpLmdldFB1YmxpY1VybChwYXRoKTtcbiAgICAgIGNvbnN0IHVybCA9IGRhdGEucHVibGljVXJsO1xuICAgICAgc2V0Rm9ybSgoZikgPT4gKHsgLi4uZiwgaW1hZ2VzOiBbLi4uKGYuaW1hZ2VzIHx8IFtdKSwgdXJsXSB9KSk7XG4gICAgICBub3RpZnkoJ0ltYWdlIHVwbG9hZGVkJyk7XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBub3RpZnkoZT8ubWVzc2FnZSB8fCAnVXBsb2FkIGZhaWxlZCcpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRVcGxvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvLyBEcmFnICYgZHJvcCBoYW5kbGVyc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGVsID0gZHJvcFJlZi5jdXJyZW50O1xuICAgIGlmICghZWwpIHJldHVybjtcbiAgICBjb25zdCBvbkRyb3AgPSAoZTogRHJhZ0V2ZW50KSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBmID0gZS5kYXRhVHJhbnNmZXI/LmZpbGVzPy5bMF07XG4gICAgICBpZiAoZikgdm9pZCBvblVwbG9hZEZpbGUoZik7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKFwicmluZy0yXCIsIFwicmluZy1ibHVlLTUwMFwiKTtcbiAgICB9O1xuICAgIGNvbnN0IG9uRHJhZyA9IChlOiBEcmFnRXZlbnQpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJyaW5nLTJcIiwgXCJyaW5nLWJsdWUtNTAwXCIpO1xuICAgIH07XG4gICAgY29uc3Qgb25MZWF2ZSA9IChlOiBEcmFnRXZlbnQpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJyaW5nLTJcIiwgXCJyaW5nLWJsdWUtNTAwXCIpO1xuICAgIH07XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgb25Ecm9wIGFzIGFueSk7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIG9uRHJhZyBhcyBhbnkpO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgb25MZWF2ZSBhcyBhbnkpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBvbkRyb3AgYXMgYW55KTtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCBvbkRyYWcgYXMgYW55KTtcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgb25MZWF2ZSBhcyBhbnkpO1xuICAgIH07XG4gIH0sIFtvblVwbG9hZEZpbGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBtb3VudGVkID0gdHJ1ZTtcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGhhc0NhY2hlKSB7IHJldHVybjsgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFoYXNDYWNoZSkgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmxpc3RXb3JsZFNldHRpbmdzKHByb2plY3RJZCk7XG4gICAgICAgIGlmICghbW91bnRlZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuZXh0ID0gcmVzIHx8IFtdO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChoYXNDYWNoZSAmJiBKU09OLnN0cmluZ2lmeShuZXh0KSA9PT0gSlNPTi5zdHJpbmdpZnkoaXRlbXNSZWYuY3VycmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgc2V0SXRlbXMobmV4dCk7XG4gICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgIHNldEVycm9yKGU/Lm1lc3NhZ2UgfHwgXCJGYWlsZWQgdG8gbG9hZCB3b3JsZCBzZXR0aW5nc1wiKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChtb3VudGVkKSBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KSgpO1xuICAgIHJldHVybiAoKSA9PiB7IG1vdW50ZWQgPSBmYWxzZTsgfTtcbiAgfSwgW2FwaSwgcHJvamVjdElkLCBoYXNDYWNoZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNhY2hlS2V5LCBKU09OLnN0cmluZ2lmeShpdGVtcykpO1xuICAgIH0gY2F0Y2gge31cbiAgfSwgW2l0ZW1zLCBjYWNoZUtleV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7IGl0ZW1zUmVmLmN1cnJlbnQgPSBpdGVtczsgfSwgW2l0ZW1zXSk7XG5cbiAgLy8gUmVzdG9yZS9wZXJzaXN0IGxhc3QgYWN0aXZlIHNlbGVjdGlvblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oYWN0aXZlS2V5KSA6IG51bGw7XG4gICAgICBpZiAodikgc2V0QWN0aXZlSWQodiBhcyBhbnkpO1xuICAgIH0gY2F0Y2gge31cbiAgfSwgW2FjdGl2ZUtleV0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoYWN0aXZlSWQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShhY3RpdmVLZXksIGFjdGl2ZUlkKTtcbiAgICB9IGNhdGNoIHt9XG4gIH0sIFthY3RpdmVJZCwgYWN0aXZlS2V5XSk7XG5cbiAgLy8gUmVmbGVjdCBjaGF0LWRyaXZlbiB1cHNlcnRzIGluc3RhbnRseVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIG9uVXBzZXJ0KGV2OiBFdmVudCkge1xuICAgICAgY29uc3QgY2UgPSBldiBhcyBDdXN0b21FdmVudDtcbiAgICAgIGNvbnN0IGl0ZW0gPSBjZT8uZGV0YWlsPy5pdGVtIGFzIGFueTtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5pZCkgcmV0dXJuO1xuICAgICAgc2V0SXRlbXMoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgaWR4ID0gcHJldi5maW5kSW5kZXgoKHgpID0+IHguaWQgPT09IGl0ZW0uaWQpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gWy4uLnByZXZdO1xuICAgICAgICAgIG5leHRbaWR4XSA9IHsgLi4ubmV4dFtpZHhdLCAuLi5pdGVtIH0gYXMgYW55O1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ucHJldiwgaXRlbV07XG4gICAgICB9KTtcbiAgICAgIGlmIChhY3RpdmVJZCA9PT0gaXRlbS5pZCkge1xuICAgICAgICBzZXRGb3JtKHsgaWQ6IGl0ZW0uaWQsIG5hbWU6IGl0ZW0ubmFtZSwgc3VtbWFyeTogaXRlbS5zdW1tYXJ5IHx8IFwiXCIsIHRyYWl0czogaXRlbS50cmFpdHMgfHwgbnVsbCwgaW1hZ2VzOiAoaXRlbSBhcyBhbnkpLmltYWdlcyB8fCBbXSB9KTtcbiAgICAgICAgc2V0VHJhaXRzKGl0ZW0udHJhaXRzIHx8IHt9KTtcbiAgICAgIH1cbiAgICAgIG5vdGlmeSgnV29ybGQgZW50cnkgdXBkYXRlZCB2aWEgY2hhdCcpO1xuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd29ya3NwYWNlOndvcmxkLXVwc2VydCcsIG9uVXBzZXJ0IGFzIGFueSk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd3b3Jrc3BhY2U6d29ybGQtdXBzZXJ0Jywgb25VcHNlcnQgYXMgYW55KTtcbiAgfSwgW2FjdGl2ZUlkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUlkKSByZXR1cm47XG4gICAgaWYgKGFjdGl2ZUlkID09PSBcIl9fbmV3X19cIikge1xuICAgICAgc2V0Rm9ybSh7IG5hbWU6IFwiXCIsIGltYWdlczogW10gfSk7XG4gICAgICBzZXRUcmFpdHMoe30pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpdCA9IGl0ZW1zLmZpbmQoKHgpID0+IHguaWQgPT09IGFjdGl2ZUlkKTtcbiAgICBpZiAoIWl0KSByZXR1cm47XG4gICAgc2V0Rm9ybSh7IGlkOiBpdC5pZCwgbmFtZTogaXQubmFtZSwgc3VtbWFyeTogaXQuc3VtbWFyeSB8fCBcIlwiLCB0cmFpdHM6IGl0LnRyYWl0cyB8fCBudWxsLCBpbWFnZXM6IChpdCBhcyBhbnkpLmltYWdlcyB8fCBbXSB9KTtcbiAgICBzZXRUcmFpdHMoaXQudHJhaXRzIHx8IHt9KTtcbiAgfSwgW2FjdGl2ZUlkLCBpdGVtc10pO1xuXG4gIGNvbnN0IGZpbHRlcmVkID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcSA9IGZpbHRlci50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIXEpIHJldHVybiBpdGVtcztcbiAgICByZXR1cm4gaXRlbXMuZmlsdGVyKCh4KSA9PiAoeC5uYW1lIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpO1xuICB9LCBbaXRlbXMsIGZpbHRlcl0pO1xuXG4gIC8vIG5vdGlmeSBtb3ZlZCBlYXJsaWVyIHNvIGl0J3MgYXZhaWxhYmxlIHRvIHVwbG9hZHNcblxuICBjb25zdCBvbk5ldyA9ICgpID0+IHtcbiAgICBzZXRBY3RpdmVJZChcIl9fbmV3X19cIik7XG4gICAgc2V0Rm9ybSh7IG5hbWU6IFwiXCIsIGltYWdlczogW10gfSk7XG4gICAgc2V0VHJhaXRzKHt9KTtcbiAgfTtcblxuICAvLyBUcmFpdHMgaGVscGVyc1xuICBjb25zdCBjbG9uZSA9IChvOiBhbnkpID0+IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobyA/PyB7fSkpO1xuICBjb25zdCBzZXRWYWwgPSAocGF0aDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIHZhbDogYW55KSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykgcmVmID0gcmVmW3BhdGhbaV1dO1xuICAgICAgcmVmW3BhdGhbcGF0aC5sZW5ndGggLSAxXV0gPSB2YWw7XG4gICAgICByZXR1cm4gbnh0O1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBkZWxLZXkgPSAocGF0aFRvUGFyZW50OiBBcnJheTxzdHJpbmd8bnVtYmVyPiwga2V5OiBzdHJpbmd8bnVtYmVyKSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoVG9QYXJlbnQubGVuZ3RoOyBpKyspIHJlZiA9IHJlZltwYXRoVG9QYXJlbnRbaV1dO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVmKSAmJiB0eXBlb2Yga2V5ID09PSAnbnVtYmVyJykgcmVmLnNwbGljZShrZXksIDEpO1xuICAgICAgZWxzZSBpZiAocmVmICYmIHR5cGVvZiByZWYgPT09ICdvYmplY3QnKSBkZWxldGUgcmVmW2tleSBhcyBhbnldO1xuICAgICAgcmV0dXJuIG54dDtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgcmVuYW1lS2V5ID0gKHBhdGhUb1BhcmVudDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIG9sZEtleTogc3RyaW5nLCBuZXdLZXk6IHN0cmluZykgPT4ge1xuICAgIGlmICghbmV3S2V5KSByZXR1cm47XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoVG9QYXJlbnQubGVuZ3RoOyBpKyspIHJlZiA9IHJlZltwYXRoVG9QYXJlbnRbaV1dO1xuICAgICAgaWYgKCFyZWYgfHwgdHlwZW9mIHJlZiAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShyZWYpKSByZXR1cm4gbnh0O1xuICAgICAgaWYgKG9sZEtleSA9PT0gbmV3S2V5KSByZXR1cm4gbnh0O1xuICAgICAgY29uc3QgdmFsID0gcmVmW29sZEtleV07XG4gICAgICBkZWxldGUgcmVmW29sZEtleV07XG4gICAgICByZWZbbmV3S2V5XSA9IHZhbDtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFkZENoaWxkID0gKHBhdGhUb09iajogQXJyYXk8c3RyaW5nfG51bWJlcj4sIGRlcHRoOiBudW1iZXIpID0+IHtcbiAgICBpZiAoZGVwdGggPj0gNSkgcmV0dXJuO1xuICAgIHNldFRyYWl0cygoY3VycjogYW55KSA9PiB7XG4gICAgICBjb25zdCBueHQgPSBjbG9uZShjdXJyKTtcbiAgICAgIGxldCByZWY6IGFueSA9IG54dDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aFRvT2JqLmxlbmd0aDsgaSsrKSByZWYgPSByZWZbcGF0aFRvT2JqW2ldXTtcbiAgICAgIGlmICghcmVmIHx8IHR5cGVvZiByZWYgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkocmVmKSkgcmV0dXJuIG54dDtcbiAgICAgIGxldCBiYXNlID0gJ2tleSc7IGxldCBpMiA9IDE7IGxldCBrZXkgPSBiYXNlO1xuICAgICAgd2hpbGUgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZWYsIGtleSkpIHsga2V5ID0gYCR7YmFzZX0tJHtpMisrfWA7IH1cbiAgICAgIHJlZltrZXldID0gXCJcIjtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFkZFJvb3RLZXkgPSAoKSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IGJhc2UgPSAna2V5JzsgbGV0IGkgPSAxOyBsZXQgayA9IGJhc2U7XG4gICAgICB3aGlsZSAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG54dCwgaykpIHsgayA9IGAke2Jhc2V9LSR7aSsrfWA7IH1cbiAgICAgIChueHQgYXMgYW55KVtrXSA9IFwiXCI7XG4gICAgICByZXR1cm4gbnh0O1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBjb252ZXJ0VHlwZSA9IChwYXRoOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgcGFyZW50UGF0aDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIGtleTogc3RyaW5nLCBuZXh0VHlwZTogJ3N0cmluZyd8J29iamVjdCd8J2FycmF5JywgZGVwdGg6IG51bWJlcikgPT4ge1xuICAgIHNldFRyYWl0cygoY3VycjogYW55KSA9PiB7XG4gICAgICBjb25zdCBueHQgPSBjbG9uZShjdXJyKTtcbiAgICAgIGxldCByZWY6IGFueSA9IG54dDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyZW50UGF0aC5sZW5ndGg7IGkrKykgcmVmID0gcmVmW3BhcmVudFBhdGhbaV1dO1xuICAgICAgaWYgKCFyZWYgfHwgdHlwZW9mIHJlZiAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShyZWYpKSByZXR1cm4gbnh0O1xuICAgICAgaWYgKG5leHRUeXBlID09PSAnc3RyaW5nJykgcmVmW2tleV0gPSBcIlwiO1xuICAgICAgZWxzZSBpZiAobmV4dFR5cGUgPT09ICdvYmplY3QnKSByZWZba2V5XSA9IGRlcHRoID49IDUgPyBcIlwiIDoge307XG4gICAgICBlbHNlIGlmIChuZXh0VHlwZSA9PT0gJ2FycmF5JykgcmVmW2tleV0gPSBbXSBhcyBzdHJpbmdbXTtcbiAgICAgIHJldHVybiBueHQ7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFkZEFycmF5SXRlbSA9IChwYXRoVG9BcnI6IEFycmF5PHN0cmluZ3xudW1iZXI+KSA9PiB7XG4gICAgc2V0VHJhaXRzKChjdXJyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG54dCA9IGNsb25lKGN1cnIpO1xuICAgICAgbGV0IHJlZjogYW55ID0gbnh0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoVG9BcnIubGVuZ3RoOyBpKyspIHJlZiA9IHJlZltwYXRoVG9BcnJbaV1dO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVmKSkgcmVmLnB1c2goXCJcIik7XG4gICAgICByZXR1cm4gbnh0O1xuICAgIH0pO1xuICB9O1xuXG4gIChUcmFpdE9iamVjdCBhcyBhbnkpLl9wYXJlbnQgPSB7XG4gICAgc2V0VmFsLCBkZWxLZXksIHJlbmFtZUtleSwgYWRkQ2hpbGQsIGNvbnZlcnRUeXBlLCBhZGRBcnJheUl0ZW0sXG4gIH0gYXMgVHJhaXRDdHg7XG5cbiAgY29uc3Qgb25TYXZlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghZm9ybS5uYW1lLnRyaW0oKSkge1xuICAgICAgbm90aWZ5KFwiTmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0U2F2aW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXlsb2FkID0geyBuYW1lOiBmb3JtLm5hbWUudHJpbSgpLCBzdW1tYXJ5OiBmb3JtLnN1bW1hcnkgfHwgdW5kZWZpbmVkLCB0cmFpdHMsIGltYWdlczogZm9ybS5pbWFnZXMgfHwgW10gfTtcbiAgICAgIGlmIChhY3RpdmVJZCA9PT0gXCJfX25ld19fXCIpIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmNyZWF0ZVdvcmxkU2V0dGluZyhwcm9qZWN0SWQsIHBheWxvYWQpO1xuICAgICAgICBzZXRJdGVtcygocHJldikgPT4gWy4uLnByZXYsIHJlc10pO1xuICAgICAgICBzZXRBY3RpdmVJZChyZXMuaWQpO1xuICAgICAgfSBlbHNlIGlmIChhY3RpdmVJZCkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGkudXBkYXRlV29ybGRTZXR0aW5nKHByb2plY3RJZCwgYWN0aXZlSWQsIHBheWxvYWQpO1xuICAgICAgICBzZXRJdGVtcygocHJldikgPT4gcHJldi5tYXAoKHgpID0+ICh4LmlkID09PSByZXMuaWQgPyByZXMgOiB4KSkpO1xuICAgICAgfVxuICAgICAgbm90aWZ5KFwiU2F2ZWRcIik7XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICBub3RpZnkoZT8ubWVzc2FnZSB8fCBcIlNhdmUgZmFpbGVkXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTYXZpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvbkRlbGV0ZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWFjdGl2ZUlkIHx8IGFjdGl2ZUlkID09PSBcIl9fbmV3X19cIikgcmV0dXJuO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hbGVydFxuICAgIGlmICghY29uZmlybShcIkRlbGV0ZSB0aGlzIHdvcmxkIGVudHJ5P1wiKSkgcmV0dXJuO1xuICAgIHNldERlbGV0aW5nKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBhcGkuZGVsZXRlV29ybGRTZXR0aW5nKHByb2plY3RJZCwgYWN0aXZlSWQpO1xuICAgICAgc2V0SXRlbXMoKHByZXYpID0+IHByZXYuZmlsdGVyKCh4KSA9PiB4LmlkICE9PSBhY3RpdmVJZCkpO1xuICAgICAgc2V0QWN0aXZlSWQobnVsbCk7XG4gICAgICBzZXRGb3JtKHsgbmFtZTogXCJcIiwgaW1hZ2VzOiBbXSB9KTtcbiAgICAgIHNldFRyYWl0cyh7fSk7XG4gICAgICBub3RpZnkoXCJEZWxldGVkXCIpO1xuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgbm90aWZ5KGU/Lm1lc3NhZ2UgfHwgXCJEZWxldGUgZmFpbGVkXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXREZWxldGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNvdW50ID0gaXRlbXMubGVuZ3RoO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZ3JpZCBncmlkLXJvd3MtW2F1dG9fMWZyXVwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItYiBib3JkZXItYm9yZGVyLWRlZmF1bHQgcHgtNiBweS00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWJhc2UgZm9udC1zZW1pYm9sZCB0ZXh0LXRleHQtcHJpbWFyeVwiPldvcmxkIFNldHRpbmdzPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeVwiPntjb3VudH0gSXRlbXM8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uTmV3fSBjbGFzc05hbWU9XCJyb3VuZGVkLWxnIGJnLWJnLWVsZXZhdGVkIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgaG92ZXI6Ym9yZGVyLWFjY2VudCBob3ZlcjpiZy1iZy1ob3ZlciB0ZXh0LXRleHQtc2Vjb25kYXJ5IGhvdmVyOnRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gcHgtNCBweS0zIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xNTAgaG92ZXI6LXRyYW5zbGF0ZS15LTAuNVwiPlxuICAgICAgICAgICAgPFBsdXMgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICBOZXcgRW50cnlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC0wIGdyaWRcIiBzdHlsZT17eyBncmlkVGVtcGxhdGVDb2x1bW5zOiBcIjM1JSA2NSVcIiB9fT5cbiAgICAgICAgPGFzaWRlIGNsYXNzTmFtZT1cImJvcmRlci1yIGJvcmRlci1ib3JkZXItZGVmYXVsdCBtaW4taC0wIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtM1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9e2ZpbHRlcn0gb25DaGFuZ2U9eyhlKSA9PiBzZXRGaWx0ZXIoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj1cIlNlYXJjaCB3b3JsZCBzZXR0aW5nc1wiIGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBwbC05IHByLTMgcHktMi41IHRleHQtc20gdGV4dC10ZXh0LXByaW1hcnkgcGxhY2Vob2xkZXI6dGV4dC10ZXh0LXRlcnRpYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50XCIgLz5cbiAgICAgICAgICAgICAgPFNlYXJjaCBjbGFzc05hbWU9XCJ3LTQgaC00IGFic29sdXRlIGxlZnQtMyB0b3AtMyB0ZXh0LXRleHQtdGVydGlhcnlcIiAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHB4LTMgcGItM1wiPlxuICAgICAgICAgICAge2xvYWRpbmcgJiYgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC1zZWNvbmRhcnkgcHgtMiBweS0yXCI+TG9hZGluZ+KApjwvZGl2Pn1cbiAgICAgICAgICAgIHtlcnJvciAmJiA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1yZWQtNDAwIHB4LTIgcHktMiBiZy1yZWQtOTUwLzIwIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1yZWQtNTAwLzIwXCI+e2Vycm9yfTwvZGl2Pn1cbiAgICAgICAgICAgIHshbG9hZGluZyAmJiAhZmlsdGVyZWQubGVuZ3RoICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xMCB0ZXh0LWNlbnRlciB0ZXh0LXRleHQtdGVydGlhcnkgdGV4dC1zbVwiPk5vIHdvcmxkIHNldHRpbmdzIHlldC4gQ3JlYXRlIHlvdXIgZmlyc3QgZW50cnkhPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2ZpbHRlcmVkLm1hcCgodykgPT4gKFxuICAgICAgICAgICAgICA8YnV0dG9uIGtleT17dy5pZH0gb25DbGljaz17KCkgPT4gc2V0QWN0aXZlSWQody5pZCEpfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXCJ3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMyByb3VuZGVkLW1kIG1iLTIgdHJhbnNpdGlvbi1hbGxcIiwgYWN0aXZlSWQ9PT13LmlkID8gXCJib3JkZXItbC0yIGJvcmRlci1ibHVlLTUwMCBiZy1iZy1lbGV2YXRlZFwiIDogXCJob3ZlcjpiZy1iZy1ob3ZlclwiKSB9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtdGV4dC1wcmltYXJ5IHRydW5jYXRlXCI+e3cubmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSB0cnVuY2F0ZVwiPnt3LnN1bW1hcnkgfHwgXCJcIn08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2FzaWRlPlxuXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cIm1pbi1oLTAgb3ZlcmZsb3cteS1hdXRvIHAtNlwiIGFyaWEtbGFiZWw9XCJXb3JsZCBkZXRhaWxzXCI+XG4gICAgICAgICAge2FjdGl2ZUlkID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy0yeGwgbXgtYXV0b1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ2FwLTRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17ZHJvcFJlZn0gY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1zdGFydCBtYi0yIHAtMyByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgYmctYmctZWxldmF0ZWQgdy1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IG1iLTJcIj5Xb3JsZCBJbWFnZXM8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwicHgtMyBweS0yIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCBiZy1iZy1wcmltYXJ5IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6dGV4dC10ZXh0LXByaW1hcnkgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGN1cnNvci1wb2ludGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPFVwbG9hZCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICBVcGxvYWQgSW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgY2xhc3NOYW1lPVwiaGlkZGVuXCIgb25DaGFuZ2U9eyhlKSA9PiB7IGNvbnN0IGYgPSBlLnRhcmdldC5maWxlcz8uWzBdOyBpZiAoZikgdm9pZCBvblVwbG9hZEZpbGUoZik7IH19IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIHt1cGxvYWRpbmcgJiYgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSBpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj48TG9hZGVyMiBjbGFzc05hbWU9XCJ3LTMgaC0zIGFuaW1hdGUtc3BpblwiIC8+IFVwbG9hZGluZ+KApjwvZGl2Pn1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy00IGdhcC0yIHctZnVsbFwiPlxuICAgICAgICAgICAgICAgICAgICB7KGZvcm0uaW1hZ2VzIHx8IFtdKS5tYXAoKHVybCwgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwicmVsYXRpdmUgZ3JvdXAgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIG92ZXJmbG93LWhpZGRlbiBiZy1iZy1wcmltYXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17dXJsfSBhbHQ9XCJ3b3JsZFwiIGNsYXNzTmFtZT1cInctZnVsbCBoLTIwIG9iamVjdC1jb3ZlclwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0xIHJpZ2h0LTEgYmctYmxhY2svNTAgdGV4dC13aGl0ZSByb3VuZGVkIHAtMSBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIlJlbW92ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEZvcm0oKGYpPT4gKHsgLi4uZiwgaW1hZ2VzOiAoZi5pbWFnZXMgfHwgW10pLmZpbHRlcigoXyxpKT0+aSE9PWlkeCkgfSkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8WCBjbGFzc05hbWU9XCJ3LTMgaC0zXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgeyEoZm9ybS5pbWFnZXMgfHwgW10pLmxlbmd0aCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeVwiPk5vIGltYWdlcyB5ZXQuIFVwbG9hZCBvciBkcm9wIGhlcmUuPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiZ3JpZCBnYXAtMiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZVwiPk5hbWU8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8aW5wdXQgdmFsdWU9e2Zvcm0ubmFtZX0gb25DaGFuZ2U9eyhlKT0+c2V0Rm9ybSgoZik9Pih7IC4uLmYsIG5hbWU6IGUudGFyZ2V0LnZhbHVlIH0pKX0gY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTQgcHktMi41IHRleHQtdGV4dC1wcmltYXJ5IG91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItYWNjZW50XCIgLz5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+U3VtbWFyeTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSB2YWx1ZT17Zm9ybS5zdW1tYXJ5IHx8IFwiXCJ9IG9uQ2hhbmdlPXsoZSk9PnNldEZvcm0oKGYpPT4oeyAuLi5mLCBzdW1tYXJ5OiBlLnRhcmdldC52YWx1ZSB9KSl9IHJvd3M9ezV9IGNsYXNzTmFtZT1cInctZnVsbCBiZy1iZy1wcmltYXJ5IGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgcm91bmRlZC1tZCBweC00IHB5LTIuNSB0ZXh0LXRleHQtcHJpbWFyeSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudCB0ZXh0LXNtXCIgLz5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtWzExcHhdIHRleHQtdGV4dC10ZXJ0aWFyeVwiPnsoZm9ybS5zdW1tYXJ5IHx8IFwiXCIpLmxlbmd0aH0gY2hhcmFjdGVyczwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC10ZXh0LXRlcnRpYXJ5IHVwcGVyY2FzZSB0cmFja2luZy13aWRlXCI+VHJhaXRzPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2FkZFJvb3RLZXl9IGNsYXNzTmFtZT1cInB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXhzIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPjxQbHVzIGNsYXNzTmFtZT1cInctMyBoLTNcIiAvPiBBZGQga2V5PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICB7T2JqZWN0LmtleXModHJhaXRzIHx8IHt9KS5sZW5ndGggPT09IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXRleHQtdGVydGlhcnlcIj5ObyB0cmFpdHMgeWV0LiBBZGQgYSBrZXkuPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxUcmFpdE9iamVjdCBvYmo9e3RyYWl0c30gcGF0aD17W119IGRlcHRoPXsxfSAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwdC00XCI+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uRGVsZXRlfSBkaXNhYmxlZD17IWFjdGl2ZUlkIHx8IGFjdGl2ZUlkPT09XCJfX25ld19fXCIgfHwgZGVsZXRpbmd9IGNsYXNzTmFtZT1cInRleHQtcmVkLTQwMCBob3Zlcjp0ZXh0LXJlZC0zMDAgaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgPFRyYXNoMiBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgRGVsZXRlIEVudHJ5XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7IHNldEFjdGl2ZUlkKG51bGwpOyB9fSBjbGFzc05hbWU9XCJweC00IHB5LTIgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHRleHQtdGV4dC1zZWNvbmRhcnkgaG92ZXI6YmctYmctaG92ZXJcIj5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblNhdmV9IGRpc2FibGVkPXtzYXZpbmd9IGNsYXNzTmFtZT1cInB4LTQgcHktMiByb3VuZGVkLW1kIGJnLWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNTAwIHRleHQtd2hpdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7c2F2aW5nID8gPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+PExvYWRlcjIgY2xhc3NOYW1lPVwidy00IGgtNCBhbmltYXRlLXNwaW5cIiAvPiBTYXZpbmfigKY8L3NwYW4+IDogXCJTYXZlIEVudHJ5XCJ9XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXRleHQtdGVydGlhcnlcIj5TZWxlY3QgYSB3b3JsZCBlbnRyeSBvciBjcmVhdGUgYSBuZXcgb25lLjwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvc2VjdGlvbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7dG9hc3QgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIHRvcC00IHJpZ2h0LTQgei01MFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNCBweS0zIHJvdW5kZWQtbGcgYmctYmctZWxldmF0ZWQgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCB0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXNtIHNoYWRvdy1lbGV2YXRpb25cIj57dG9hc3R9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuLy8gTmVzdGVkIHRyYWl0cyBlZGl0b3IgKHNhbWUgYmVoYXZpb3IgYXMgQ2hhcmFjdGVyTWFuYWdlcilcbnR5cGUgVHJhaXRDdHggPSB7XG4gIHNldFZhbDogKHA6IEFycmF5PHN0cmluZ3xudW1iZXI+LCB2OiBhbnkpID0+IHZvaWQ7XG4gIGRlbEtleTogKHBwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgazogYW55KSA9PiB2b2lkO1xuICByZW5hbWVLZXk6IChwcDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIG9sZEs6IHN0cmluZywgbmV3Szogc3RyaW5nKSA9PiB2b2lkO1xuICBhZGRDaGlsZDogKHA6IEFycmF5PHN0cmluZ3xudW1iZXI+LCBkOiBudW1iZXIpID0+IHZvaWQ7XG4gIGNvbnZlcnRUeXBlOiAocDogQXJyYXk8c3RyaW5nfG51bWJlcj4sIHBwOiBBcnJheTxzdHJpbmd8bnVtYmVyPiwgazogc3RyaW5nLCB0OiAnc3RyaW5nJ3wnb2JqZWN0J3wnYXJyYXknLCBkOiBudW1iZXIpID0+IHZvaWQ7XG4gIGFkZEFycmF5SXRlbTogKHA6IEFycmF5PHN0cmluZ3xudW1iZXI+KSA9PiB2b2lkO1xufTtcblxuZnVuY3Rpb24gdXNlV29ybGRDdHgoKTogVHJhaXRDdHgge1xuICByZXR1cm4ge1xuICAgIHNldFZhbDogKCkgPT4ge30sXG4gICAgZGVsS2V5OiAoKSA9PiB7fSxcbiAgICByZW5hbWVLZXk6ICgpID0+IHt9LFxuICAgIGFkZENoaWxkOiAoKSA9PiB7fSxcbiAgICBjb252ZXJ0VHlwZTogKCkgPT4ge30sXG4gICAgYWRkQXJyYXlJdGVtOiAoKSA9PiB7fSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gVHJhaXRPYmplY3QoeyBvYmosIHBhdGgsIGRlcHRoIH06IHsgb2JqOiBhbnk7IHBhdGg6IEFycmF5PHN0cmluZ3xudW1iZXI+OyBkZXB0aDogbnVtYmVyIH0pIHtcbiAgY29uc3QgcGFyZW50OiBUcmFpdEN0eCB8IHVuZGVmaW5lZCA9IChUcmFpdE9iamVjdCBhcyBhbnkpLl9wYXJlbnQgYXMgVHJhaXRDdHggfCB1bmRlZmluZWQ7XG4gIGNvbnN0IGN0eDogVHJhaXRDdHggPSBwYXJlbnQgfHwgdXNlV29ybGRDdHgoKTtcbiAgKFRyYWl0T2JqZWN0IGFzIGFueSkuX3BhcmVudCA9IGN0eDtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iaiB8fCB7fSk7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgIHtrZXlzLm1hcCgoaykgPT4gKFxuICAgICAgICA8VHJhaXRSb3cga2V5PXtrfSBrPXtrfSB2PXsob2JqIGFzIGFueSlba119IHBhcmVudFBhdGg9e3BhdGh9IGRlcHRoPXtkZXB0aH0gY3R4PXtjdHh9IC8+XG4gICAgICApKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZnVuY3Rpb24gVHJhaXRSb3coeyBrLCB2LCBwYXJlbnRQYXRoLCBkZXB0aCwgY3R4IH06IHsgazogc3RyaW5nOyB2OiBhbnk7IHBhcmVudFBhdGg6IEFycmF5PHN0cmluZ3xudW1iZXI+OyBkZXB0aDogbnVtYmVyOyBjdHg6IFRyYWl0Q3R4IH0pIHtcbiAgY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkodik7XG4gIGNvbnN0IGlzT2JqZWN0ID0gdiAmJiB0eXBlb2YgdiA9PT0gJ29iamVjdCcgJiYgIWlzQXJyYXk7XG4gIGNvbnN0IHR5cGU6ICdzdHJpbmcnfCdvYmplY3QnfCdhcnJheScgPSBpc0FycmF5ID8gJ2FycmF5JyA6IChpc09iamVjdCA/ICdvYmplY3QnIDogJ3N0cmluZycpO1xuICBjb25zdCBbbmFtZSwgc2V0TmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KGspO1xuICB1c2VFZmZlY3QoKCkgPT4geyBzZXROYW1lKGspOyB9LCBba10pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcC0yIGJnLWJnLWVsZXZhdGVkXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSk9PnNldE5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgIG9uQmx1cj17KCk9PnsgaWYgKG5hbWUgIT09IGsgJiYgbmFtZS50cmltKCkpIGN0eC5yZW5hbWVLZXkocGFyZW50UGF0aCwgaywgbmFtZS50cmltKCkpOyB9fVxuICAgICAgICAgIG9uS2V5RG93bj17KGUpPT57IGlmIChlLmtleSA9PT0gJ0VudGVyJykgeyAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuYmx1cigpOyB9IH19XG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJrZXlcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtbm9uZSB3LTQ4IGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTIgcHktMS41IHRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnRcIlxuICAgICAgICAvPlxuICAgICAgICA8c2VsZWN0IHZhbHVlPXt0eXBlfSBvbkNoYW5nZT17KGUpPT5jdHguY29udmVydFR5cGUoWy4uLnBhcmVudFBhdGgsIGtdLCBwYXJlbnRQYXRoLCBrLCBlLnRhcmdldC52YWx1ZSBhcyBhbnksIGRlcHRoKX0gY2xhc3NOYW1lPVwiZmxleC1ub25lIHctMjggYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtMiBweS0xLjUgdGV4dC10ZXh0LXByaW1hcnkgdGV4dC1zbSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudFwiPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJzdHJpbmdcIj5TdHJpbmc8L29wdGlvbj5cbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwib2JqZWN0XCIgZGlzYWJsZWQ9e2RlcHRoPj01fT5PYmplY3Q8L29wdGlvbj5cbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiYXJyYXlcIj5BcnJheTwvb3B0aW9uPlxuICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAge3R5cGU9PT0nc3RyaW5nJyAmJiAoXG4gICAgICAgICAgPGlucHV0IHZhbHVlPXtTdHJpbmcodiB8fCAnJyl9IG9uQ2hhbmdlPXsoZSk9PmN0eC5zZXRWYWwoWy4uLnBhcmVudFBhdGgsIGtdLCBlLnRhcmdldC52YWx1ZSl9IHBsYWNlaG9sZGVyPVwidmFsdWVcIiBjbGFzc05hbWU9XCJmbGV4LTEgYmctYmctcHJpbWFyeSBib3JkZXIgYm9yZGVyLWJvcmRlci1kZWZhdWx0IHJvdW5kZWQtbWQgcHgtMiBweS0xLjUgdGV4dC10ZXh0LXByaW1hcnkgdGV4dC1zbSBvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLWFjY2VudFwiIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxidXR0b24gb25DbGljaz17KCk9PmN0eC5kZWxLZXkocGFyZW50UGF0aCwgayl9IGNsYXNzTmFtZT1cInRleHQtdGV4dC10ZXJ0aWFyeSBob3Zlcjp0ZXh0LXJlZC00MDAgdGV4dC1zbSBtbC1hdXRvXCI+PFggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+PC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICAgIHt0eXBlPT09J29iamVjdCcgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgbWwtNFwiPlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCk9PmN0eC5hZGRDaGlsZChbLi4ucGFyZW50UGF0aCwga10sIGRlcHRoKzEpfSBkaXNhYmxlZD17ZGVwdGg+PTV9IGNsYXNzTmFtZT1cInB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXhzIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPjxQbHVzIGNsYXNzTmFtZT1cInctMyBoLTNcIiAvPiBBZGQgY2hpbGQ8L2J1dHRvbj5cbiAgICAgICAgICA8VHJhaXRPYmplY3Qgb2JqPXt2fSBwYXRoPXtbLi4ucGFyZW50UGF0aCwga119IGRlcHRoPXtkZXB0aCsxfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICB7dHlwZT09PSdhcnJheScgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgbWwtNCBzcGFjZS15LTJcIj5cbiAgICAgICAgICB7KHYgYXMgc3RyaW5nW10pLm1hcCgoaXRlbSwgaWR4KSA9PiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17aWR4fSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtdGV4dC10ZXJ0aWFyeVwiPlt7aWR4fV08L3NwYW4+XG4gICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT17aXRlbX0gb25DaGFuZ2U9eyhlKT0+Y3R4LnNldFZhbChbLi4ucGFyZW50UGF0aCwgaywgaWR4XSwgZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj1cInZhbHVlXCIgY2xhc3NOYW1lPVwiZmxleC0xIGJnLWJnLXByaW1hcnkgYm9yZGVyIGJvcmRlci1ib3JkZXItZGVmYXVsdCByb3VuZGVkLW1kIHB4LTIgcHktMS41IHRleHQtdGV4dC1wcmltYXJ5IHRleHQtc20gb3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1hY2NlbnRcIiAvPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT5jdHguZGVsS2V5KFsuLi5wYXJlbnRQYXRoLCBrXSwgaWR4KX0gY2xhc3NOYW1lPVwidGV4dC10ZXh0LXRlcnRpYXJ5IGhvdmVyOnRleHQtcmVkLTQwMCB0ZXh0LXNtXCI+PFggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApKX1cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT5jdHguYWRkQXJyYXlJdGVtKFsuLi5wYXJlbnRQYXRoLCBrXSl9IGNsYXNzTmFtZT1cInB4LTIgcHktMSByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYm9yZGVyLWRlZmF1bHQgdGV4dC10ZXh0LXNlY29uZGFyeSBob3Zlcjp0ZXh0LXRleHQtcHJpbWFyeSB0ZXh0LXhzIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiPjxQbHVzIGNsYXNzTmFtZT1cInctMyBoLTNcIiAvPiBBZGQgaXRlbTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlU3VwYWJhc2UiLCJjcmVhdGVBcGkiLCJMb2FkZXIyIiwiUGx1cyIsIlNlYXJjaCIsIlRyYXNoMiIsIlVwbG9hZCIsIlgiLCJjbGFzc05hbWVzIiwieHMiLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsIldvcmxkU2V0dGluZ3NNYW5hZ2VyIiwicHJvamVjdElkIiwic3VwYWJhc2UiLCJhcGkiLCJpdGVtcyIsInNldEl0ZW1zIiwibG9hZGluZyIsInNldExvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwic2V0RmlsdGVyIiwiYWN0aXZlSWQiLCJzZXRBY3RpdmVJZCIsInNhdmluZyIsInNldFNhdmluZyIsImRlbGV0aW5nIiwic2V0RGVsZXRpbmciLCJ0b2FzdCIsInNldFRvYXN0IiwidG9hc3RUaW1lciIsImZvcm0iLCJzZXRGb3JtIiwibmFtZSIsInRyYWl0cyIsInNldFRyYWl0cyIsInVwbG9hZGluZyIsInNldFVwbG9hZGluZyIsImRyb3BSZWYiLCJjYWNoZUtleSIsImFjdGl2ZUtleSIsImhhc0NhY2hlIiwic2V0SGFzQ2FjaGUiLCJpdGVtc1JlZiIsInMiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYXJyIiwiSlNPTiIsInBhcnNlIiwiQXJyYXkiLCJpc0FycmF5IiwidmFsaWQiLCJsZW5ndGgiLCJub3RpZnkiLCJtc2ciLCJjdXJyZW50IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIm9uVXBsb2FkRmlsZSIsImZpbGUiLCJidWNrZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfV09STERfQlVDS0VUIiwiZXh0Iiwic3BsaXQiLCJwb3AiLCJwYXRoIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInNsaWNlIiwidXBFcnIiLCJzdG9yYWdlIiwiZnJvbSIsInVwbG9hZCIsInVwc2VydCIsImNvbnRlbnRUeXBlIiwidHlwZSIsImRhdGEiLCJnZXRQdWJsaWNVcmwiLCJ1cmwiLCJwdWJsaWNVcmwiLCJmIiwiaW1hZ2VzIiwiZSIsIm1lc3NhZ2UiLCJlbCIsIm9uRHJvcCIsInByZXZlbnREZWZhdWx0IiwiZGF0YVRyYW5zZmVyIiwiZmlsZXMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJvbkRyYWciLCJhZGQiLCJvbkxlYXZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJtb3VudGVkIiwicmVzIiwibGlzdFdvcmxkU2V0dGluZ3MiLCJuZXh0Iiwic3RyaW5naWZ5Iiwic2V0SXRlbSIsInYiLCJvblVwc2VydCIsImV2IiwiY2UiLCJpdGVtIiwiZGV0YWlsIiwiaWQiLCJwcmV2IiwiaWR4IiwiZmluZEluZGV4IiwieCIsInN1bW1hcnkiLCJpdCIsImZpbmQiLCJmaWx0ZXJlZCIsInEiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsIm9uTmV3IiwiY2xvbmUiLCJvIiwic2V0VmFsIiwidmFsIiwiY3VyciIsIm54dCIsInJlZiIsImkiLCJkZWxLZXkiLCJwYXRoVG9QYXJlbnQiLCJrZXkiLCJzcGxpY2UiLCJyZW5hbWVLZXkiLCJvbGRLZXkiLCJuZXdLZXkiLCJhZGRDaGlsZCIsInBhdGhUb09iaiIsImRlcHRoIiwiYmFzZSIsImkyIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYWRkUm9vdEtleSIsImsiLCJjb252ZXJ0VHlwZSIsInBhcmVudFBhdGgiLCJuZXh0VHlwZSIsImFkZEFycmF5SXRlbSIsInBhdGhUb0FyciIsInB1c2giLCJUcmFpdE9iamVjdCIsIl9wYXJlbnQiLCJvblNhdmUiLCJwYXlsb2FkIiwidW5kZWZpbmVkIiwiY3JlYXRlV29ybGRTZXR0aW5nIiwidXBkYXRlV29ybGRTZXR0aW5nIiwibWFwIiwib25EZWxldGUiLCJjb25maXJtIiwiZGVsZXRlV29ybGRTZXR0aW5nIiwiY291bnQiLCJkaXYiLCJjbGFzc05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwic3R5bGUiLCJncmlkVGVtcGxhdGVDb2x1bW5zIiwiYXNpZGUiLCJpbnB1dCIsInZhbHVlIiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJwbGFjZWhvbGRlciIsInciLCJzZWN0aW9uIiwiYXJpYS1sYWJlbCIsImxhYmVsIiwiYWNjZXB0IiwiaW1nIiwic3JjIiwiYWx0IiwidGl0bGUiLCJfIiwic3BhbiIsInRleHRhcmVhIiwicm93cyIsImtleXMiLCJvYmoiLCJkaXNhYmxlZCIsInVzZVdvcmxkQ3R4IiwicGFyZW50IiwiY3R4IiwiVHJhaXRSb3ciLCJpc09iamVjdCIsInNldE5hbWUiLCJvbkJsdXIiLCJvbktleURvd24iLCJibHVyIiwic2VsZWN0Iiwib3B0aW9uIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/workspace/WorldSettingsManager.tsx\n");

/***/ }),

/***/ "(ssr)/./src/lib/api.ts":
/*!************************!*\
  !*** ./src/lib/api.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createApi: () => (/* binding */ createApi),\n/* harmony export */   useSSE: () => (/* binding */ useSSE)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ createApi,useSSE auto */ \nconst API_BASE = \"http://localhost:3000\" || 0;\nasync function authHeaders(supabase) {\n    const { data: { session } } = await supabase.auth.getSession();\n    const token = session?.access_token;\n    return token ? {\n        Authorization: `Bearer ${token}`\n    } : {};\n}\nasync function apiFetch(supabase, input, init = {}) {\n    const hasBody = init.body !== undefined && init.body !== null;\n    const baseHeaders = {\n        ...await authHeaders(supabase),\n        ...init.headers || {}\n    };\n    const headers = hasBody ? {\n        \"Content-Type\": \"application/json\",\n        ...baseHeaders\n    } : baseHeaders;\n    const res = await fetch(`${API_BASE}${input}`, {\n        ...init,\n        headers\n    });\n    if (!res.ok) {\n        const text = await res.text().catch(()=>\"\");\n        throw new Error(`API ${res.status}: ${text}`);\n    }\n    if (res.status === 204) return undefined;\n    return await res.json();\n}\nfunction createApi(supabase) {\n    return {\n        // Projects CRUD\n        listProjects: ()=>apiFetch(supabase, `/api/project`),\n        createProject: (body)=>apiFetch(supabase, `/api/project`, {\n                method: \"POST\",\n                body: JSON.stringify(body)\n            }),\n        getProject: (id)=>apiFetch(supabase, `/api/project/${id}`),\n        updateProject: (id, body)=>apiFetch(supabase, `/api/project/${id}`, {\n                method: \"PATCH\",\n                body: JSON.stringify(body)\n            }),\n        deleteProject: (id)=>apiFetch(supabase, `/api/project/${id}`, {\n                method: \"DELETE\"\n            }),\n        // Project settings\n        updateProjectSettings: (id, body)=>apiFetch(supabase, `/api/project/${id}/settings`, {\n                method: \"PATCH\",\n                body: JSON.stringify(body)\n            }),\n        // Chat\n        // Legacy (per-project) - will be replaced by chatId-based endpoints\n        getChatMessages: (projectId)=>apiFetch(supabase, `/api/project/${projectId}/chat/messages`),\n        // Chats (per project)\n        listChats: (projectId)=>apiFetch(supabase, `/api/project/${projectId}/chats`),\n        createChat: (projectId, body)=>apiFetch(supabase, `/api/project/${projectId}/chats`, {\n                method: \"POST\",\n                body: JSON.stringify(body)\n            }),\n        renameChat: (projectId, chatId, title)=>apiFetch(supabase, `/api/project/${projectId}/chats/${chatId}`, {\n                method: \"PATCH\",\n                body: JSON.stringify({\n                    title\n                })\n            }),\n        deleteChat: (projectId, chatId)=>apiFetch(supabase, `/api/project/${projectId}/chats/${chatId}`, {\n                method: \"DELETE\"\n            }),\n        // Chat messages by chatId\n        getChatMessagesByChatId: (chatId)=>apiFetch(supabase, `/api/chat/${chatId}/messages`),\n        // Chapters\n        createChapter: (projectId, payload)=>apiFetch(supabase, `/api/project/${projectId}/chapter`, {\n                method: \"POST\",\n                body: JSON.stringify(payload)\n            }),\n        // Chapter previews\n        getChapterSummary: (projectId)=>apiFetch(supabase, `/api/project/${projectId}/chapters/summary`),\n        // Paginated chapters for reader\n        listChaptersPaginated: (projectId, page, limit)=>apiFetch(supabase, `/api/project/${projectId}/chapters?page=${encodeURIComponent(page)}&limit=${encodeURIComponent(limit)}`),\n        // Update chapter\n        updateChapter: (projectId, chapterId, payload)=>apiFetch(supabase, `/api/project/${projectId}/chapter/${chapterId}`, {\n                method: \"PATCH\",\n                body: JSON.stringify(payload)\n            }),\n        // Delete chapter\n        deleteChapter: (projectId, chapterId)=>apiFetch(supabase, `/api/project/${projectId}/chapter/${chapterId}`, {\n                method: \"DELETE\"\n            }),\n        // Characters\n        listCharacters: (projectId)=>apiFetch(supabase, `/api/project/${projectId}/characters`),\n        createCharacter: (projectId, body)=>apiFetch(supabase, `/api/project/${projectId}/characters`, {\n                method: \"POST\",\n                body: JSON.stringify(body)\n            }),\n        updateCharacter: (projectId, charId, body)=>apiFetch(supabase, `/api/project/${projectId}/characters/${charId}`, {\n                method: \"PATCH\",\n                body: JSON.stringify(body)\n            }),\n        deleteCharacter: (projectId, charId)=>apiFetch(supabase, `/api/project/${projectId}/characters/${charId}`, {\n                method: \"DELETE\"\n            }),\n        // World Settings\n        listWorldSettings: (projectId)=>apiFetch(supabase, `/api/project/${projectId}/world`),\n        createWorldSetting: (projectId, body)=>apiFetch(supabase, `/api/project/${projectId}/world`, {\n                method: \"POST\",\n                body: JSON.stringify(body)\n            }),\n        updateWorldSetting: (projectId, wsId, body)=>apiFetch(supabase, `/api/project/${projectId}/world/${wsId}`, {\n                method: \"PATCH\",\n                body: JSON.stringify(body)\n            }),\n        deleteWorldSetting: (projectId, wsId)=>apiFetch(supabase, `/api/project/${projectId}/world/${wsId}`, {\n                method: \"DELETE\"\n            }),\n        // Chat (SSE should be used via useSSE below)\n        // Streaming chat by chatId (SSE)\n        postChat: async (chatId, body, onEvent)=>{\n            const headers = {\n                \"Content-Type\": \"application/json\",\n                ...await authHeaders(supabase)\n            };\n            const res = await fetch(`${API_BASE}/api/chat/${chatId}`, {\n                method: \"POST\",\n                headers,\n                body: JSON.stringify(body)\n            });\n            if (!res.ok || !res.body) {\n                const text = await res.text().catch(()=>\"\");\n                throw new Error(`Chat stream error ${res.status}: ${text}`);\n            }\n            const reader = res.body.getReader();\n            const decoder = new TextDecoder();\n            try {\n                while(true){\n                    const { value, done } = await reader.read();\n                    if (done) break;\n                    const chunk = decoder.decode(value, {\n                        stream: true\n                    });\n                    for (const line of chunk.split(\"\\n\")){\n                        const trimmed = line.trim();\n                        if (!trimmed.startsWith(\"data:\")) continue;\n                        const data = trimmed.slice(5).trim();\n                        if (!data) continue;\n                        try {\n                            onEvent(JSON.parse(data));\n                        } catch  {}\n                    }\n                }\n            } finally{\n                reader.releaseLock();\n            }\n        },\n        // Text generation (SSE)\n        generateTextStream: async (body, onEvent)=>{\n            const headers = {\n                \"Content-Type\": \"application/json\",\n                ...await authHeaders(supabase)\n            };\n            const res = await fetch(`${API_BASE}/api/generate/text`, {\n                method: \"POST\",\n                headers,\n                body: JSON.stringify(body)\n            });\n            if (!res.ok || !res.body) {\n                const text = await res.text().catch(()=>\"\");\n                throw new Error(`Text stream error ${res.status}: ${text}`);\n            }\n            const reader = res.body.getReader();\n            const decoder = new TextDecoder();\n            try {\n                while(true){\n                    const { value, done } = await reader.read();\n                    if (done) break;\n                    const chunk = decoder.decode(value, {\n                        stream: true\n                    });\n                    for (const line of chunk.split(\"\\n\")){\n                        const trimmed = line.trim();\n                        if (!trimmed.startsWith(\"data:\")) continue;\n                        const data = trimmed.slice(5).trim();\n                        if (!data) continue;\n                        try {\n                            onEvent(JSON.parse(data));\n                        } catch  {}\n                    }\n                }\n            } finally{\n                reader.releaseLock();\n            }\n        },\n        // Image generation (queued)\n        generateImage: (body)=>apiFetch(supabase, `/api/generate/image`, {\n                method: \"POST\",\n                body: JSON.stringify(body)\n            })\n    };\n}\n// Generic SSE hook for any endpoint that streams Server-Sent Events (data: {json})\nfunction useSSE() {\n    const controllerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const [streaming, setStreaming] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        controllerRef.current?.abort();\n        controllerRef.current = null;\n        setStreaming(false);\n    }, []);\n    const start = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (opts)=>{\n        const ctl = new AbortController();\n        controllerRef.current = ctl;\n        setStreaming(true);\n        try {\n            const res = await fetch(opts.url, {\n                method: opts.method || \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    ...opts.headers || {}\n                },\n                body: opts.body ? JSON.stringify(opts.body) : undefined,\n                signal: ctl.signal\n            });\n            if (!res.ok || !res.body) {\n                const text = await res.text().catch(()=>\"\");\n                throw new Error(`SSE ${res.status}: ${text}`);\n            }\n            const reader = res.body.getReader();\n            const decoder = new TextDecoder();\n            try {\n                while(true){\n                    const { value, done } = await reader.read();\n                    if (done) break;\n                    const chunk = decoder.decode(value, {\n                        stream: true\n                    });\n                    for (const line of chunk.split(\"\\n\")){\n                        const trimmed = line.trim();\n                        if (!trimmed.startsWith(\"data:\")) continue;\n                        const data = trimmed.slice(5).trim();\n                        if (!data) continue;\n                        try {\n                            opts.onEvent(JSON.parse(data));\n                        } catch  {}\n                    }\n                }\n                opts.onDone?.();\n            } finally{\n                reader.releaseLock();\n            }\n        } catch (e) {\n            if (e?.name !== \"AbortError\") opts.onError?.(e);\n        } finally{\n            setStreaming(false);\n        }\n    }, []);\n    return {\n        start,\n        stop,\n        streaming\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEI7UUFDRixFQUFFLE9BQU9pQixHQUFRO1lBQ2YsSUFBSUEsR0FBR0MsU0FBUyxjQUFjUCxLQUFLUSxPQUFPLEdBQUdGO1FBQy9DLFNBQVU7WUFDUlgsYUFBYTtRQUNmO0lBQ0YsR0FBRyxFQUFFO0lBRUwsT0FBTztRQUFFSTtRQUFPSDtRQUFNRjtJQUFVO0FBQ2xDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Ly4vc3JjL2xpYi9hcGkudHM/MmZhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHR5cGUgeyBTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuY29uc3QgQVBJX0JBU0UgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xuXG5hc3luYyBmdW5jdGlvbiBhdXRoSGVhZGVycyhzdXBhYmFzZTogU3VwYWJhc2VDbGllbnQpIHtcbiAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XG4gIGNvbnN0IHRva2VuID0gc2Vzc2lvbj8uYWNjZXNzX3Rva2VuO1xuICByZXR1cm4gdG9rZW4gPyB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gIH0gOiB7fTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gYXBpRmV0Y2g8VCA9IGFueT4oXG4gIHN1cGFiYXNlOiBTdXBhYmFzZUNsaWVudCxcbiAgaW5wdXQ6IHN0cmluZyxcbiAgaW5pdDogUmVxdWVzdEluaXQgPSB7fVxuKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IGhhc0JvZHkgPSBpbml0LmJvZHkgIT09IHVuZGVmaW5lZCAmJiBpbml0LmJvZHkgIT09IG51bGw7XG4gIGNvbnN0IGJhc2VIZWFkZXJzID0ge1xuICAgIC4uLihhd2FpdCBhdXRoSGVhZGVycyhzdXBhYmFzZSkpLFxuICAgIC4uLihpbml0LmhlYWRlcnMgfHwge30pLFxuICB9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGNvbnN0IGhlYWRlcnMgPSBoYXNCb2R5ID8geyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAuLi5iYXNlSGVhZGVycyB9IDogYmFzZUhlYWRlcnM7XG5cbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QVBJX0JBU0V9JHtpbnB1dH1gLCB7IC4uLmluaXQsIGhlYWRlcnMgfSk7XG4gIGlmICghcmVzLm9rKSB7XG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCkuY2F0Y2goKCkgPT4gJycpO1xuICAgIHRocm93IG5ldyBFcnJvcihgQVBJICR7cmVzLnN0YXR1c306ICR7dGV4dH1gKTtcbiAgfVxuICBpZiAocmVzLnN0YXR1cyA9PT0gMjA0KSByZXR1cm4gdW5kZWZpbmVkIGFzIHVua25vd24gYXMgVDtcbiAgcmV0dXJuIChhd2FpdCByZXMuanNvbigpKSBhcyBUO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQXBpKHN1cGFiYXNlOiBTdXBhYmFzZUNsaWVudCkge1xuICByZXR1cm4ge1xuICAgIC8vIFByb2plY3RzIENSVURcbiAgICBsaXN0UHJvamVjdHM6ICgpID0+XG4gICAgICBhcGlGZXRjaDxhbnlbXT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3RgKSxcbiAgICBjcmVhdGVQcm9qZWN0OiAoYm9keTogeyB0aXRsZTogc3RyaW5nOyBkZXNjcmlwdGlvbj86IHN0cmluZyB9KSA9PlxuICAgICAgYXBpRmV0Y2g8eyBpZDogc3RyaW5nIH0+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0YCwgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSkgfSksXG5cbiAgICBnZXRQcm9qZWN0OiAoaWQ6IHN0cmluZykgPT5cbiAgICAgIGFwaUZldGNoPGFueT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtpZH1gKSxcblxuICAgIHVwZGF0ZVByb2plY3Q6IChpZDogc3RyaW5nLCBib2R5OiB7IHRpdGxlPzogc3RyaW5nOyBkZXNjcmlwdGlvbj86IHN0cmluZyB9KSA9PlxuICAgICAgYXBpRmV0Y2g8YW55PihzdXBhYmFzZSwgYC9hcGkvcHJvamVjdC8ke2lkfWAsIHsgbWV0aG9kOiAnUEFUQ0gnLCBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSB9KSxcblxuICAgIGRlbGV0ZVByb2plY3Q6IChpZDogc3RyaW5nKSA9PlxuICAgICAgYXBpRmV0Y2g8dm9pZD4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtpZH1gLCB7IG1ldGhvZDogJ0RFTEVURScgfSksXG5cbiAgICAvLyBQcm9qZWN0IHNldHRpbmdzXG4gICAgdXBkYXRlUHJvamVjdFNldHRpbmdzOiAoXG4gICAgICBpZDogc3RyaW5nLFxuICAgICAgYm9keTogeyB0aXRsZT86IHN0cmluZzsgZGVzY3JpcHRpb24/OiBzdHJpbmc7IGNvdmVySW1hZ2U/OiBzdHJpbmc7IGdlbnJlPzogc3RyaW5nOyBjb3JlQ29uZmxpY3Q/OiBzdHJpbmc7IHNldHRpbmdzSnNvbj86IGFueTsgbW9kZT86ICdub3ZlbCcgfCAnbWFuaHdhJyB8ICdjb252ZXJ0JyB9XG4gICAgKSA9PiBhcGlGZXRjaDxhbnk+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7aWR9L3NldHRpbmdzYCwgeyBtZXRob2Q6ICdQQVRDSCcsIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpIH0pLFxuXG4gICAgLy8gQ2hhdFxuICAgIC8vIExlZ2FjeSAocGVyLXByb2plY3QpIC0gd2lsbCBiZSByZXBsYWNlZCBieSBjaGF0SWQtYmFzZWQgZW5kcG9pbnRzXG4gICAgZ2V0Q2hhdE1lc3NhZ2VzOiAocHJvamVjdElkOiBzdHJpbmcpID0+XG4gICAgICBhcGlGZXRjaDxhbnlbXT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXQvbWVzc2FnZXNgKSxcblxuICAgIC8vIENoYXRzIChwZXIgcHJvamVjdClcbiAgICBsaXN0Q2hhdHM6IChwcm9qZWN0SWQ6IHN0cmluZykgPT5cbiAgICAgIGFwaUZldGNoPGFueVtdPihzdXBhYmFzZSwgYC9hcGkvcHJvamVjdC8ke3Byb2plY3RJZH0vY2hhdHNgKSxcbiAgICBjcmVhdGVDaGF0OiAocHJvamVjdElkOiBzdHJpbmcsIGJvZHk6IHsgdHlwZTogJ3Bsb3QnfCdjaGFyYWN0ZXInfCd3b3JsZCc7IHRpdGxlPzogc3RyaW5nIH0pID0+XG4gICAgICBhcGlGZXRjaDxhbnk+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGF0c2AsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpIH0pLFxuICAgIHJlbmFtZUNoYXQ6IChwcm9qZWN0SWQ6IHN0cmluZywgY2hhdElkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcpID0+XG4gICAgICBhcGlGZXRjaDxhbnk+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGF0cy8ke2NoYXRJZH1gLCB7IG1ldGhvZDogJ1BBVENIJywgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0aXRsZSB9KSB9KSxcbiAgICBkZWxldGVDaGF0OiAocHJvamVjdElkOiBzdHJpbmcsIGNoYXRJZDogc3RyaW5nKSA9PlxuICAgICAgYXBpRmV0Y2g8dm9pZD4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXRzLyR7Y2hhdElkfWAsIHsgbWV0aG9kOiAnREVMRVRFJyB9KSxcblxuICAgIC8vIENoYXQgbWVzc2FnZXMgYnkgY2hhdElkXG4gICAgZ2V0Q2hhdE1lc3NhZ2VzQnlDaGF0SWQ6IChjaGF0SWQ6IHN0cmluZykgPT5cbiAgICAgIGFwaUZldGNoPGFueVtdPihzdXBhYmFzZSwgYC9hcGkvY2hhdC8ke2NoYXRJZH0vbWVzc2FnZXNgKSxcblxuICAgIC8vIENoYXB0ZXJzXG4gICAgY3JlYXRlQ2hhcHRlcjogKHByb2plY3RJZDogc3RyaW5nLCBwYXlsb2FkOiB7IHRpdGxlOiBzdHJpbmc7IGNvbnRlbnQ/OiBzdHJpbmc7IHBhbmVsX3NjcmlwdD86IGFueTsgYnJhbmNoSWQ/OiBzdHJpbmc7IGlzQ2Fub24/OiBib29sZWFuIH0pID0+XG4gICAgICBhcGlGZXRjaDx7IGlkOiBzdHJpbmc7IHRpdGxlOiBzdHJpbmcgfT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXB0ZXJgLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSB9KSxcblxuICAgIC8vIENoYXB0ZXIgcHJldmlld3NcbiAgICBnZXRDaGFwdGVyU3VtbWFyeTogKHByb2plY3RJZDogc3RyaW5nKSA9PlxuICAgICAgYXBpRmV0Y2g8eyBjb3VudDogbnVtYmVyOyBzbmlwcGV0OiBzdHJpbmcgfT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXB0ZXJzL3N1bW1hcnlgKSxcblxuICAgIC8vIFBhZ2luYXRlZCBjaGFwdGVycyBmb3IgcmVhZGVyXG4gICAgbGlzdENoYXB0ZXJzUGFnaW5hdGVkOiAocHJvamVjdElkOiBzdHJpbmcsIHBhZ2U6IG51bWJlciwgbGltaXQ6IG51bWJlcikgPT5cbiAgICAgIGFwaUZldGNoPHsgaXRlbXM6IGFueVtdOyB0b3RhbDogbnVtYmVyIH0+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGFwdGVycz9wYWdlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhZ2UpfSZsaW1pdD0ke2VuY29kZVVSSUNvbXBvbmVudChsaW1pdCl9YCksXG5cbiAgICAvLyBVcGRhdGUgY2hhcHRlclxuICAgIHVwZGF0ZUNoYXB0ZXI6IChcbiAgICAgIHByb2plY3RJZDogc3RyaW5nLFxuICAgICAgY2hhcHRlcklkOiBzdHJpbmcsXG4gICAgICBwYXlsb2FkOiB7IHRpdGxlPzogc3RyaW5nOyBjb250ZW50Pzogc3RyaW5nOyBwYW5lbF9zY3JpcHQ/OiBhbnkgfVxuICAgICkgPT4gYXBpRmV0Y2g8YW55PihzdXBhYmFzZSwgYC9hcGkvcHJvamVjdC8ke3Byb2plY3RJZH0vY2hhcHRlci8ke2NoYXB0ZXJJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICB9KSxcblxuICAgIC8vIERlbGV0ZSBjaGFwdGVyXG4gICAgZGVsZXRlQ2hhcHRlcjogKFxuICAgICAgcHJvamVjdElkOiBzdHJpbmcsXG4gICAgICBjaGFwdGVySWQ6IHN0cmluZyxcbiAgICApID0+IGFwaUZldGNoPHZvaWQ+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGFwdGVyLyR7Y2hhcHRlcklkfWAsIHsgbWV0aG9kOiAnREVMRVRFJyB9KSxcblxuICAgIC8vIENoYXJhY3RlcnNcbiAgICBsaXN0Q2hhcmFjdGVyczogKHByb2plY3RJZDogc3RyaW5nKSA9PlxuICAgICAgYXBpRmV0Y2g8YW55W10+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS9jaGFyYWN0ZXJzYCksXG4gICAgY3JlYXRlQ2hhcmFjdGVyOiAoXG4gICAgICBwcm9qZWN0SWQ6IHN0cmluZyxcbiAgICAgIGJvZHk6IHsgbmFtZTogc3RyaW5nOyByb2xlPzogc3RyaW5nOyBzdW1tYXJ5Pzogc3RyaW5nOyBpbWFnZXM/OiBzdHJpbmdbXTsgdHJhaXRzPzogYW55OyB0cmFpdHNPcHM/OiBBcnJheTx7IG9wOiAnc2V0J3wnZGVsZXRlJzsgcGF0aDogc3RyaW5nW107IHZhbHVlPzogYW55IH0+IH1cbiAgICApID0+IGFwaUZldGNoPGFueT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXJhY3RlcnNgLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSB9KSxcbiAgICB1cGRhdGVDaGFyYWN0ZXI6IChcbiAgICAgIHByb2plY3RJZDogc3RyaW5nLFxuICAgICAgY2hhcklkOiBzdHJpbmcsXG4gICAgICBib2R5OiB7IG5hbWU/OiBzdHJpbmc7IHJvbGU/OiBzdHJpbmc7IHN1bW1hcnk/OiBzdHJpbmc7IGltYWdlcz86IHN0cmluZ1tdOyB0cmFpdHM/OiBhbnk7IHRyYWl0c09wcz86IEFycmF5PHsgb3A6ICdzZXQnfCdkZWxldGUnOyBwYXRoOiBzdHJpbmdbXTsgdmFsdWU/OiBhbnkgfT4gfVxuICAgICkgPT4gYXBpRmV0Y2g8YW55PihzdXBhYmFzZSwgYC9hcGkvcHJvamVjdC8ke3Byb2plY3RJZH0vY2hhcmFjdGVycy8ke2NoYXJJZH1gLCB7IG1ldGhvZDogJ1BBVENIJywgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSkgfSksXG4gICAgZGVsZXRlQ2hhcmFjdGVyOiAoXG4gICAgICBwcm9qZWN0SWQ6IHN0cmluZyxcbiAgICAgIGNoYXJJZDogc3RyaW5nLFxuICAgICkgPT4gYXBpRmV0Y2g8dm9pZD4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L2NoYXJhY3RlcnMvJHtjaGFySWR9YCwgeyBtZXRob2Q6ICdERUxFVEUnIH0pLFxuXG4gICAgLy8gV29ybGQgU2V0dGluZ3NcbiAgICBsaXN0V29ybGRTZXR0aW5nczogKHByb2plY3RJZDogc3RyaW5nKSA9PlxuICAgICAgYXBpRmV0Y2g8YW55W10+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS93b3JsZGApLFxuICAgIGNyZWF0ZVdvcmxkU2V0dGluZzogKFxuICAgICAgcHJvamVjdElkOiBzdHJpbmcsXG4gICAgICBib2R5OiB7IG5hbWU6IHN0cmluZzsgc3VtbWFyeT86IHN0cmluZzsgdHJhaXRzPzogYW55OyB0cmFpdHNPcHM/OiBBcnJheTx7IG9wOiAnc2V0J3wnZGVsZXRlJzsgcGF0aDogc3RyaW5nW107IHZhbHVlPzogYW55IH0+IH1cbiAgICApID0+IGFwaUZldGNoPGFueT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L3dvcmxkYCwgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSkgfSksXG4gICAgdXBkYXRlV29ybGRTZXR0aW5nOiAoXG4gICAgICBwcm9qZWN0SWQ6IHN0cmluZyxcbiAgICAgIHdzSWQ6IHN0cmluZyxcbiAgICAgIGJvZHk6IHsgbmFtZT86IHN0cmluZzsgc3VtbWFyeT86IHN0cmluZzsgdHJhaXRzPzogYW55OyB0cmFpdHNPcHM/OiBBcnJheTx7IG9wOiAnc2V0J3wnZGVsZXRlJzsgcGF0aDogc3RyaW5nW107IHZhbHVlPzogYW55IH0+IH1cbiAgICApID0+IGFwaUZldGNoPGFueT4oc3VwYWJhc2UsIGAvYXBpL3Byb2plY3QvJHtwcm9qZWN0SWR9L3dvcmxkLyR7d3NJZH1gLCB7IG1ldGhvZDogJ1BBVENIJywgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSkgfSksXG4gICAgZGVsZXRlV29ybGRTZXR0aW5nOiAoXG4gICAgICBwcm9qZWN0SWQ6IHN0cmluZyxcbiAgICAgIHdzSWQ6IHN0cmluZyxcbiAgICApID0+IGFwaUZldGNoPHZvaWQ+KHN1cGFiYXNlLCBgL2FwaS9wcm9qZWN0LyR7cHJvamVjdElkfS93b3JsZC8ke3dzSWR9YCwgeyBtZXRob2Q6ICdERUxFVEUnIH0pLFxuXG4gICAgLy8gQ2hhdCAoU1NFIHNob3VsZCBiZSB1c2VkIHZpYSB1c2VTU0UgYmVsb3cpXG4gICAgLy8gU3RyZWFtaW5nIGNoYXQgYnkgY2hhdElkIChTU0UpXG4gICAgcG9zdENoYXQ6IGFzeW5jIChcbiAgICAgIGNoYXRJZDogc3RyaW5nLFxuICAgICAgYm9keTogeyBtZXNzYWdlOiBzdHJpbmc7IHJlZ2VuZXJhdGVQYW5lbElkPzogc3RyaW5nOyBjbGllbnRNb2RlPzogJ2NoYXQnfCdhY3Rpb24nOyBtZW50aW9ucz86IGFueSB9LFxuICAgICAgb25FdmVudDogKGV2dDogYW55KSA9PiB2b2lkXG4gICAgKSA9PiB7XG4gICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAuLi4oYXdhaXQgYXV0aEhlYWRlcnMoc3VwYWJhc2UpKSxcbiAgICAgIH0gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QVBJX0JBU0V9L2FwaS9jaGF0LyR7Y2hhdElkfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzLm9rIHx8ICFyZXMuYm9keSkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKS5jYXRjaCgoKSA9PiAnJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2hhdCBzdHJlYW0gZXJyb3IgJHtyZXMuc3RhdHVzfTogJHt0ZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZWFkZXIgPSByZXMuYm9keS5nZXRSZWFkZXIoKTtcbiAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICBpZiAoZG9uZSkgYnJlYWs7XG4gICAgICAgICAgY29uc3QgY2h1bmsgPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGNodW5rLnNwbGl0KCdcXG4nKSkge1xuICAgICAgICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuICAgICAgICAgICAgaWYgKCF0cmltbWVkLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRyaW1tZWQuc2xpY2UoNSkudHJpbSgpO1xuICAgICAgICAgICAgaWYgKCFkYXRhKSBjb250aW51ZTtcbiAgICAgICAgICAgIHRyeSB7IG9uRXZlbnQoSlNPTi5wYXJzZShkYXRhKSk7IH0gY2F0Y2gge31cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBUZXh0IGdlbmVyYXRpb24gKFNTRSlcbiAgICBnZW5lcmF0ZVRleHRTdHJlYW06IGFzeW5jIChcbiAgICAgIGJvZHk6IHsgcHJvbXB0OiBzdHJpbmc7IHByb2plY3RJZDogc3RyaW5nIH0sXG4gICAgICBvbkV2ZW50OiAoZXZ0OiBhbnkpID0+IHZvaWRcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIC4uLihhd2FpdCBhdXRoSGVhZGVycyhzdXBhYmFzZSkpLFxuICAgICAgfSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHtBUElfQkFTRX0vYXBpL2dlbmVyYXRlL3RleHRgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXMub2sgfHwgIXJlcy5ib2R5KSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpLmNhdGNoKCgpID0+ICcnKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUZXh0IHN0cmVhbSBlcnJvciAke3Jlcy5zdGF0dXN9OiAke3RleHR9YCk7XG4gICAgICB9XG4gICAgICBjb25zdCByZWFkZXIgPSByZXMuYm9keS5nZXRSZWFkZXIoKTtcbiAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICBpZiAoZG9uZSkgYnJlYWs7XG4gICAgICAgICAgY29uc3QgY2h1bmsgPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGNodW5rLnNwbGl0KCdcXG4nKSkge1xuICAgICAgICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuICAgICAgICAgICAgaWYgKCF0cmltbWVkLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRyaW1tZWQuc2xpY2UoNSkudHJpbSgpO1xuICAgICAgICAgICAgaWYgKCFkYXRhKSBjb250aW51ZTtcbiAgICAgICAgICAgIHRyeSB7IG9uRXZlbnQoSlNPTi5wYXJzZShkYXRhKSk7IH0gY2F0Y2gge31cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBJbWFnZSBnZW5lcmF0aW9uIChxdWV1ZWQpXG4gICAgZ2VuZXJhdGVJbWFnZTogKGJvZHk6IHsgZGVzY3JpcHRpb246IHN0cmluZzsgc3R5bGU/OiBzdHJpbmc7IHByb2plY3RJZD86IHN0cmluZyB9KSA9PlxuICAgICAgYXBpRmV0Y2g8eyBqb2JJZDogc3RyaW5nIH0+KHN1cGFiYXNlLCBgL2FwaS9nZW5lcmF0ZS9pbWFnZWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgfSksXG4gIH07XG59XG5cbmV4cG9ydCB0eXBlIFNTRVN0YXJ0T3B0aW9ucyA9IHtcbiAgdXJsOiBzdHJpbmc7XG4gIG1ldGhvZD86ICdHRVQnIHwgJ1BPU1QnIHwgJ1BVVCcgfCAnUEFUQ0gnIHwgJ0RFTEVURSc7XG4gIGhlYWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBib2R5PzogYW55O1xuICBvbkV2ZW50OiAoZXZ0OiBhbnkpID0+IHZvaWQ7XG4gIG9uRG9uZT86ICgpID0+IHZvaWQ7XG4gIG9uRXJyb3I/OiAoZXJyOiBFcnJvcikgPT4gdm9pZDtcbn07XG5cbi8vIEdlbmVyaWMgU1NFIGhvb2sgZm9yIGFueSBlbmRwb2ludCB0aGF0IHN0cmVhbXMgU2VydmVyLVNlbnQgRXZlbnRzIChkYXRhOiB7anNvbn0pXG5leHBvcnQgZnVuY3Rpb24gdXNlU1NFKCkge1xuICBjb25zdCBjb250cm9sbGVyUmVmID0gdXNlUmVmPEFib3J0Q29udHJvbGxlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc3RyZWFtaW5nLCBzZXRTdHJlYW1pbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IHN0b3AgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29udHJvbGxlclJlZi5jdXJyZW50Py5hYm9ydCgpO1xuICAgIGNvbnRyb2xsZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgc2V0U3RyZWFtaW5nKGZhbHNlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHN0YXJ0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKG9wdHM6IFNTRVN0YXJ0T3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IGN0bCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb250cm9sbGVyUmVmLmN1cnJlbnQgPSBjdGw7XG4gICAgc2V0U3RyZWFtaW5nKHRydWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKG9wdHMudXJsLCB7XG4gICAgICAgIG1ldGhvZDogb3B0cy5tZXRob2QgfHwgJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsIC4uLihvcHRzLmhlYWRlcnMgfHwge30pIH0sXG4gICAgICAgIGJvZHk6IG9wdHMuYm9keSA/IEpTT04uc3RyaW5naWZ5KG9wdHMuYm9keSkgOiB1bmRlZmluZWQsXG4gICAgICAgIHNpZ25hbDogY3RsLnNpZ25hbCxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlcy5vayB8fCAhcmVzLmJvZHkpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCkuY2F0Y2goKCkgPT4gJycpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNTRSAke3Jlcy5zdGF0dXN9OiAke3RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlYWRlciA9IHJlcy5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICAgIGlmIChkb25lKSBicmVhaztcbiAgICAgICAgICBjb25zdCBjaHVuayA9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgY2h1bmsuc3BsaXQoJ1xcbicpKSB7XG4gICAgICAgICAgICBjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XG4gICAgICAgICAgICBpZiAoIXRyaW1tZWQuc3RhcnRzV2l0aCgnZGF0YTonKSkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdHJpbW1lZC5zbGljZSg1KS50cmltKCk7XG4gICAgICAgICAgICBpZiAoIWRhdGEpIGNvbnRpbnVlO1xuICAgICAgICAgICAgdHJ5IHsgb3B0cy5vbkV2ZW50KEpTT04ucGFyc2UoZGF0YSkpOyB9IGNhdGNoIHt9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9wdHMub25Eb25lPy4oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgaWYgKGU/Lm5hbWUgIT09ICdBYm9ydEVycm9yJykgb3B0cy5vbkVycm9yPy4oZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFN0cmVhbWluZyhmYWxzZSk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHsgc3RhcnQsIHN0b3AsIHN0cmVhbWluZyB9IGFzIGNvbnN0O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUmVmIiwidXNlU3RhdGUiLCJBUElfQkFTRSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwiYXV0aEhlYWRlcnMiLCJzdXBhYmFzZSIsImRhdGEiLCJzZXNzaW9uIiwiYXV0aCIsImdldFNlc3Npb24iLCJ0b2tlbiIsImFjY2Vzc190b2tlbiIsIkF1dGhvcml6YXRpb24iLCJhcGlGZXRjaCIsImlucHV0IiwiaW5pdCIsImhhc0JvZHkiLCJib2R5IiwidW5kZWZpbmVkIiwiYmFzZUhlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwiZmV0Y2giLCJvayIsInRleHQiLCJjYXRjaCIsIkVycm9yIiwic3RhdHVzIiwianNvbiIsImNyZWF0ZUFwaSIsImxpc3RQcm9qZWN0cyIsImNyZWF0ZVByb2plY3QiLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0UHJvamVjdCIsImlkIiwidXBkYXRlUHJvamVjdCIsImRlbGV0ZVByb2plY3QiLCJ1cGRhdGVQcm9qZWN0U2V0dGluZ3MiLCJnZXRDaGF0TWVzc2FnZXMiLCJwcm9qZWN0SWQiLCJsaXN0Q2hhdHMiLCJjcmVhdGVDaGF0IiwicmVuYW1lQ2hhdCIsImNoYXRJZCIsInRpdGxlIiwiZGVsZXRlQ2hhdCIsImdldENoYXRNZXNzYWdlc0J5Q2hhdElkIiwiY3JlYXRlQ2hhcHRlciIsInBheWxvYWQiLCJnZXRDaGFwdGVyU3VtbWFyeSIsImxpc3RDaGFwdGVyc1BhZ2luYXRlZCIsInBhZ2UiLCJsaW1pdCIsImVuY29kZVVSSUNvbXBvbmVudCIsInVwZGF0ZUNoYXB0ZXIiLCJjaGFwdGVySWQiLCJkZWxldGVDaGFwdGVyIiwibGlzdENoYXJhY3RlcnMiLCJjcmVhdGVDaGFyYWN0ZXIiLCJ1cGRhdGVDaGFyYWN0ZXIiLCJjaGFySWQiLCJkZWxldGVDaGFyYWN0ZXIiLCJsaXN0V29ybGRTZXR0aW5ncyIsImNyZWF0ZVdvcmxkU2V0dGluZyIsInVwZGF0ZVdvcmxkU2V0dGluZyIsIndzSWQiLCJkZWxldGVXb3JsZFNldHRpbmciLCJwb3N0Q2hhdCIsIm9uRXZlbnQiLCJyZWFkZXIiLCJnZXRSZWFkZXIiLCJkZWNvZGVyIiwiVGV4dERlY29kZXIiLCJ2YWx1ZSIsImRvbmUiLCJyZWFkIiwiY2h1bmsiLCJkZWNvZGUiLCJzdHJlYW0iLCJsaW5lIiwic3BsaXQiLCJ0cmltbWVkIiwidHJpbSIsInN0YXJ0c1dpdGgiLCJzbGljZSIsInBhcnNlIiwicmVsZWFzZUxvY2siLCJnZW5lcmF0ZVRleHRTdHJlYW0iLCJnZW5lcmF0ZUltYWdlIiwidXNlU1NFIiwiY29udHJvbGxlclJlZiIsInN0cmVhbWluZyIsInNldFN0cmVhbWluZyIsInN0b3AiLCJjdXJyZW50IiwiYWJvcnQiLCJzdGFydCIsIm9wdHMiLCJjdGwiLCJBYm9ydENvbnRyb2xsZXIiLCJ1cmwiLCJzaWduYWwiLCJvbkRvbmUiLCJlIiwibmFtZSIsIm9uRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/api.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/globals.css":
/*!*****************************!*\
  !*** ./src/app/globals.css ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"6b092be5b728\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2dsb2JhbHMuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW5rdmVyc2UtY2xpZW50Ly4vc3JjL2FwcC9nbG9iYWxzLmNzcz9jNWYyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiNmIwOTJiZTViNzI4XCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/globals.css\n");

/***/ }),

/***/ "(rsc)/./src/app/layout.tsx":
/*!****************************!*\
  !*** ./src/app/layout.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata),\n/* harmony export */   viewport: () => (/* binding */ viewport)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./src/app/globals.css\");\n/* harmony import */ var _components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/providers/SupabaseProvider */ \"(rsc)/./src/components/providers/SupabaseProvider.tsx\");\n/* harmony import */ var _components_pwa_RegisterSW__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/pwa/RegisterSW */ \"(rsc)/./src/components/pwa/RegisterSW.tsx\");\n\n\n\n\nconst metadata = {\n    title: \"InkVerse\",\n    description: \"AI manhwa creation suite\",\n    manifest: \"/manifest.webmanifest\"\n};\nconst viewport = {\n    themeColor: \"#0f172a\"\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            className: \"min-h-screen bg-slate-950 text-slate-100\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_providers_SupabaseProvider__WEBPACK_IMPORTED_MODULE_2__.SupabaseProvider, {\n                    children: children\n                }, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/app/layout.tsx\",\n                    lineNumber: 20,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_pwa_RegisterSW__WEBPACK_IMPORTED_MODULE_3__.RegisterSW, {}, void 0, false, {\n                    fileName: \"/home/lalaina/InkVerse/client/src/app/layout.tsx\",\n                    lineNumber: 23,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/lalaina/InkVerse/client/src/app/layout.tsx\",\n            lineNumber: 19,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/app/layout.tsx\",\n        lineNumber: 18,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xheW91dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXVCO0FBRW9EO0FBQ2xCO0FBRWxELE1BQU1FLFdBQXFCO0lBQ2hDQyxPQUFPO0lBQ1BDLGFBQWE7SUFDYkMsVUFBVTtBQUNaLEVBQUU7QUFFSyxNQUFNQyxXQUFXO0lBQ3RCQyxZQUFZO0FBQ2QsRUFBRTtBQUVhLFNBQVNDLFdBQVcsRUFBRUMsUUFBUSxFQUFpQztJQUM1RSxxQkFDRSw4REFBQ0M7UUFBS0MsTUFBSztrQkFDVCw0RUFBQ0M7WUFBS0MsV0FBVTs7OEJBQ2QsOERBQUNiLG9GQUFnQkE7OEJBQ2RTOzs7Ozs7OEJBRUgsOERBQUNSLGtFQUFVQTs7Ozs7Ozs7Ozs7Ozs7OztBQUluQiIsInNvdXJjZXMiOlsid2VicGFjazovL2lua3ZlcnNlLWNsaWVudC8uL3NyYy9hcHAvbGF5b3V0LnRzeD81N2E5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi9nbG9iYWxzLmNzcyc7XG5pbXBvcnQgdHlwZSB7IE1ldGFkYXRhIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBTdXBhYmFzZVByb3ZpZGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL3Byb3ZpZGVycy9TdXBhYmFzZVByb3ZpZGVyJztcbmltcG9ydCB7IFJlZ2lzdGVyU1cgfSBmcm9tICdAL2NvbXBvbmVudHMvcHdhL1JlZ2lzdGVyU1cnO1xuXG5leHBvcnQgY29uc3QgbWV0YWRhdGE6IE1ldGFkYXRhID0ge1xuICB0aXRsZTogJ0lua1ZlcnNlJyxcbiAgZGVzY3JpcHRpb246ICdBSSBtYW5od2EgY3JlYXRpb24gc3VpdGUnLFxuICBtYW5pZmVzdDogJy9tYW5pZmVzdC53ZWJtYW5pZmVzdCcsXG59O1xuXG5leHBvcnQgY29uc3Qgdmlld3BvcnQgPSB7XG4gIHRoZW1lQ29sb3I6ICcjMGYxNzJhJyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvb3RMYXlvdXQoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuICByZXR1cm4gKFxuICAgIDxodG1sIGxhbmc9XCJlblwiPlxuICAgICAgPGJvZHkgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLXNsYXRlLTk1MCB0ZXh0LXNsYXRlLTEwMFwiPlxuICAgICAgICA8U3VwYWJhc2VQcm92aWRlcj5cbiAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDwvU3VwYWJhc2VQcm92aWRlcj5cbiAgICAgICAgPFJlZ2lzdGVyU1cgLz5cbiAgICAgIDwvYm9keT5cbiAgICA8L2h0bWw+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiU3VwYWJhc2VQcm92aWRlciIsIlJlZ2lzdGVyU1ciLCJtZXRhZGF0YSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJtYW5pZmVzdCIsInZpZXdwb3J0IiwidGhlbWVDb2xvciIsIlJvb3RMYXlvdXQiLCJjaGlsZHJlbiIsImh0bWwiLCJsYW5nIiwiYm9keSIsImNsYXNzTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./src/app/project/[id]/chat/page.tsx":
/*!********************************************!*\
  !*** ./src/app/project/[id]/chat/page.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/home/lalaina/InkVerse/client/src/app/project/[id]/chat/page.tsx#default`));


/***/ }),

/***/ "(rsc)/./src/app/project/[id]/layout.tsx":
/*!*****************************************!*\
  !*** ./src/app/project/[id]/layout.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ProjectLayout)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction ProjectLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-screen w-screen overflow-hidden\",\n        children: children\n    }, void 0, false, {\n        fileName: \"/home/lalaina/InkVerse/client/src/app/project/[id]/layout.tsx\",\n        lineNumber: 3,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL3Byb2plY3QvW2lkXS9sYXlvdXQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZSxTQUFTQSxjQUFjLEVBQUVDLFFBQVEsRUFBaUM7SUFDL0UscUJBQ0UsOERBQUNDO1FBQUlDLFdBQVU7a0JBQ1pGOzs7Ozs7QUFHUCIsInNvdXJjZXMiOlsid2VicGFjazovL2lua3ZlcnNlLWNsaWVudC8uL3NyYy9hcHAvcHJvamVjdC9baWRdL2xheW91dC50c3g/NjU4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9qZWN0TGF5b3V0KHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImgtc2NyZWVuIHctc2NyZWVuIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlByb2plY3RMYXlvdXQiLCJjaGlsZHJlbiIsImRpdiIsImNsYXNzTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/project/[id]/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./src/components/providers/SupabaseProvider.tsx":
/*!*******************************************************!*\
  !*** ./src/components/providers/SupabaseProvider.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SupabaseProvider: () => (/* binding */ e0),
/* harmony export */   useSupabase: () => (/* binding */ e1)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");


const e0 = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/home/lalaina/InkVerse/client/src/components/providers/SupabaseProvider.tsx#SupabaseProvider`);

const e1 = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/home/lalaina/InkVerse/client/src/components/providers/SupabaseProvider.tsx#useSupabase`);


/***/ }),

/***/ "(rsc)/./src/components/pwa/RegisterSW.tsx":
/*!*******************************************!*\
  !*** ./src/components/pwa/RegisterSW.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RegisterSW: () => (/* binding */ e0)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");


const e0 = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/home/lalaina/InkVerse/client/src/components/pwa/RegisterSW.tsx#RegisterSW`);


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/lucide-react","vendor-chunks/@babel","vendor-chunks/@swc","vendor-chunks/dnd-core","vendor-chunks/react-dnd","vendor-chunks/react-dnd-html5-backend","vendor-chunks/@react-dnd","vendor-chunks/redux","vendor-chunks/fast-deep-equal"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&page=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&appPaths=%2Fproject%2F%5Bid%5D%2Fchat%2Fpage&pagePath=private-next-app-dir%2Fproject%2F%5Bid%5D%2Fchat%2Fpage.tsx&appDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Flalaina%2FInkVerse%2Fclient&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();